function SF(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Gi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ut(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function G8(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var CF={exports:{}},o0={},$F={exports:{}},ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zd=Symbol.for("react.element"),H8=Symbol.for("react.portal"),K8=Symbol.for("react.fragment"),q8=Symbol.for("react.strict_mode"),X8=Symbol.for("react.profiler"),Y8=Symbol.for("react.provider"),Z8=Symbol.for("react.context"),Q8=Symbol.for("react.forward_ref"),J8=Symbol.for("react.suspense"),eK=Symbol.for("react.memo"),tK=Symbol.for("react.lazy"),vN=Symbol.iterator;function nK(t){return t===null||typeof t!="object"?null:(t=vN&&t[vN]||t["@@iterator"],typeof t=="function"?t:null)}var kF={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},IF=Object.assign,TF={};function Uc(t,e,n){this.props=t,this.context=e,this.refs=TF,this.updater=n||kF}Uc.prototype.isReactComponent={};Uc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Uc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function EF(){}EF.prototype=Uc.prototype;function q$(t,e,n){this.props=t,this.context=e,this.refs=TF,this.updater=n||kF}var X$=q$.prototype=new EF;X$.constructor=q$;IF(X$,Uc.prototype);X$.isPureReactComponent=!0;var xN=Array.isArray,NF=Object.prototype.hasOwnProperty,Y$={current:null},AF={key:!0,ref:!0,__self:!0,__source:!0};function OF(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)NF.call(e,r)&&!AF.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Zd,type:t,key:s,ref:o,props:i,_owner:Y$.current}}function rK(t,e){return{$$typeof:Zd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Z$(t){return typeof t=="object"&&t!==null&&t.$$typeof===Zd}function iK(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var bN=/\/+/g;function Xb(t,e){return typeof t=="object"&&t!==null&&t.key!=null?iK(""+t.key):e.toString(36)}function Og(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Zd:case H8:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Xb(o,0):r,xN(i)?(n="",t!=null&&(n=t.replace(bN,"$&/")+"/"),Og(i,e,n,"",function(u){return u})):i!=null&&(Z$(i)&&(i=rK(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(bN,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",xN(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Xb(s,a);o+=Og(s,e,n,l,i)}else if(l=nK(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Xb(s,a++),o+=Og(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Fm(t,e,n){if(t==null)return t;var r=[],i=0;return Og(t,r,"","",function(s){return e.call(n,s,i++)}),r}function sK(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var dr={current:null},Pg={transition:null},oK={ReactCurrentDispatcher:dr,ReactCurrentBatchConfig:Pg,ReactCurrentOwner:Y$};function PF(){throw Error("act(...) is not supported in production builds of React.")}ze.Children={map:Fm,forEach:function(t,e,n){Fm(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Fm(t,function(){e++}),e},toArray:function(t){return Fm(t,function(e){return e})||[]},only:function(t){if(!Z$(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ze.Component=Uc;ze.Fragment=K8;ze.Profiler=X8;ze.PureComponent=q$;ze.StrictMode=q8;ze.Suspense=J8;ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oK;ze.act=PF;ze.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=IF({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Y$.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)NF.call(e,l)&&!AF.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Zd,type:t.type,key:i,ref:s,props:r,_owner:o}};ze.createContext=function(t){return t={$$typeof:Z8,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Y8,_context:t},t.Consumer=t};ze.createElement=OF;ze.createFactory=function(t){var e=OF.bind(null,t);return e.type=t,e};ze.createRef=function(){return{current:null}};ze.forwardRef=function(t){return{$$typeof:Q8,render:t}};ze.isValidElement=Z$;ze.lazy=function(t){return{$$typeof:tK,_payload:{_status:-1,_result:t},_init:sK}};ze.memo=function(t,e){return{$$typeof:eK,type:t,compare:e===void 0?null:e}};ze.startTransition=function(t){var e=Pg.transition;Pg.transition={};try{t()}finally{Pg.transition=e}};ze.unstable_act=PF;ze.useCallback=function(t,e){return dr.current.useCallback(t,e)};ze.useContext=function(t){return dr.current.useContext(t)};ze.useDebugValue=function(){};ze.useDeferredValue=function(t){return dr.current.useDeferredValue(t)};ze.useEffect=function(t,e){return dr.current.useEffect(t,e)};ze.useId=function(){return dr.current.useId()};ze.useImperativeHandle=function(t,e,n){return dr.current.useImperativeHandle(t,e,n)};ze.useInsertionEffect=function(t,e){return dr.current.useInsertionEffect(t,e)};ze.useLayoutEffect=function(t,e){return dr.current.useLayoutEffect(t,e)};ze.useMemo=function(t,e){return dr.current.useMemo(t,e)};ze.useReducer=function(t,e,n){return dr.current.useReducer(t,e,n)};ze.useRef=function(t){return dr.current.useRef(t)};ze.useState=function(t){return dr.current.useState(t)};ze.useSyncExternalStore=function(t,e,n){return dr.current.useSyncExternalStore(t,e,n)};ze.useTransition=function(){return dr.current.useTransition()};ze.version="18.3.1";$F.exports=ze;var j=$F.exports;const U=ut(j),aK=SF({__proto__:null,default:U},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lK=j,uK=Symbol.for("react.element"),cK=Symbol.for("react.fragment"),fK=Object.prototype.hasOwnProperty,hK=lK.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dK={key:!0,ref:!0,__self:!0,__source:!0};function _F(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)fK.call(e,r)&&!dK.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:uK,type:t,key:s,ref:o,props:i,_owner:hK.current}}o0.Fragment=cK;o0.jsx=_F;o0.jsxs=_F;CF.exports=o0;var N=CF.exports,DF={exports:{}},Kr={},RF={exports:{}},MF={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,M){var V=O.length;O.push(M);e:for(;0<V;){var q=V-1>>>1,K=O[q];if(0<i(K,M))O[q]=M,O[V]=K,V=q;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var M=O[0],V=O.pop();if(V!==M){O[0]=V;e:for(var q=0,K=O.length,Z=K>>>1;q<Z;){var re=2*(q+1)-1,ie=O[re],le=re+1,ge=O[le];if(0>i(ie,V))le<K&&0>i(ge,ie)?(O[q]=ge,O[le]=V,q=le):(O[q]=ie,O[re]=V,q=re);else if(le<K&&0>i(ge,V))O[q]=ge,O[le]=V,q=le;else break e}}return M}function i(O,M){var V=O.sortIndex-M.sortIndex;return V!==0?V:O.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,f=null,h=3,d=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(O){for(var M=n(u);M!==null;){if(M.callback===null)r(u);else if(M.startTime<=O)r(u),M.sortIndex=M.expirationTime,e(l,M);else break;M=n(u)}}function b(O){if(m=!1,x(O),!p)if(n(l)!==null)p=!0,R(w);else{var M=n(u);M!==null&&F(b,M.startTime-O)}}function w(O,M){p=!1,m&&(m=!1,y($),$=-1),d=!0;var V=h;try{for(x(M),f=n(l);f!==null&&(!(f.expirationTime>M)||O&&!T());){var q=f.callback;if(typeof q=="function"){f.callback=null,h=f.priorityLevel;var K=q(f.expirationTime<=M);M=t.unstable_now(),typeof K=="function"?f.callback=K:f===n(l)&&r(l),x(M)}else r(l);f=n(l)}if(f!==null)var Z=!0;else{var re=n(u);re!==null&&F(b,re.startTime-M),Z=!1}return Z}finally{f=null,h=V,d=!1}}var S=!1,C=null,$=-1,k=5,I=-1;function T(){return!(t.unstable_now()-I<k)}function A(){if(C!==null){var O=t.unstable_now();I=O;var M=!0;try{M=C(!0,O)}finally{M?_():(S=!1,C=null)}}else S=!1}var _;if(typeof v=="function")_=function(){v(A)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,P=D.port2;D.port1.onmessage=A,_=function(){P.postMessage(null)}}else _=function(){g(A,0)};function R(O){C=O,S||(S=!0,_())}function F(O,M){$=g(function(){O(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){p||d||(p=!0,R(w))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(O){switch(h){case 1:case 2:case 3:var M=3;break;default:M=h}var V=h;h=M;try{return O()}finally{h=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,M){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var V=h;h=O;try{return M()}finally{h=V}},t.unstable_scheduleCallback=function(O,M,V){var q=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?q+V:q):V=q,O){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=V+K,O={id:c++,callback:M,priorityLevel:O,startTime:V,expirationTime:K,sortIndex:-1},V>q?(O.sortIndex=V,e(u,O),n(l)===null&&O===n(u)&&(m?(y($),$=-1):m=!0,F(b,V-q))):(O.sortIndex=K,e(l,O),p||d||(p=!0,R(w))),O},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(O){var M=h;return function(){var V=h;h=M;try{return O.apply(this,arguments)}finally{h=V}}}})(MF);RF.exports=MF;var pK=RF.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mK=j,Wr=pK;function ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var FF=new Set,Dh={};function Ll(t,e){Qu(t,e),Qu(t+"Capture",e)}function Qu(t,e){for(Dh[t]=e,t=0;t<e.length;t++)FF.add(e[t])}var to=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Tw=Object.prototype.hasOwnProperty,gK=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wN={},SN={};function yK(t){return Tw.call(SN,t)?!0:Tw.call(wN,t)?!1:gK.test(t)?SN[t]=!0:(wN[t]=!0,!1)}function vK(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function xK(t,e,n,r){if(e===null||typeof e>"u"||vK(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function pr(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Pn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Pn[t]=new pr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Pn[e]=new pr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Pn[t]=new pr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Pn[t]=new pr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Pn[t]=new pr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Pn[t]=new pr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Pn[t]=new pr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Pn[t]=new pr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Pn[t]=new pr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Q$=/[\-:]([a-z])/g;function J$(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Q$,J$);Pn[e]=new pr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Q$,J$);Pn[e]=new pr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Q$,J$);Pn[e]=new pr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Pn[t]=new pr(t,1,!1,t.toLowerCase(),null,!1,!1)});Pn.xlinkHref=new pr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Pn[t]=new pr(t,1,!1,t.toLowerCase(),null,!0,!0)});function ek(t,e,n,r){var i=Pn.hasOwnProperty(e)?Pn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(xK(e,n,i,r)&&(n=null),r||i===null?yK(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var mo=mK.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Lm=Symbol.for("react.element"),gu=Symbol.for("react.portal"),yu=Symbol.for("react.fragment"),tk=Symbol.for("react.strict_mode"),Ew=Symbol.for("react.profiler"),LF=Symbol.for("react.provider"),BF=Symbol.for("react.context"),nk=Symbol.for("react.forward_ref"),Nw=Symbol.for("react.suspense"),Aw=Symbol.for("react.suspense_list"),rk=Symbol.for("react.memo"),Eo=Symbol.for("react.lazy"),jF=Symbol.for("react.offscreen"),CN=Symbol.iterator;function Nf(t){return t===null||typeof t!="object"?null:(t=CN&&t[CN]||t["@@iterator"],typeof t=="function"?t:null)}var Dt=Object.assign,Yb;function eh(t){if(Yb===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Yb=e&&e[1]||""}return`
`+Yb+t}var Zb=!1;function Qb(t,e){if(!t||Zb)return"";Zb=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Zb=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?eh(t):""}function bK(t){switch(t.tag){case 5:return eh(t.type);case 16:return eh("Lazy");case 13:return eh("Suspense");case 19:return eh("SuspenseList");case 0:case 2:case 15:return t=Qb(t.type,!1),t;case 11:return t=Qb(t.type.render,!1),t;case 1:return t=Qb(t.type,!0),t;default:return""}}function Ow(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case yu:return"Fragment";case gu:return"Portal";case Ew:return"Profiler";case tk:return"StrictMode";case Nw:return"Suspense";case Aw:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case BF:return(t.displayName||"Context")+".Consumer";case LF:return(t._context.displayName||"Context")+".Provider";case nk:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case rk:return e=t.displayName||null,e!==null?e:Ow(t.type)||"Memo";case Eo:e=t._payload,t=t._init;try{return Ow(t(e))}catch{}}return null}function wK(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ow(e);case 8:return e===tk?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ra(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function zF(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function SK(t){var e=zF(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Bm(t){t._valueTracker||(t._valueTracker=SK(t))}function VF(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=zF(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Xg(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Pw(t,e){var n=e.checked;return Dt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function $N(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ra(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function WF(t,e){e=e.checked,e!=null&&ek(t,"checked",e,!1)}function _w(t,e){WF(t,e);var n=ra(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Dw(t,e.type,n):e.hasOwnProperty("defaultValue")&&Dw(t,e.type,ra(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function kN(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Dw(t,e,n){(e!=="number"||Xg(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var th=Array.isArray;function Fu(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ra(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Rw(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ae(91));return Dt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function IN(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ae(92));if(th(n)){if(1<n.length)throw Error(ae(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ra(n)}}function UF(t,e){var n=ra(e.value),r=ra(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function TN(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function GF(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mw(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?GF(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var jm,HF=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(jm=jm||document.createElement("div"),jm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=jm.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Rh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ph={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},CK=["Webkit","ms","Moz","O"];Object.keys(ph).forEach(function(t){CK.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ph[e]=ph[t]})});function KF(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ph.hasOwnProperty(t)&&ph[t]?(""+e).trim():e+"px"}function qF(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=KF(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var $K=Dt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fw(t,e){if(e){if($K[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ae(62))}}function Lw(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bw=null;function ik(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var jw=null,Lu=null,Bu=null;function EN(t){if(t=ep(t)){if(typeof jw!="function")throw Error(ae(280));var e=t.stateNode;e&&(e=f0(e),jw(t.stateNode,t.type,e))}}function XF(t){Lu?Bu?Bu.push(t):Bu=[t]:Lu=t}function YF(){if(Lu){var t=Lu,e=Bu;if(Bu=Lu=null,EN(t),e)for(t=0;t<e.length;t++)EN(e[t])}}function ZF(t,e){return t(e)}function QF(){}var Jb=!1;function JF(t,e,n){if(Jb)return t(e,n);Jb=!0;try{return ZF(t,e,n)}finally{Jb=!1,(Lu!==null||Bu!==null)&&(QF(),YF())}}function Mh(t,e){var n=t.stateNode;if(n===null)return null;var r=f0(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ae(231,e,typeof n));return n}var zw=!1;if(to)try{var Af={};Object.defineProperty(Af,"passive",{get:function(){zw=!0}}),window.addEventListener("test",Af,Af),window.removeEventListener("test",Af,Af)}catch{zw=!1}function kK(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var mh=!1,Yg=null,Zg=!1,Vw=null,IK={onError:function(t){mh=!0,Yg=t}};function TK(t,e,n,r,i,s,o,a,l){mh=!1,Yg=null,kK.apply(IK,arguments)}function EK(t,e,n,r,i,s,o,a,l){if(TK.apply(this,arguments),mh){if(mh){var u=Yg;mh=!1,Yg=null}else throw Error(ae(198));Zg||(Zg=!0,Vw=u)}}function Bl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function eL(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function NN(t){if(Bl(t)!==t)throw Error(ae(188))}function NK(t){var e=t.alternate;if(!e){if(e=Bl(t),e===null)throw Error(ae(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return NN(i),t;if(s===r)return NN(i),e;s=s.sibling}throw Error(ae(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(ae(189))}}if(n.alternate!==r)throw Error(ae(190))}if(n.tag!==3)throw Error(ae(188));return n.stateNode.current===n?t:e}function tL(t){return t=NK(t),t!==null?nL(t):null}function nL(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=nL(t);if(e!==null)return e;t=t.sibling}return null}var rL=Wr.unstable_scheduleCallback,AN=Wr.unstable_cancelCallback,AK=Wr.unstable_shouldYield,OK=Wr.unstable_requestPaint,Kt=Wr.unstable_now,PK=Wr.unstable_getCurrentPriorityLevel,sk=Wr.unstable_ImmediatePriority,iL=Wr.unstable_UserBlockingPriority,Qg=Wr.unstable_NormalPriority,_K=Wr.unstable_LowPriority,sL=Wr.unstable_IdlePriority,a0=null,gs=null;function DK(t){if(gs&&typeof gs.onCommitFiberRoot=="function")try{gs.onCommitFiberRoot(a0,t,void 0,(t.current.flags&128)===128)}catch{}}var qi=Math.clz32?Math.clz32:FK,RK=Math.log,MK=Math.LN2;function FK(t){return t>>>=0,t===0?32:31-(RK(t)/MK|0)|0}var zm=64,Vm=4194304;function nh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Jg(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=nh(a):(s&=o,s!==0&&(r=nh(s)))}else o=n&~i,o!==0?r=nh(o):s!==0&&(r=nh(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-qi(e),i=1<<n,r|=t[n],e&=~i;return r}function LK(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function BK(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-qi(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=LK(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Ww(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function oL(){var t=zm;return zm<<=1,!(zm&4194240)&&(zm=64),t}function e1(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Qd(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-qi(e),t[e]=n}function jK(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-qi(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function ok(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-qi(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var it=0;function aL(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var lL,ak,uL,cL,fL,Uw=!1,Wm=[],Vo=null,Wo=null,Uo=null,Fh=new Map,Lh=new Map,Po=[],zK="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ON(t,e){switch(t){case"focusin":case"focusout":Vo=null;break;case"dragenter":case"dragleave":Wo=null;break;case"mouseover":case"mouseout":Uo=null;break;case"pointerover":case"pointerout":Fh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lh.delete(e.pointerId)}}function Of(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ep(e),e!==null&&ak(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function VK(t,e,n,r,i){switch(e){case"focusin":return Vo=Of(Vo,t,e,n,r,i),!0;case"dragenter":return Wo=Of(Wo,t,e,n,r,i),!0;case"mouseover":return Uo=Of(Uo,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Fh.set(s,Of(Fh.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Lh.set(s,Of(Lh.get(s)||null,t,e,n,r,i)),!0}return!1}function hL(t){var e=qa(t.target);if(e!==null){var n=Bl(e);if(n!==null){if(e=n.tag,e===13){if(e=eL(n),e!==null){t.blockedOn=e,fL(t.priority,function(){uL(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function _g(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Gw(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Bw=r,n.target.dispatchEvent(r),Bw=null}else return e=ep(n),e!==null&&ak(e),t.blockedOn=n,!1;e.shift()}return!0}function PN(t,e,n){_g(t)&&n.delete(e)}function WK(){Uw=!1,Vo!==null&&_g(Vo)&&(Vo=null),Wo!==null&&_g(Wo)&&(Wo=null),Uo!==null&&_g(Uo)&&(Uo=null),Fh.forEach(PN),Lh.forEach(PN)}function Pf(t,e){t.blockedOn===e&&(t.blockedOn=null,Uw||(Uw=!0,Wr.unstable_scheduleCallback(Wr.unstable_NormalPriority,WK)))}function Bh(t){function e(i){return Pf(i,t)}if(0<Wm.length){Pf(Wm[0],t);for(var n=1;n<Wm.length;n++){var r=Wm[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Vo!==null&&Pf(Vo,t),Wo!==null&&Pf(Wo,t),Uo!==null&&Pf(Uo,t),Fh.forEach(e),Lh.forEach(e),n=0;n<Po.length;n++)r=Po[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Po.length&&(n=Po[0],n.blockedOn===null);)hL(n),n.blockedOn===null&&Po.shift()}var ju=mo.ReactCurrentBatchConfig,ey=!0;function UK(t,e,n,r){var i=it,s=ju.transition;ju.transition=null;try{it=1,lk(t,e,n,r)}finally{it=i,ju.transition=s}}function GK(t,e,n,r){var i=it,s=ju.transition;ju.transition=null;try{it=4,lk(t,e,n,r)}finally{it=i,ju.transition=s}}function lk(t,e,n,r){if(ey){var i=Gw(t,e,n,r);if(i===null)c1(t,e,r,ty,n),ON(t,r);else if(VK(i,t,e,n,r))r.stopPropagation();else if(ON(t,r),e&4&&-1<zK.indexOf(t)){for(;i!==null;){var s=ep(i);if(s!==null&&lL(s),s=Gw(t,e,n,r),s===null&&c1(t,e,r,ty,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else c1(t,e,r,null,n)}}var ty=null;function Gw(t,e,n,r){if(ty=null,t=ik(r),t=qa(t),t!==null)if(e=Bl(t),e===null)t=null;else if(n=e.tag,n===13){if(t=eL(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ty=t,null}function dL(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(PK()){case sk:return 1;case iL:return 4;case Qg:case _K:return 16;case sL:return 536870912;default:return 16}default:return 16}}var Ro=null,uk=null,Dg=null;function pL(){if(Dg)return Dg;var t,e=uk,n=e.length,r,i="value"in Ro?Ro.value:Ro.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Dg=i.slice(t,1<r?1-r:void 0)}function Rg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Um(){return!0}function _N(){return!1}function qr(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Um:_N,this.isPropagationStopped=_N,this}return Dt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Um)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Um)},persist:function(){},isPersistent:Um}),e}var Gc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ck=qr(Gc),Jd=Dt({},Gc,{view:0,detail:0}),HK=qr(Jd),t1,n1,_f,l0=Dt({},Jd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fk,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==_f&&(_f&&t.type==="mousemove"?(t1=t.screenX-_f.screenX,n1=t.screenY-_f.screenY):n1=t1=0,_f=t),t1)},movementY:function(t){return"movementY"in t?t.movementY:n1}}),DN=qr(l0),KK=Dt({},l0,{dataTransfer:0}),qK=qr(KK),XK=Dt({},Jd,{relatedTarget:0}),r1=qr(XK),YK=Dt({},Gc,{animationName:0,elapsedTime:0,pseudoElement:0}),ZK=qr(YK),QK=Dt({},Gc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),JK=qr(QK),eq=Dt({},Gc,{data:0}),RN=qr(eq),tq={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nq={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rq={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iq(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=rq[t])?!!e[t]:!1}function fk(){return iq}var sq=Dt({},Jd,{key:function(t){if(t.key){var e=tq[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Rg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?nq[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fk,charCode:function(t){return t.type==="keypress"?Rg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Rg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),oq=qr(sq),aq=Dt({},l0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),MN=qr(aq),lq=Dt({},Jd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fk}),uq=qr(lq),cq=Dt({},Gc,{propertyName:0,elapsedTime:0,pseudoElement:0}),fq=qr(cq),hq=Dt({},l0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),dq=qr(hq),pq=[9,13,27,32],hk=to&&"CompositionEvent"in window,gh=null;to&&"documentMode"in document&&(gh=document.documentMode);var mq=to&&"TextEvent"in window&&!gh,mL=to&&(!hk||gh&&8<gh&&11>=gh),FN=" ",LN=!1;function gL(t,e){switch(t){case"keyup":return pq.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yL(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var vu=!1;function gq(t,e){switch(t){case"compositionend":return yL(e);case"keypress":return e.which!==32?null:(LN=!0,FN);case"textInput":return t=e.data,t===FN&&LN?null:t;default:return null}}function yq(t,e){if(vu)return t==="compositionend"||!hk&&gL(t,e)?(t=pL(),Dg=uk=Ro=null,vu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return mL&&e.locale!=="ko"?null:e.data;default:return null}}var vq={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function BN(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!vq[t.type]:e==="textarea"}function vL(t,e,n,r){XF(r),e=ny(e,"onChange"),0<e.length&&(n=new ck("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var yh=null,jh=null;function xq(t){NL(t,0)}function u0(t){var e=wu(t);if(VF(e))return t}function bq(t,e){if(t==="change")return e}var xL=!1;if(to){var i1;if(to){var s1="oninput"in document;if(!s1){var jN=document.createElement("div");jN.setAttribute("oninput","return;"),s1=typeof jN.oninput=="function"}i1=s1}else i1=!1;xL=i1&&(!document.documentMode||9<document.documentMode)}function zN(){yh&&(yh.detachEvent("onpropertychange",bL),jh=yh=null)}function bL(t){if(t.propertyName==="value"&&u0(jh)){var e=[];vL(e,jh,t,ik(t)),JF(xq,e)}}function wq(t,e,n){t==="focusin"?(zN(),yh=e,jh=n,yh.attachEvent("onpropertychange",bL)):t==="focusout"&&zN()}function Sq(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return u0(jh)}function Cq(t,e){if(t==="click")return u0(e)}function $q(t,e){if(t==="input"||t==="change")return u0(e)}function kq(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ji=typeof Object.is=="function"?Object.is:kq;function zh(t,e){if(Ji(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Tw.call(e,i)||!Ji(t[i],e[i]))return!1}return!0}function VN(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function WN(t,e){var n=VN(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=VN(n)}}function wL(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?wL(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function SL(){for(var t=window,e=Xg();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Xg(t.document)}return e}function dk(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Iq(t){var e=SL(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&wL(n.ownerDocument.documentElement,n)){if(r!==null&&dk(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=WN(n,s);var o=WN(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Tq=to&&"documentMode"in document&&11>=document.documentMode,xu=null,Hw=null,vh=null,Kw=!1;function UN(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Kw||xu==null||xu!==Xg(r)||(r=xu,"selectionStart"in r&&dk(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),vh&&zh(vh,r)||(vh=r,r=ny(Hw,"onSelect"),0<r.length&&(e=new ck("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=xu)))}function Gm(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var bu={animationend:Gm("Animation","AnimationEnd"),animationiteration:Gm("Animation","AnimationIteration"),animationstart:Gm("Animation","AnimationStart"),transitionend:Gm("Transition","TransitionEnd")},o1={},CL={};to&&(CL=document.createElement("div").style,"AnimationEvent"in window||(delete bu.animationend.animation,delete bu.animationiteration.animation,delete bu.animationstart.animation),"TransitionEvent"in window||delete bu.transitionend.transition);function c0(t){if(o1[t])return o1[t];if(!bu[t])return t;var e=bu[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in CL)return o1[t]=e[n];return t}var $L=c0("animationend"),kL=c0("animationiteration"),IL=c0("animationstart"),TL=c0("transitionend"),EL=new Map,GN="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function da(t,e){EL.set(t,e),Ll(e,[t])}for(var a1=0;a1<GN.length;a1++){var l1=GN[a1],Eq=l1.toLowerCase(),Nq=l1[0].toUpperCase()+l1.slice(1);da(Eq,"on"+Nq)}da($L,"onAnimationEnd");da(kL,"onAnimationIteration");da(IL,"onAnimationStart");da("dblclick","onDoubleClick");da("focusin","onFocus");da("focusout","onBlur");da(TL,"onTransitionEnd");Qu("onMouseEnter",["mouseout","mouseover"]);Qu("onMouseLeave",["mouseout","mouseover"]);Qu("onPointerEnter",["pointerout","pointerover"]);Qu("onPointerLeave",["pointerout","pointerover"]);Ll("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ll("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ll("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ll("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ll("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ll("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Aq=new Set("cancel close invalid load scroll toggle".split(" ").concat(rh));function HN(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,EK(r,e,void 0,t),t.currentTarget=null}function NL(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;HN(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;HN(i,a,u),s=l}}}if(Zg)throw t=Vw,Zg=!1,Vw=null,t}function xt(t,e){var n=e[Qw];n===void 0&&(n=e[Qw]=new Set);var r=t+"__bubble";n.has(r)||(AL(e,t,2,!1),n.add(r))}function u1(t,e,n){var r=0;e&&(r|=4),AL(n,t,r,e)}var Hm="_reactListening"+Math.random().toString(36).slice(2);function Vh(t){if(!t[Hm]){t[Hm]=!0,FF.forEach(function(n){n!=="selectionchange"&&(Aq.has(n)||u1(n,!1,t),u1(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Hm]||(e[Hm]=!0,u1("selectionchange",!1,e))}}function AL(t,e,n,r){switch(dL(e)){case 1:var i=UK;break;case 4:i=GK;break;default:i=lk}n=i.bind(null,e,n,t),i=void 0,!zw||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function c1(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=qa(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}JF(function(){var u=s,c=ik(n),f=[];e:{var h=EL.get(t);if(h!==void 0){var d=ck,p=t;switch(t){case"keypress":if(Rg(n)===0)break e;case"keydown":case"keyup":d=oq;break;case"focusin":p="focus",d=r1;break;case"focusout":p="blur",d=r1;break;case"beforeblur":case"afterblur":d=r1;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=DN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=qK;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=uq;break;case $L:case kL:case IL:d=ZK;break;case TL:d=fq;break;case"scroll":d=HK;break;case"wheel":d=dq;break;case"copy":case"cut":case"paste":d=JK;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=MN}var m=(e&4)!==0,g=!m&&t==="scroll",y=m?h!==null?h+"Capture":null:h;m=[];for(var v=u,x;v!==null;){x=v;var b=x.stateNode;if(x.tag===5&&b!==null&&(x=b,y!==null&&(b=Mh(v,y),b!=null&&m.push(Wh(v,b,x)))),g)break;v=v.return}0<m.length&&(h=new d(h,p,null,n,c),f.push({event:h,listeners:m}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",h&&n!==Bw&&(p=n.relatedTarget||n.fromElement)&&(qa(p)||p[no]))break e;if((d||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,d?(p=n.relatedTarget||n.toElement,d=u,p=p?qa(p):null,p!==null&&(g=Bl(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(d=null,p=u),d!==p)){if(m=DN,b="onMouseLeave",y="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(m=MN,b="onPointerLeave",y="onPointerEnter",v="pointer"),g=d==null?h:wu(d),x=p==null?h:wu(p),h=new m(b,v+"leave",d,n,c),h.target=g,h.relatedTarget=x,b=null,qa(c)===u&&(m=new m(y,v+"enter",p,n,c),m.target=x,m.relatedTarget=g,b=m),g=b,d&&p)t:{for(m=d,y=p,v=0,x=m;x;x=iu(x))v++;for(x=0,b=y;b;b=iu(b))x++;for(;0<v-x;)m=iu(m),v--;for(;0<x-v;)y=iu(y),x--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=iu(m),y=iu(y)}m=null}else m=null;d!==null&&KN(f,h,d,m,!1),p!==null&&g!==null&&KN(f,g,p,m,!0)}}e:{if(h=u?wu(u):window,d=h.nodeName&&h.nodeName.toLowerCase(),d==="select"||d==="input"&&h.type==="file")var w=bq;else if(BN(h))if(xL)w=$q;else{w=Sq;var S=wq}else(d=h.nodeName)&&d.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(w=Cq);if(w&&(w=w(t,u))){vL(f,w,n,c);break e}S&&S(t,h,u),t==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&Dw(h,"number",h.value)}switch(S=u?wu(u):window,t){case"focusin":(BN(S)||S.contentEditable==="true")&&(xu=S,Hw=u,vh=null);break;case"focusout":vh=Hw=xu=null;break;case"mousedown":Kw=!0;break;case"contextmenu":case"mouseup":case"dragend":Kw=!1,UN(f,n,c);break;case"selectionchange":if(Tq)break;case"keydown":case"keyup":UN(f,n,c)}var C;if(hk)e:{switch(t){case"compositionstart":var $="onCompositionStart";break e;case"compositionend":$="onCompositionEnd";break e;case"compositionupdate":$="onCompositionUpdate";break e}$=void 0}else vu?gL(t,n)&&($="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&($="onCompositionStart");$&&(mL&&n.locale!=="ko"&&(vu||$!=="onCompositionStart"?$==="onCompositionEnd"&&vu&&(C=pL()):(Ro=c,uk="value"in Ro?Ro.value:Ro.textContent,vu=!0)),S=ny(u,$),0<S.length&&($=new RN($,t,null,n,c),f.push({event:$,listeners:S}),C?$.data=C:(C=yL(n),C!==null&&($.data=C)))),(C=mq?gq(t,n):yq(t,n))&&(u=ny(u,"onBeforeInput"),0<u.length&&(c=new RN("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:u}),c.data=C))}NL(f,e)})}function Wh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ny(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Mh(t,n),s!=null&&r.unshift(Wh(t,s,i)),s=Mh(t,e),s!=null&&r.push(Wh(t,s,i))),t=t.return}return r}function iu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function KN(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Mh(n,s),l!=null&&o.unshift(Wh(n,l,a))):i||(l=Mh(n,s),l!=null&&o.push(Wh(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Oq=/\r\n?/g,Pq=/\u0000|\uFFFD/g;function qN(t){return(typeof t=="string"?t:""+t).replace(Oq,`
`).replace(Pq,"")}function Km(t,e,n){if(e=qN(e),qN(t)!==e&&n)throw Error(ae(425))}function ry(){}var qw=null,Xw=null;function Yw(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Zw=typeof setTimeout=="function"?setTimeout:void 0,_q=typeof clearTimeout=="function"?clearTimeout:void 0,XN=typeof Promise=="function"?Promise:void 0,Dq=typeof queueMicrotask=="function"?queueMicrotask:typeof XN<"u"?function(t){return XN.resolve(null).then(t).catch(Rq)}:Zw;function Rq(t){setTimeout(function(){throw t})}function f1(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Bh(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Bh(e)}function Go(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function YN(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Hc=Math.random().toString(36).slice(2),ds="__reactFiber$"+Hc,Uh="__reactProps$"+Hc,no="__reactContainer$"+Hc,Qw="__reactEvents$"+Hc,Mq="__reactListeners$"+Hc,Fq="__reactHandles$"+Hc;function qa(t){var e=t[ds];if(e)return e;for(var n=t.parentNode;n;){if(e=n[no]||n[ds]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=YN(t);t!==null;){if(n=t[ds])return n;t=YN(t)}return e}t=n,n=t.parentNode}return null}function ep(t){return t=t[ds]||t[no],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function wu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ae(33))}function f0(t){return t[Uh]||null}var Jw=[],Su=-1;function pa(t){return{current:t}}function St(t){0>Su||(t.current=Jw[Su],Jw[Su]=null,Su--)}function mt(t,e){Su++,Jw[Su]=t.current,t.current=e}var ia={},er=pa(ia),$r=pa(!1),pl=ia;function Ju(t,e){var n=t.type.contextTypes;if(!n)return ia;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function kr(t){return t=t.childContextTypes,t!=null}function iy(){St($r),St(er)}function ZN(t,e,n){if(er.current!==ia)throw Error(ae(168));mt(er,e),mt($r,n)}function OL(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ae(108,wK(t)||"Unknown",i));return Dt({},n,r)}function sy(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ia,pl=er.current,mt(er,t),mt($r,$r.current),!0}function QN(t,e,n){var r=t.stateNode;if(!r)throw Error(ae(169));n?(t=OL(t,e,pl),r.__reactInternalMemoizedMergedChildContext=t,St($r),St(er),mt(er,t)):St($r),mt($r,n)}var Fs=null,h0=!1,h1=!1;function PL(t){Fs===null?Fs=[t]:Fs.push(t)}function Lq(t){h0=!0,PL(t)}function ma(){if(!h1&&Fs!==null){h1=!0;var t=0,e=it;try{var n=Fs;for(it=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Fs=null,h0=!1}catch(i){throw Fs!==null&&(Fs=Fs.slice(t+1)),rL(sk,ma),i}finally{it=e,h1=!1}}return null}var Cu=[],$u=0,oy=null,ay=0,oi=[],ai=0,ml=null,js=1,zs="";function Fa(t,e){Cu[$u++]=ay,Cu[$u++]=oy,oy=t,ay=e}function _L(t,e,n){oi[ai++]=js,oi[ai++]=zs,oi[ai++]=ml,ml=t;var r=js;t=zs;var i=32-qi(r)-1;r&=~(1<<i),n+=1;var s=32-qi(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,js=1<<32-qi(e)+i|n<<i|r,zs=s+t}else js=1<<s|n<<i|r,zs=t}function pk(t){t.return!==null&&(Fa(t,1),_L(t,1,0))}function mk(t){for(;t===oy;)oy=Cu[--$u],Cu[$u]=null,ay=Cu[--$u],Cu[$u]=null;for(;t===ml;)ml=oi[--ai],oi[ai]=null,zs=oi[--ai],oi[ai]=null,js=oi[--ai],oi[ai]=null}var jr=null,Lr=null,It=!1,ji=null;function DL(t,e){var n=ui(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function JN(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,jr=t,Lr=Go(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,jr=t,Lr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ml!==null?{id:js,overflow:zs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ui(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,jr=t,Lr=null,!0):!1;default:return!1}}function eS(t){return(t.mode&1)!==0&&(t.flags&128)===0}function tS(t){if(It){var e=Lr;if(e){var n=e;if(!JN(t,e)){if(eS(t))throw Error(ae(418));e=Go(n.nextSibling);var r=jr;e&&JN(t,e)?DL(r,n):(t.flags=t.flags&-4097|2,It=!1,jr=t)}}else{if(eS(t))throw Error(ae(418));t.flags=t.flags&-4097|2,It=!1,jr=t}}}function eA(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;jr=t}function qm(t){if(t!==jr)return!1;if(!It)return eA(t),It=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Yw(t.type,t.memoizedProps)),e&&(e=Lr)){if(eS(t))throw RL(),Error(ae(418));for(;e;)DL(t,e),e=Go(e.nextSibling)}if(eA(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Lr=Go(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Lr=null}}else Lr=jr?Go(t.stateNode.nextSibling):null;return!0}function RL(){for(var t=Lr;t;)t=Go(t.nextSibling)}function ec(){Lr=jr=null,It=!1}function gk(t){ji===null?ji=[t]:ji.push(t)}var Bq=mo.ReactCurrentBatchConfig;function Df(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ae(309));var r=n.stateNode}if(!r)throw Error(ae(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(ae(284));if(!n._owner)throw Error(ae(290,t))}return t}function Xm(t,e){throw t=Object.prototype.toString.call(e),Error(ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function tA(t){var e=t._init;return e(t._payload)}function ML(t){function e(y,v){if(t){var x=y.deletions;x===null?(y.deletions=[v],y.flags|=16):x.push(v)}}function n(y,v){if(!t)return null;for(;v!==null;)e(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=Xo(y,v),y.index=0,y.sibling=null,y}function s(y,v,x){return y.index=x,t?(x=y.alternate,x!==null?(x=x.index,x<v?(y.flags|=2,v):x):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,v,x,b){return v===null||v.tag!==6?(v=x1(x,y.mode,b),v.return=y,v):(v=i(v,x),v.return=y,v)}function l(y,v,x,b){var w=x.type;return w===yu?c(y,v,x.props.children,b,x.key):v!==null&&(v.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Eo&&tA(w)===v.type)?(b=i(v,x.props),b.ref=Df(y,v,x),b.return=y,b):(b=Vg(x.type,x.key,x.props,null,y.mode,b),b.ref=Df(y,v,x),b.return=y,b)}function u(y,v,x,b){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=b1(x,y.mode,b),v.return=y,v):(v=i(v,x.children||[]),v.return=y,v)}function c(y,v,x,b,w){return v===null||v.tag!==7?(v=ol(x,y.mode,b,w),v.return=y,v):(v=i(v,x),v.return=y,v)}function f(y,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=x1(""+v,y.mode,x),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Lm:return x=Vg(v.type,v.key,v.props,null,y.mode,x),x.ref=Df(y,null,v),x.return=y,x;case gu:return v=b1(v,y.mode,x),v.return=y,v;case Eo:var b=v._init;return f(y,b(v._payload),x)}if(th(v)||Nf(v))return v=ol(v,y.mode,x,null),v.return=y,v;Xm(y,v)}return null}function h(y,v,x,b){var w=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return w!==null?null:a(y,v,""+x,b);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Lm:return x.key===w?l(y,v,x,b):null;case gu:return x.key===w?u(y,v,x,b):null;case Eo:return w=x._init,h(y,v,w(x._payload),b)}if(th(x)||Nf(x))return w!==null?null:c(y,v,x,b,null);Xm(y,x)}return null}function d(y,v,x,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return y=y.get(x)||null,a(v,y,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Lm:return y=y.get(b.key===null?x:b.key)||null,l(v,y,b,w);case gu:return y=y.get(b.key===null?x:b.key)||null,u(v,y,b,w);case Eo:var S=b._init;return d(y,v,x,S(b._payload),w)}if(th(b)||Nf(b))return y=y.get(x)||null,c(v,y,b,w,null);Xm(v,b)}return null}function p(y,v,x,b){for(var w=null,S=null,C=v,$=v=0,k=null;C!==null&&$<x.length;$++){C.index>$?(k=C,C=null):k=C.sibling;var I=h(y,C,x[$],b);if(I===null){C===null&&(C=k);break}t&&C&&I.alternate===null&&e(y,C),v=s(I,v,$),S===null?w=I:S.sibling=I,S=I,C=k}if($===x.length)return n(y,C),It&&Fa(y,$),w;if(C===null){for(;$<x.length;$++)C=f(y,x[$],b),C!==null&&(v=s(C,v,$),S===null?w=C:S.sibling=C,S=C);return It&&Fa(y,$),w}for(C=r(y,C);$<x.length;$++)k=d(C,y,$,x[$],b),k!==null&&(t&&k.alternate!==null&&C.delete(k.key===null?$:k.key),v=s(k,v,$),S===null?w=k:S.sibling=k,S=k);return t&&C.forEach(function(T){return e(y,T)}),It&&Fa(y,$),w}function m(y,v,x,b){var w=Nf(x);if(typeof w!="function")throw Error(ae(150));if(x=w.call(x),x==null)throw Error(ae(151));for(var S=w=null,C=v,$=v=0,k=null,I=x.next();C!==null&&!I.done;$++,I=x.next()){C.index>$?(k=C,C=null):k=C.sibling;var T=h(y,C,I.value,b);if(T===null){C===null&&(C=k);break}t&&C&&T.alternate===null&&e(y,C),v=s(T,v,$),S===null?w=T:S.sibling=T,S=T,C=k}if(I.done)return n(y,C),It&&Fa(y,$),w;if(C===null){for(;!I.done;$++,I=x.next())I=f(y,I.value,b),I!==null&&(v=s(I,v,$),S===null?w=I:S.sibling=I,S=I);return It&&Fa(y,$),w}for(C=r(y,C);!I.done;$++,I=x.next())I=d(C,y,$,I.value,b),I!==null&&(t&&I.alternate!==null&&C.delete(I.key===null?$:I.key),v=s(I,v,$),S===null?w=I:S.sibling=I,S=I);return t&&C.forEach(function(A){return e(y,A)}),It&&Fa(y,$),w}function g(y,v,x,b){if(typeof x=="object"&&x!==null&&x.type===yu&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Lm:e:{for(var w=x.key,S=v;S!==null;){if(S.key===w){if(w=x.type,w===yu){if(S.tag===7){n(y,S.sibling),v=i(S,x.props.children),v.return=y,y=v;break e}}else if(S.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Eo&&tA(w)===S.type){n(y,S.sibling),v=i(S,x.props),v.ref=Df(y,S,x),v.return=y,y=v;break e}n(y,S);break}else e(y,S);S=S.sibling}x.type===yu?(v=ol(x.props.children,y.mode,b,x.key),v.return=y,y=v):(b=Vg(x.type,x.key,x.props,null,y.mode,b),b.ref=Df(y,v,x),b.return=y,y=b)}return o(y);case gu:e:{for(S=x.key;v!==null;){if(v.key===S)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){n(y,v.sibling),v=i(v,x.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else e(y,v);v=v.sibling}v=b1(x,y.mode,b),v.return=y,y=v}return o(y);case Eo:return S=x._init,g(y,v,S(x._payload),b)}if(th(x))return p(y,v,x,b);if(Nf(x))return m(y,v,x,b);Xm(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,x),v.return=y,y=v):(n(y,v),v=x1(x,y.mode,b),v.return=y,y=v),o(y)):n(y,v)}return g}var tc=ML(!0),FL=ML(!1),ly=pa(null),uy=null,ku=null,yk=null;function vk(){yk=ku=uy=null}function xk(t){var e=ly.current;St(ly),t._currentValue=e}function nS(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function zu(t,e){uy=t,yk=ku=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(br=!0),t.firstContext=null)}function xi(t){var e=t._currentValue;if(yk!==t)if(t={context:t,memoizedValue:e,next:null},ku===null){if(uy===null)throw Error(ae(308));ku=t,uy.dependencies={lanes:0,firstContext:t}}else ku=ku.next=t;return e}var Xa=null;function bk(t){Xa===null?Xa=[t]:Xa.push(t)}function LL(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,bk(e)):(n.next=i.next,i.next=n),e.interleaved=n,ro(t,r)}function ro(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var No=!1;function wk(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function BL(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Hs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ho(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Xe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ro(t,n)}return i=r.interleaved,i===null?(e.next=e,bk(r)):(e.next=i.next,i.next=e),r.interleaved=e,ro(t,n)}function Mg(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ok(t,n)}}function nA(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function cy(t,e,n,r){var i=t.updateQueue;No=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,c=u=l=null,a=s;do{var h=a.lane,d=a.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:d,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,m=a;switch(h=e,d=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,h=typeof p=="function"?p.call(d,f,h):p,h==null)break e;f=Dt({},f,h);break e;case 2:No=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else d={eventTime:d,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=d,l=f):c=c.next=d,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(c===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);yl|=o,t.lanes=o,t.memoizedState=f}}function rA(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ae(191,i));i.call(r)}}}var tp={},ys=pa(tp),Gh=pa(tp),Hh=pa(tp);function Ya(t){if(t===tp)throw Error(ae(174));return t}function Sk(t,e){switch(mt(Hh,e),mt(Gh,t),mt(ys,tp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Mw(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Mw(e,t)}St(ys),mt(ys,e)}function nc(){St(ys),St(Gh),St(Hh)}function jL(t){Ya(Hh.current);var e=Ya(ys.current),n=Mw(e,t.type);e!==n&&(mt(Gh,t),mt(ys,n))}function Ck(t){Gh.current===t&&(St(ys),St(Gh))}var Ot=pa(0);function fy(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var d1=[];function $k(){for(var t=0;t<d1.length;t++)d1[t]._workInProgressVersionPrimary=null;d1.length=0}var Fg=mo.ReactCurrentDispatcher,p1=mo.ReactCurrentBatchConfig,gl=0,_t=null,cn=null,xn=null,hy=!1,xh=!1,Kh=0,jq=0;function zn(){throw Error(ae(321))}function kk(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ji(t[n],e[n]))return!1;return!0}function Ik(t,e,n,r,i,s){if(gl=s,_t=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fg.current=t===null||t.memoizedState===null?Uq:Gq,t=n(r,i),xh){s=0;do{if(xh=!1,Kh=0,25<=s)throw Error(ae(301));s+=1,xn=cn=null,e.updateQueue=null,Fg.current=Hq,t=n(r,i)}while(xh)}if(Fg.current=dy,e=cn!==null&&cn.next!==null,gl=0,xn=cn=_t=null,hy=!1,e)throw Error(ae(300));return t}function Tk(){var t=Kh!==0;return Kh=0,t}function as(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xn===null?_t.memoizedState=xn=t:xn=xn.next=t,xn}function bi(){if(cn===null){var t=_t.alternate;t=t!==null?t.memoizedState:null}else t=cn.next;var e=xn===null?_t.memoizedState:xn.next;if(e!==null)xn=e,cn=t;else{if(t===null)throw Error(ae(310));cn=t,t={memoizedState:cn.memoizedState,baseState:cn.baseState,baseQueue:cn.baseQueue,queue:cn.queue,next:null},xn===null?_t.memoizedState=xn=t:xn=xn.next=t}return xn}function qh(t,e){return typeof e=="function"?e(t):e}function m1(t){var e=bi(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var r=cn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((gl&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,_t.lanes|=c,yl|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Ji(r,e.memoizedState)||(br=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,_t.lanes|=s,yl|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function g1(t){var e=bi(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Ji(s,e.memoizedState)||(br=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function zL(){}function VL(t,e){var n=_t,r=bi(),i=e(),s=!Ji(r.memoizedState,i);if(s&&(r.memoizedState=i,br=!0),r=r.queue,Ek(GL.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||xn!==null&&xn.memoizedState.tag&1){if(n.flags|=2048,Xh(9,UL.bind(null,n,r,i,e),void 0,null),wn===null)throw Error(ae(349));gl&30||WL(n,e,i)}return i}function WL(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=_t.updateQueue,e===null?(e={lastEffect:null,stores:null},_t.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function UL(t,e,n,r){e.value=n,e.getSnapshot=r,HL(e)&&KL(t)}function GL(t,e,n){return n(function(){HL(e)&&KL(t)})}function HL(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ji(t,n)}catch{return!0}}function KL(t){var e=ro(t,1);e!==null&&Xi(e,t,1,-1)}function iA(t){var e=as();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qh,lastRenderedState:t},e.queue=t,t=t.dispatch=Wq.bind(null,_t,t),[e.memoizedState,t]}function Xh(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=_t.updateQueue,e===null?(e={lastEffect:null,stores:null},_t.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function qL(){return bi().memoizedState}function Lg(t,e,n,r){var i=as();_t.flags|=t,i.memoizedState=Xh(1|e,n,void 0,r===void 0?null:r)}function d0(t,e,n,r){var i=bi();r=r===void 0?null:r;var s=void 0;if(cn!==null){var o=cn.memoizedState;if(s=o.destroy,r!==null&&kk(r,o.deps)){i.memoizedState=Xh(e,n,s,r);return}}_t.flags|=t,i.memoizedState=Xh(1|e,n,s,r)}function sA(t,e){return Lg(8390656,8,t,e)}function Ek(t,e){return d0(2048,8,t,e)}function XL(t,e){return d0(4,2,t,e)}function YL(t,e){return d0(4,4,t,e)}function ZL(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function QL(t,e,n){return n=n!=null?n.concat([t]):null,d0(4,4,ZL.bind(null,e,t),n)}function Nk(){}function JL(t,e){var n=bi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&kk(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function e3(t,e){var n=bi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&kk(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function t3(t,e,n){return gl&21?(Ji(n,e)||(n=oL(),_t.lanes|=n,yl|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,br=!0),t.memoizedState=n)}function zq(t,e){var n=it;it=n!==0&&4>n?n:4,t(!0);var r=p1.transition;p1.transition={};try{t(!1),e()}finally{it=n,p1.transition=r}}function n3(){return bi().memoizedState}function Vq(t,e,n){var r=qo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},r3(t))i3(e,n);else if(n=LL(t,e,n,r),n!==null){var i=ur();Xi(n,t,r,i),s3(n,e,r)}}function Wq(t,e,n){var r=qo(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(r3(t))i3(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Ji(a,o)){var l=e.interleaved;l===null?(i.next=i,bk(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=LL(t,e,i,r),n!==null&&(i=ur(),Xi(n,t,r,i),s3(n,e,r))}}function r3(t){var e=t.alternate;return t===_t||e!==null&&e===_t}function i3(t,e){xh=hy=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function s3(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ok(t,n)}}var dy={readContext:xi,useCallback:zn,useContext:zn,useEffect:zn,useImperativeHandle:zn,useInsertionEffect:zn,useLayoutEffect:zn,useMemo:zn,useReducer:zn,useRef:zn,useState:zn,useDebugValue:zn,useDeferredValue:zn,useTransition:zn,useMutableSource:zn,useSyncExternalStore:zn,useId:zn,unstable_isNewReconciler:!1},Uq={readContext:xi,useCallback:function(t,e){return as().memoizedState=[t,e===void 0?null:e],t},useContext:xi,useEffect:sA,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Lg(4194308,4,ZL.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Lg(4194308,4,t,e)},useInsertionEffect:function(t,e){return Lg(4,2,t,e)},useMemo:function(t,e){var n=as();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=as();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Vq.bind(null,_t,t),[r.memoizedState,t]},useRef:function(t){var e=as();return t={current:t},e.memoizedState=t},useState:iA,useDebugValue:Nk,useDeferredValue:function(t){return as().memoizedState=t},useTransition:function(){var t=iA(!1),e=t[0];return t=zq.bind(null,t[1]),as().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=_t,i=as();if(It){if(n===void 0)throw Error(ae(407));n=n()}else{if(n=e(),wn===null)throw Error(ae(349));gl&30||WL(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,sA(GL.bind(null,r,s,t),[t]),r.flags|=2048,Xh(9,UL.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=as(),e=wn.identifierPrefix;if(It){var n=zs,r=js;n=(r&~(1<<32-qi(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Kh++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=jq++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Gq={readContext:xi,useCallback:JL,useContext:xi,useEffect:Ek,useImperativeHandle:QL,useInsertionEffect:XL,useLayoutEffect:YL,useMemo:e3,useReducer:m1,useRef:qL,useState:function(){return m1(qh)},useDebugValue:Nk,useDeferredValue:function(t){var e=bi();return t3(e,cn.memoizedState,t)},useTransition:function(){var t=m1(qh)[0],e=bi().memoizedState;return[t,e]},useMutableSource:zL,useSyncExternalStore:VL,useId:n3,unstable_isNewReconciler:!1},Hq={readContext:xi,useCallback:JL,useContext:xi,useEffect:Ek,useImperativeHandle:QL,useInsertionEffect:XL,useLayoutEffect:YL,useMemo:e3,useReducer:g1,useRef:qL,useState:function(){return g1(qh)},useDebugValue:Nk,useDeferredValue:function(t){var e=bi();return cn===null?e.memoizedState=t:t3(e,cn.memoizedState,t)},useTransition:function(){var t=g1(qh)[0],e=bi().memoizedState;return[t,e]},useMutableSource:zL,useSyncExternalStore:VL,useId:n3,unstable_isNewReconciler:!1};function Ri(t,e){if(t&&t.defaultProps){e=Dt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function rS(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Dt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var p0={isMounted:function(t){return(t=t._reactInternals)?Bl(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ur(),i=qo(t),s=Hs(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ho(t,s,i),e!==null&&(Xi(e,t,i,r),Mg(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ur(),i=qo(t),s=Hs(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ho(t,s,i),e!==null&&(Xi(e,t,i,r),Mg(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ur(),r=qo(t),i=Hs(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ho(t,i,r),e!==null&&(Xi(e,t,r,n),Mg(e,t,r))}};function oA(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!zh(n,r)||!zh(i,s):!0}function o3(t,e,n){var r=!1,i=ia,s=e.contextType;return typeof s=="object"&&s!==null?s=xi(s):(i=kr(e)?pl:er.current,r=e.contextTypes,s=(r=r!=null)?Ju(t,i):ia),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=p0,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function aA(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&p0.enqueueReplaceState(e,e.state,null)}function iS(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},wk(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=xi(s):(s=kr(e)?pl:er.current,i.context=Ju(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(rS(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&p0.enqueueReplaceState(i,i.state,null),cy(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function rc(t,e){try{var n="",r=e;do n+=bK(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function y1(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function sS(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Kq=typeof WeakMap=="function"?WeakMap:Map;function a3(t,e,n){n=Hs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){my||(my=!0,mS=r),sS(t,e)},n}function l3(t,e,n){n=Hs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){sS(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){sS(t,e),typeof r!="function"&&(Ko===null?Ko=new Set([this]):Ko.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function lA(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Kq;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=aX.bind(null,t,e,n),e.then(t,t))}function uA(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function cA(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Hs(-1,1),e.tag=2,Ho(n,e,1))),n.lanes|=1),t)}var qq=mo.ReactCurrentOwner,br=!1;function ir(t,e,n,r){e.child=t===null?FL(e,null,n,r):tc(e,t.child,n,r)}function fA(t,e,n,r,i){n=n.render;var s=e.ref;return zu(e,i),r=Ik(t,e,n,r,s,i),n=Tk(),t!==null&&!br?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,io(t,e,i)):(It&&n&&pk(e),e.flags|=1,ir(t,e,r,i),e.child)}function hA(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Fk(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,u3(t,e,s,r,i)):(t=Vg(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:zh,n(o,r)&&t.ref===e.ref)return io(t,e,i)}return e.flags|=1,t=Xo(s,r),t.ref=e.ref,t.return=e,e.child=t}function u3(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(zh(s,r)&&t.ref===e.ref)if(br=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(br=!0);else return e.lanes=t.lanes,io(t,e,i)}return oS(t,e,n,r,i)}function c3(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},mt(Tu,Dr),Dr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,mt(Tu,Dr),Dr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,mt(Tu,Dr),Dr|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,mt(Tu,Dr),Dr|=r;return ir(t,e,i,n),e.child}function f3(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function oS(t,e,n,r,i){var s=kr(n)?pl:er.current;return s=Ju(e,s),zu(e,i),n=Ik(t,e,n,r,s,i),r=Tk(),t!==null&&!br?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,io(t,e,i)):(It&&r&&pk(e),e.flags|=1,ir(t,e,n,i),e.child)}function dA(t,e,n,r,i){if(kr(n)){var s=!0;sy(e)}else s=!1;if(zu(e,i),e.stateNode===null)Bg(t,e),o3(e,n,r),iS(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=xi(u):(u=kr(n)?pl:er.current,u=Ju(e,u));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&aA(e,o,r,u),No=!1;var h=e.memoizedState;o.state=h,cy(e,r,o,i),l=e.memoizedState,a!==r||h!==l||$r.current||No?(typeof c=="function"&&(rS(e,n,c,r),l=e.memoizedState),(a=No||oA(e,n,a,r,h,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,BL(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Ri(e.type,a),o.props=u,f=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=xi(l):(l=kr(n)?pl:er.current,l=Ju(e,l));var d=n.getDerivedStateFromProps;(c=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||h!==l)&&aA(e,o,r,l),No=!1,h=e.memoizedState,o.state=h,cy(e,r,o,i);var p=e.memoizedState;a!==f||h!==p||$r.current||No?(typeof d=="function"&&(rS(e,n,d,r),p=e.memoizedState),(u=No||oA(e,n,u,r,h,p,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return aS(t,e,n,r,s,i)}function aS(t,e,n,r,i,s){f3(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&QN(e,n,!1),io(t,e,s);r=e.stateNode,qq.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=tc(e,t.child,null,s),e.child=tc(e,null,a,s)):ir(t,e,a,s),e.memoizedState=r.state,i&&QN(e,n,!0),e.child}function h3(t){var e=t.stateNode;e.pendingContext?ZN(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ZN(t,e.context,!1),Sk(t,e.containerInfo)}function pA(t,e,n,r,i){return ec(),gk(i),e.flags|=256,ir(t,e,n,r),e.child}var lS={dehydrated:null,treeContext:null,retryLane:0};function uS(t){return{baseLanes:t,cachePool:null,transitions:null}}function d3(t,e,n){var r=e.pendingProps,i=Ot.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),mt(Ot,i&1),t===null)return tS(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=y0(o,r,0,null),t=ol(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=uS(n),e.memoizedState=lS,t):Ak(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Xq(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Xo(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Xo(a,s):(s=ol(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?uS(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=lS,r}return s=t.child,t=s.sibling,r=Xo(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ak(t,e){return e=y0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ym(t,e,n,r){return r!==null&&gk(r),tc(e,t.child,null,n),t=Ak(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Xq(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=y1(Error(ae(422))),Ym(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=y0({mode:"visible",children:r.children},i,0,null),s=ol(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&tc(e,t.child,null,o),e.child.memoizedState=uS(o),e.memoizedState=lS,s);if(!(e.mode&1))return Ym(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(ae(419)),r=y1(s,r,void 0),Ym(t,e,o,r)}if(a=(o&t.childLanes)!==0,br||a){if(r=wn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ro(t,i),Xi(r,t,i,-1))}return Mk(),r=y1(Error(ae(421))),Ym(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=lX.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Lr=Go(i.nextSibling),jr=e,It=!0,ji=null,t!==null&&(oi[ai++]=js,oi[ai++]=zs,oi[ai++]=ml,js=t.id,zs=t.overflow,ml=e),e=Ak(e,r.children),e.flags|=4096,e)}function mA(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),nS(t.return,e,n)}function v1(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function p3(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(ir(t,e,r.children,n),r=Ot.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&mA(t,n,e);else if(t.tag===19)mA(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(mt(Ot,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&fy(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),v1(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&fy(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}v1(e,!0,n,null,s);break;case"together":v1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Bg(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function io(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),yl|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ae(153));if(e.child!==null){for(t=e.child,n=Xo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Xo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Yq(t,e,n){switch(e.tag){case 3:h3(e),ec();break;case 5:jL(e);break;case 1:kr(e.type)&&sy(e);break;case 4:Sk(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;mt(ly,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(mt(Ot,Ot.current&1),e.flags|=128,null):n&e.child.childLanes?d3(t,e,n):(mt(Ot,Ot.current&1),t=io(t,e,n),t!==null?t.sibling:null);mt(Ot,Ot.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return p3(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),mt(Ot,Ot.current),r)break;return null;case 22:case 23:return e.lanes=0,c3(t,e,n)}return io(t,e,n)}var m3,cS,g3,y3;m3=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};cS=function(){};g3=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ya(ys.current);var s=null;switch(n){case"input":i=Pw(t,i),r=Pw(t,r),s=[];break;case"select":i=Dt({},i,{value:void 0}),r=Dt({},r,{value:void 0}),s=[];break;case"textarea":i=Rw(t,i),r=Rw(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ry)}Fw(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Dh.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Dh.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&xt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};y3=function(t,e,n,r){n!==r&&(e.flags|=4)};function Rf(t,e){if(!It)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Vn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Zq(t,e,n){var r=e.pendingProps;switch(mk(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vn(e),null;case 1:return kr(e.type)&&iy(),Vn(e),null;case 3:return r=e.stateNode,nc(),St($r),St(er),$k(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(qm(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ji!==null&&(vS(ji),ji=null))),cS(t,e),Vn(e),null;case 5:Ck(e);var i=Ya(Hh.current);if(n=e.type,t!==null&&e.stateNode!=null)g3(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ae(166));return Vn(e),null}if(t=Ya(ys.current),qm(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[ds]=e,r[Uh]=s,t=(e.mode&1)!==0,n){case"dialog":xt("cancel",r),xt("close",r);break;case"iframe":case"object":case"embed":xt("load",r);break;case"video":case"audio":for(i=0;i<rh.length;i++)xt(rh[i],r);break;case"source":xt("error",r);break;case"img":case"image":case"link":xt("error",r),xt("load",r);break;case"details":xt("toggle",r);break;case"input":$N(r,s),xt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},xt("invalid",r);break;case"textarea":IN(r,s),xt("invalid",r)}Fw(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Km(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Km(r.textContent,a,t),i=["children",""+a]):Dh.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&xt("scroll",r)}switch(n){case"input":Bm(r),kN(r,s,!0);break;case"textarea":Bm(r),TN(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ry)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=GF(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ds]=e,t[Uh]=r,m3(t,e,!1,!1),e.stateNode=t;e:{switch(o=Lw(n,r),n){case"dialog":xt("cancel",t),xt("close",t),i=r;break;case"iframe":case"object":case"embed":xt("load",t),i=r;break;case"video":case"audio":for(i=0;i<rh.length;i++)xt(rh[i],t);i=r;break;case"source":xt("error",t),i=r;break;case"img":case"image":case"link":xt("error",t),xt("load",t),i=r;break;case"details":xt("toggle",t),i=r;break;case"input":$N(t,r),i=Pw(t,r),xt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Dt({},r,{value:void 0}),xt("invalid",t);break;case"textarea":IN(t,r),i=Rw(t,r),xt("invalid",t);break;default:i=r}Fw(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?qF(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&HF(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Rh(t,l):typeof l=="number"&&Rh(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Dh.hasOwnProperty(s)?l!=null&&s==="onScroll"&&xt("scroll",t):l!=null&&ek(t,s,l,o))}switch(n){case"input":Bm(t),kN(t,r,!1);break;case"textarea":Bm(t),TN(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ra(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Fu(t,!!r.multiple,s,!1):r.defaultValue!=null&&Fu(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ry)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Vn(e),null;case 6:if(t&&e.stateNode!=null)y3(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ae(166));if(n=Ya(Hh.current),Ya(ys.current),qm(e)){if(r=e.stateNode,n=e.memoizedProps,r[ds]=e,(s=r.nodeValue!==n)&&(t=jr,t!==null))switch(t.tag){case 3:Km(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Km(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ds]=e,e.stateNode=r}return Vn(e),null;case 13:if(St(Ot),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(It&&Lr!==null&&e.mode&1&&!(e.flags&128))RL(),ec(),e.flags|=98560,s=!1;else if(s=qm(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(ae(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ae(317));s[ds]=e}else ec(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Vn(e),s=!1}else ji!==null&&(vS(ji),ji=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ot.current&1?dn===0&&(dn=3):Mk())),e.updateQueue!==null&&(e.flags|=4),Vn(e),null);case 4:return nc(),cS(t,e),t===null&&Vh(e.stateNode.containerInfo),Vn(e),null;case 10:return xk(e.type._context),Vn(e),null;case 17:return kr(e.type)&&iy(),Vn(e),null;case 19:if(St(Ot),s=e.memoizedState,s===null)return Vn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Rf(s,!1);else{if(dn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=fy(t),o!==null){for(e.flags|=128,Rf(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return mt(Ot,Ot.current&1|2),e.child}t=t.sibling}s.tail!==null&&Kt()>ic&&(e.flags|=128,r=!0,Rf(s,!1),e.lanes=4194304)}else{if(!r)if(t=fy(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Rf(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!It)return Vn(e),null}else 2*Kt()-s.renderingStartTime>ic&&n!==1073741824&&(e.flags|=128,r=!0,Rf(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Kt(),e.sibling=null,n=Ot.current,mt(Ot,r?n&1|2:n&1),e):(Vn(e),null);case 22:case 23:return Rk(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Dr&1073741824&&(Vn(e),e.subtreeFlags&6&&(e.flags|=8192)):Vn(e),null;case 24:return null;case 25:return null}throw Error(ae(156,e.tag))}function Qq(t,e){switch(mk(e),e.tag){case 1:return kr(e.type)&&iy(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return nc(),St($r),St(er),$k(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ck(e),null;case 13:if(St(Ot),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ae(340));ec()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return St(Ot),null;case 4:return nc(),null;case 10:return xk(e.type._context),null;case 22:case 23:return Rk(),null;case 24:return null;default:return null}}var Zm=!1,Kn=!1,Jq=typeof WeakSet=="function"?WeakSet:Set,ve=null;function Iu(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Mt(t,e,r)}else n.current=null}function fS(t,e,n){try{n()}catch(r){Mt(t,e,r)}}var gA=!1;function eX(t,e){if(qw=ey,t=SL(),dk(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,f=t,h=null;t:for(;;){for(var d;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(d=f.firstChild)!==null;)h=f,f=d;for(;;){if(f===t)break t;if(h===n&&++u===i&&(a=o),h===s&&++c===r&&(l=o),(d=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=d}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xw={focusedElem:t,selectionRange:n},ey=!1,ve=e;ve!==null;)if(e=ve,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ve=t;else for(;ve!==null;){e=ve;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=e.stateNode,v=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:Ri(e.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(b){Mt(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,ve=t;break}ve=e.return}return p=gA,gA=!1,p}function bh(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&fS(e,n,s)}i=i.next}while(i!==r)}}function m0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function hS(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function v3(t){var e=t.alternate;e!==null&&(t.alternate=null,v3(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ds],delete e[Uh],delete e[Qw],delete e[Mq],delete e[Fq])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function x3(t){return t.tag===5||t.tag===3||t.tag===4}function yA(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||x3(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function dS(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ry));else if(r!==4&&(t=t.child,t!==null))for(dS(t,e,n),t=t.sibling;t!==null;)dS(t,e,n),t=t.sibling}function pS(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(pS(t,e,n),t=t.sibling;t!==null;)pS(t,e,n),t=t.sibling}var En=null,Mi=!1;function Io(t,e,n){for(n=n.child;n!==null;)b3(t,e,n),n=n.sibling}function b3(t,e,n){if(gs&&typeof gs.onCommitFiberUnmount=="function")try{gs.onCommitFiberUnmount(a0,n)}catch{}switch(n.tag){case 5:Kn||Iu(n,e);case 6:var r=En,i=Mi;En=null,Io(t,e,n),En=r,Mi=i,En!==null&&(Mi?(t=En,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):En.removeChild(n.stateNode));break;case 18:En!==null&&(Mi?(t=En,n=n.stateNode,t.nodeType===8?f1(t.parentNode,n):t.nodeType===1&&f1(t,n),Bh(t)):f1(En,n.stateNode));break;case 4:r=En,i=Mi,En=n.stateNode.containerInfo,Mi=!0,Io(t,e,n),En=r,Mi=i;break;case 0:case 11:case 14:case 15:if(!Kn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&fS(n,e,o),i=i.next}while(i!==r)}Io(t,e,n);break;case 1:if(!Kn&&(Iu(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Mt(n,e,a)}Io(t,e,n);break;case 21:Io(t,e,n);break;case 22:n.mode&1?(Kn=(r=Kn)||n.memoizedState!==null,Io(t,e,n),Kn=r):Io(t,e,n);break;default:Io(t,e,n)}}function vA(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Jq),e.forEach(function(r){var i=uX.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ai(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:En=a.stateNode,Mi=!1;break e;case 3:En=a.stateNode.containerInfo,Mi=!0;break e;case 4:En=a.stateNode.containerInfo,Mi=!0;break e}a=a.return}if(En===null)throw Error(ae(160));b3(s,o,i),En=null,Mi=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Mt(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)w3(e,t),e=e.sibling}function w3(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ai(e,t),os(t),r&4){try{bh(3,t,t.return),m0(3,t)}catch(m){Mt(t,t.return,m)}try{bh(5,t,t.return)}catch(m){Mt(t,t.return,m)}}break;case 1:Ai(e,t),os(t),r&512&&n!==null&&Iu(n,n.return);break;case 5:if(Ai(e,t),os(t),r&512&&n!==null&&Iu(n,n.return),t.flags&32){var i=t.stateNode;try{Rh(i,"")}catch(m){Mt(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&WF(i,s),Lw(a,o);var u=Lw(a,s);for(o=0;o<l.length;o+=2){var c=l[o],f=l[o+1];c==="style"?qF(i,f):c==="dangerouslySetInnerHTML"?HF(i,f):c==="children"?Rh(i,f):ek(i,c,f,u)}switch(a){case"input":_w(i,s);break;case"textarea":UF(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var d=s.value;d!=null?Fu(i,!!s.multiple,d,!1):h!==!!s.multiple&&(s.defaultValue!=null?Fu(i,!!s.multiple,s.defaultValue,!0):Fu(i,!!s.multiple,s.multiple?[]:"",!1))}i[Uh]=s}catch(m){Mt(t,t.return,m)}}break;case 6:if(Ai(e,t),os(t),r&4){if(t.stateNode===null)throw Error(ae(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(m){Mt(t,t.return,m)}}break;case 3:if(Ai(e,t),os(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Bh(e.containerInfo)}catch(m){Mt(t,t.return,m)}break;case 4:Ai(e,t),os(t);break;case 13:Ai(e,t),os(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(_k=Kt())),r&4&&vA(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Kn=(u=Kn)||c,Ai(e,t),Kn=u):Ai(e,t),os(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(ve=t,c=t.child;c!==null;){for(f=ve=c;ve!==null;){switch(h=ve,d=h.child,h.tag){case 0:case 11:case 14:case 15:bh(4,h,h.return);break;case 1:Iu(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){Mt(r,n,m)}}break;case 5:Iu(h,h.return);break;case 22:if(h.memoizedState!==null){bA(f);continue}}d!==null?(d.return=h,ve=d):bA(f)}c=c.sibling}e:for(c=null,f=t;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=KF("display",o))}catch(m){Mt(t,t.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(m){Mt(t,t.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Ai(e,t),os(t),r&4&&vA(t);break;case 21:break;default:Ai(e,t),os(t)}}function os(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(x3(n)){var r=n;break e}n=n.return}throw Error(ae(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Rh(i,""),r.flags&=-33);var s=yA(t);pS(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=yA(t);dS(t,a,o);break;default:throw Error(ae(161))}}catch(l){Mt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function tX(t,e,n){ve=t,S3(t)}function S3(t,e,n){for(var r=(t.mode&1)!==0;ve!==null;){var i=ve,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Zm;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Kn;a=Zm;var u=Kn;if(Zm=o,(Kn=l)&&!u)for(ve=i;ve!==null;)o=ve,l=o.child,o.tag===22&&o.memoizedState!==null?wA(i):l!==null?(l.return=o,ve=l):wA(i);for(;s!==null;)ve=s,S3(s),s=s.sibling;ve=i,Zm=a,Kn=u}xA(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ve=s):xA(t)}}function xA(t){for(;ve!==null;){var e=ve;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Kn||m0(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Kn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ri(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&rA(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}rA(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&Bh(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}Kn||e.flags&512&&hS(e)}catch(h){Mt(e,e.return,h)}}if(e===t){ve=null;break}if(n=e.sibling,n!==null){n.return=e.return,ve=n;break}ve=e.return}}function bA(t){for(;ve!==null;){var e=ve;if(e===t){ve=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ve=n;break}ve=e.return}}function wA(t){for(;ve!==null;){var e=ve;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{m0(4,e)}catch(l){Mt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Mt(e,i,l)}}var s=e.return;try{hS(e)}catch(l){Mt(e,s,l)}break;case 5:var o=e.return;try{hS(e)}catch(l){Mt(e,o,l)}}}catch(l){Mt(e,e.return,l)}if(e===t){ve=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ve=a;break}ve=e.return}}var nX=Math.ceil,py=mo.ReactCurrentDispatcher,Ok=mo.ReactCurrentOwner,gi=mo.ReactCurrentBatchConfig,Xe=0,wn=null,Jt=null,On=0,Dr=0,Tu=pa(0),dn=0,Yh=null,yl=0,g0=0,Pk=0,wh=null,vr=null,_k=0,ic=1/0,Ms=null,my=!1,mS=null,Ko=null,Qm=!1,Mo=null,gy=0,Sh=0,gS=null,jg=-1,zg=0;function ur(){return Xe&6?Kt():jg!==-1?jg:jg=Kt()}function qo(t){return t.mode&1?Xe&2&&On!==0?On&-On:Bq.transition!==null?(zg===0&&(zg=oL()),zg):(t=it,t!==0||(t=window.event,t=t===void 0?16:dL(t.type)),t):1}function Xi(t,e,n,r){if(50<Sh)throw Sh=0,gS=null,Error(ae(185));Qd(t,n,r),(!(Xe&2)||t!==wn)&&(t===wn&&(!(Xe&2)&&(g0|=n),dn===4&&_o(t,On)),Ir(t,r),n===1&&Xe===0&&!(e.mode&1)&&(ic=Kt()+500,h0&&ma()))}function Ir(t,e){var n=t.callbackNode;BK(t,e);var r=Jg(t,t===wn?On:0);if(r===0)n!==null&&AN(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&AN(n),e===1)t.tag===0?Lq(SA.bind(null,t)):PL(SA.bind(null,t)),Dq(function(){!(Xe&6)&&ma()}),n=null;else{switch(aL(r)){case 1:n=sk;break;case 4:n=iL;break;case 16:n=Qg;break;case 536870912:n=sL;break;default:n=Qg}n=A3(n,C3.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function C3(t,e){if(jg=-1,zg=0,Xe&6)throw Error(ae(327));var n=t.callbackNode;if(Vu()&&t.callbackNode!==n)return null;var r=Jg(t,t===wn?On:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=yy(t,r);else{e=r;var i=Xe;Xe|=2;var s=k3();(wn!==t||On!==e)&&(Ms=null,ic=Kt()+500,sl(t,e));do try{sX();break}catch(a){$3(t,a)}while(!0);vk(),py.current=s,Xe=i,Jt!==null?e=0:(wn=null,On=0,e=dn)}if(e!==0){if(e===2&&(i=Ww(t),i!==0&&(r=i,e=yS(t,i))),e===1)throw n=Yh,sl(t,0),_o(t,r),Ir(t,Kt()),n;if(e===6)_o(t,r);else{if(i=t.current.alternate,!(r&30)&&!rX(i)&&(e=yy(t,r),e===2&&(s=Ww(t),s!==0&&(r=s,e=yS(t,s))),e===1))throw n=Yh,sl(t,0),_o(t,r),Ir(t,Kt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ae(345));case 2:La(t,vr,Ms);break;case 3:if(_o(t,r),(r&130023424)===r&&(e=_k+500-Kt(),10<e)){if(Jg(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){ur(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Zw(La.bind(null,t,vr,Ms),e);break}La(t,vr,Ms);break;case 4:if(_o(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-qi(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Kt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*nX(r/1960))-r,10<r){t.timeoutHandle=Zw(La.bind(null,t,vr,Ms),r);break}La(t,vr,Ms);break;case 5:La(t,vr,Ms);break;default:throw Error(ae(329))}}}return Ir(t,Kt()),t.callbackNode===n?C3.bind(null,t):null}function yS(t,e){var n=wh;return t.current.memoizedState.isDehydrated&&(sl(t,e).flags|=256),t=yy(t,e),t!==2&&(e=vr,vr=n,e!==null&&vS(e)),t}function vS(t){vr===null?vr=t:vr.push.apply(vr,t)}function rX(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Ji(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function _o(t,e){for(e&=~Pk,e&=~g0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-qi(e),r=1<<n;t[n]=-1,e&=~r}}function SA(t){if(Xe&6)throw Error(ae(327));Vu();var e=Jg(t,0);if(!(e&1))return Ir(t,Kt()),null;var n=yy(t,e);if(t.tag!==0&&n===2){var r=Ww(t);r!==0&&(e=r,n=yS(t,r))}if(n===1)throw n=Yh,sl(t,0),_o(t,e),Ir(t,Kt()),n;if(n===6)throw Error(ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,La(t,vr,Ms),Ir(t,Kt()),null}function Dk(t,e){var n=Xe;Xe|=1;try{return t(e)}finally{Xe=n,Xe===0&&(ic=Kt()+500,h0&&ma())}}function vl(t){Mo!==null&&Mo.tag===0&&!(Xe&6)&&Vu();var e=Xe;Xe|=1;var n=gi.transition,r=it;try{if(gi.transition=null,it=1,t)return t()}finally{it=r,gi.transition=n,Xe=e,!(Xe&6)&&ma()}}function Rk(){Dr=Tu.current,St(Tu)}function sl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,_q(n)),Jt!==null)for(n=Jt.return;n!==null;){var r=n;switch(mk(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&iy();break;case 3:nc(),St($r),St(er),$k();break;case 5:Ck(r);break;case 4:nc();break;case 13:St(Ot);break;case 19:St(Ot);break;case 10:xk(r.type._context);break;case 22:case 23:Rk()}n=n.return}if(wn=t,Jt=t=Xo(t.current,null),On=Dr=e,dn=0,Yh=null,Pk=g0=yl=0,vr=wh=null,Xa!==null){for(e=0;e<Xa.length;e++)if(n=Xa[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Xa=null}return t}function $3(t,e){do{var n=Jt;try{if(vk(),Fg.current=dy,hy){for(var r=_t.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}hy=!1}if(gl=0,xn=cn=_t=null,xh=!1,Kh=0,Ok.current=null,n===null||n.return===null){dn=1,Yh=e,Jt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=On,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var d=uA(o);if(d!==null){d.flags&=-257,cA(d,o,a,s,e),d.mode&1&&lA(s,u,e),e=d,l=u;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if(!(e&1)){lA(s,u,e),Mk();break e}l=Error(ae(426))}}else if(It&&a.mode&1){var g=uA(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),cA(g,o,a,s,e),gk(rc(l,a));break e}}s=l=rc(l,a),dn!==4&&(dn=2),wh===null?wh=[s]:wh.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=a3(s,l,e);nA(s,y);break e;case 1:a=l;var v=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Ko===null||!Ko.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=l3(s,a,e);nA(s,b);break e}}s=s.return}while(s!==null)}T3(n)}catch(w){e=w,Jt===n&&n!==null&&(Jt=n=n.return);continue}break}while(!0)}function k3(){var t=py.current;return py.current=dy,t===null?dy:t}function Mk(){(dn===0||dn===3||dn===2)&&(dn=4),wn===null||!(yl&268435455)&&!(g0&268435455)||_o(wn,On)}function yy(t,e){var n=Xe;Xe|=2;var r=k3();(wn!==t||On!==e)&&(Ms=null,sl(t,e));do try{iX();break}catch(i){$3(t,i)}while(!0);if(vk(),Xe=n,py.current=r,Jt!==null)throw Error(ae(261));return wn=null,On=0,dn}function iX(){for(;Jt!==null;)I3(Jt)}function sX(){for(;Jt!==null&&!AK();)I3(Jt)}function I3(t){var e=N3(t.alternate,t,Dr);t.memoizedProps=t.pendingProps,e===null?T3(t):Jt=e,Ok.current=null}function T3(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Qq(n,e),n!==null){n.flags&=32767,Jt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{dn=6,Jt=null;return}}else if(n=Zq(n,e,Dr),n!==null){Jt=n;return}if(e=e.sibling,e!==null){Jt=e;return}Jt=e=t}while(e!==null);dn===0&&(dn=5)}function La(t,e,n){var r=it,i=gi.transition;try{gi.transition=null,it=1,oX(t,e,n,r)}finally{gi.transition=i,it=r}return null}function oX(t,e,n,r){do Vu();while(Mo!==null);if(Xe&6)throw Error(ae(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ae(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(jK(t,s),t===wn&&(Jt=wn=null,On=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Qm||(Qm=!0,A3(Qg,function(){return Vu(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=gi.transition,gi.transition=null;var o=it;it=1;var a=Xe;Xe|=4,Ok.current=null,eX(t,n),w3(n,t),Iq(Xw),ey=!!qw,Xw=qw=null,t.current=n,tX(n),OK(),Xe=a,it=o,gi.transition=s}else t.current=n;if(Qm&&(Qm=!1,Mo=t,gy=i),s=t.pendingLanes,s===0&&(Ko=null),DK(n.stateNode),Ir(t,Kt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(my)throw my=!1,t=mS,mS=null,t;return gy&1&&t.tag!==0&&Vu(),s=t.pendingLanes,s&1?t===gS?Sh++:(Sh=0,gS=t):Sh=0,ma(),null}function Vu(){if(Mo!==null){var t=aL(gy),e=gi.transition,n=it;try{if(gi.transition=null,it=16>t?16:t,Mo===null)var r=!1;else{if(t=Mo,Mo=null,gy=0,Xe&6)throw Error(ae(331));var i=Xe;for(Xe|=4,ve=t.current;ve!==null;){var s=ve,o=s.child;if(ve.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(ve=u;ve!==null;){var c=ve;switch(c.tag){case 0:case 11:case 15:bh(8,c,s)}var f=c.child;if(f!==null)f.return=c,ve=f;else for(;ve!==null;){c=ve;var h=c.sibling,d=c.return;if(v3(c),c===u){ve=null;break}if(h!==null){h.return=d,ve=h;break}ve=d}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}ve=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ve=o;else e:for(;ve!==null;){if(s=ve,s.flags&2048)switch(s.tag){case 0:case 11:case 15:bh(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,ve=y;break e}ve=s.return}}var v=t.current;for(ve=v;ve!==null;){o=ve;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,ve=x;else e:for(o=v;ve!==null;){if(a=ve,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:m0(9,a)}}catch(w){Mt(a,a.return,w)}if(a===o){ve=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,ve=b;break e}ve=a.return}}if(Xe=i,ma(),gs&&typeof gs.onPostCommitFiberRoot=="function")try{gs.onPostCommitFiberRoot(a0,t)}catch{}r=!0}return r}finally{it=n,gi.transition=e}}return!1}function CA(t,e,n){e=rc(n,e),e=a3(t,e,1),t=Ho(t,e,1),e=ur(),t!==null&&(Qd(t,1,e),Ir(t,e))}function Mt(t,e,n){if(t.tag===3)CA(t,t,n);else for(;e!==null;){if(e.tag===3){CA(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ko===null||!Ko.has(r))){t=rc(n,t),t=l3(e,t,1),e=Ho(e,t,1),t=ur(),e!==null&&(Qd(e,1,t),Ir(e,t));break}}e=e.return}}function aX(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ur(),t.pingedLanes|=t.suspendedLanes&n,wn===t&&(On&n)===n&&(dn===4||dn===3&&(On&130023424)===On&&500>Kt()-_k?sl(t,0):Pk|=n),Ir(t,e)}function E3(t,e){e===0&&(t.mode&1?(e=Vm,Vm<<=1,!(Vm&130023424)&&(Vm=4194304)):e=1);var n=ur();t=ro(t,e),t!==null&&(Qd(t,e,n),Ir(t,n))}function lX(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),E3(t,n)}function uX(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ae(314))}r!==null&&r.delete(e),E3(t,n)}var N3;N3=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||$r.current)br=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return br=!1,Yq(t,e,n);br=!!(t.flags&131072)}else br=!1,It&&e.flags&1048576&&_L(e,ay,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Bg(t,e),t=e.pendingProps;var i=Ju(e,er.current);zu(e,n),i=Ik(null,e,r,t,i,n);var s=Tk();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,kr(r)?(s=!0,sy(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,wk(e),i.updater=p0,e.stateNode=i,i._reactInternals=e,iS(e,r,t,n),e=aS(null,e,r,!0,s,n)):(e.tag=0,It&&s&&pk(e),ir(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Bg(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=fX(r),t=Ri(r,t),i){case 0:e=oS(null,e,r,t,n);break e;case 1:e=dA(null,e,r,t,n);break e;case 11:e=fA(null,e,r,t,n);break e;case 14:e=hA(null,e,r,Ri(r.type,t),n);break e}throw Error(ae(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ri(r,i),oS(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ri(r,i),dA(t,e,r,i,n);case 3:e:{if(h3(e),t===null)throw Error(ae(387));r=e.pendingProps,s=e.memoizedState,i=s.element,BL(t,e),cy(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=rc(Error(ae(423)),e),e=pA(t,e,r,n,i);break e}else if(r!==i){i=rc(Error(ae(424)),e),e=pA(t,e,r,n,i);break e}else for(Lr=Go(e.stateNode.containerInfo.firstChild),jr=e,It=!0,ji=null,n=FL(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ec(),r===i){e=io(t,e,n);break e}ir(t,e,r,n)}e=e.child}return e;case 5:return jL(e),t===null&&tS(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Yw(r,i)?o=null:s!==null&&Yw(r,s)&&(e.flags|=32),f3(t,e),ir(t,e,o,n),e.child;case 6:return t===null&&tS(e),null;case 13:return d3(t,e,n);case 4:return Sk(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=tc(e,null,r,n):ir(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ri(r,i),fA(t,e,r,i,n);case 7:return ir(t,e,e.pendingProps,n),e.child;case 8:return ir(t,e,e.pendingProps.children,n),e.child;case 12:return ir(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,mt(ly,r._currentValue),r._currentValue=o,s!==null)if(Ji(s.value,o)){if(s.children===i.children&&!$r.current){e=io(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Hs(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),nS(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ae(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),nS(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ir(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,zu(e,n),i=xi(i),r=r(i),e.flags|=1,ir(t,e,r,n),e.child;case 14:return r=e.type,i=Ri(r,e.pendingProps),i=Ri(r.type,i),hA(t,e,r,i,n);case 15:return u3(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ri(r,i),Bg(t,e),e.tag=1,kr(r)?(t=!0,sy(e)):t=!1,zu(e,n),o3(e,r,i),iS(e,r,i,n),aS(null,e,r,!0,t,n);case 19:return p3(t,e,n);case 22:return c3(t,e,n)}throw Error(ae(156,e.tag))};function A3(t,e){return rL(t,e)}function cX(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ui(t,e,n,r){return new cX(t,e,n,r)}function Fk(t){return t=t.prototype,!(!t||!t.isReactComponent)}function fX(t){if(typeof t=="function")return Fk(t)?1:0;if(t!=null){if(t=t.$$typeof,t===nk)return 11;if(t===rk)return 14}return 2}function Xo(t,e){var n=t.alternate;return n===null?(n=ui(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Vg(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Fk(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case yu:return ol(n.children,i,s,e);case tk:o=8,i|=8;break;case Ew:return t=ui(12,n,e,i|2),t.elementType=Ew,t.lanes=s,t;case Nw:return t=ui(13,n,e,i),t.elementType=Nw,t.lanes=s,t;case Aw:return t=ui(19,n,e,i),t.elementType=Aw,t.lanes=s,t;case jF:return y0(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case LF:o=10;break e;case BF:o=9;break e;case nk:o=11;break e;case rk:o=14;break e;case Eo:o=16,r=null;break e}throw Error(ae(130,t==null?t:typeof t,""))}return e=ui(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ol(t,e,n,r){return t=ui(7,t,r,e),t.lanes=n,t}function y0(t,e,n,r){return t=ui(22,t,r,e),t.elementType=jF,t.lanes=n,t.stateNode={isHidden:!1},t}function x1(t,e,n){return t=ui(6,t,null,e),t.lanes=n,t}function b1(t,e,n){return e=ui(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function hX(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=e1(0),this.expirationTimes=e1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=e1(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Lk(t,e,n,r,i,s,o,a,l){return t=new hX(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ui(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},wk(s),t}function dX(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gu,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function O3(t){if(!t)return ia;t=t._reactInternals;e:{if(Bl(t)!==t||t.tag!==1)throw Error(ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(kr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ae(171))}if(t.tag===1){var n=t.type;if(kr(n))return OL(t,n,e)}return e}function P3(t,e,n,r,i,s,o,a,l){return t=Lk(n,r,!0,t,i,s,o,a,l),t.context=O3(null),n=t.current,r=ur(),i=qo(n),s=Hs(r,i),s.callback=e??null,Ho(n,s,i),t.current.lanes=i,Qd(t,i,r),Ir(t,r),t}function v0(t,e,n,r){var i=e.current,s=ur(),o=qo(i);return n=O3(n),e.context===null?e.context=n:e.pendingContext=n,e=Hs(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ho(i,e,o),t!==null&&(Xi(t,i,o,s),Mg(t,i,o)),o}function vy(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function $A(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Bk(t,e){$A(t,e),(t=t.alternate)&&$A(t,e)}function pX(){return null}var _3=typeof reportError=="function"?reportError:function(t){console.error(t)};function jk(t){this._internalRoot=t}x0.prototype.render=jk.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ae(409));v0(t,e,null,null)};x0.prototype.unmount=jk.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;vl(function(){v0(null,t,null,null)}),e[no]=null}};function x0(t){this._internalRoot=t}x0.prototype.unstable_scheduleHydration=function(t){if(t){var e=cL();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Po.length&&e!==0&&e<Po[n].priority;n++);Po.splice(n,0,t),n===0&&hL(t)}};function zk(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function b0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function kA(){}function mX(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=vy(o);s.call(u)}}var o=P3(e,r,t,0,null,!1,!1,"",kA);return t._reactRootContainer=o,t[no]=o.current,Vh(t.nodeType===8?t.parentNode:t),vl(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=vy(l);a.call(u)}}var l=Lk(t,0,!1,null,null,!1,!1,"",kA);return t._reactRootContainer=l,t[no]=l.current,Vh(t.nodeType===8?t.parentNode:t),vl(function(){v0(e,l,n,r)}),l}function w0(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=vy(o);a.call(l)}}v0(e,o,t,i)}else o=mX(n,e,t,i,r);return vy(o)}lL=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=nh(e.pendingLanes);n!==0&&(ok(e,n|1),Ir(e,Kt()),!(Xe&6)&&(ic=Kt()+500,ma()))}break;case 13:vl(function(){var r=ro(t,1);if(r!==null){var i=ur();Xi(r,t,1,i)}}),Bk(t,1)}};ak=function(t){if(t.tag===13){var e=ro(t,134217728);if(e!==null){var n=ur();Xi(e,t,134217728,n)}Bk(t,134217728)}};uL=function(t){if(t.tag===13){var e=qo(t),n=ro(t,e);if(n!==null){var r=ur();Xi(n,t,e,r)}Bk(t,e)}};cL=function(){return it};fL=function(t,e){var n=it;try{return it=t,e()}finally{it=n}};jw=function(t,e,n){switch(e){case"input":if(_w(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=f0(r);if(!i)throw Error(ae(90));VF(r),_w(r,i)}}}break;case"textarea":UF(t,n);break;case"select":e=n.value,e!=null&&Fu(t,!!n.multiple,e,!1)}};ZF=Dk;QF=vl;var gX={usingClientEntryPoint:!1,Events:[ep,wu,f0,XF,YF,Dk]},Mf={findFiberByHostInstance:qa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yX={bundleType:Mf.bundleType,version:Mf.version,rendererPackageName:Mf.rendererPackageName,rendererConfig:Mf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:mo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=tL(t),t===null?null:t.stateNode},findFiberByHostInstance:Mf.findFiberByHostInstance||pX,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jm.isDisabled&&Jm.supportsFiber)try{a0=Jm.inject(yX),gs=Jm}catch{}}Kr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gX;Kr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zk(e))throw Error(ae(200));return dX(t,e,null,n)};Kr.createRoot=function(t,e){if(!zk(t))throw Error(ae(299));var n=!1,r="",i=_3;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Lk(t,1,!1,null,null,n,!1,r,i),t[no]=e.current,Vh(t.nodeType===8?t.parentNode:t),new jk(e)};Kr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ae(188)):(t=Object.keys(t).join(","),Error(ae(268,t)));return t=tL(e),t=t===null?null:t.stateNode,t};Kr.flushSync=function(t){return vl(t)};Kr.hydrate=function(t,e,n){if(!b0(e))throw Error(ae(200));return w0(null,t,e,!0,n)};Kr.hydrateRoot=function(t,e,n){if(!zk(t))throw Error(ae(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=_3;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=P3(e,null,t,1,n??null,i,!1,s,o),t[no]=e.current,Vh(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new x0(e)};Kr.render=function(t,e,n){if(!b0(e))throw Error(ae(200));return w0(null,t,e,!1,n)};Kr.unmountComponentAtNode=function(t){if(!b0(t))throw Error(ae(40));return t._reactRootContainer?(vl(function(){w0(null,null,t,!1,function(){t._reactRootContainer=null,t[no]=null})}),!0):!1};Kr.unstable_batchedUpdates=Dk;Kr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!b0(n))throw Error(ae(200));if(t==null||t._reactInternals===void 0)throw Error(ae(38));return w0(t,e,n,!1,r)};Kr.version="18.3.1-next-f1338f8080-20240426";function D3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(D3)}catch(t){console.error(t)}}D3(),DF.exports=Kr;var vX=DF.exports,R3,IA=vX;R3=IA.createRoot,IA.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zh(){return Zh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zh.apply(this,arguments)}var Fo;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Fo||(Fo={}));const TA="popstate";function xX(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return xS("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:xy(i)}return wX(e,n,null,t)}function Bt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function M3(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function bX(){return Math.random().toString(36).substr(2,8)}function EA(t,e){return{usr:t.state,key:t.key,idx:e}}function xS(t,e,n,r){return n===void 0&&(n=null),Zh({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Kc(e):e,{state:n,key:e&&e.key||r||bX()})}function xy(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Kc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function wX(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Fo.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(Zh({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function f(){a=Fo.Pop;let g=c(),y=g==null?null:g-u;u=g,l&&l({action:a,location:m.location,delta:y})}function h(g,y){a=Fo.Push;let v=xS(m.location,g,y);u=c()+1;let x=EA(v,u),b=m.createHref(v);try{o.pushState(x,"",b)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;i.location.assign(b)}s&&l&&l({action:a,location:m.location,delta:1})}function d(g,y){a=Fo.Replace;let v=xS(m.location,g,y);u=c();let x=EA(v,u),b=m.createHref(v);o.replaceState(x,"",b),s&&l&&l({action:a,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof g=="string"?g:xy(g);return v=v.replace(/ $/,"%20"),Bt(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return a},get location(){return t(i,o)},listen(g){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(TA,f),l=g,()=>{i.removeEventListener(TA,f),l=null}},createHref(g){return e(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:d,go(g){return o.go(g)}};return m}var NA;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(NA||(NA={}));function SX(t,e,n){return n===void 0&&(n="/"),CX(t,e,n,!1)}function CX(t,e,n,r){let i=typeof e=="string"?Kc(e):e,s=sc(i.pathname||"/",n);if(s==null)return null;let o=F3(t);$X(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=RX(s);a=_X(o[l],u,r)}return a}function F3(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Bt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Yo([r,l.relativePath]),c=n.concat(l);s.children&&s.children.length>0&&(Bt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),F3(s.children,e,c,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:OX(u,s.index),routesMeta:c})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of L3(s.path))i(s,o,l)}),e}function L3(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=L3(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function $X(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:PX(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const kX=/^:[\w-]+$/,IX=3,TX=2,EX=1,NX=10,AX=-2,AA=t=>t==="*";function OX(t,e){let n=t.split("/"),r=n.length;return n.some(AA)&&(r+=AX),e&&(r+=TX),n.filter(i=>!AA(i)).reduce((i,s)=>i+(kX.test(s)?IX:s===""?EX:NX),r)}function PX(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function _X(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=s==="/"?e:e.slice(s.length)||"/",f=by({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),h=l.route;if(!f&&u&&n&&!r[r.length-1].route.index&&(f=by({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:Yo([s,f.pathname]),pathnameBase:BX(Yo([s,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(s=Yo([s,f.pathnameBase]))}return o}function by(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=DX(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,c,f)=>{let{paramName:h,isOptional:d}=c;if(h==="*"){let m=a[f]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[f];return d&&!p?u[h]=void 0:u[h]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function DX(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),M3(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function RX(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return M3(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function sc(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function MX(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Kc(t):t;return{pathname:n?n.startsWith("/")?n:FX(n,e):e,search:jX(r),hash:zX(i)}}function FX(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function w1(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function LX(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function B3(t,e){let n=LX(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function j3(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Kc(t):(i=Zh({},t),Bt(!i.pathname||!i.pathname.includes("?"),w1("?","pathname","search",i)),Bt(!i.pathname||!i.pathname.includes("#"),w1("#","pathname","hash",i)),Bt(!i.search||!i.search.includes("#"),w1("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),f-=1;i.pathname=h.join("/")}a=f>=0?e[f]:"/"}let l=MX(i,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const Yo=t=>t.join("/").replace(/\/\/+/g,"/"),BX=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),jX=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,zX=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function VX(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const z3=["post","put","patch","delete"];new Set(z3);const WX=["get",...z3];new Set(WX);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qh(){return Qh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qh.apply(this,arguments)}const S0=j.createContext(null),V3=j.createContext(null),ga=j.createContext(null),C0=j.createContext(null),jl=j.createContext({outlet:null,matches:[],isDataRoute:!1}),W3=j.createContext(null);function UX(t,e){let{relative:n}=e===void 0?{}:e;np()||Bt(!1);let{basename:r,navigator:i}=j.useContext(ga),{hash:s,pathname:o,search:a}=$0(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Yo([r,o])),i.createHref({pathname:l,search:a,hash:s})}function np(){return j.useContext(C0)!=null}function rp(){return np()||Bt(!1),j.useContext(C0).location}function U3(t){j.useContext(ga).static||j.useLayoutEffect(t)}function GX(){let{isDataRoute:t}=j.useContext(jl);return t?i7():HX()}function HX(){np()||Bt(!1);let t=j.useContext(S0),{basename:e,future:n,navigator:r}=j.useContext(ga),{matches:i}=j.useContext(jl),{pathname:s}=rp(),o=JSON.stringify(B3(i,n.v7_relativeSplatPath)),a=j.useRef(!1);return U3(()=>{a.current=!0}),j.useCallback(function(u,c){if(c===void 0&&(c={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let f=j3(u,JSON.parse(o),s,c.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Yo([e,f.pathname])),(c.replace?r.replace:r.push)(f,c.state,c)},[e,r,o,s,t])}function $0(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=j.useContext(ga),{matches:i}=j.useContext(jl),{pathname:s}=rp(),o=JSON.stringify(B3(i,r.v7_relativeSplatPath));return j.useMemo(()=>j3(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function KX(t,e){return qX(t,e)}function qX(t,e,n,r){np()||Bt(!1);let{navigator:i,static:s}=j.useContext(ga),{matches:o}=j.useContext(jl),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let c=rp(),f;if(e){var h;let y=typeof e=="string"?Kc(e):e;u==="/"||(h=y.pathname)!=null&&h.startsWith(u)||Bt(!1),f=y}else f=c;let d=f.pathname||"/",p=d;if(u!=="/"){let y=u.replace(/^\//,"").split("/");p="/"+d.replace(/^\//,"").split("/").slice(y.length).join("/")}let m=!s&&n&&n.matches&&n.matches.length>0?n.matches:SX(t,{pathname:p}),g=JX(m&&m.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:Yo([u,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?u:Yo([u,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),o,n,r);return e&&g?j.createElement(C0.Provider,{value:{location:Qh({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Fo.Pop}},g):g}function XX(){let t=r7(),e=VX(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),n?j.createElement("pre",{style:i},n):null,null)}const YX=j.createElement(XX,null);class ZX extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?j.createElement(jl.Provider,{value:this.props.routeContext},j.createElement(W3.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function QX(t){let{routeContext:e,match:n,children:r}=t,i=j.useContext(S0);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement(jl.Provider,{value:e},r)}function JX(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);c>=0||Bt(!1),o=o.slice(0,Math.min(o.length,c+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let f=o[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=c),f.route.id){let{loaderData:h,errors:d}=n,p=f.route.loader&&h[f.route.id]===void 0&&(!d||d[f.route.id]===void 0);if(f.route.lazy||p){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,f,h)=>{let d,p=!1,m=null,g=null;n&&(d=a&&f.route.id?a[f.route.id]:void 0,m=f.route.errorElement||YX,l&&(u<0&&h===0?(p=!0,g=null):u===h&&(p=!0,g=f.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,h+1)),v=()=>{let x;return d?x=m:p?x=g:f.route.Component?x=j.createElement(f.route.Component,null):f.route.element?x=f.route.element:x=c,j.createElement(QX,{match:f,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:x})};return n&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?j.createElement(ZX,{location:n.location,revalidation:n.revalidation,component:m,error:d,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var G3=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(G3||{}),wy=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(wy||{});function e7(t){let e=j.useContext(S0);return e||Bt(!1),e}function t7(t){let e=j.useContext(V3);return e||Bt(!1),e}function n7(t){let e=j.useContext(jl);return e||Bt(!1),e}function H3(t){let e=n7(),n=e.matches[e.matches.length-1];return n.route.id||Bt(!1),n.route.id}function r7(){var t;let e=j.useContext(W3),n=t7(wy.UseRouteError),r=H3(wy.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function i7(){let{router:t}=e7(G3.UseNavigateStable),e=H3(wy.UseNavigateStable),n=j.useRef(!1);return U3(()=>{n.current=!0}),j.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Qh({fromRouteId:e},s)))},[t,e])}function s7(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function hu(t){Bt(!1)}function o7(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Fo.Pop,navigator:s,static:o=!1,future:a}=t;np()&&Bt(!1);let l=e.replace(/^\/*/,"/"),u=j.useMemo(()=>({basename:l,navigator:s,static:o,future:Qh({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Kc(r));let{pathname:c="/",search:f="",hash:h="",state:d=null,key:p="default"}=r,m=j.useMemo(()=>{let g=sc(c,l);return g==null?null:{location:{pathname:g,search:f,hash:h,state:d,key:p},navigationType:i}},[l,c,f,h,d,p,i]);return m==null?null:j.createElement(ga.Provider,{value:u},j.createElement(C0.Provider,{children:n,value:m}))}function a7(t){let{children:e,location:n}=t;return KX(bS(e),n)}new Promise(()=>{});function bS(t,e){e===void 0&&(e=[]);let n=[];return j.Children.forEach(t,(r,i)=>{if(!j.isValidElement(r))return;let s=[...e,i];if(r.type===j.Fragment){n.push.apply(n,bS(r.props.children,s));return}r.type!==hu&&Bt(!1),!r.props.index||!r.props.children||Bt(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=bS(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sy(){return Sy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sy.apply(this,arguments)}function K3(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function l7(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function u7(t,e){return t.button===0&&(!e||e==="_self")&&!l7(t)}const c7=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],f7=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],h7="6";try{window.__reactRouterVersion=h7}catch{}const d7=j.createContext({isTransitioning:!1}),p7="startTransition",OA=aK[p7];function m7(t){let{basename:e,children:n,future:r,window:i}=t,s=j.useRef();s.current==null&&(s.current=xX({window:i,v5Compat:!0}));let o=s.current,[a,l]=j.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},c=j.useCallback(f=>{u&&OA?OA(()=>l(f)):l(f)},[l,u]);return j.useLayoutEffect(()=>o.listen(c),[o,c]),j.useEffect(()=>s7(r),[r]),j.createElement(o7,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const g7=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",y7=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,v7=j.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:c,viewTransition:f}=e,h=K3(e,c7),{basename:d}=j.useContext(ga),p,m=!1;if(typeof u=="string"&&y7.test(u)&&(p=u,g7))try{let x=new URL(window.location.href),b=u.startsWith("//")?new URL(x.protocol+u):new URL(u),w=sc(b.pathname,d);b.origin===x.origin&&w!=null?u=w+b.search+b.hash:m=!0}catch{}let g=UX(u,{relative:i}),y=b7(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:i,viewTransition:f});function v(x){r&&r(x),x.defaultPrevented||y(x)}return j.createElement("a",Sy({},h,{href:p||g,onClick:m||s?r:v,ref:n,target:l}))}),Ff=j.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:u,children:c}=e,f=K3(e,f7),h=$0(l,{relative:f.relative}),d=rp(),p=j.useContext(V3),{navigator:m,basename:g}=j.useContext(ga),y=p!=null&&w7(h)&&u===!0,v=m.encodeLocation?m.encodeLocation(h).pathname:h.pathname,x=d.pathname,b=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;i||(x=x.toLowerCase(),b=b?b.toLowerCase():null,v=v.toLowerCase()),b&&g&&(b=sc(b,g)||b);const w=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let S=x===v||!o&&x.startsWith(v)&&x.charAt(w)==="/",C=b!=null&&(b===v||!o&&b.startsWith(v)&&b.charAt(v.length)==="/"),$={isActive:S,isPending:C,isTransitioning:y},k=S?r:void 0,I;typeof s=="function"?I=s($):I=[s,S?"active":null,C?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let T=typeof a=="function"?a($):a;return j.createElement(v7,Sy({},f,{"aria-current":k,className:I,ref:n,style:T,to:l,viewTransition:u}),typeof c=="function"?c($):c)});var wS;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(wS||(wS={}));var PA;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(PA||(PA={}));function x7(t){let e=j.useContext(S0);return e||Bt(!1),e}function b7(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=GX(),u=rp(),c=$0(t,{relative:o});return j.useCallback(f=>{if(u7(f,n)){f.preventDefault();let h=r!==void 0?r:xy(u)===xy(c);l(t,{replace:h,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[u,l,c,r,i,n,t,s,o,a])}function w7(t,e){e===void 0&&(e={});let n=j.useContext(d7);n==null&&Bt(!1);let{basename:r}=x7(wS.useViewTransitionState),i=$0(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=sc(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=sc(n.nextLocation.pathname,r)||n.nextLocation.pathname;return by(i.pathname,o)!=null||by(i.pathname,s)!=null}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var S7={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C7=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),an=(t,e)=>{const n=j.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,...u},c)=>j.createElement("svg",{ref:c,...S7,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${C7(t)}`,a].join(" "),...u},[...e.map(([f,h])=>j.createElement(f,h)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q3=an("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $7=an("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k7=an("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X3=an("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I7=an("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cy=an("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wu=an("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T7=an("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E7=an("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N7=an("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A7=an("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O7=an("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $y=an("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P7=an("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _7=an("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y3=an("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D7=an("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R7=an("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M7=an("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z3=an("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]),F7=()=>N.jsx("aside",{className:"hidden md:flex md:w-64 md:flex-col",children:N.jsxs("div",{className:"flex flex-1 flex-col overflow-y-auto border-r border-gray-200 bg-white pt-5",children:[N.jsx("div",{className:"flex items-center justify-center px-4",children:N.jsxs("div",{className:"flex items-center",children:[N.jsx($y,{className:"h-8 w-8 text-blue-600"}),N.jsx("span",{className:"ml-2 text-xl font-bold text-gray-900",children:"FlightOps"})]})}),N.jsxs("nav",{className:"mt-8 flex-1 space-y-1 px-2",children:[N.jsxs(Ff,{to:"/",className:({isActive:t})=>`group flex items-center rounded-md px-2 py-2 text-sm font-medium ${t?"bg-blue-100 text-blue-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[N.jsx($7,{className:"mr-3 h-5 w-5 flex-shrink-0"}),"Dashboard"]}),N.jsxs(Ff,{to:"/weather",className:({isActive:t})=>`group flex items-center rounded-md px-2 py-2 text-sm font-medium ${t?"bg-blue-100 text-blue-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[N.jsx(Wu,{className:"mr-3 h-5 w-5 flex-shrink-0"}),"Weather Analysis"]}),N.jsxs(Ff,{to:"/scheduling",className:({isActive:t})=>`group flex items-center rounded-md px-2 py-2 text-sm font-medium ${t?"bg-blue-100 text-blue-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[N.jsx(X3,{className:"mr-3 h-5 w-5 flex-shrink-0"}),"Flight Scheduling"]}),N.jsxs(Ff,{to:"/predictions",className:({isActive:t})=>`group flex items-center rounded-md px-2 py-2 text-sm font-medium ${t?"bg-blue-100 text-blue-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[N.jsx(O7,{className:"mr-3 h-5 w-5 flex-shrink-0"}),"Predictions"]}),N.jsxs(Ff,{to:"/simulation",className:({isActive:t})=>`group flex items-center rounded-md px-2 py-2 text-sm font-medium ${t?"bg-blue-100 text-blue-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[N.jsx(N7,{className:"mr-3 h-5 w-5 flex-shrink-0"}),"Gate Simulation"]})]}),N.jsx("div",{className:"border-t border-gray-200 p-4",children:N.jsxs("div",{className:"space-y-1",children:[N.jsxs("button",{className:"group flex w-full items-center rounded-md px-2 py-2 text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900",children:[N.jsx(_7,{className:"mr-3 h-5 w-5 flex-shrink-0"}),"Settings"]}),N.jsxs("button",{className:"group flex w-full items-center rounded-md px-2 py-2 text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900",children:[N.jsx(E7,{className:"mr-3 h-5 w-5 flex-shrink-0"}),"Help & Support"]})]})})]})}),L7=()=>{const[t,e]=j.useState(!1);return N.jsxs("header",{className:"sticky top-0 z-10 flex h-16 items-center justify-between bg-white px-4 shadow-sm",children:[N.jsx("div",{className:"flex items-center md:hidden",children:N.jsx("button",{className:"p-2 text-gray-500 hover:text-blue-600",children:N.jsx(A7,{size:24})})}),N.jsx("div",{className:"hidden md:flex md:flex-1 md:items-center md:justify-start",children:N.jsxs("div",{className:"relative max-w-md flex-1",children:[N.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:N.jsx(P7,{size:18,className:"text-gray-400"})}),N.jsx("input",{type:"text",placeholder:"Search airports, flights...",className:"w-full rounded-md border border-gray-300 py-2 pl-10 pr-4 text-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]})}),N.jsxs("div",{className:"flex items-center space-x-4",children:[N.jsxs("button",{className:"relative rounded-full p-1 text-gray-500 hover:bg-gray-100 hover:text-blue-600",children:[N.jsx(k7,{size:20}),N.jsx("span",{className:"absolute right-0 top-0 h-2 w-2 rounded-full bg-red-500"})]}),N.jsxs("div",{className:"relative",children:[N.jsxs("button",{onClick:()=>e(!t),className:"flex items-center space-x-2 rounded-full text-sm text-gray-700 focus:outline-none",children:[N.jsx("div",{className:"h-8 w-8 rounded-full bg-blue-500 flex items-center justify-center text-white",children:N.jsx(M7,{size:16})}),N.jsx("span",{className:"hidden md:block font-medium",children:"Admin"}),N.jsx(I7,{size:16,className:"hidden md:block text-gray-500"})]}),t&&N.jsxs("div",{className:"absolute right-0 mt-2 w-48 rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5",children:[N.jsx("a",{href:"#",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Your Profile"}),N.jsx("a",{href:"#",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Settings"}),N.jsx("a",{href:"#",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Sign out"})]})]})]})]})},eg=({title:t,value:e,change:n,trend:r,icon:i})=>N.jsxs("div",{className:"relative overflow-hidden rounded-lg border bg-white p-6 shadow-sm transition-all duration-300 hover:shadow-md",children:[N.jsx("div",{className:"absolute -right-6 -top-6 h-24 w-24 rounded-full bg-blue-50 opacity-20"}),N.jsxs("div",{className:"flex items-center justify-between",children:[N.jsxs("div",{children:[N.jsx("p",{className:"text-sm font-medium text-gray-500",children:t}),N.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:e})]}),N.jsx("div",{className:"rounded-full bg-blue-50 p-3",children:i})]}),N.jsxs("div",{className:"mt-4 flex items-center",children:[r==="up"?N.jsx(R7,{className:"mr-1 h-4 w-4 text-red-500"}):r==="down"?N.jsx(D7,{className:"mr-1 h-4 w-4 text-green-500"}):null,N.jsxs("p",{className:`text-sm font-medium ${r==="up"?"text-red-500":r==="down"?"text-green-500":"text-gray-500"}`,children:[n," since last period"]})]})]});function Q3(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=Q3(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Qe(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=Q3(t))&&(r&&(r+=" "),r+=e);return r}var B7=Array.isArray,Ar=B7,j7=typeof Gi=="object"&&Gi&&Gi.Object===Object&&Gi,J3=j7,z7=J3,V7=typeof self=="object"&&self&&self.Object===Object&&self,W7=z7||V7||Function("return this")(),_s=W7,U7=_s,G7=U7.Symbol,ip=G7,_A=ip,eB=Object.prototype,H7=eB.hasOwnProperty,K7=eB.toString,Lf=_A?_A.toStringTag:void 0;function q7(t){var e=H7.call(t,Lf),n=t[Lf];try{t[Lf]=void 0;var r=!0}catch{}var i=K7.call(t);return r&&(e?t[Lf]=n:delete t[Lf]),i}var X7=q7,Y7=Object.prototype,Z7=Y7.toString;function Q7(t){return Z7.call(t)}var J7=Q7,DA=ip,e9=X7,t9=J7,n9="[object Null]",r9="[object Undefined]",RA=DA?DA.toStringTag:void 0;function i9(t){return t==null?t===void 0?r9:n9:RA&&RA in Object(t)?e9(t):t9(t)}var go=i9;function s9(t){return t!=null&&typeof t=="object"}var yo=s9,o9=go,a9=yo,l9="[object Symbol]";function u9(t){return typeof t=="symbol"||a9(t)&&o9(t)==l9}var qc=u9,c9=Ar,f9=qc,h9=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,d9=/^\w*$/;function p9(t,e){if(c9(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||f9(t)?!0:d9.test(t)||!h9.test(t)||e!=null&&t in Object(e)}var Vk=p9;function m9(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var ya=m9;const Xc=ut(ya);var g9=go,y9=ya,v9="[object AsyncFunction]",x9="[object Function]",b9="[object GeneratorFunction]",w9="[object Proxy]";function S9(t){if(!y9(t))return!1;var e=g9(t);return e==x9||e==b9||e==v9||e==w9}var Wk=S9;const Be=ut(Wk);var C9=_s,$9=C9["__core-js_shared__"],k9=$9,S1=k9,MA=function(){var t=/[^.]+$/.exec(S1&&S1.keys&&S1.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function I9(t){return!!MA&&MA in t}var T9=I9,E9=Function.prototype,N9=E9.toString;function A9(t){if(t!=null){try{return N9.call(t)}catch{}try{return t+""}catch{}}return""}var tB=A9,O9=Wk,P9=T9,_9=ya,D9=tB,R9=/[\\^$.*+?()[\]{}|]/g,M9=/^\[object .+?Constructor\]$/,F9=Function.prototype,L9=Object.prototype,B9=F9.toString,j9=L9.hasOwnProperty,z9=RegExp("^"+B9.call(j9).replace(R9,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function V9(t){if(!_9(t)||P9(t))return!1;var e=O9(t)?z9:M9;return e.test(D9(t))}var W9=V9;function U9(t,e){return t==null?void 0:t[e]}var G9=U9,H9=W9,K9=G9;function q9(t,e){var n=K9(t,e);return H9(n)?n:void 0}var zl=q9,X9=zl,Y9=X9(Object,"create"),k0=Y9,FA=k0;function Z9(){this.__data__=FA?FA(null):{},this.size=0}var Q9=Z9;function J9(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var eY=J9,tY=k0,nY="__lodash_hash_undefined__",rY=Object.prototype,iY=rY.hasOwnProperty;function sY(t){var e=this.__data__;if(tY){var n=e[t];return n===nY?void 0:n}return iY.call(e,t)?e[t]:void 0}var oY=sY,aY=k0,lY=Object.prototype,uY=lY.hasOwnProperty;function cY(t){var e=this.__data__;return aY?e[t]!==void 0:uY.call(e,t)}var fY=cY,hY=k0,dY="__lodash_hash_undefined__";function pY(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=hY&&e===void 0?dY:e,this}var mY=pY,gY=Q9,yY=eY,vY=oY,xY=fY,bY=mY;function Yc(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Yc.prototype.clear=gY;Yc.prototype.delete=yY;Yc.prototype.get=vY;Yc.prototype.has=xY;Yc.prototype.set=bY;var wY=Yc;function SY(){this.__data__=[],this.size=0}var CY=SY;function $Y(t,e){return t===e||t!==t&&e!==e}var Uk=$Y,kY=Uk;function IY(t,e){for(var n=t.length;n--;)if(kY(t[n][0],e))return n;return-1}var I0=IY,TY=I0,EY=Array.prototype,NY=EY.splice;function AY(t){var e=this.__data__,n=TY(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():NY.call(e,n,1),--this.size,!0}var OY=AY,PY=I0;function _Y(t){var e=this.__data__,n=PY(e,t);return n<0?void 0:e[n][1]}var DY=_Y,RY=I0;function MY(t){return RY(this.__data__,t)>-1}var FY=MY,LY=I0;function BY(t,e){var n=this.__data__,r=LY(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var jY=BY,zY=CY,VY=OY,WY=DY,UY=FY,GY=jY;function Zc(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Zc.prototype.clear=zY;Zc.prototype.delete=VY;Zc.prototype.get=WY;Zc.prototype.has=UY;Zc.prototype.set=GY;var T0=Zc,HY=zl,KY=_s,qY=HY(KY,"Map"),Gk=qY,LA=wY,XY=T0,YY=Gk;function ZY(){this.size=0,this.__data__={hash:new LA,map:new(YY||XY),string:new LA}}var QY=ZY;function JY(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var eZ=JY,tZ=eZ;function nZ(t,e){var n=t.__data__;return tZ(e)?n[typeof e=="string"?"string":"hash"]:n.map}var E0=nZ,rZ=E0;function iZ(t){var e=rZ(this,t).delete(t);return this.size-=e?1:0,e}var sZ=iZ,oZ=E0;function aZ(t){return oZ(this,t).get(t)}var lZ=aZ,uZ=E0;function cZ(t){return uZ(this,t).has(t)}var fZ=cZ,hZ=E0;function dZ(t,e){var n=hZ(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var pZ=dZ,mZ=QY,gZ=sZ,yZ=lZ,vZ=fZ,xZ=pZ;function Qc(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Qc.prototype.clear=mZ;Qc.prototype.delete=gZ;Qc.prototype.get=yZ;Qc.prototype.has=vZ;Qc.prototype.set=xZ;var Hk=Qc,nB=Hk,bZ="Expected a function";function Kk(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(bZ);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var o=t.apply(this,r);return n.cache=s.set(i,o)||s,o};return n.cache=new(Kk.Cache||nB),n}Kk.Cache=nB;var rB=Kk;const wZ=ut(rB);var SZ=rB,CZ=500;function $Z(t){var e=SZ(t,function(r){return n.size===CZ&&n.clear(),r}),n=e.cache;return e}var kZ=$Z,IZ=kZ,TZ=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,EZ=/\\(\\)?/g,NZ=IZ(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(TZ,function(n,r,i,s){e.push(i?s.replace(EZ,"$1"):r||n)}),e}),AZ=NZ;function OZ(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var qk=OZ,BA=ip,PZ=qk,_Z=Ar,DZ=qc,RZ=1/0,jA=BA?BA.prototype:void 0,zA=jA?jA.toString:void 0;function iB(t){if(typeof t=="string")return t;if(_Z(t))return PZ(t,iB)+"";if(DZ(t))return zA?zA.call(t):"";var e=t+"";return e=="0"&&1/t==-RZ?"-0":e}var MZ=iB,FZ=MZ;function LZ(t){return t==null?"":FZ(t)}var sB=LZ,BZ=Ar,jZ=Vk,zZ=AZ,VZ=sB;function WZ(t,e){return BZ(t)?t:jZ(t,e)?[t]:zZ(VZ(t))}var oB=WZ,UZ=qc,GZ=1/0;function HZ(t){if(typeof t=="string"||UZ(t))return t;var e=t+"";return e=="0"&&1/t==-GZ?"-0":e}var N0=HZ,KZ=oB,qZ=N0;function XZ(t,e){e=KZ(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[qZ(e[n++])];return n&&n==r?t:void 0}var Xk=XZ,YZ=Xk;function ZZ(t,e,n){var r=t==null?void 0:YZ(t,e);return r===void 0?n:r}var aB=ZZ;const yi=ut(aB);function QZ(t){return t==null}var JZ=QZ;const Ve=ut(JZ);var eQ=go,tQ=Ar,nQ=yo,rQ="[object String]";function iQ(t){return typeof t=="string"||!tQ(t)&&nQ(t)&&eQ(t)==rQ}var sQ=iQ;const xl=ut(sQ);var lB={exports:{}},ot={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yk=Symbol.for("react.element"),Zk=Symbol.for("react.portal"),A0=Symbol.for("react.fragment"),O0=Symbol.for("react.strict_mode"),P0=Symbol.for("react.profiler"),_0=Symbol.for("react.provider"),D0=Symbol.for("react.context"),oQ=Symbol.for("react.server_context"),R0=Symbol.for("react.forward_ref"),M0=Symbol.for("react.suspense"),F0=Symbol.for("react.suspense_list"),L0=Symbol.for("react.memo"),B0=Symbol.for("react.lazy"),aQ=Symbol.for("react.offscreen"),uB;uB=Symbol.for("react.module.reference");function $i(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Yk:switch(t=t.type,t){case A0:case P0:case O0:case M0:case F0:return t;default:switch(t=t&&t.$$typeof,t){case oQ:case D0:case R0:case B0:case L0:case _0:return t;default:return e}}case Zk:return e}}}ot.ContextConsumer=D0;ot.ContextProvider=_0;ot.Element=Yk;ot.ForwardRef=R0;ot.Fragment=A0;ot.Lazy=B0;ot.Memo=L0;ot.Portal=Zk;ot.Profiler=P0;ot.StrictMode=O0;ot.Suspense=M0;ot.SuspenseList=F0;ot.isAsyncMode=function(){return!1};ot.isConcurrentMode=function(){return!1};ot.isContextConsumer=function(t){return $i(t)===D0};ot.isContextProvider=function(t){return $i(t)===_0};ot.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Yk};ot.isForwardRef=function(t){return $i(t)===R0};ot.isFragment=function(t){return $i(t)===A0};ot.isLazy=function(t){return $i(t)===B0};ot.isMemo=function(t){return $i(t)===L0};ot.isPortal=function(t){return $i(t)===Zk};ot.isProfiler=function(t){return $i(t)===P0};ot.isStrictMode=function(t){return $i(t)===O0};ot.isSuspense=function(t){return $i(t)===M0};ot.isSuspenseList=function(t){return $i(t)===F0};ot.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===A0||t===P0||t===O0||t===M0||t===F0||t===aQ||typeof t=="object"&&t!==null&&(t.$$typeof===B0||t.$$typeof===L0||t.$$typeof===_0||t.$$typeof===D0||t.$$typeof===R0||t.$$typeof===uB||t.getModuleId!==void 0)};ot.typeOf=$i;lB.exports=ot;var lQ=lB.exports,uQ=go,cQ=yo,fQ="[object Number]";function hQ(t){return typeof t=="number"||cQ(t)&&uQ(t)==fQ}var cB=hQ;const dQ=ut(cB);var pQ=cB;function mQ(t){return pQ(t)&&t!=+t}var gQ=mQ;const sp=ut(gQ);var Hi=function(e){return e===0?0:e>0?1:-1},Za=function(e){return xl(e)&&e.indexOf("%")===e.length-1},he=function(e){return dQ(e)&&!sp(e)},pn=function(e){return he(e)||xl(e)},yQ=0,op=function(e){var n=++yQ;return"".concat(e||"").concat(n)},bl=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!he(e)&&!xl(e))return r;var s;if(Za(e)){var o=e.indexOf("%");s=n*parseFloat(e.slice(0,o))/100}else s=+e;return sp(s)&&(s=r),i&&s>n&&(s=n),s},Do=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},vQ=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},zi=function(e,n){return he(e)&&he(n)?function(r){return e+r*(n-e)}:function(){return n}};function ky(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):yi(r,e))===n})}var xQ=function(e,n){return he(e)&&he(n)?e-n:xl(e)&&xl(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function Uu(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function SS(t){"@babel/helpers - typeof";return SS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},SS(t)}var bQ=["viewBox","children"],wQ=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],VA=["points","pathLength"],C1={svg:bQ,polygon:VA,polyline:VA},Qk=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Iy=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(j.isValidElement(e)&&(r=e.props),!Xc(r))return null;var i={};return Object.keys(r).forEach(function(s){Qk.includes(s)&&(i[s]=n||function(o){return r[s](r,o)})}),i},SQ=function(e,n,r){return function(i){return e(n,r,i),null}},Ty=function(e,n,r){if(!Xc(e)||SS(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(s){var o=e[s];Qk.includes(s)&&typeof o=="function"&&(i||(i={}),i[s]=SQ(o,n,r))}),i},CQ=["children"],$Q=["children"];function WA(t,e){if(t==null)return{};var n=kQ(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function kQ(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function CS(t){"@babel/helpers - typeof";return CS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},CS(t)}var UA={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Ks=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},GA=null,$1=null,Jk=function t(e){if(e===GA&&Array.isArray($1))return $1;var n=[];return j.Children.forEach(e,function(r){Ve(r)||(lQ.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),$1=n,GA=e,n};function vi(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return Ks(i)}):r=[Ks(e)],Jk(t).forEach(function(i){var s=yi(i,"type.displayName")||yi(i,"type.name");r.indexOf(s)!==-1&&n.push(i)}),n}function Rr(t,e){var n=vi(t,e);return n&&n[0]}var HA=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!he(r)||r<=0||!he(i)||i<=0)},IQ=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],TQ=function(e){return e&&e.type&&xl(e.type)&&IQ.indexOf(e.type)>=0},EQ=function(e){return e&&CS(e)==="object"&&"clipDot"in e},NQ=function(e,n,r,i){var s,o=(s=C1==null?void 0:C1[i])!==null&&s!==void 0?s:[];return n.startsWith("data-")||!Be(e)&&(i&&o.includes(n)||wQ.includes(n))||r&&Qk.includes(n)},We=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(j.isValidElement(e)&&(i=e.props),!Xc(i))return null;var s={};return Object.keys(i).forEach(function(o){var a;NQ((a=i)===null||a===void 0?void 0:a[o],o,n,r)&&(s[o]=i[o])}),s},$S=function t(e,n){if(e===n)return!0;var r=j.Children.count(e);if(r!==j.Children.count(n))return!1;if(r===0)return!0;if(r===1)return KA(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var s=e[i],o=n[i];if(Array.isArray(s)||Array.isArray(o)){if(!t(s,o))return!1}else if(!KA(s,o))return!1}return!0},KA=function(e,n){if(Ve(e)&&Ve(n))return!0;if(!Ve(e)&&!Ve(n)){var r=e.props||{},i=r.children,s=WA(r,CQ),o=n.props||{},a=o.children,l=WA(o,$Q);return i&&a?Uu(s,l)&&$S(i,a):!i&&!a?Uu(s,l):!1}return!1},qA=function(e,n){var r=[],i={};return Jk(e).forEach(function(s,o){if(TQ(s))r.push(s);else if(s){var a=Ks(s.type),l=n[a]||{},u=l.handler,c=l.once;if(u&&(!c||!i[a])){var f=u(s,a,o);r.push(f),i[a]=!0}}}),r},AQ=function(e){var n=e&&e.type;return n&&UA[n]?UA[n]:null},OQ=function(e,n){return Jk(n).indexOf(e)},PQ=["children","width","height","viewBox","className","style","title","desc"];function kS(){return kS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kS.apply(this,arguments)}function _Q(t,e){if(t==null)return{};var n=DQ(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function DQ(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function IS(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,s=t.className,o=t.style,a=t.title,l=t.desc,u=_Q(t,PQ),c=i||{width:n,height:r,x:0,y:0},f=Qe("recharts-surface",s);return U.createElement("svg",kS({},We(u,!0,"svg"),{className:f,width:n,height:r,style:o,viewBox:"".concat(c.x," ").concat(c.y," ").concat(c.width," ").concat(c.height)}),U.createElement("title",null,a),U.createElement("desc",null,l),e)}var RQ=["children","className"];function TS(){return TS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},TS.apply(this,arguments)}function MQ(t,e){if(t==null)return{};var n=FQ(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function FQ(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var qt=U.forwardRef(function(t,e){var n=t.children,r=t.className,i=MQ(t,RQ),s=Qe("recharts-layer",r);return U.createElement("g",TS({className:s},We(i,!0),{ref:e}),n)}),qs=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s]};function LQ(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(i);++r<i;)s[r]=t[r+e];return s}var BQ=LQ,jQ=BQ;function zQ(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:jQ(t,e,n)}var VQ=zQ,WQ="\\ud800-\\udfff",UQ="\\u0300-\\u036f",GQ="\\ufe20-\\ufe2f",HQ="\\u20d0-\\u20ff",KQ=UQ+GQ+HQ,qQ="\\ufe0e\\ufe0f",XQ="\\u200d",YQ=RegExp("["+XQ+WQ+KQ+qQ+"]");function ZQ(t){return YQ.test(t)}var fB=ZQ;function QQ(t){return t.split("")}var JQ=QQ,hB="\\ud800-\\udfff",eJ="\\u0300-\\u036f",tJ="\\ufe20-\\ufe2f",nJ="\\u20d0-\\u20ff",rJ=eJ+tJ+nJ,iJ="\\ufe0e\\ufe0f",sJ="["+hB+"]",ES="["+rJ+"]",NS="\\ud83c[\\udffb-\\udfff]",oJ="(?:"+ES+"|"+NS+")",dB="[^"+hB+"]",pB="(?:\\ud83c[\\udde6-\\uddff]){2}",mB="[\\ud800-\\udbff][\\udc00-\\udfff]",aJ="\\u200d",gB=oJ+"?",yB="["+iJ+"]?",lJ="(?:"+aJ+"(?:"+[dB,pB,mB].join("|")+")"+yB+gB+")*",uJ=yB+gB+lJ,cJ="(?:"+[dB+ES+"?",ES,pB,mB,sJ].join("|")+")",fJ=RegExp(NS+"(?="+NS+")|"+cJ+uJ,"g");function hJ(t){return t.match(fJ)||[]}var dJ=hJ,pJ=JQ,mJ=fB,gJ=dJ;function yJ(t){return mJ(t)?gJ(t):pJ(t)}var vJ=yJ,xJ=VQ,bJ=fB,wJ=vJ,SJ=sB;function CJ(t){return function(e){e=SJ(e);var n=bJ(e)?wJ(e):void 0,r=n?n[0]:e.charAt(0),i=n?xJ(n,1).join(""):e.slice(1);return r[t]()+i}}var $J=CJ,kJ=$J,IJ=kJ("toUpperCase"),TJ=IJ;const j0=ut(TJ);function pt(t){return function(){return t}}const vB=Math.cos,Ey=Math.sin,rs=Math.sqrt,Ny=Math.PI,z0=2*Ny,AS=Math.PI,OS=2*AS,Ba=1e-6,EJ=OS-Ba;function xB(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function NJ(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return xB;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class AJ{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?xB:NJ(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=r-e,u=i-n,c=o-e,f=a-n,h=c*c+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>Ba)if(!(Math.abs(f*l-u*c)>Ba)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let d=r-o,p=i-a,m=l*l+u*u,g=d*d+p*p,y=Math.sqrt(m),v=Math.sqrt(h),x=s*Math.tan((AS-Math.acos((m+h-g)/(2*y*v)))/2),b=x/v,w=x/y;Math.abs(b-1)>Ba&&this._append`L${e+b*c},${n+b*f}`,this._append`A${s},${s},0,0,${+(f*d>c*p)},${this._x1=e+w*l},${this._y1=n+w*u}`}}arc(e,n,r,i,s,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),u=e+a,c=n+l,f=1^o,h=o?i-s:s-i;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>Ba||Math.abs(this._y1-c)>Ba)&&this._append`L${u},${c}`,r&&(h<0&&(h=h%OS+OS),h>EJ?this._append`A${r},${r},0,1,${f},${e-a},${n-l}A${r},${r},0,1,${f},${this._x1=u},${this._y1=c}`:h>Ba&&this._append`A${r},${r},0,${+(h>=AS)},${f},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function eI(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new AJ(e)}function tI(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function bB(t){this._context=t}bB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function V0(t){return new bB(t)}function wB(t){return t[0]}function SB(t){return t[1]}function CB(t,e){var n=pt(!0),r=null,i=V0,s=null,o=eI(a);t=typeof t=="function"?t:t===void 0?wB:pt(t),e=typeof e=="function"?e:e===void 0?SB:pt(e);function a(l){var u,c=(l=tI(l)).length,f,h=!1,d;for(r==null&&(s=i(d=o())),u=0;u<=c;++u)!(u<c&&n(f=l[u],u,l))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+t(f,u,l),+e(f,u,l));if(d)return s=null,d+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:pt(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:pt(+l),a):e},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:pt(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),a):r},a}function tg(t,e,n){var r=null,i=pt(!0),s=null,o=V0,a=null,l=eI(u);t=typeof t=="function"?t:t===void 0?wB:pt(+t),e=typeof e=="function"?e:pt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?SB:pt(+n);function u(f){var h,d,p,m=(f=tI(f)).length,g,y=!1,v,x=new Array(m),b=new Array(m);for(s==null&&(a=o(v=l())),h=0;h<=m;++h){if(!(h<m&&i(g=f[h],h,f))===y)if(y=!y)d=h,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=h-1;p>=d;--p)a.point(x[p],b[p]);a.lineEnd(),a.areaEnd()}y&&(x[h]=+t(g,h,f),b[h]=+e(g,h,f),a.point(r?+r(g,h,f):x[h],n?+n(g,h,f):b[h]))}if(v)return a=null,v+""||null}function c(){return CB().defined(i).curve(o).context(s)}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:pt(+f),r=null,u):t},u.x0=function(f){return arguments.length?(t=typeof f=="function"?f:pt(+f),u):t},u.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:pt(+f),u):r},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:pt(+f),n=null,u):e},u.y0=function(f){return arguments.length?(e=typeof f=="function"?f:pt(+f),u):e},u.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:pt(+f),u):n},u.lineX0=u.lineY0=function(){return c().x(t).y(e)},u.lineY1=function(){return c().x(t).y(n)},u.lineX1=function(){return c().x(r).y(e)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:pt(!!f),u):i},u.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),u):o},u.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),u):s},u}class $B{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function OJ(t){return new $B(t,!0)}function PJ(t){return new $B(t,!1)}const nI={draw(t,e){const n=rs(e/Ny);t.moveTo(n,0),t.arc(0,0,n,0,z0)}},_J={draw(t,e){const n=rs(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},kB=rs(1/3),DJ=kB*2,RJ={draw(t,e){const n=rs(e/DJ),r=n*kB;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},MJ={draw(t,e){const n=rs(e),r=-n/2;t.rect(r,r,n,n)}},FJ=.8908130915292852,IB=Ey(Ny/10)/Ey(7*Ny/10),LJ=Ey(z0/10)*IB,BJ=-vB(z0/10)*IB,jJ={draw(t,e){const n=rs(e*FJ),r=LJ*n,i=BJ*n;t.moveTo(0,-n),t.lineTo(r,i);for(let s=1;s<5;++s){const o=z0*s/5,a=vB(o),l=Ey(o);t.lineTo(l*n,-a*n),t.lineTo(a*r-l*i,l*r+a*i)}t.closePath()}},k1=rs(3),zJ={draw(t,e){const n=-rs(e/(k1*3));t.moveTo(0,n*2),t.lineTo(-k1*n,-n),t.lineTo(k1*n,-n),t.closePath()}},Qr=-.5,Jr=rs(3)/2,PS=1/rs(12),VJ=(PS/2+1)*3,WJ={draw(t,e){const n=rs(e/VJ),r=n/2,i=n*PS,s=r,o=n*PS+n,a=-s,l=o;t.moveTo(r,i),t.lineTo(s,o),t.lineTo(a,l),t.lineTo(Qr*r-Jr*i,Jr*r+Qr*i),t.lineTo(Qr*s-Jr*o,Jr*s+Qr*o),t.lineTo(Qr*a-Jr*l,Jr*a+Qr*l),t.lineTo(Qr*r+Jr*i,Qr*i-Jr*r),t.lineTo(Qr*s+Jr*o,Qr*o-Jr*s),t.lineTo(Qr*a+Jr*l,Qr*l-Jr*a),t.closePath()}};function UJ(t,e){let n=null,r=eI(i);t=typeof t=="function"?t:pt(t||nI),e=typeof e=="function"?e:pt(e===void 0?64:+e);function i(){let s;if(n||(n=s=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:pt(s),i):t},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:pt(+s),i):e},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function Ay(){}function Oy(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function TB(t){this._context=t}TB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Oy(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Oy(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function GJ(t){return new TB(t)}function EB(t){this._context=t}EB.prototype={areaStart:Ay,areaEnd:Ay,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Oy(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function HJ(t){return new EB(t)}function NB(t){this._context=t}NB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Oy(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function KJ(t){return new NB(t)}function AB(t){this._context=t}AB.prototype={areaStart:Ay,areaEnd:Ay,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function qJ(t){return new AB(t)}function XA(t){return t<0?-1:1}function YA(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(XA(s)+XA(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function ZA(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function I1(t,e,n){var r=t._x0,i=t._y0,s=t._x1,o=t._y1,a=(s-r)/3;t._context.bezierCurveTo(r+a,i+a*e,s-a,o-a*n,s,o)}function Py(t){this._context=t}Py.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:I1(this,this._t0,ZA(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,I1(this,ZA(this,n=YA(this,t,e)),n);break;default:I1(this,this._t0,n=YA(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function OB(t){this._context=new PB(t)}(OB.prototype=Object.create(Py.prototype)).point=function(t,e){Py.prototype.point.call(this,e,t)};function PB(t){this._context=t}PB.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}};function XJ(t){return new Py(t)}function YJ(t){return new OB(t)}function _B(t){this._context=t}_B.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=QA(t),i=QA(e),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function QA(t){var e,n=t.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/s[e-1],s[e]-=r,o[e]-=r*o[e-1];for(i[n-1]=o[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(o[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function ZJ(t){return new _B(t)}function W0(t,e){this._context=t,this._t=e}W0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function QJ(t){return new W0(t,.5)}function JJ(t){return new W0(t,0)}function eee(t){return new W0(t,1)}function oc(t,e){if((o=t.length)>1)for(var n=1,r,i,s=t[e[0]],o,a=s.length;n<o;++n)for(i=s,s=t[e[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function _S(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function tee(t,e){return t[e]}function nee(t){const e=[];return e.key=t,e}function ree(){var t=pt([]),e=_S,n=oc,r=tee;function i(s){var o=Array.from(t.apply(this,arguments),nee),a,l=o.length,u=-1,c;for(const f of s)for(a=0,++u;a<l;++a)(o[a][u]=[0,+r(f,o[a].key,u,s)]).data=f;for(a=0,c=tI(e(o));a<l;++a)o[c[a]].index=a;return n(o,c),o}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:pt(Array.from(s)),i):t},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:pt(+s),i):r},i.order=function(s){return arguments.length?(e=s==null?_S:typeof s=="function"?s:pt(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(n=s??oc,i):n},i}function iee(t,e){if((r=t.length)>0){for(var n,r,i=0,s=t[0].length,o;i<s;++i){for(o=n=0;n<r;++n)o+=t[n][i][1]||0;if(o)for(n=0;n<r;++n)t[n][i][1]/=o}oc(t,e)}}function see(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,s=r.length;n<s;++n){for(var o=0,a=0;o<i;++o)a+=t[o][n][1]||0;r[n][1]+=r[n][0]=-a/2}oc(t,e)}}function oee(t,e){if(!(!((o=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,s,o;r<s;++r){for(var a=0,l=0,u=0;a<o;++a){for(var c=t[e[a]],f=c[r][1]||0,h=c[r-1][1]||0,d=(f-h)/2,p=0;p<a;++p){var m=t[e[p]],g=m[r][1]||0,y=m[r-1][1]||0;d+=g-y}l+=f,u+=d*f}i[r-1][1]+=i[r-1][0]=n,l&&(n-=u/l)}i[r-1][1]+=i[r-1][0]=n,oc(t,e)}}function Jh(t){"@babel/helpers - typeof";return Jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jh(t)}var aee=["type","size","sizeType"];function DS(){return DS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},DS.apply(this,arguments)}function JA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function eO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JA(Object(n),!0).forEach(function(r){lee(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lee(t,e,n){return e=uee(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uee(t){var e=cee(t,"string");return Jh(e)=="symbol"?e:e+""}function cee(t,e){if(Jh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Jh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fee(t,e){if(t==null)return{};var n=hee(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function hee(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var DB={symbolCircle:nI,symbolCross:_J,symbolDiamond:RJ,symbolSquare:MJ,symbolStar:jJ,symbolTriangle:zJ,symbolWye:WJ},dee=Math.PI/180,pee=function(e){var n="symbol".concat(j0(e));return DB[n]||nI},mee=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*dee;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},gee=function(e,n){DB["symbol".concat(j0(e))]=n},rI=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,s=i===void 0?64:i,o=e.sizeType,a=o===void 0?"area":o,l=fee(e,aee),u=eO(eO({},l),{},{type:r,size:s,sizeType:a}),c=function(){var g=pee(r),y=UJ().type(g).size(mee(s,a,r));return y()},f=u.className,h=u.cx,d=u.cy,p=We(u,!0);return h===+h&&d===+d&&s===+s?U.createElement("path",DS({},p,{className:Qe("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(d,")"),d:c()})):null};rI.registerSymbol=gee;function ac(t){"@babel/helpers - typeof";return ac=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ac(t)}function RS(){return RS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},RS.apply(this,arguments)}function tO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yee(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tO(Object(n),!0).forEach(function(r){ed(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vee(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xee(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,MB(r.key),r)}}function bee(t,e,n){return e&&xee(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function wee(t,e,n){return e=_y(e),See(t,RB()?Reflect.construct(e,n||[],_y(t).constructor):e.apply(t,n))}function See(t,e){if(e&&(ac(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cee(t)}function Cee(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function RB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RB=function(){return!!t})()}function _y(t){return _y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_y(t)}function $ee(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&MS(t,e)}function MS(t,e){return MS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},MS(t,e)}function ed(t,e,n){return e=MB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MB(t){var e=kee(t,"string");return ac(e)=="symbol"?e:e+""}function kee(t,e){if(ac(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ac(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ei=32,iI=function(t){function e(){return vee(this,e),wee(this,e,arguments)}return $ee(e,t),bee(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,s=ei/2,o=ei/6,a=ei/3,l=r.inactive?i:r.color;if(r.type==="plainline")return U.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:s,x2:ei,y2:s,className:"recharts-legend-icon"});if(r.type==="line")return U.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(s,"h").concat(a,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*a,",").concat(s,`
            H`).concat(ei,"M").concat(2*a,",").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(a,",").concat(s),className:"recharts-legend-icon"});if(r.type==="rect")return U.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(ei/8,"h").concat(ei,"v").concat(ei*3/4,"h").concat(-ei,"z"),className:"recharts-legend-icon"});if(U.isValidElement(r.legendIcon)){var u=yee({},r);return delete u.legendIcon,U.cloneElement(r.legendIcon,u)}return U.createElement(rI,{fill:l,cx:s,cy:s,size:ei,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,s=i.payload,o=i.iconSize,a=i.layout,l=i.formatter,u=i.inactiveColor,c={x:0,y:0,width:ei,height:ei},f={display:a==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(d,p){var m=d.formatter||l,g=Qe(ed(ed({"recharts-legend-item":!0},"legend-item-".concat(p),!0),"inactive",d.inactive));if(d.type==="none")return null;var y=Be(d.value)?null:d.value;qs(!Be(d.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var v=d.inactive?u:d.color;return U.createElement("li",RS({className:g,style:f,key:"legend-item-".concat(p)},Ty(r.props,d,p)),U.createElement(IS,{width:o,height:o,viewBox:c,style:h},r.renderIcon(d)),U.createElement("span",{className:"recharts-legend-item-text",style:{color:v}},m?m(y,d,p):y))})}},{key:"render",value:function(){var r=this.props,i=r.payload,s=r.layout,o=r.align;if(!i||!i.length)return null;var a={padding:0,margin:0,textAlign:s==="horizontal"?o:"left"};return U.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}])}(j.PureComponent);ed(iI,"displayName","Legend");ed(iI,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Iee=T0;function Tee(){this.__data__=new Iee,this.size=0}var Eee=Tee;function Nee(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var Aee=Nee;function Oee(t){return this.__data__.get(t)}var Pee=Oee;function _ee(t){return this.__data__.has(t)}var Dee=_ee,Ree=T0,Mee=Gk,Fee=Hk,Lee=200;function Bee(t,e){var n=this.__data__;if(n instanceof Ree){var r=n.__data__;if(!Mee||r.length<Lee-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Fee(r)}return n.set(t,e),this.size=n.size,this}var jee=Bee,zee=T0,Vee=Eee,Wee=Aee,Uee=Pee,Gee=Dee,Hee=jee;function Jc(t){var e=this.__data__=new zee(t);this.size=e.size}Jc.prototype.clear=Vee;Jc.prototype.delete=Wee;Jc.prototype.get=Uee;Jc.prototype.has=Gee;Jc.prototype.set=Hee;var FB=Jc,Kee="__lodash_hash_undefined__";function qee(t){return this.__data__.set(t,Kee),this}var Xee=qee;function Yee(t){return this.__data__.has(t)}var Zee=Yee,Qee=Hk,Jee=Xee,ete=Zee;function Dy(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Qee;++e<n;)this.add(t[e])}Dy.prototype.add=Dy.prototype.push=Jee;Dy.prototype.has=ete;var LB=Dy;function tte(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var BB=tte;function nte(t,e){return t.has(e)}var jB=nte,rte=LB,ite=BB,ste=jB,ote=1,ate=2;function lte(t,e,n,r,i,s){var o=n&ote,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var u=s.get(t),c=s.get(e);if(u&&c)return u==e&&c==t;var f=-1,h=!0,d=n&ate?new rte:void 0;for(s.set(t,e),s.set(e,t);++f<a;){var p=t[f],m=e[f];if(r)var g=o?r(m,p,f,e,t,s):r(p,m,f,t,e,s);if(g!==void 0){if(g)continue;h=!1;break}if(d){if(!ite(e,function(y,v){if(!ste(d,v)&&(p===y||i(p,y,n,r,s)))return d.push(v)})){h=!1;break}}else if(!(p===m||i(p,m,n,r,s))){h=!1;break}}return s.delete(t),s.delete(e),h}var zB=lte,ute=_s,cte=ute.Uint8Array,fte=cte;function hte(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var dte=hte;function pte(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var sI=pte,nO=ip,rO=fte,mte=Uk,gte=zB,yte=dte,vte=sI,xte=1,bte=2,wte="[object Boolean]",Ste="[object Date]",Cte="[object Error]",$te="[object Map]",kte="[object Number]",Ite="[object RegExp]",Tte="[object Set]",Ete="[object String]",Nte="[object Symbol]",Ate="[object ArrayBuffer]",Ote="[object DataView]",iO=nO?nO.prototype:void 0,T1=iO?iO.valueOf:void 0;function Pte(t,e,n,r,i,s,o){switch(n){case Ote:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Ate:return!(t.byteLength!=e.byteLength||!s(new rO(t),new rO(e)));case wte:case Ste:case kte:return mte(+t,+e);case Cte:return t.name==e.name&&t.message==e.message;case Ite:case Ete:return t==e+"";case $te:var a=yte;case Tte:var l=r&xte;if(a||(a=vte),t.size!=e.size&&!l)return!1;var u=o.get(t);if(u)return u==e;r|=bte,o.set(t,e);var c=gte(a(t),a(e),r,i,s,o);return o.delete(t),c;case Nte:if(T1)return T1.call(t)==T1.call(e)}return!1}var _te=Pte;function Dte(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var VB=Dte,Rte=VB,Mte=Ar;function Fte(t,e,n){var r=e(t);return Mte(t)?r:Rte(r,n(t))}var Lte=Fte;function Bte(t,e){for(var n=-1,r=t==null?0:t.length,i=0,s=[];++n<r;){var o=t[n];e(o,n,t)&&(s[i++]=o)}return s}var jte=Bte;function zte(){return[]}var Vte=zte,Wte=jte,Ute=Vte,Gte=Object.prototype,Hte=Gte.propertyIsEnumerable,sO=Object.getOwnPropertySymbols,Kte=sO?function(t){return t==null?[]:(t=Object(t),Wte(sO(t),function(e){return Hte.call(t,e)}))}:Ute,qte=Kte;function Xte(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var Yte=Xte,Zte=go,Qte=yo,Jte="[object Arguments]";function ene(t){return Qte(t)&&Zte(t)==Jte}var tne=ene,oO=tne,nne=yo,WB=Object.prototype,rne=WB.hasOwnProperty,ine=WB.propertyIsEnumerable,sne=oO(function(){return arguments}())?oO:function(t){return nne(t)&&rne.call(t,"callee")&&!ine.call(t,"callee")},oI=sne,Ry={exports:{}};function one(){return!1}var ane=one;Ry.exports;(function(t,e){var n=_s,r=ane,i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,o=s&&s.exports===i,a=o?n.Buffer:void 0,l=a?a.isBuffer:void 0,u=l||r;t.exports=u})(Ry,Ry.exports);var UB=Ry.exports,lne=9007199254740991,une=/^(?:0|[1-9]\d*)$/;function cne(t,e){var n=typeof t;return e=e??lne,!!e&&(n=="number"||n!="symbol"&&une.test(t))&&t>-1&&t%1==0&&t<e}var aI=cne,fne=9007199254740991;function hne(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=fne}var lI=hne,dne=go,pne=lI,mne=yo,gne="[object Arguments]",yne="[object Array]",vne="[object Boolean]",xne="[object Date]",bne="[object Error]",wne="[object Function]",Sne="[object Map]",Cne="[object Number]",$ne="[object Object]",kne="[object RegExp]",Ine="[object Set]",Tne="[object String]",Ene="[object WeakMap]",Nne="[object ArrayBuffer]",Ane="[object DataView]",One="[object Float32Array]",Pne="[object Float64Array]",_ne="[object Int8Array]",Dne="[object Int16Array]",Rne="[object Int32Array]",Mne="[object Uint8Array]",Fne="[object Uint8ClampedArray]",Lne="[object Uint16Array]",Bne="[object Uint32Array]",bt={};bt[One]=bt[Pne]=bt[_ne]=bt[Dne]=bt[Rne]=bt[Mne]=bt[Fne]=bt[Lne]=bt[Bne]=!0;bt[gne]=bt[yne]=bt[Nne]=bt[vne]=bt[Ane]=bt[xne]=bt[bne]=bt[wne]=bt[Sne]=bt[Cne]=bt[$ne]=bt[kne]=bt[Ine]=bt[Tne]=bt[Ene]=!1;function jne(t){return mne(t)&&pne(t.length)&&!!bt[dne(t)]}var zne=jne;function Vne(t){return function(e){return t(e)}}var GB=Vne,My={exports:{}};My.exports;(function(t,e){var n=J3,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,o=s&&n.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();t.exports=a})(My,My.exports);var Wne=My.exports,Une=zne,Gne=GB,aO=Wne,lO=aO&&aO.isTypedArray,Hne=lO?Gne(lO):Une,HB=Hne,Kne=Yte,qne=oI,Xne=Ar,Yne=UB,Zne=aI,Qne=HB,Jne=Object.prototype,ere=Jne.hasOwnProperty;function tre(t,e){var n=Xne(t),r=!n&&qne(t),i=!n&&!r&&Yne(t),s=!n&&!r&&!i&&Qne(t),o=n||r||i||s,a=o?Kne(t.length,String):[],l=a.length;for(var u in t)(e||ere.call(t,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Zne(u,l)))&&a.push(u);return a}var nre=tre,rre=Object.prototype;function ire(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||rre;return t===n}var sre=ire;function ore(t,e){return function(n){return t(e(n))}}var KB=ore,are=KB,lre=are(Object.keys,Object),ure=lre,cre=sre,fre=ure,hre=Object.prototype,dre=hre.hasOwnProperty;function pre(t){if(!cre(t))return fre(t);var e=[];for(var n in Object(t))dre.call(t,n)&&n!="constructor"&&e.push(n);return e}var mre=pre,gre=Wk,yre=lI;function vre(t){return t!=null&&yre(t.length)&&!gre(t)}var ap=vre,xre=nre,bre=mre,wre=ap;function Sre(t){return wre(t)?xre(t):bre(t)}var U0=Sre,Cre=Lte,$re=qte,kre=U0;function Ire(t){return Cre(t,kre,$re)}var Tre=Ire,uO=Tre,Ere=1,Nre=Object.prototype,Are=Nre.hasOwnProperty;function Ore(t,e,n,r,i,s){var o=n&Ere,a=uO(t),l=a.length,u=uO(e),c=u.length;if(l!=c&&!o)return!1;for(var f=l;f--;){var h=a[f];if(!(o?h in e:Are.call(e,h)))return!1}var d=s.get(t),p=s.get(e);if(d&&p)return d==e&&p==t;var m=!0;s.set(t,e),s.set(e,t);for(var g=o;++f<l;){h=a[f];var y=t[h],v=e[h];if(r)var x=o?r(v,y,h,e,t,s):r(y,v,h,t,e,s);if(!(x===void 0?y===v||i(y,v,n,r,s):x)){m=!1;break}g||(g=h=="constructor")}if(m&&!g){var b=t.constructor,w=e.constructor;b!=w&&"constructor"in t&&"constructor"in e&&!(typeof b=="function"&&b instanceof b&&typeof w=="function"&&w instanceof w)&&(m=!1)}return s.delete(t),s.delete(e),m}var Pre=Ore,_re=zl,Dre=_s,Rre=_re(Dre,"DataView"),Mre=Rre,Fre=zl,Lre=_s,Bre=Fre(Lre,"Promise"),jre=Bre,zre=zl,Vre=_s,Wre=zre(Vre,"Set"),qB=Wre,Ure=zl,Gre=_s,Hre=Ure(Gre,"WeakMap"),Kre=Hre,FS=Mre,LS=Gk,BS=jre,jS=qB,zS=Kre,XB=go,ef=tB,cO="[object Map]",qre="[object Object]",fO="[object Promise]",hO="[object Set]",dO="[object WeakMap]",pO="[object DataView]",Xre=ef(FS),Yre=ef(LS),Zre=ef(BS),Qre=ef(jS),Jre=ef(zS),ja=XB;(FS&&ja(new FS(new ArrayBuffer(1)))!=pO||LS&&ja(new LS)!=cO||BS&&ja(BS.resolve())!=fO||jS&&ja(new jS)!=hO||zS&&ja(new zS)!=dO)&&(ja=function(t){var e=XB(t),n=e==qre?t.constructor:void 0,r=n?ef(n):"";if(r)switch(r){case Xre:return pO;case Yre:return cO;case Zre:return fO;case Qre:return hO;case Jre:return dO}return e});var eie=ja,E1=FB,tie=zB,nie=_te,rie=Pre,mO=eie,gO=Ar,yO=UB,iie=HB,sie=1,vO="[object Arguments]",xO="[object Array]",ng="[object Object]",oie=Object.prototype,bO=oie.hasOwnProperty;function aie(t,e,n,r,i,s){var o=gO(t),a=gO(e),l=o?xO:mO(t),u=a?xO:mO(e);l=l==vO?ng:l,u=u==vO?ng:u;var c=l==ng,f=u==ng,h=l==u;if(h&&yO(t)){if(!yO(e))return!1;o=!0,c=!1}if(h&&!c)return s||(s=new E1),o||iie(t)?tie(t,e,n,r,i,s):nie(t,e,l,n,r,i,s);if(!(n&sie)){var d=c&&bO.call(t,"__wrapped__"),p=f&&bO.call(e,"__wrapped__");if(d||p){var m=d?t.value():t,g=p?e.value():e;return s||(s=new E1),i(m,g,n,r,s)}}return h?(s||(s=new E1),rie(t,e,n,r,i,s)):!1}var lie=aie,uie=lie,wO=yo;function YB(t,e,n,r,i){return t===e?!0:t==null||e==null||!wO(t)&&!wO(e)?t!==t&&e!==e:uie(t,e,n,r,YB,i)}var uI=YB,cie=FB,fie=uI,hie=1,die=2;function pie(t,e,n,r){var i=n.length,s=i,o=!r;if(t==null)return!s;for(t=Object(t);i--;){var a=n[i];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<s;){a=n[i];var l=a[0],u=t[l],c=a[1];if(o&&a[2]){if(u===void 0&&!(l in t))return!1}else{var f=new cie;if(r)var h=r(u,c,l,t,e,f);if(!(h===void 0?fie(c,u,hie|die,r,f):h))return!1}}return!0}var mie=pie,gie=ya;function yie(t){return t===t&&!gie(t)}var ZB=yie,vie=ZB,xie=U0;function bie(t){for(var e=xie(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,vie(i)]}return e}var wie=bie;function Sie(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var QB=Sie,Cie=mie,$ie=wie,kie=QB;function Iie(t){var e=$ie(t);return e.length==1&&e[0][2]?kie(e[0][0],e[0][1]):function(n){return n===t||Cie(n,t,e)}}var Tie=Iie;function Eie(t,e){return t!=null&&e in Object(t)}var Nie=Eie,Aie=oB,Oie=oI,Pie=Ar,_ie=aI,Die=lI,Rie=N0;function Mie(t,e,n){e=Aie(e,t);for(var r=-1,i=e.length,s=!1;++r<i;){var o=Rie(e[r]);if(!(s=t!=null&&n(t,o)))break;t=t[o]}return s||++r!=i?s:(i=t==null?0:t.length,!!i&&Die(i)&&_ie(o,i)&&(Pie(t)||Oie(t)))}var Fie=Mie,Lie=Nie,Bie=Fie;function jie(t,e){return t!=null&&Bie(t,e,Lie)}var zie=jie,Vie=uI,Wie=aB,Uie=zie,Gie=Vk,Hie=ZB,Kie=QB,qie=N0,Xie=1,Yie=2;function Zie(t,e){return Gie(t)&&Hie(e)?Kie(qie(t),e):function(n){var r=Wie(n,t);return r===void 0&&r===e?Uie(n,t):Vie(e,r,Xie|Yie)}}var Qie=Zie;function Jie(t){return t}var tf=Jie;function ese(t){return function(e){return e==null?void 0:e[t]}}var tse=ese,nse=Xk;function rse(t){return function(e){return nse(e,t)}}var ise=rse,sse=tse,ose=ise,ase=Vk,lse=N0;function use(t){return ase(t)?sse(lse(t)):ose(t)}var cse=use,fse=Tie,hse=Qie,dse=tf,pse=Ar,mse=cse;function gse(t){return typeof t=="function"?t:t==null?dse:typeof t=="object"?pse(t)?hse(t[0],t[1]):fse(t):mse(t)}var va=gse;function yse(t,e,n,r){for(var i=t.length,s=n+(r?1:-1);r?s--:++s<i;)if(e(t[s],s,t))return s;return-1}var JB=yse;function vse(t){return t!==t}var xse=vse;function bse(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}var wse=bse,Sse=JB,Cse=xse,$se=wse;function kse(t,e,n){return e===e?$se(t,e,n):Sse(t,Cse,n)}var Ise=kse,Tse=Ise;function Ese(t,e){var n=t==null?0:t.length;return!!n&&Tse(t,e,0)>-1}var Nse=Ese;function Ase(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var Ose=Ase;function Pse(){}var _se=Pse,N1=qB,Dse=_se,Rse=sI,Mse=1/0,Fse=N1&&1/Rse(new N1([,-0]))[1]==Mse?function(t){return new N1(t)}:Dse,Lse=Fse,Bse=LB,jse=Nse,zse=Ose,Vse=jB,Wse=Lse,Use=sI,Gse=200;function Hse(t,e,n){var r=-1,i=jse,s=t.length,o=!0,a=[],l=a;if(n)o=!1,i=zse;else if(s>=Gse){var u=e?null:Wse(t);if(u)return Use(u);o=!1,i=Vse,l=new Bse}else l=e?[]:a;e:for(;++r<s;){var c=t[r],f=e?e(c):c;if(c=n||c!==0?c:0,o&&f===f){for(var h=l.length;h--;)if(l[h]===f)continue e;e&&l.push(f),a.push(c)}else i(l,f,n)||(l!==a&&l.push(f),a.push(c))}return a}var Kse=Hse,qse=va,Xse=Kse;function Yse(t,e){return t&&t.length?Xse(t,qse(e)):[]}var Zse=Yse;const SO=ut(Zse);function ej(t,e,n){return e===!0?SO(t,n):Be(e)?SO(t,e):t}function lc(t){"@babel/helpers - typeof";return lc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lc(t)}var Qse=["ref"];function CO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CO(Object(n),!0).forEach(function(r){G0(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Jse(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $O(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,nj(r.key),r)}}function eoe(t,e,n){return e&&$O(t.prototype,e),n&&$O(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function toe(t,e,n){return e=Fy(e),noe(t,tj()?Reflect.construct(e,n||[],Fy(t).constructor):e.apply(t,n))}function noe(t,e){if(e&&(lc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return roe(t)}function roe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tj(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tj=function(){return!!t})()}function Fy(t){return Fy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Fy(t)}function ioe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VS(t,e)}function VS(t,e){return VS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},VS(t,e)}function G0(t,e,n){return e=nj(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nj(t){var e=soe(t,"string");return lc(e)=="symbol"?e:e+""}function soe(t,e){if(lc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(lc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ooe(t,e){if(t==null)return{};var n=aoe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function aoe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function loe(t){return t.value}function uoe(t,e){if(U.isValidElement(t))return U.cloneElement(t,e);if(typeof t=="function")return U.createElement(t,e);e.ref;var n=ooe(e,Qse);return U.createElement(iI,n)}var kO=1,al=function(t){function e(){var n;Jse(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=toe(this,e,[].concat(i)),G0(n,"lastBoundingBox",{width:-1,height:-1}),n}return ioe(e,t),eoe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>kO||Math.abs(i.height-this.lastBoundingBox.height)>kO)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Rs({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,s=i.layout,o=i.align,a=i.verticalAlign,l=i.margin,u=i.chartWidth,c=i.chartHeight,f,h;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(o==="center"&&s==="vertical"){var d=this.getBBoxSnapshot();f={left:((u||0)-d.width)/2}}else f=o==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(a==="middle"){var p=this.getBBoxSnapshot();h={top:((c||0)-p.height)/2}}else h=a==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return Rs(Rs({},f),h)}},{key:"render",value:function(){var r=this,i=this.props,s=i.content,o=i.width,a=i.height,l=i.wrapperStyle,u=i.payloadUniqBy,c=i.payload,f=Rs(Rs({position:"absolute",width:o||"auto",height:a||"auto"},this.getDefaultPosition(l)),l);return U.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(d){r.wrapperNode=d}},uoe(s,Rs(Rs({},this.props),{},{payload:ej(c,u,loe)})))}}],[{key:"getWithHeight",value:function(r,i){var s=Rs(Rs({},this.defaultProps),r.props),o=s.layout;return o==="vertical"&&he(r.props.height)?{height:r.props.height}:o==="horizontal"?{width:r.props.width||i}:null}}])}(j.PureComponent);G0(al,"displayName","Legend");G0(al,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var IO=ip,coe=oI,foe=Ar,TO=IO?IO.isConcatSpreadable:void 0;function hoe(t){return foe(t)||coe(t)||!!(TO&&t&&t[TO])}var doe=hoe,poe=VB,moe=doe;function rj(t,e,n,r,i){var s=-1,o=t.length;for(n||(n=moe),i||(i=[]);++s<o;){var a=t[s];e>0&&n(a)?e>1?rj(a,e-1,n,r,i):poe(i,a):r||(i[i.length]=a)}return i}var ij=rj;function goe(t){return function(e,n,r){for(var i=-1,s=Object(e),o=r(e),a=o.length;a--;){var l=o[t?a:++i];if(n(s[l],l,s)===!1)break}return e}}var yoe=goe,voe=yoe,xoe=voe(),boe=xoe,woe=boe,Soe=U0;function Coe(t,e){return t&&woe(t,e,Soe)}var sj=Coe,$oe=ap;function koe(t,e){return function(n,r){if(n==null)return n;if(!$oe(n))return t(n,r);for(var i=n.length,s=e?i:-1,o=Object(n);(e?s--:++s<i)&&r(o[s],s,o)!==!1;);return n}}var Ioe=koe,Toe=sj,Eoe=Ioe,Noe=Eoe(Toe),cI=Noe,Aoe=cI,Ooe=ap;function Poe(t,e){var n=-1,r=Ooe(t)?Array(t.length):[];return Aoe(t,function(i,s,o){r[++n]=e(i,s,o)}),r}var oj=Poe;function _oe(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var Doe=_oe,EO=qc;function Roe(t,e){if(t!==e){var n=t!==void 0,r=t===null,i=t===t,s=EO(t),o=e!==void 0,a=e===null,l=e===e,u=EO(e);if(!a&&!u&&!s&&t>e||s&&o&&l&&!a&&!u||r&&o&&l||!n&&l||!i)return 1;if(!r&&!s&&!u&&t<e||u&&n&&i&&!r&&!s||a&&n&&i||!o&&i||!l)return-1}return 0}var Moe=Roe,Foe=Moe;function Loe(t,e,n){for(var r=-1,i=t.criteria,s=e.criteria,o=i.length,a=n.length;++r<o;){var l=Foe(i[r],s[r]);if(l){if(r>=a)return l;var u=n[r];return l*(u=="desc"?-1:1)}}return t.index-e.index}var Boe=Loe,A1=qk,joe=Xk,zoe=va,Voe=oj,Woe=Doe,Uoe=GB,Goe=Boe,Hoe=tf,Koe=Ar;function qoe(t,e,n){e.length?e=A1(e,function(s){return Koe(s)?function(o){return joe(o,s.length===1?s[0]:s)}:s}):e=[Hoe];var r=-1;e=A1(e,Uoe(zoe));var i=Voe(t,function(s,o,a){var l=A1(e,function(u){return u(s)});return{criteria:l,index:++r,value:s}});return Woe(i,function(s,o){return Goe(s,o,n)})}var Xoe=qoe;function Yoe(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var Zoe=Yoe,Qoe=Zoe,NO=Math.max;function Joe(t,e,n){return e=NO(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=NO(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=n(o),Qoe(t,this,a)}}var eae=Joe;function tae(t){return function(){return t}}var nae=tae,rae=zl,iae=function(){try{var t=rae(Object,"defineProperty");return t({},"",{}),t}catch{}}(),aj=iae,sae=nae,AO=aj,oae=tf,aae=AO?function(t,e){return AO(t,"toString",{configurable:!0,enumerable:!1,value:sae(e),writable:!0})}:oae,lae=aae,uae=800,cae=16,fae=Date.now;function hae(t){var e=0,n=0;return function(){var r=fae(),i=cae-(r-n);if(n=r,i>0){if(++e>=uae)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var dae=hae,pae=lae,mae=dae,gae=mae(pae),yae=gae,vae=tf,xae=eae,bae=yae;function wae(t,e){return bae(xae(t,e,vae),t+"")}var Sae=wae,Cae=Uk,$ae=ap,kae=aI,Iae=ya;function Tae(t,e,n){if(!Iae(n))return!1;var r=typeof e;return(r=="number"?$ae(n)&&kae(e,n.length):r=="string"&&e in n)?Cae(n[e],t):!1}var H0=Tae,Eae=ij,Nae=Xoe,Aae=Sae,OO=H0,Oae=Aae(function(t,e){if(t==null)return[];var n=e.length;return n>1&&OO(t,e[0],e[1])?e=[]:n>2&&OO(e[0],e[1],e[2])&&(e=[e[0]]),Nae(t,Eae(e,1),[])}),Pae=Oae;const fI=ut(Pae);function td(t){"@babel/helpers - typeof";return td=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},td(t)}function WS(){return WS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},WS.apply(this,arguments)}function _ae(t,e){return Fae(t)||Mae(t,e)||Rae(t,e)||Dae()}function Dae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rae(t,e){if(t){if(typeof t=="string")return PO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PO(t,e)}}function PO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Mae(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function Fae(t){if(Array.isArray(t))return t}function _O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function O1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_O(Object(n),!0).forEach(function(r){Lae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_O(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Lae(t,e,n){return e=Bae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bae(t){var e=jae(t,"string");return td(e)=="symbol"?e:e+""}function jae(t,e){if(td(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(td(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zae(t){return Array.isArray(t)&&pn(t[0])&&pn(t[1])?t.join(" ~ "):t}var Vae=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,s=i===void 0?{}:i,o=e.itemStyle,a=o===void 0?{}:o,l=e.labelStyle,u=l===void 0?{}:l,c=e.payload,f=e.formatter,h=e.itemSorter,d=e.wrapperClassName,p=e.labelClassName,m=e.label,g=e.labelFormatter,y=e.accessibilityLayer,v=y===void 0?!1:y,x=function(){if(c&&c.length){var A={padding:0,margin:0},_=(h?fI(c,h):c).map(function(D,P){if(D.type==="none")return null;var R=O1({display:"block",paddingTop:4,paddingBottom:4,color:D.color||"#000"},a),F=D.formatter||f||zae,O=D.value,M=D.name,V=O,q=M;if(F&&V!=null&&q!=null){var K=F(O,M,D,P,c);if(Array.isArray(K)){var Z=_ae(K,2);V=Z[0],q=Z[1]}else V=K}return U.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(P),style:R},pn(q)?U.createElement("span",{className:"recharts-tooltip-item-name"},q):null,pn(q)?U.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,U.createElement("span",{className:"recharts-tooltip-item-value"},V),U.createElement("span",{className:"recharts-tooltip-item-unit"},D.unit||""))});return U.createElement("ul",{className:"recharts-tooltip-item-list",style:A},_)}return null},b=O1({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),w=O1({margin:0},u),S=!Ve(m),C=S?m:"",$=Qe("recharts-default-tooltip",d),k=Qe("recharts-tooltip-label",p);S&&g&&c!==void 0&&c!==null&&(C=g(m,c));var I=v?{role:"status","aria-live":"assertive"}:{};return U.createElement("div",WS({className:$,style:b},I),U.createElement("p",{className:k,style:w},U.isValidElement(C)?C:"".concat(C)),x())};function nd(t){"@babel/helpers - typeof";return nd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nd(t)}function rg(t,e,n){return e=Wae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wae(t){var e=Uae(t,"string");return nd(e)=="symbol"?e:e+""}function Uae(t,e){if(nd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(nd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Bf="recharts-tooltip-wrapper",Gae={visibility:"hidden"};function Hae(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return Qe(Bf,rg(rg(rg(rg({},"".concat(Bf,"-right"),he(n)&&e&&he(e.x)&&n>=e.x),"".concat(Bf,"-left"),he(n)&&e&&he(e.x)&&n<e.x),"".concat(Bf,"-bottom"),he(r)&&e&&he(e.y)&&r>=e.y),"".concat(Bf,"-top"),he(r)&&e&&he(e.y)&&r<e.y))}function DO(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,s=t.position,o=t.reverseDirection,a=t.tooltipDimension,l=t.viewBox,u=t.viewBoxDimension;if(s&&he(s[r]))return s[r];var c=n[r]-a-i,f=n[r]+i;if(e[r])return o[r]?c:f;if(o[r]){var h=c,d=l[r];return h<d?Math.max(f,l[r]):Math.max(c,l[r])}var p=f+a,m=l[r]+u;return p>m?Math.max(c,l[r]):Math.max(f,l[r])}function Kae(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function qae(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,s=t.reverseDirection,o=t.tooltipBox,a=t.useTranslate3d,l=t.viewBox,u,c,f;return o.height>0&&o.width>0&&n?(c=DO({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:o.width,viewBox:l,viewBoxDimension:l.width}),f=DO({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:o.height,viewBox:l,viewBoxDimension:l.height}),u=Kae({translateX:c,translateY:f,useTranslate3d:a})):u=Gae,{cssProperties:u,cssClasses:Hae({translateX:c,translateY:f,coordinate:n})}}function uc(t){"@babel/helpers - typeof";return uc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uc(t)}function RO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function MO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RO(Object(n),!0).forEach(function(r){GS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Yae(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,uj(r.key),r)}}function Zae(t,e,n){return e&&Yae(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Qae(t,e,n){return e=Ly(e),Jae(t,lj()?Reflect.construct(e,n||[],Ly(t).constructor):e.apply(t,n))}function Jae(t,e){if(e&&(uc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ele(t)}function ele(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lj(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lj=function(){return!!t})()}function Ly(t){return Ly=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ly(t)}function tle(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&US(t,e)}function US(t,e){return US=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},US(t,e)}function GS(t,e,n){return e=uj(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uj(t){var e=nle(t,"string");return uc(e)=="symbol"?e:e+""}function nle(t,e){if(uc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(uc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var FO=1,rle=function(t){function e(){var n;Xae(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=Qae(this,e,[].concat(i)),GS(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),GS(n,"handleKeyDown",function(o){if(o.key==="Escape"){var a,l,u,c;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(a=(l=n.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&a!==void 0?a:0,y:(u=(c=n.props.coordinate)===null||c===void 0?void 0:c.y)!==null&&u!==void 0?u:0}})}}),n}return tle(e,t),Zae(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>FO||Math.abs(r.height-this.state.lastBoundingBox.height)>FO)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,s=i.active,o=i.allowEscapeViewBox,a=i.animationDuration,l=i.animationEasing,u=i.children,c=i.coordinate,f=i.hasPayload,h=i.isAnimationActive,d=i.offset,p=i.position,m=i.reverseDirection,g=i.useTranslate3d,y=i.viewBox,v=i.wrapperStyle,x=qae({allowEscapeViewBox:o,coordinate:c,offsetTopLeft:d,position:p,reverseDirection:m,tooltipBox:this.state.lastBoundingBox,useTranslate3d:g,viewBox:y}),b=x.cssClasses,w=x.cssProperties,S=MO(MO({transition:h&&s?"transform ".concat(a,"ms ").concat(l):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&f?"visible":"hidden",position:"absolute",top:0,left:0},v);return U.createElement("div",{tabIndex:-1,className:b,style:S,ref:function($){r.wrapperNode=$}},u)}}])}(j.PureComponent),ile=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Xs={isSsr:ile(),get:function(e){return Xs[e]},set:function(e,n){if(typeof e=="string")Xs[e]=n;else{var r=Object.keys(e);r&&r.length&&r.forEach(function(i){Xs[i]=e[i]})}}};function cc(t){"@babel/helpers - typeof";return cc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cc(t)}function LO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function BO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LO(Object(n),!0).forEach(function(r){hI(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sle(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ole(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fj(r.key),r)}}function ale(t,e,n){return e&&ole(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function lle(t,e,n){return e=By(e),ule(t,cj()?Reflect.construct(e,n||[],By(t).constructor):e.apply(t,n))}function ule(t,e){if(e&&(cc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cle(t)}function cle(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cj(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cj=function(){return!!t})()}function By(t){return By=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},By(t)}function fle(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&HS(t,e)}function HS(t,e){return HS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},HS(t,e)}function hI(t,e,n){return e=fj(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fj(t){var e=hle(t,"string");return cc(e)=="symbol"?e:e+""}function hle(t,e){if(cc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(cc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dle(t){return t.dataKey}function ple(t,e){return U.isValidElement(t)?U.cloneElement(t,e):typeof t=="function"?U.createElement(t,e):U.createElement(Vae,e)}var Fi=function(t){function e(){return sle(this,e),lle(this,e,arguments)}return fle(e,t),ale(e,[{key:"render",value:function(){var r=this,i=this.props,s=i.active,o=i.allowEscapeViewBox,a=i.animationDuration,l=i.animationEasing,u=i.content,c=i.coordinate,f=i.filterNull,h=i.isAnimationActive,d=i.offset,p=i.payload,m=i.payloadUniqBy,g=i.position,y=i.reverseDirection,v=i.useTranslate3d,x=i.viewBox,b=i.wrapperStyle,w=p??[];f&&w.length&&(w=ej(p.filter(function(C){return C.value!=null&&(C.hide!==!0||r.props.includeHidden)}),m,dle));var S=w.length>0;return U.createElement(rle,{allowEscapeViewBox:o,animationDuration:a,animationEasing:l,isAnimationActive:h,active:s,coordinate:c,hasPayload:S,offset:d,position:g,reverseDirection:y,useTranslate3d:v,viewBox:x,wrapperStyle:b},ple(u,BO(BO({},this.props),{},{payload:w})))}}])}(j.PureComponent);hI(Fi,"displayName","Tooltip");hI(Fi,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Xs.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var mle=_s,gle=function(){return mle.Date.now()},yle=gle,vle=/\s/;function xle(t){for(var e=t.length;e--&&vle.test(t.charAt(e)););return e}var ble=xle,wle=ble,Sle=/^\s+/;function Cle(t){return t&&t.slice(0,wle(t)+1).replace(Sle,"")}var $le=Cle,kle=$le,jO=ya,Ile=qc,zO=NaN,Tle=/^[-+]0x[0-9a-f]+$/i,Ele=/^0b[01]+$/i,Nle=/^0o[0-7]+$/i,Ale=parseInt;function Ole(t){if(typeof t=="number")return t;if(Ile(t))return zO;if(jO(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=jO(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=kle(t);var n=Ele.test(t);return n||Nle.test(t)?Ale(t.slice(2),n?2:8):Tle.test(t)?zO:+t}var hj=Ole,Ple=ya,P1=yle,VO=hj,_le="Expected a function",Dle=Math.max,Rle=Math.min;function Mle(t,e,n){var r,i,s,o,a,l,u=0,c=!1,f=!1,h=!0;if(typeof t!="function")throw new TypeError(_le);e=VO(e)||0,Ple(n)&&(c=!!n.leading,f="maxWait"in n,s=f?Dle(VO(n.maxWait)||0,e):s,h="trailing"in n?!!n.trailing:h);function d(S){var C=r,$=i;return r=i=void 0,u=S,o=t.apply($,C),o}function p(S){return u=S,a=setTimeout(y,e),c?d(S):o}function m(S){var C=S-l,$=S-u,k=e-C;return f?Rle(k,s-$):k}function g(S){var C=S-l,$=S-u;return l===void 0||C>=e||C<0||f&&$>=s}function y(){var S=P1();if(g(S))return v(S);a=setTimeout(y,m(S))}function v(S){return a=void 0,h&&r?d(S):(r=i=void 0,o)}function x(){a!==void 0&&clearTimeout(a),u=0,r=l=i=a=void 0}function b(){return a===void 0?o:v(P1())}function w(){var S=P1(),C=g(S);if(r=arguments,i=this,l=S,C){if(a===void 0)return p(l);if(f)return clearTimeout(a),a=setTimeout(y,e),d(l)}return a===void 0&&(a=setTimeout(y,e)),o}return w.cancel=x,w.flush=b,w}var Fle=Mle,Lle=Fle,Ble=ya,jle="Expected a function";function zle(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(jle);return Ble(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Lle(t,e,{leading:r,maxWait:e,trailing:i})}var Vle=zle;const dj=ut(Vle);function rd(t){"@babel/helpers - typeof";return rd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rd(t)}function WO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ig(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WO(Object(n),!0).forEach(function(r){Wle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wle(t,e,n){return e=Ule(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ule(t){var e=Gle(t,"string");return rd(e)=="symbol"?e:e+""}function Gle(t,e){if(rd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(rd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hle(t,e){return Yle(t)||Xle(t,e)||qle(t,e)||Kle()}function Kle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qle(t,e){if(t){if(typeof t=="string")return UO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UO(t,e)}}function UO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Xle(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function Yle(t){if(Array.isArray(t))return t}var pj=j.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,s=t.width,o=s===void 0?"100%":s,a=t.height,l=a===void 0?"100%":a,u=t.minWidth,c=u===void 0?0:u,f=t.minHeight,h=t.maxHeight,d=t.children,p=t.debounce,m=p===void 0?0:p,g=t.id,y=t.className,v=t.onResize,x=t.style,b=x===void 0?{}:x,w=j.useRef(null),S=j.useRef();S.current=v,j.useImperativeHandle(e,function(){return Object.defineProperty(w.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),w.current},configurable:!0})});var C=j.useState({containerWidth:i.width,containerHeight:i.height}),$=Hle(C,2),k=$[0],I=$[1],T=j.useCallback(function(_,D){I(function(P){var R=Math.round(_),F=Math.round(D);return P.containerWidth===R&&P.containerHeight===F?P:{containerWidth:R,containerHeight:F}})},[]);j.useEffect(function(){var _=function(M){var V,q=M[0].contentRect,K=q.width,Z=q.height;T(K,Z),(V=S.current)===null||V===void 0||V.call(S,K,Z)};m>0&&(_=dj(_,m,{trailing:!0,leading:!1}));var D=new ResizeObserver(_),P=w.current.getBoundingClientRect(),R=P.width,F=P.height;return T(R,F),D.observe(w.current),function(){D.disconnect()}},[T,m]);var A=j.useMemo(function(){var _=k.containerWidth,D=k.containerHeight;if(_<0||D<0)return null;qs(Za(o)||Za(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,l),qs(!n||n>0,"The aspect(%s) must be greater than zero.",n);var P=Za(o)?_:o,R=Za(l)?D:l;n&&n>0&&(P?R=P/n:R&&(P=R*n),h&&R>h&&(R=h)),qs(P>0||R>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,P,R,o,l,c,f,n);var F=!Array.isArray(d)&&Ks(d.type).endsWith("Chart");return U.Children.map(d,function(O){return U.isValidElement(O)?j.cloneElement(O,ig({width:P,height:R},F?{style:ig({height:"100%",width:"100%",maxHeight:R,maxWidth:P},O.props.style)}:{})):O})},[n,d,l,h,f,c,k,o]);return U.createElement("div",{id:g?"".concat(g):void 0,className:Qe("recharts-responsive-container",y),style:ig(ig({},b),{},{width:o,height:l,minWidth:c,minHeight:f,maxHeight:h}),ref:w},A)}),mj=function(e){return null};mj.displayName="Cell";function id(t){"@babel/helpers - typeof";return id=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},id(t)}function GO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function KS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GO(Object(n),!0).forEach(function(r){Zle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zle(t,e,n){return e=Qle(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qle(t){var e=Jle(t,"string");return id(e)=="symbol"?e:e+""}function Jle(t,e){if(id(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(id(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var su={widthCache:{},cacheCount:0},eue=2e3,tue={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},HO="recharts_measurement_span";function nue(t){var e=KS({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var Ch=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Xs.isSsr)return{width:0,height:0};var r=nue(n),i=JSON.stringify({text:e,copyStyle:r});if(su.widthCache[i])return su.widthCache[i];try{var s=document.getElementById(HO);s||(s=document.createElement("span"),s.setAttribute("id",HO),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var o=KS(KS({},tue),r);Object.assign(s.style,o),s.textContent="".concat(e);var a=s.getBoundingClientRect(),l={width:a.width,height:a.height};return su.widthCache[i]=l,++su.cacheCount>eue&&(su.cacheCount=0,su.widthCache={}),l}catch{return{width:0,height:0}}},rue=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function sd(t){"@babel/helpers - typeof";return sd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sd(t)}function jy(t,e){return aue(t)||oue(t,e)||sue(t,e)||iue()}function iue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sue(t,e){if(t){if(typeof t=="string")return KO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return KO(t,e)}}function KO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function oue(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function aue(t){if(Array.isArray(t))return t}function lue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,cue(r.key),r)}}function uue(t,e,n){return e&&qO(t.prototype,e),n&&qO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function cue(t){var e=fue(t,"string");return sd(e)=="symbol"?e:e+""}function fue(t,e){if(sd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(sd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var XO=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,YO=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,hue=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,due=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,gj={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},pue=Object.keys(gj),Eu="NaN";function mue(t,e){return t*gj[e]}var sg=function(){function t(e,n){lue(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!hue.test(n)&&(this.num=NaN,this.unit=""),pue.includes(n)&&(this.num=mue(e,n),this.unit="px")}return uue(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=due.exec(n))!==null&&r!==void 0?r:[],s=jy(i,3),o=s[1],a=s[2];return new t(parseFloat(o),a??"")}}])}();function yj(t){if(t.includes(Eu))return Eu;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=XO.exec(e))!==null&&n!==void 0?n:[],i=jy(r,4),s=i[1],o=i[2],a=i[3],l=sg.parse(s??""),u=sg.parse(a??""),c=o==="*"?l.multiply(u):l.divide(u);if(c.isNaN())return Eu;e=e.replace(XO,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,h=(f=YO.exec(e))!==null&&f!==void 0?f:[],d=jy(h,4),p=d[1],m=d[2],g=d[3],y=sg.parse(p??""),v=sg.parse(g??""),x=m==="+"?y.add(v):y.subtract(v);if(x.isNaN())return Eu;e=e.replace(YO,x.toString())}return e}var ZO=/\(([^()]*)\)/;function gue(t){for(var e=t;e.includes("(");){var n=ZO.exec(e),r=jy(n,2),i=r[1];e=e.replace(ZO,yj(i))}return e}function yue(t){var e=t.replace(/\s+/g,"");return e=gue(e),e=yj(e),e}function vue(t){try{return yue(t)}catch{return Eu}}function _1(t){var e=vue(t.slice(5,-1));return e===Eu?"":e}var xue=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],bue=["dx","dy","angle","className","breakAll"];function qS(){return qS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qS.apply(this,arguments)}function QO(t,e){if(t==null)return{};var n=wue(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function wue(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function JO(t,e){return kue(t)||$ue(t,e)||Cue(t,e)||Sue()}function Sue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cue(t,e){if(t){if(typeof t=="string")return eP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eP(t,e)}}function eP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function $ue(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function kue(t){if(Array.isArray(t))return t}var vj=/[ \f\n\r\t\v\u2028\u2029]+/,xj=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var s=[];Ve(n)||(r?s=n.toString().split(""):s=n.toString().split(vj));var o=s.map(function(l){return{word:l,width:Ch(l,i).width}}),a=r?0:Ch(" ",i).width;return{wordsWithComputedWidth:o,spaceWidth:a}}catch{return null}},Iue=function(e,n,r,i,s){var o=e.maxLines,a=e.children,l=e.style,u=e.breakAll,c=he(o),f=a,h=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return P.reduce(function(R,F){var O=F.word,M=F.width,V=R[R.length-1];if(V&&(i==null||s||V.width+M+r<Number(i)))V.words.push(O),V.width+=M+r;else{var q={words:[O],width:M};R.push(q)}return R},[])},d=h(n),p=function(P){return P.reduce(function(R,F){return R.width>F.width?R:F})};if(!c)return d;for(var m="…",g=function(P){var R=f.slice(0,P),F=xj({breakAll:u,style:l,children:R+m}).wordsWithComputedWidth,O=h(F),M=O.length>o||p(O).width>Number(i);return[M,O]},y=0,v=f.length-1,x=0,b;y<=v&&x<=f.length-1;){var w=Math.floor((y+v)/2),S=w-1,C=g(S),$=JO(C,2),k=$[0],I=$[1],T=g(w),A=JO(T,1),_=A[0];if(!k&&!_&&(y=w+1),k&&_&&(v=w-1),!k&&_){b=I;break}x++}return b||d},tP=function(e){var n=Ve(e)?[]:e.toString().split(vj);return[{words:n}]},Tue=function(e){var n=e.width,r=e.scaleToFit,i=e.children,s=e.style,o=e.breakAll,a=e.maxLines;if((n||r)&&!Xs.isSsr){var l,u,c=xj({breakAll:o,children:i,style:s});if(c){var f=c.wordsWithComputedWidth,h=c.spaceWidth;l=f,u=h}else return tP(i);return Iue({breakAll:o,children:i,maxLines:a,style:s},l,u,n,r)}return tP(i)},nP="#808080",zy=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,s=i===void 0?0:i,o=e.lineHeight,a=o===void 0?"1em":o,l=e.capHeight,u=l===void 0?"0.71em":l,c=e.scaleToFit,f=c===void 0?!1:c,h=e.textAnchor,d=h===void 0?"start":h,p=e.verticalAnchor,m=p===void 0?"end":p,g=e.fill,y=g===void 0?nP:g,v=QO(e,xue),x=j.useMemo(function(){return Tue({breakAll:v.breakAll,children:v.children,maxLines:v.maxLines,scaleToFit:f,style:v.style,width:v.width})},[v.breakAll,v.children,v.maxLines,f,v.style,v.width]),b=v.dx,w=v.dy,S=v.angle,C=v.className,$=v.breakAll,k=QO(v,bue);if(!pn(r)||!pn(s))return null;var I=r+(he(b)?b:0),T=s+(he(w)?w:0),A;switch(m){case"start":A=_1("calc(".concat(u,")"));break;case"middle":A=_1("calc(".concat((x.length-1)/2," * -").concat(a," + (").concat(u," / 2))"));break;default:A=_1("calc(".concat(x.length-1," * -").concat(a,")"));break}var _=[];if(f){var D=x[0].width,P=v.width;_.push("scale(".concat((he(P)?P/D:1)/D,")"))}return S&&_.push("rotate(".concat(S,", ").concat(I,", ").concat(T,")")),_.length&&(k.transform=_.join(" ")),U.createElement("text",qS({},We(k,!0),{x:I,y:T,className:Qe("recharts-text",C),textAnchor:d,fill:y.includes("url")?nP:y}),x.map(function(R,F){var O=R.words.join($?"":" ");return U.createElement("tspan",{x:I,dy:F===0?A:a,key:"".concat(O,"-").concat(F)},O)}))};function Zo(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Eue(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function dI(t){let e,n,r;t.length!==2?(e=Zo,n=(a,l)=>Zo(t(a),l),r=(a,l)=>t(a)-l):(e=t===Zo||t===Eue?t:Nue,n=t,r=t);function i(a,l,u=0,c=a.length){if(u<c){if(e(l,l)!==0)return c;do{const f=u+c>>>1;n(a[f],l)<0?u=f+1:c=f}while(u<c)}return u}function s(a,l,u=0,c=a.length){if(u<c){if(e(l,l)!==0)return c;do{const f=u+c>>>1;n(a[f],l)<=0?u=f+1:c=f}while(u<c)}return u}function o(a,l,u=0,c=a.length){const f=i(a,l,u,c-1);return f>u&&r(a[f-1],l)>-r(a[f],l)?f-1:f}return{left:i,center:o,right:s}}function Nue(){return 0}function bj(t){return t===null?NaN:+t}function*Aue(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const Oue=dI(Zo),lp=Oue.right;dI(bj).center;class rP extends Map{constructor(e,n=Due){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(iP(this,e))}has(e){return super.has(iP(this,e))}set(e,n){return super.set(Pue(this,e),n)}delete(e){return super.delete(_ue(this,e))}}function iP({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Pue({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function _ue({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Due(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Rue(t=Zo){if(t===Zo)return wj;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function wj(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Mue=Math.sqrt(50),Fue=Math.sqrt(10),Lue=Math.sqrt(2);function Vy(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=Mue?10:s>=Fue?5:s>=Lue?2:1;let a,l,u;return i<0?(u=Math.pow(10,-i)/o,a=Math.round(t*u),l=Math.round(e*u),a/u<t&&++a,l/u>e&&--l,u=-u):(u=Math.pow(10,i)*o,a=Math.round(t/u),l=Math.round(e/u),a*u<t&&++a,l*u>e&&--l),l<a&&.5<=n&&n<2?Vy(t,e,n*2):[a,l,u]}function XS(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,o]=r?Vy(e,t,n):Vy(t,e,n);if(!(s>=i))return[];const a=s-i+1,l=new Array(a);if(r)if(o<0)for(let u=0;u<a;++u)l[u]=(s-u)/-o;else for(let u=0;u<a;++u)l[u]=(s-u)*o;else if(o<0)for(let u=0;u<a;++u)l[u]=(i+u)/-o;else for(let u=0;u<a;++u)l[u]=(i+u)*o;return l}function YS(t,e,n){return e=+e,t=+t,n=+n,Vy(t,e,n)[2]}function ZS(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?YS(e,t,n):YS(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function sP(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function oP(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function Sj(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?wj:Rue(i);r>n;){if(r-n>600){const l=r-n+1,u=e-n+1,c=Math.log(l),f=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*f*(l-f)/l)*(u-l/2<0?-1:1),d=Math.max(n,Math.floor(e-u*f/l+h)),p=Math.min(r,Math.floor(e+(l-u)*f/l+h));Sj(t,e,d,p,i)}const s=t[e];let o=n,a=r;for(jf(t,n,e),i(t[r],s)>0&&jf(t,n,r);o<a;){for(jf(t,o,a),++o,--a;i(t[o],s)<0;)++o;for(;i(t[a],s)>0;)--a}i(t[n],s)===0?jf(t,n,a):(++a,jf(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}return t}function jf(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Bue(t,e,n){if(t=Float64Array.from(Aue(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return oP(t);if(e>=1)return sP(t);var r,i=(r-1)*e,s=Math.floor(i),o=sP(Sj(t,s).subarray(0,s+1)),a=oP(t.subarray(s+1));return o+(a-o)*(i-s)}}function jue(t,e,n=bj){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,s=Math.floor(i),o=+n(t[s],s,t),a=+n(t[s+1],s+1,t);return o+(a-o)*(i-s)}}function zue(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function ki(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function vo(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const QS=Symbol("implicit");function pI(){var t=new rP,e=[],n=[],r=QS;function i(s){let o=t.get(s);if(o===void 0){if(r!==QS)return r;t.set(s,o=e.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new rP;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return pI(e,n).unknown(r)},ki.apply(i,arguments),i}function od(){var t=pI().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,s,o,a=!1,l=0,u=0,c=.5;delete t.unknown;function f(){var h=e().length,d=i<r,p=d?i:r,m=d?r:i;s=(m-p)/Math.max(1,h-l+u*2),a&&(s=Math.floor(s)),p+=(m-p-s*(h-l))*c,o=s*(1-l),a&&(p=Math.round(p),o=Math.round(o));var g=zue(h).map(function(y){return p+s*y});return n(d?g.reverse():g)}return t.domain=function(h){return arguments.length?(e(h),f()):e()},t.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,f()):[r,i]},t.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,a=!0,f()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(h){return arguments.length?(a=!!h,f()):a},t.padding=function(h){return arguments.length?(l=Math.min(1,u=+h),f()):l},t.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),f()):l},t.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},t.align=function(h){return arguments.length?(c=Math.max(0,Math.min(1,h)),f()):c},t.copy=function(){return od(e(),[r,i]).round(a).paddingInner(l).paddingOuter(u).align(c)},ki.apply(f(),arguments)}function Cj(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Cj(e())},t}function $h(){return Cj(od.apply(null,arguments).paddingInner(1))}function mI(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function $j(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function up(){}var ad=.7,Wy=1/ad,Gu="\\s*([+-]?\\d+)\\s*",ld="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",vs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Vue=/^#([0-9a-f]{3,8})$/,Wue=new RegExp(`^rgb\\(${Gu},${Gu},${Gu}\\)$`),Uue=new RegExp(`^rgb\\(${vs},${vs},${vs}\\)$`),Gue=new RegExp(`^rgba\\(${Gu},${Gu},${Gu},${ld}\\)$`),Hue=new RegExp(`^rgba\\(${vs},${vs},${vs},${ld}\\)$`),Kue=new RegExp(`^hsl\\(${ld},${vs},${vs}\\)$`),que=new RegExp(`^hsla\\(${ld},${vs},${vs},${ld}\\)$`),aP={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};mI(up,ud,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:lP,formatHex:lP,formatHex8:Xue,formatHsl:Yue,formatRgb:uP,toString:uP});function lP(){return this.rgb().formatHex()}function Xue(){return this.rgb().formatHex8()}function Yue(){return kj(this).formatHsl()}function uP(){return this.rgb().formatRgb()}function ud(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Vue.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?cP(e):n===3?new wr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?og(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?og(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Wue.exec(t))?new wr(e[1],e[2],e[3],1):(e=Uue.exec(t))?new wr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Gue.exec(t))?og(e[1],e[2],e[3],e[4]):(e=Hue.exec(t))?og(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Kue.exec(t))?dP(e[1],e[2]/100,e[3]/100,1):(e=que.exec(t))?dP(e[1],e[2]/100,e[3]/100,e[4]):aP.hasOwnProperty(t)?cP(aP[t]):t==="transparent"?new wr(NaN,NaN,NaN,0):null}function cP(t){return new wr(t>>16&255,t>>8&255,t&255,1)}function og(t,e,n,r){return r<=0&&(t=e=n=NaN),new wr(t,e,n,r)}function Zue(t){return t instanceof up||(t=ud(t)),t?(t=t.rgb(),new wr(t.r,t.g,t.b,t.opacity)):new wr}function JS(t,e,n,r){return arguments.length===1?Zue(t):new wr(t,e,n,r??1)}function wr(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}mI(wr,JS,$j(up,{brighter(t){return t=t==null?Wy:Math.pow(Wy,t),new wr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ad:Math.pow(ad,t),new wr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new wr(ll(this.r),ll(this.g),ll(this.b),Uy(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fP,formatHex:fP,formatHex8:Que,formatRgb:hP,toString:hP}));function fP(){return`#${Qa(this.r)}${Qa(this.g)}${Qa(this.b)}`}function Que(){return`#${Qa(this.r)}${Qa(this.g)}${Qa(this.b)}${Qa((isNaN(this.opacity)?1:this.opacity)*255)}`}function hP(){const t=Uy(this.opacity);return`${t===1?"rgb(":"rgba("}${ll(this.r)}, ${ll(this.g)}, ${ll(this.b)}${t===1?")":`, ${t})`}`}function Uy(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ll(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Qa(t){return t=ll(t),(t<16?"0":"")+t.toString(16)}function dP(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ui(t,e,n,r)}function kj(t){if(t instanceof Ui)return new Ui(t.h,t.s,t.l,t.opacity);if(t instanceof up||(t=ud(t)),!t)return new Ui;if(t instanceof Ui)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(e===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-e)/a+2:o=(e-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new Ui(o,a,l,t.opacity)}function Jue(t,e,n,r){return arguments.length===1?kj(t):new Ui(t,e,n,r??1)}function Ui(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}mI(Ui,Jue,$j(up,{brighter(t){return t=t==null?Wy:Math.pow(Wy,t),new Ui(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ad:Math.pow(ad,t),new Ui(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new wr(D1(t>=240?t-240:t+120,i,r),D1(t,i,r),D1(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Ui(pP(this.h),ag(this.s),ag(this.l),Uy(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Uy(this.opacity);return`${t===1?"hsl(":"hsla("}${pP(this.h)}, ${ag(this.s)*100}%, ${ag(this.l)*100}%${t===1?")":`, ${t})`}`}}));function pP(t){return t=(t||0)%360,t<0?t+360:t}function ag(t){return Math.max(0,Math.min(1,t||0))}function D1(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const gI=t=>()=>t;function ece(t,e){return function(n){return t+n*e}}function tce(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function nce(t){return(t=+t)==1?Ij:function(e,n){return n-e?tce(e,n,t):gI(isNaN(e)?n:e)}}function Ij(t,e){var n=e-t;return n?ece(t,n):gI(isNaN(t)?e:t)}const mP=function t(e){var n=nce(e);function r(i,s){var o=n((i=JS(i)).r,(s=JS(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),u=Ij(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=t,r}(1);function rce(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function ice(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function sce(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=nf(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function oce(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Gy(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function ace(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=nf(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var eC=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,R1=new RegExp(eC.source,"g");function lce(t){return function(){return t}}function uce(t){return function(e){return t(e)+""}}function cce(t,e){var n=eC.lastIndex=R1.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(t=t+"",e=e+"";(r=eC.exec(t))&&(i=R1.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:Gy(r,i)})),n=R1.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?uce(l[0].x):lce(e):(e=l.length,function(u){for(var c=0,f;c<e;++c)a[(f=l[c]).i]=f.x(u);return a.join("")})}function nf(t,e){var n=typeof e,r;return e==null||n==="boolean"?gI(e):(n==="number"?Gy:n==="string"?(r=ud(e))?(e=r,mP):cce:e instanceof ud?mP:e instanceof Date?oce:ice(e)?rce:Array.isArray(e)?sce:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?ace:Gy)(t,e)}function yI(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function fce(t,e){e===void 0&&(e=t,t=nf);for(var n=0,r=e.length-1,i=e[0],s=new Array(r<0?0:r);n<r;)s[n]=t(i,i=e[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function hce(t){return function(){return t}}function Hy(t){return+t}var gP=[0,1];function lr(t){return t}function tC(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:hce(isNaN(e)?NaN:.5)}function dce(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function pce(t,e,n){var r=t[0],i=t[1],s=e[0],o=e[1];return i<r?(r=tC(i,r),s=n(o,s)):(r=tC(r,i),s=n(s,o)),function(a){return s(r(a))}}function mce(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=tC(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(a){var l=lp(t,a,1,r)-1;return s[l](i[l](a))}}function cp(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function K0(){var t=gP,e=gP,n=nf,r,i,s,o=lr,a,l,u;function c(){var h=Math.min(t.length,e.length);return o!==lr&&(o=dce(t[0],t[h-1])),a=h>2?mce:pce,l=u=null,f}function f(h){return h==null||isNaN(h=+h)?s:(l||(l=a(t.map(r),e,n)))(r(o(h)))}return f.invert=function(h){return o(i((u||(u=a(e,t.map(r),Gy)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,Hy),c()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),c()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),n=yI,c()},f.clamp=function(h){return arguments.length?(o=h?!0:lr,c()):o!==lr},f.interpolate=function(h){return arguments.length?(n=h,c()):n},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,d){return r=h,i=d,c()}}function vI(){return K0()(lr,lr)}function gce(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Ky(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function fc(t){return t=Ky(Math.abs(t)),t?t[1]:NaN}function yce(t,e){return function(n,r){for(var i=n.length,s=[],o=0,a=t[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=t[o=(o+1)%t.length];return s.reverse().join(e)}}function vce(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var xce=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function cd(t){if(!(e=xce.exec(t)))throw new Error("invalid format: "+t);var e;return new xI({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}cd.prototype=xI.prototype;function xI(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}xI.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function bce(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Tj;function wce(t,e){var n=Ky(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(Tj=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Ky(t,Math.max(0,e+s-1))[0]}function yP(t,e){var n=Ky(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const vP={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:gce,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>yP(t*100,e),r:yP,s:wce,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function xP(t){return t}var bP=Array.prototype.map,wP=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Sce(t){var e=t.grouping===void 0||t.thousands===void 0?xP:yce(bP.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?xP:vce(bP.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(f){f=cd(f);var h=f.fill,d=f.align,p=f.sign,m=f.symbol,g=f.zero,y=f.width,v=f.comma,x=f.precision,b=f.trim,w=f.type;w==="n"?(v=!0,w="g"):vP[w]||(x===void 0&&(x=12),b=!0,w="g"),(g||h==="0"&&d==="=")&&(g=!0,h="0",d="=");var S=m==="$"?n:m==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",C=m==="$"?r:/[%p]/.test(w)?o:"",$=vP[w],k=/[defgprs%]/.test(w);x=x===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function I(T){var A=S,_=C,D,P,R;if(w==="c")_=$(T)+_,T="";else{T=+T;var F=T<0||1/T<0;if(T=isNaN(T)?l:$(Math.abs(T),x),b&&(T=bce(T)),F&&+T==0&&p!=="+"&&(F=!1),A=(F?p==="("?p:a:p==="-"||p==="("?"":p)+A,_=(w==="s"?wP[8+Tj/3]:"")+_+(F&&p==="("?")":""),k){for(D=-1,P=T.length;++D<P;)if(R=T.charCodeAt(D),48>R||R>57){_=(R===46?i+T.slice(D+1):T.slice(D))+_,T=T.slice(0,D);break}}}v&&!g&&(T=e(T,1/0));var O=A.length+T.length+_.length,M=O<y?new Array(y-O+1).join(h):"";switch(v&&g&&(T=e(M+T,M.length?y-_.length:1/0),M=""),d){case"<":T=A+T+_+M;break;case"=":T=A+M+T+_;break;case"^":T=M.slice(0,O=M.length>>1)+A+T+_+M.slice(O);break;default:T=M+A+T+_;break}return s(T)}return I.toString=function(){return f+""},I}function c(f,h){var d=u((f=cd(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(fc(h)/3)))*3,m=Math.pow(10,-p),g=wP[8+p/3];return function(y){return d(m*y)+g}}return{format:u,formatPrefix:c}}var lg,bI,Ej;Cce({thousands:",",grouping:[3],currency:["$",""]});function Cce(t){return lg=Sce(t),bI=lg.format,Ej=lg.formatPrefix,lg}function $ce(t){return Math.max(0,-fc(Math.abs(t)))}function kce(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(fc(e)/3)))*3-fc(Math.abs(t)))}function Ice(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,fc(e)-fc(t))+1}function Nj(t,e,n,r){var i=ZS(t,e,n),s;switch(r=cd(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=kce(i,o))&&(r.precision=s),Ej(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=Ice(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=$ce(i))&&(r.precision=s-(r.type==="%")*2);break}}return bI(r)}function xa(t){var e=t.domain;return t.ticks=function(n){var r=e();return XS(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return Nj(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,o=r[i],a=r[s],l,u,c=10;for(a<o&&(u=o,o=a,a=u,u=i,i=s,s=u);c-- >0;){if(u=YS(o,a,n),u===l)return r[i]=o,r[s]=a,e(r);if(u>0)o=Math.floor(o/u)*u,a=Math.ceil(a/u)*u;else if(u<0)o=Math.ceil(o*u)/u,a=Math.floor(a*u)/u;else break;l=u}return t},t}function qy(){var t=vI();return t.copy=function(){return cp(t,qy())},ki.apply(t,arguments),xa(t)}function Aj(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,Hy),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return Aj(t).unknown(e)},t=arguments.length?Array.from(t,Hy):[0,1],xa(n)}function Oj(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],s=t[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),t[n]=e.floor(i),t[r]=e.ceil(s),t}function SP(t){return Math.log(t)}function CP(t){return Math.exp(t)}function Tce(t){return-Math.log(-t)}function Ece(t){return-Math.exp(-t)}function Nce(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Ace(t){return t===10?Nce:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Oce(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function $P(t){return(e,n)=>-t(-e,n)}function wI(t){const e=t(SP,CP),n=e.domain;let r=10,i,s;function o(){return i=Oce(r),s=Ace(r),n()[0]<0?(i=$P(i),s=$P(s),t(Tce,Ece)):t(SP,CP),e}return e.base=function(a){return arguments.length?(r=+a,o()):r},e.domain=function(a){return arguments.length?(n(a),o()):n()},e.ticks=a=>{const l=n();let u=l[0],c=l[l.length-1];const f=c<u;f&&([u,c]=[c,u]);let h=i(u),d=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&d-h<g){if(h=Math.floor(h),d=Math.ceil(d),u>0){for(;h<=d;++h)for(p=1;p<r;++p)if(m=h<0?p/s(-h):p*s(h),!(m<u)){if(m>c)break;y.push(m)}}else for(;h<=d;++h)for(p=r-1;p>=1;--p)if(m=h>0?p/s(-h):p*s(h),!(m<u)){if(m>c)break;y.push(m)}y.length*2<g&&(y=XS(u,c,g))}else y=XS(h,d,Math.min(d-h,g)).map(s);return f?y.reverse():y},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=cd(l)).precision==null&&(l.trim=!0),l=bI(l)),a===1/0)return l;const u=Math.max(1,r*a/e.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=u?l(c):""}},e.nice=()=>n(Oj(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),e}function Pj(){const t=wI(K0()).domain([1,10]);return t.copy=()=>cp(t,Pj()).base(t.base()),ki.apply(t,arguments),t}function kP(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function IP(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function SI(t){var e=1,n=t(kP(e),IP(e));return n.constant=function(r){return arguments.length?t(kP(e=+r),IP(e)):e},xa(n)}function _j(){var t=SI(K0());return t.copy=function(){return cp(t,_j()).constant(t.constant())},ki.apply(t,arguments)}function TP(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Pce(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function _ce(t){return t<0?-t*t:t*t}function CI(t){var e=t(lr,lr),n=1;function r(){return n===1?t(lr,lr):n===.5?t(Pce,_ce):t(TP(n),TP(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},xa(e)}function $I(){var t=CI(K0());return t.copy=function(){return cp(t,$I()).exponent(t.exponent())},ki.apply(t,arguments),t}function Dce(){return $I.apply(null,arguments).exponent(.5)}function EP(t){return Math.sign(t)*t*t}function Rce(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Dj(){var t=vI(),e=[0,1],n=!1,r;function i(s){var o=Rce(t(s));return isNaN(o)?r:n?Math.round(o):o}return i.invert=function(s){return t.invert(EP(s))},i.domain=function(s){return arguments.length?(t.domain(s),i):t.domain()},i.range=function(s){return arguments.length?(t.range((e=Array.from(s,Hy)).map(EP)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(t.clamp(s),i):t.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Dj(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},ki.apply(i,arguments),xa(i)}function Rj(){var t=[],e=[],n=[],r;function i(){var o=0,a=Math.max(1,e.length);for(n=new Array(a-1);++o<a;)n[o-1]=jue(t,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:e[lp(n,o)]}return s.invertExtent=function(o){var a=e.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:t[0],a<n.length?n[a]:t[t.length-1]]},s.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let a of o)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Zo),i()},s.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return Rj().domain(t).range(e).unknown(r)},ki.apply(s,arguments)}function Mj(){var t=0,e=1,n=1,r=[.5],i=[0,1],s;function o(l){return l!=null&&l<=l?i[lp(r,l,0,n)]:s}function a(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return o}return o.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,a()):[t,e]},o.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,a()):i.slice()},o.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},o.unknown=function(l){return arguments.length&&(s=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return Mj().domain([t,e]).range(i).unknown(s)},ki.apply(xa(o),arguments)}function Fj(){var t=[.5],e=[0,1],n,r=1;function i(s){return s!=null&&s<=s?e[lp(t,s,0,r)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var o=e.indexOf(s);return[t[o-1],t[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return Fj().domain(t).range(e).unknown(n)},ki.apply(i,arguments)}const M1=new Date,F1=new Date;function gn(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const l=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let u;do l.push(u=new Date(+s)),e(s,a),t(s);while(u<s&&s<o);return l},i.filter=s=>gn(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!s(o););else for(;--a>=0;)for(;e(o,1),!s(o););}),n&&(i.count=(s,o)=>(M1.setTime(+s),F1.setTime(+o),t(M1),t(F1),Math.floor(n(M1,F1))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const Xy=gn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Xy.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?gn(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Xy);Xy.range;const Vs=1e3,ci=Vs*60,Ws=ci*60,so=Ws*24,kI=so*7,NP=so*30,L1=so*365,Ja=gn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Vs)},(t,e)=>(e-t)/Vs,t=>t.getUTCSeconds());Ja.range;const II=gn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Vs)},(t,e)=>{t.setTime(+t+e*ci)},(t,e)=>(e-t)/ci,t=>t.getMinutes());II.range;const TI=gn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*ci)},(t,e)=>(e-t)/ci,t=>t.getUTCMinutes());TI.range;const EI=gn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Vs-t.getMinutes()*ci)},(t,e)=>{t.setTime(+t+e*Ws)},(t,e)=>(e-t)/Ws,t=>t.getHours());EI.range;const NI=gn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Ws)},(t,e)=>(e-t)/Ws,t=>t.getUTCHours());NI.range;const fp=gn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ci)/so,t=>t.getDate()-1);fp.range;const q0=gn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/so,t=>t.getUTCDate()-1);q0.range;const Lj=gn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/so,t=>Math.floor(t/so));Lj.range;function Vl(t){return gn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*ci)/kI)}const X0=Vl(0),Yy=Vl(1),Mce=Vl(2),Fce=Vl(3),hc=Vl(4),Lce=Vl(5),Bce=Vl(6);X0.range;Yy.range;Mce.range;Fce.range;hc.range;Lce.range;Bce.range;function Wl(t){return gn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/kI)}const Y0=Wl(0),Zy=Wl(1),jce=Wl(2),zce=Wl(3),dc=Wl(4),Vce=Wl(5),Wce=Wl(6);Y0.range;Zy.range;jce.range;zce.range;dc.range;Vce.range;Wce.range;const AI=gn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());AI.range;const OI=gn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());OI.range;const oo=gn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());oo.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:gn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});oo.range;const ao=gn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());ao.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:gn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});ao.range;function Bj(t,e,n,r,i,s){const o=[[Ja,1,Vs],[Ja,5,5*Vs],[Ja,15,15*Vs],[Ja,30,30*Vs],[s,1,ci],[s,5,5*ci],[s,15,15*ci],[s,30,30*ci],[i,1,Ws],[i,3,3*Ws],[i,6,6*Ws],[i,12,12*Ws],[r,1,so],[r,2,2*so],[n,1,kI],[e,1,NP],[e,3,3*NP],[t,1,L1]];function a(u,c,f){const h=c<u;h&&([u,c]=[c,u]);const d=f&&typeof f.range=="function"?f:l(u,c,f),p=d?d.range(u,+c+1):[];return h?p.reverse():p}function l(u,c,f){const h=Math.abs(c-u)/f,d=dI(([,,g])=>g).right(o,h);if(d===o.length)return t.every(ZS(u/L1,c/L1,f));if(d===0)return Xy.every(Math.max(ZS(u,c,f),1));const[p,m]=o[h/o[d-1][2]<o[d][2]/h?d-1:d];return p.every(m)}return[a,l]}const[Uce,Gce]=Bj(ao,OI,Y0,Lj,NI,TI),[Hce,Kce]=Bj(oo,AI,X0,fp,EI,II);function B1(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function j1(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function zf(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function qce(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,o=t.shortDays,a=t.months,l=t.shortMonths,u=Vf(i),c=Wf(i),f=Vf(s),h=Wf(s),d=Vf(o),p=Wf(o),m=Vf(a),g=Wf(a),y=Vf(l),v=Wf(l),x={a:F,A:O,b:M,B:V,c:null,d:RP,e:RP,f:yfe,g:Tfe,G:Nfe,H:pfe,I:mfe,j:gfe,L:jj,m:vfe,M:xfe,p:q,q:K,Q:LP,s:BP,S:bfe,u:wfe,U:Sfe,V:Cfe,w:$fe,W:kfe,x:null,X:null,y:Ife,Y:Efe,Z:Afe,"%":FP},b={a:Z,A:re,b:ie,B:le,c:null,d:MP,e:MP,f:Dfe,g:Ufe,G:Hfe,H:Ofe,I:Pfe,j:_fe,L:Vj,m:Rfe,M:Mfe,p:ge,q:ye,Q:LP,s:BP,S:Ffe,u:Lfe,U:Bfe,V:jfe,w:zfe,W:Vfe,x:null,X:null,y:Wfe,Y:Gfe,Z:Kfe,"%":FP},w={a:I,A:T,b:A,B:_,c:D,d:_P,e:_P,f:cfe,g:PP,G:OP,H:DP,I:DP,j:ofe,L:ufe,m:sfe,M:afe,p:k,q:ife,Q:hfe,s:dfe,S:lfe,u:Jce,U:efe,V:tfe,w:Qce,W:nfe,x:P,X:R,y:PP,Y:OP,Z:rfe,"%":ffe};x.x=S(n,x),x.X=S(r,x),x.c=S(e,x),b.x=S(n,b),b.X=S(r,b),b.c=S(e,b);function S(ne,ue){return function(ce){var ee=[],Te=-1,Ce=0,Pe=ne.length,Oe,Le,Ke;for(ce instanceof Date||(ce=new Date(+ce));++Te<Pe;)ne.charCodeAt(Te)===37&&(ee.push(ne.slice(Ce,Te)),(Le=AP[Oe=ne.charAt(++Te)])!=null?Oe=ne.charAt(++Te):Le=Oe==="e"?" ":"0",(Ke=ue[Oe])&&(Oe=Ke(ce,Le)),ee.push(Oe),Ce=Te+1);return ee.push(ne.slice(Ce,Te)),ee.join("")}}function C(ne,ue){return function(ce){var ee=zf(1900,void 0,1),Te=$(ee,ne,ce+="",0),Ce,Pe;if(Te!=ce.length)return null;if("Q"in ee)return new Date(ee.Q);if("s"in ee)return new Date(ee.s*1e3+("L"in ee?ee.L:0));if(ue&&!("Z"in ee)&&(ee.Z=0),"p"in ee&&(ee.H=ee.H%12+ee.p*12),ee.m===void 0&&(ee.m="q"in ee?ee.q:0),"V"in ee){if(ee.V<1||ee.V>53)return null;"w"in ee||(ee.w=1),"Z"in ee?(Ce=j1(zf(ee.y,0,1)),Pe=Ce.getUTCDay(),Ce=Pe>4||Pe===0?Zy.ceil(Ce):Zy(Ce),Ce=q0.offset(Ce,(ee.V-1)*7),ee.y=Ce.getUTCFullYear(),ee.m=Ce.getUTCMonth(),ee.d=Ce.getUTCDate()+(ee.w+6)%7):(Ce=B1(zf(ee.y,0,1)),Pe=Ce.getDay(),Ce=Pe>4||Pe===0?Yy.ceil(Ce):Yy(Ce),Ce=fp.offset(Ce,(ee.V-1)*7),ee.y=Ce.getFullYear(),ee.m=Ce.getMonth(),ee.d=Ce.getDate()+(ee.w+6)%7)}else("W"in ee||"U"in ee)&&("w"in ee||(ee.w="u"in ee?ee.u%7:"W"in ee?1:0),Pe="Z"in ee?j1(zf(ee.y,0,1)).getUTCDay():B1(zf(ee.y,0,1)).getDay(),ee.m=0,ee.d="W"in ee?(ee.w+6)%7+ee.W*7-(Pe+5)%7:ee.w+ee.U*7-(Pe+6)%7);return"Z"in ee?(ee.H+=ee.Z/100|0,ee.M+=ee.Z%100,j1(ee)):B1(ee)}}function $(ne,ue,ce,ee){for(var Te=0,Ce=ue.length,Pe=ce.length,Oe,Le;Te<Ce;){if(ee>=Pe)return-1;if(Oe=ue.charCodeAt(Te++),Oe===37){if(Oe=ue.charAt(Te++),Le=w[Oe in AP?ue.charAt(Te++):Oe],!Le||(ee=Le(ne,ce,ee))<0)return-1}else if(Oe!=ce.charCodeAt(ee++))return-1}return ee}function k(ne,ue,ce){var ee=u.exec(ue.slice(ce));return ee?(ne.p=c.get(ee[0].toLowerCase()),ce+ee[0].length):-1}function I(ne,ue,ce){var ee=d.exec(ue.slice(ce));return ee?(ne.w=p.get(ee[0].toLowerCase()),ce+ee[0].length):-1}function T(ne,ue,ce){var ee=f.exec(ue.slice(ce));return ee?(ne.w=h.get(ee[0].toLowerCase()),ce+ee[0].length):-1}function A(ne,ue,ce){var ee=y.exec(ue.slice(ce));return ee?(ne.m=v.get(ee[0].toLowerCase()),ce+ee[0].length):-1}function _(ne,ue,ce){var ee=m.exec(ue.slice(ce));return ee?(ne.m=g.get(ee[0].toLowerCase()),ce+ee[0].length):-1}function D(ne,ue,ce){return $(ne,e,ue,ce)}function P(ne,ue,ce){return $(ne,n,ue,ce)}function R(ne,ue,ce){return $(ne,r,ue,ce)}function F(ne){return o[ne.getDay()]}function O(ne){return s[ne.getDay()]}function M(ne){return l[ne.getMonth()]}function V(ne){return a[ne.getMonth()]}function q(ne){return i[+(ne.getHours()>=12)]}function K(ne){return 1+~~(ne.getMonth()/3)}function Z(ne){return o[ne.getUTCDay()]}function re(ne){return s[ne.getUTCDay()]}function ie(ne){return l[ne.getUTCMonth()]}function le(ne){return a[ne.getUTCMonth()]}function ge(ne){return i[+(ne.getUTCHours()>=12)]}function ye(ne){return 1+~~(ne.getUTCMonth()/3)}return{format:function(ne){var ue=S(ne+="",x);return ue.toString=function(){return ne},ue},parse:function(ne){var ue=C(ne+="",!1);return ue.toString=function(){return ne},ue},utcFormat:function(ne){var ue=S(ne+="",b);return ue.toString=function(){return ne},ue},utcParse:function(ne){var ue=C(ne+="",!0);return ue.toString=function(){return ne},ue}}}var AP={"-":"",_:" ",0:"0"},Cn=/^\s*\d+/,Xce=/^%/,Yce=/[\\^$*+?|[\]().{}]/g;function Je(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function Zce(t){return t.replace(Yce,"\\$&")}function Vf(t){return new RegExp("^(?:"+t.map(Zce).join("|")+")","i")}function Wf(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Qce(t,e,n){var r=Cn.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Jce(t,e,n){var r=Cn.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function efe(t,e,n){var r=Cn.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function tfe(t,e,n){var r=Cn.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function nfe(t,e,n){var r=Cn.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function OP(t,e,n){var r=Cn.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function PP(t,e,n){var r=Cn.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function rfe(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function ife(t,e,n){var r=Cn.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function sfe(t,e,n){var r=Cn.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function _P(t,e,n){var r=Cn.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function ofe(t,e,n){var r=Cn.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function DP(t,e,n){var r=Cn.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function afe(t,e,n){var r=Cn.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function lfe(t,e,n){var r=Cn.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function ufe(t,e,n){var r=Cn.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function cfe(t,e,n){var r=Cn.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function ffe(t,e,n){var r=Xce.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function hfe(t,e,n){var r=Cn.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function dfe(t,e,n){var r=Cn.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function RP(t,e){return Je(t.getDate(),e,2)}function pfe(t,e){return Je(t.getHours(),e,2)}function mfe(t,e){return Je(t.getHours()%12||12,e,2)}function gfe(t,e){return Je(1+fp.count(oo(t),t),e,3)}function jj(t,e){return Je(t.getMilliseconds(),e,3)}function yfe(t,e){return jj(t,e)+"000"}function vfe(t,e){return Je(t.getMonth()+1,e,2)}function xfe(t,e){return Je(t.getMinutes(),e,2)}function bfe(t,e){return Je(t.getSeconds(),e,2)}function wfe(t){var e=t.getDay();return e===0?7:e}function Sfe(t,e){return Je(X0.count(oo(t)-1,t),e,2)}function zj(t){var e=t.getDay();return e>=4||e===0?hc(t):hc.ceil(t)}function Cfe(t,e){return t=zj(t),Je(hc.count(oo(t),t)+(oo(t).getDay()===4),e,2)}function $fe(t){return t.getDay()}function kfe(t,e){return Je(Yy.count(oo(t)-1,t),e,2)}function Ife(t,e){return Je(t.getFullYear()%100,e,2)}function Tfe(t,e){return t=zj(t),Je(t.getFullYear()%100,e,2)}function Efe(t,e){return Je(t.getFullYear()%1e4,e,4)}function Nfe(t,e){var n=t.getDay();return t=n>=4||n===0?hc(t):hc.ceil(t),Je(t.getFullYear()%1e4,e,4)}function Afe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Je(e/60|0,"0",2)+Je(e%60,"0",2)}function MP(t,e){return Je(t.getUTCDate(),e,2)}function Ofe(t,e){return Je(t.getUTCHours(),e,2)}function Pfe(t,e){return Je(t.getUTCHours()%12||12,e,2)}function _fe(t,e){return Je(1+q0.count(ao(t),t),e,3)}function Vj(t,e){return Je(t.getUTCMilliseconds(),e,3)}function Dfe(t,e){return Vj(t,e)+"000"}function Rfe(t,e){return Je(t.getUTCMonth()+1,e,2)}function Mfe(t,e){return Je(t.getUTCMinutes(),e,2)}function Ffe(t,e){return Je(t.getUTCSeconds(),e,2)}function Lfe(t){var e=t.getUTCDay();return e===0?7:e}function Bfe(t,e){return Je(Y0.count(ao(t)-1,t),e,2)}function Wj(t){var e=t.getUTCDay();return e>=4||e===0?dc(t):dc.ceil(t)}function jfe(t,e){return t=Wj(t),Je(dc.count(ao(t),t)+(ao(t).getUTCDay()===4),e,2)}function zfe(t){return t.getUTCDay()}function Vfe(t,e){return Je(Zy.count(ao(t)-1,t),e,2)}function Wfe(t,e){return Je(t.getUTCFullYear()%100,e,2)}function Ufe(t,e){return t=Wj(t),Je(t.getUTCFullYear()%100,e,2)}function Gfe(t,e){return Je(t.getUTCFullYear()%1e4,e,4)}function Hfe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?dc(t):dc.ceil(t),Je(t.getUTCFullYear()%1e4,e,4)}function Kfe(){return"+0000"}function FP(){return"%"}function LP(t){return+t}function BP(t){return Math.floor(+t/1e3)}var ou,Uj,Gj;qfe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function qfe(t){return ou=qce(t),Uj=ou.format,ou.parse,Gj=ou.utcFormat,ou.utcParse,ou}function Xfe(t){return new Date(t)}function Yfe(t){return t instanceof Date?+t:+new Date(+t)}function PI(t,e,n,r,i,s,o,a,l,u){var c=vI(),f=c.invert,h=c.domain,d=u(".%L"),p=u(":%S"),m=u("%I:%M"),g=u("%I %p"),y=u("%a %d"),v=u("%b %d"),x=u("%B"),b=u("%Y");function w(S){return(l(S)<S?d:a(S)<S?p:o(S)<S?m:s(S)<S?g:r(S)<S?i(S)<S?y:v:n(S)<S?x:b)(S)}return c.invert=function(S){return new Date(f(S))},c.domain=function(S){return arguments.length?h(Array.from(S,Yfe)):h().map(Xfe)},c.ticks=function(S){var C=h();return t(C[0],C[C.length-1],S??10)},c.tickFormat=function(S,C){return C==null?w:u(C)},c.nice=function(S){var C=h();return(!S||typeof S.range!="function")&&(S=e(C[0],C[C.length-1],S??10)),S?h(Oj(C,S)):c},c.copy=function(){return cp(c,PI(t,e,n,r,i,s,o,a,l,u))},c}function Zfe(){return ki.apply(PI(Hce,Kce,oo,AI,X0,fp,EI,II,Ja,Uj).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Qfe(){return ki.apply(PI(Uce,Gce,ao,OI,Y0,q0,NI,TI,Ja,Gj).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Z0(){var t=0,e=1,n,r,i,s,o=lr,a=!1,l;function u(f){return f==null||isNaN(f=+f)?l:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([t,e]=f,n=s(t=+t),r=s(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(f){return arguments.length?(a=!!f,u):a},u.interpolator=function(f){return arguments.length?(o=f,u):o};function c(f){return function(h){var d,p;return arguments.length?([d,p]=h,o=f(d,p),u):[o(0),o(1)]}}return u.range=c(nf),u.rangeRound=c(yI),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return s=f,n=f(t),r=f(e),i=n===r?0:1/(r-n),u}}function ba(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Hj(){var t=xa(Z0()(lr));return t.copy=function(){return ba(t,Hj())},vo.apply(t,arguments)}function Kj(){var t=wI(Z0()).domain([1,10]);return t.copy=function(){return ba(t,Kj()).base(t.base())},vo.apply(t,arguments)}function qj(){var t=SI(Z0());return t.copy=function(){return ba(t,qj()).constant(t.constant())},vo.apply(t,arguments)}function _I(){var t=CI(Z0());return t.copy=function(){return ba(t,_I()).exponent(t.exponent())},vo.apply(t,arguments)}function Jfe(){return _I.apply(null,arguments).exponent(.5)}function Xj(){var t=[],e=lr;function n(r){if(r!=null&&!isNaN(r=+r))return e((lp(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Zo),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>Bue(t,s/r))},n.copy=function(){return Xj(e).domain(t)},vo.apply(n,arguments)}function Q0(){var t=0,e=.5,n=1,r=1,i,s,o,a,l,u=lr,c,f=!1,h;function d(m){return isNaN(m=+m)?h:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:l),u(f?Math.max(0,Math.min(1,m)):m))}d.domain=function(m){return arguments.length?([t,e,n]=m,i=c(t=+t),s=c(e=+e),o=c(n=+n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,d):[t,e,n]},d.clamp=function(m){return arguments.length?(f=!!m,d):f},d.interpolator=function(m){return arguments.length?(u=m,d):u};function p(m){return function(g){var y,v,x;return arguments.length?([y,v,x]=g,u=fce(m,[y,v,x]),d):[u(0),u(.5),u(1)]}}return d.range=p(nf),d.rangeRound=p(yI),d.unknown=function(m){return arguments.length?(h=m,d):h},function(m){return c=m,i=m(t),s=m(e),o=m(n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,d}}function Yj(){var t=xa(Q0()(lr));return t.copy=function(){return ba(t,Yj())},vo.apply(t,arguments)}function Zj(){var t=wI(Q0()).domain([.1,1,10]);return t.copy=function(){return ba(t,Zj()).base(t.base())},vo.apply(t,arguments)}function Qj(){var t=SI(Q0());return t.copy=function(){return ba(t,Qj()).constant(t.constant())},vo.apply(t,arguments)}function DI(){var t=CI(Q0());return t.copy=function(){return ba(t,DI()).exponent(t.exponent())},vo.apply(t,arguments)}function ehe(){return DI.apply(null,arguments).exponent(.5)}const jP=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:od,scaleDiverging:Yj,scaleDivergingLog:Zj,scaleDivergingPow:DI,scaleDivergingSqrt:ehe,scaleDivergingSymlog:Qj,scaleIdentity:Aj,scaleImplicit:QS,scaleLinear:qy,scaleLog:Pj,scaleOrdinal:pI,scalePoint:$h,scalePow:$I,scaleQuantile:Rj,scaleQuantize:Mj,scaleRadial:Dj,scaleSequential:Hj,scaleSequentialLog:Kj,scaleSequentialPow:_I,scaleSequentialQuantile:Xj,scaleSequentialSqrt:Jfe,scaleSequentialSymlog:qj,scaleSqrt:Dce,scaleSymlog:_j,scaleThreshold:Fj,scaleTime:Zfe,scaleUtc:Qfe,tickFormat:Nj},Symbol.toStringTag,{value:"Module"}));var the=qc;function nhe(t,e,n){for(var r=-1,i=t.length;++r<i;){var s=t[r],o=e(s);if(o!=null&&(a===void 0?o===o&&!the(o):n(o,a)))var a=o,l=s}return l}var Jj=nhe;function rhe(t,e){return t>e}var ihe=rhe,she=Jj,ohe=ihe,ahe=tf;function lhe(t){return t&&t.length?she(t,ahe,ohe):void 0}var uhe=lhe;const J0=ut(uhe);function che(t,e){return t<e}var fhe=che,hhe=Jj,dhe=fhe,phe=tf;function mhe(t){return t&&t.length?hhe(t,phe,dhe):void 0}var ghe=mhe;const ex=ut(ghe);var yhe=qk,vhe=va,xhe=oj,bhe=Ar;function whe(t,e){var n=bhe(t)?yhe:xhe;return n(t,vhe(e))}var She=whe,Che=ij,$he=She;function khe(t,e){return Che($he(t,e),1)}var Ihe=khe;const The=ut(Ihe);var Ehe=uI;function Nhe(t,e){return Ehe(t,e)}var Ahe=Nhe;const tx=ut(Ahe);var rf=1e9,Ohe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},MI,Tt=!0,wi="[DecimalError] ",ul=wi+"Invalid argument: ",RI=wi+"Exponent out of range: ",sf=Math.floor,za=Math.pow,Phe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Mr,vn=1e7,wt=7,ez=9007199254740991,Qy=sf(ez/wt),xe={};xe.absoluteValue=xe.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};xe.comparedTo=xe.cmp=function(t){var e,n,r,i,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(r=s.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};xe.decimalPlaces=xe.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*wt;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};xe.dividedBy=xe.div=function(t){return Ys(this,new this.constructor(t))};xe.dividedToIntegerBy=xe.idiv=function(t){var e=this,n=e.constructor;return ht(Ys(e,new n(t),0,1),n.precision)};xe.equals=xe.eq=function(t){return!this.cmp(t)};xe.exponent=function(){return nn(this)};xe.greaterThan=xe.gt=function(t){return this.cmp(t)>0};xe.greaterThanOrEqualTo=xe.gte=function(t){return this.cmp(t)>=0};xe.isInteger=xe.isint=function(){return this.e>this.d.length-2};xe.isNegative=xe.isneg=function(){return this.s<0};xe.isPositive=xe.ispos=function(){return this.s>0};xe.isZero=function(){return this.s===0};xe.lessThan=xe.lt=function(t){return this.cmp(t)<0};xe.lessThanOrEqualTo=xe.lte=function(t){return this.cmp(t)<1};xe.logarithm=xe.log=function(t){var e,n=this,r=n.constructor,i=r.precision,s=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Mr))throw Error(wi+"NaN");if(n.s<1)throw Error(wi+(n.s?"NaN":"-Infinity"));return n.eq(Mr)?new r(0):(Tt=!1,e=Ys(fd(n,s),fd(t,s),s),Tt=!0,ht(e,i))};xe.minus=xe.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?rz(e,t):tz(e,(t.s=-t.s,t))};xe.modulo=xe.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(wi+"NaN");return n.s?(Tt=!1,e=Ys(n,t,0,1).times(t),Tt=!0,n.minus(e)):ht(new r(n),i)};xe.naturalExponential=xe.exp=function(){return nz(this)};xe.naturalLogarithm=xe.ln=function(){return fd(this)};xe.negated=xe.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};xe.plus=xe.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?tz(e,t):rz(e,(t.s=-t.s,t))};xe.precision=xe.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(ul+t);if(e=nn(i)+1,r=i.d.length-1,n=r*wt+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};xe.squareRoot=xe.sqrt=function(){var t,e,n,r,i,s,o,a=this,l=a.constructor;if(a.s<1){if(!a.s)return new l(0);throw Error(wi+"NaN")}for(t=nn(a),Tt=!1,i=Math.sqrt(+a),i==0||i==1/0?(e=ps(a.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=sf((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(i.toString()),n=l.precision,i=o=n+3;;)if(s=r,r=s.plus(Ys(a,s,o+2)).times(.5),ps(s.d).slice(0,o)===(e=ps(r.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(ht(s,n+1,0),s.times(s).eq(a)){r=s;break}}else if(e!="9999")break;o+=4}return Tt=!0,ht(r,n)};xe.times=xe.mul=function(t){var e,n,r,i,s,o,a,l,u,c=this,f=c.constructor,h=c.d,d=(t=new f(t)).d;if(!c.s||!t.s)return new f(0);for(t.s*=c.s,n=c.e+t.e,l=h.length,u=d.length,l<u&&(s=h,h=d,d=s,o=l,l=u,u=o),s=[],o=l+u,r=o;r--;)s.push(0);for(r=u;--r>=0;){for(e=0,i=l+r;i>r;)a=s[i]+d[r]*h[i-r-1]+e,s[i--]=a%vn|0,e=a/vn|0;s[i]=(s[i]+e)%vn|0}for(;!s[--o];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,Tt?ht(t,f.precision):t};xe.toDecimalPlaces=xe.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Ts(t,0,rf),e===void 0?e=r.rounding:Ts(e,0,8),ht(n,t+nn(n)+1,e))};xe.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=wl(r,!0):(Ts(t,0,rf),e===void 0?e=i.rounding:Ts(e,0,8),r=ht(new i(r),t+1,e),n=wl(r,!0,t+1)),n};xe.toFixed=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?wl(i):(Ts(t,0,rf),e===void 0?e=s.rounding:Ts(e,0,8),r=ht(new s(i),t+nn(i)+1,e),n=wl(r.abs(),!1,t+nn(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};xe.toInteger=xe.toint=function(){var t=this,e=t.constructor;return ht(new e(t),nn(t)+1,e.rounding)};xe.toNumber=function(){return+this};xe.toPower=xe.pow=function(t){var e,n,r,i,s,o,a=this,l=a.constructor,u=12,c=+(t=new l(t));if(!t.s)return new l(Mr);if(a=new l(a),!a.s){if(t.s<1)throw Error(wi+"Infinity");return a}if(a.eq(Mr))return a;if(r=l.precision,t.eq(Mr))return ht(a,r);if(e=t.e,n=t.d.length-1,o=e>=n,s=a.s,o){if((n=c<0?-c:c)<=ez){for(i=new l(Mr),e=Math.ceil(r/wt+4),Tt=!1;n%2&&(i=i.times(a),VP(i.d,e)),n=sf(n/2),n!==0;)a=a.times(a),VP(a.d,e);return Tt=!0,t.s<0?new l(Mr).div(i):ht(i,r)}}else if(s<0)throw Error(wi+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,a.s=1,Tt=!1,i=t.times(fd(a,r+u)),Tt=!0,i=nz(i),i.s=s,i};xe.toPrecision=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?(n=nn(i),r=wl(i,n<=s.toExpNeg||n>=s.toExpPos)):(Ts(t,1,rf),e===void 0?e=s.rounding:Ts(e,0,8),i=ht(new s(i),t,e),n=nn(i),r=wl(i,t<=n||n<=s.toExpNeg,t)),r};xe.toSignificantDigits=xe.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Ts(t,1,rf),e===void 0?e=r.rounding:Ts(e,0,8)),ht(new r(n),t,e)};xe.toString=xe.valueOf=xe.val=xe.toJSON=xe[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=nn(t),n=t.constructor;return wl(t,e<=n.toExpNeg||e>=n.toExpPos)};function tz(t,e){var n,r,i,s,o,a,l,u,c=t.constructor,f=c.precision;if(!t.s||!e.s)return e.s||(e=new c(t)),Tt?ht(e,f):e;if(l=t.d,u=e.d,o=t.e,i=e.e,l=l.slice(),s=o-i,s){for(s<0?(r=l,s=-s,a=u.length):(r=u,i=o,a=l.length),o=Math.ceil(f/wt),a=o>a?o+1:a+1,s>a&&(s=a,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(a=l.length,s=u.length,a-s<0&&(s=a,r=u,u=l,l=r),n=0;s;)n=(l[--s]=l[s]+u[s]+n)/vn|0,l[s]%=vn;for(n&&(l.unshift(n),++i),a=l.length;l[--a]==0;)l.pop();return e.d=l,e.e=i,Tt?ht(e,f):e}function Ts(t,e,n){if(t!==~~t||t<e||t>n)throw Error(ul+t)}function ps(t){var e,n,r,i=t.length-1,s="",o=t[0];if(i>0){for(s+=o,e=1;e<i;e++)r=t[e]+"",n=wt-r.length,n&&(s+=Ao(n)),s+=r;o=t[e],r=o+"",n=wt-r.length,n&&(s+=Ao(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var Ys=function(){function t(r,i){var s,o=0,a=r.length;for(r=r.slice();a--;)s=r[a]*i+o,r[a]=s%vn|0,o=s/vn|0;return o&&r.unshift(o),r}function e(r,i,s,o){var a,l;if(s!=o)l=s>o?1:-1;else for(a=l=0;a<s;a++)if(r[a]!=i[a]){l=r[a]>i[a]?1:-1;break}return l}function n(r,i,s){for(var o=0;s--;)r[s]-=o,o=r[s]<i[s]?1:0,r[s]=o*vn+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,o){var a,l,u,c,f,h,d,p,m,g,y,v,x,b,w,S,C,$,k=r.constructor,I=r.s==i.s?1:-1,T=r.d,A=i.d;if(!r.s)return new k(r);if(!i.s)throw Error(wi+"Division by zero");for(l=r.e-i.e,C=A.length,w=T.length,d=new k(I),p=d.d=[],u=0;A[u]==(T[u]||0);)++u;if(A[u]>(T[u]||0)&&--l,s==null?v=s=k.precision:o?v=s+(nn(r)-nn(i))+1:v=s,v<0)return new k(0);if(v=v/wt+2|0,u=0,C==1)for(c=0,A=A[0],v++;(u<w||c)&&v--;u++)x=c*vn+(T[u]||0),p[u]=x/A|0,c=x%A|0;else{for(c=vn/(A[0]+1)|0,c>1&&(A=t(A,c),T=t(T,c),C=A.length,w=T.length),b=C,m=T.slice(0,C),g=m.length;g<C;)m[g++]=0;$=A.slice(),$.unshift(0),S=A[0],A[1]>=vn/2&&++S;do c=0,a=e(A,m,C,g),a<0?(y=m[0],C!=g&&(y=y*vn+(m[1]||0)),c=y/S|0,c>1?(c>=vn&&(c=vn-1),f=t(A,c),h=f.length,g=m.length,a=e(f,m,h,g),a==1&&(c--,n(f,C<h?$:A,h))):(c==0&&(a=c=1),f=A.slice()),h=f.length,h<g&&f.unshift(0),n(m,f,g),a==-1&&(g=m.length,a=e(A,m,C,g),a<1&&(c++,n(m,C<g?$:A,g))),g=m.length):a===0&&(c++,m=[0]),p[u++]=c,a&&m[0]?m[g++]=T[b]||0:(m=[T[b]],g=1);while((b++<w||m[0]!==void 0)&&v--)}return p[0]||p.shift(),d.e=l,ht(d,o?s+nn(d)+1:s)}}();function nz(t,e){var n,r,i,s,o,a,l=0,u=0,c=t.constructor,f=c.precision;if(nn(t)>16)throw Error(RI+nn(t));if(!t.s)return new c(Mr);for(e==null?(Tt=!1,a=f):a=e,o=new c(.03125);t.abs().gte(.1);)t=t.times(o),u+=5;for(r=Math.log(za(2,u))/Math.LN10*2+5|0,a+=r,n=i=s=new c(Mr),c.precision=a;;){if(i=ht(i.times(t),a),n=n.times(++l),o=s.plus(Ys(i,n,a)),ps(o.d).slice(0,a)===ps(s.d).slice(0,a)){for(;u--;)s=ht(s.times(s),a);return c.precision=f,e==null?(Tt=!0,ht(s,f)):s}s=o}}function nn(t){for(var e=t.e*wt,n=t.d[0];n>=10;n/=10)e++;return e}function z1(t,e,n){if(e>t.LN10.sd())throw Tt=!0,n&&(t.precision=n),Error(wi+"LN10 precision limit exceeded");return ht(new t(t.LN10),e)}function Ao(t){for(var e="";t--;)e+="0";return e}function fd(t,e){var n,r,i,s,o,a,l,u,c,f=1,h=10,d=t,p=d.d,m=d.constructor,g=m.precision;if(d.s<1)throw Error(wi+(d.s?"NaN":"-Infinity"));if(d.eq(Mr))return new m(0);if(e==null?(Tt=!1,u=g):u=e,d.eq(10))return e==null&&(Tt=!0),z1(m,u);if(u+=h,m.precision=u,n=ps(p),r=n.charAt(0),s=nn(d),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)d=d.times(t),n=ps(d.d),r=n.charAt(0),f++;s=nn(d),r>1?(d=new m("0."+n),s++):d=new m(r+"."+n.slice(1))}else return l=z1(m,u+2,g).times(s+""),d=fd(new m(r+"."+n.slice(1)),u-h).plus(l),m.precision=g,e==null?(Tt=!0,ht(d,g)):d;for(a=o=d=Ys(d.minus(Mr),d.plus(Mr),u),c=ht(d.times(d),u),i=3;;){if(o=ht(o.times(c),u),l=a.plus(Ys(o,new m(i),u)),ps(l.d).slice(0,u)===ps(a.d).slice(0,u))return a=a.times(2),s!==0&&(a=a.plus(z1(m,u+2,g).times(s+""))),a=Ys(a,new m(f),u),m.precision=g,e==null?(Tt=!0,ht(a,g)):a;a=l,i+=2}}function zP(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=sf(n/wt),t.d=[],r=(n+1)%wt,n<0&&(r+=wt),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=wt;r<i;)t.d.push(+e.slice(r,r+=wt));e=e.slice(r),r=wt-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),Tt&&(t.e>Qy||t.e<-Qy))throw Error(RI+n)}else t.s=0,t.e=0,t.d=[0];return t}function ht(t,e,n){var r,i,s,o,a,l,u,c,f=t.d;for(o=1,s=f[0];s>=10;s/=10)o++;if(r=e-o,r<0)r+=wt,i=e,u=f[c=0];else{if(c=Math.ceil((r+1)/wt),s=f.length,c>=s)return t;for(u=s=f[c],o=1;s>=10;s/=10)o++;r%=wt,i=r-wt+o}if(n!==void 0&&(s=za(10,o-i-1),a=u/s%10|0,l=e<0||f[c+1]!==void 0||u%s,l=n<4?(a||l)&&(n==0||n==(t.s<0?3:2)):a>5||a==5&&(n==4||l||n==6&&(r>0?i>0?u/za(10,o-i):0:f[c-1])%10&1||n==(t.s<0?8:7))),e<1||!f[0])return l?(s=nn(t),f.length=1,e=e-s-1,f[0]=za(10,(wt-e%wt)%wt),t.e=sf(-e/wt)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(r==0?(f.length=c,s=1,c--):(f.length=c+1,s=za(10,wt-r),f[c]=i>0?(u/za(10,o-i)%za(10,i)|0)*s:0),l)for(;;)if(c==0){(f[0]+=s)==vn&&(f[0]=1,++t.e);break}else{if(f[c]+=s,f[c]!=vn)break;f[c--]=0,s=1}for(r=f.length;f[--r]===0;)f.pop();if(Tt&&(t.e>Qy||t.e<-Qy))throw Error(RI+nn(t));return t}function rz(t,e){var n,r,i,s,o,a,l,u,c,f,h=t.constructor,d=h.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new h(t),Tt?ht(e,d):e;if(l=t.d,f=e.d,r=e.e,u=t.e,l=l.slice(),o=u-r,o){for(c=o<0,c?(n=l,o=-o,a=f.length):(n=f,r=u,a=l.length),i=Math.max(Math.ceil(d/wt),a)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=l.length,a=f.length,c=i<a,c&&(a=i),i=0;i<a;i++)if(l[i]!=f[i]){c=l[i]<f[i];break}o=0}for(c&&(n=l,l=f,f=n,e.s=-e.s),a=l.length,i=f.length-a;i>0;--i)l[a++]=0;for(i=f.length;i>o;){if(l[--i]<f[i]){for(s=i;s&&l[--s]===0;)l[s]=vn-1;--l[s],l[i]+=vn}l[i]-=f[i]}for(;l[--a]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,Tt?ht(e,d):e):new h(0)}function wl(t,e,n){var r,i=nn(t),s=ps(t.d),o=s.length;return e?(n&&(r=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+Ao(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+Ao(-i-1)+s,n&&(r=n-o)>0&&(s+=Ao(r))):i>=o?(s+=Ao(i+1-o),n&&(r=n-i-1)>0&&(s=s+"."+Ao(r))):((r=i+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(s+="."),s+=Ao(r))),t.s<0?"-"+s:s}function VP(t,e){if(t.length>e)return t.length=e,!0}function iz(t){var e,n,r;function i(s){var o=this;if(!(o instanceof i))return new i(s);if(o.constructor=i,s instanceof i){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(ul+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return zP(o,s.toString())}else if(typeof s!="string")throw Error(ul+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,Phe.test(s))zP(o,s);else throw Error(ul+s)}if(i.prototype=xe,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=iz,i.config=i.set=_he,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function _he(t){if(!t||typeof t!="object")throw Error(wi+"Object expected");var e,n,r,i=["precision",1,rf,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(sf(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(ul+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(ul+n+": "+r);return this}var MI=iz(Ohe);Mr=new MI(1);const at=MI;function Dhe(t){return Lhe(t)||Fhe(t)||Mhe(t)||Rhe()}function Rhe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mhe(t,e){if(t){if(typeof t=="string")return nC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nC(t,e)}}function Fhe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Lhe(t){if(Array.isArray(t))return nC(t)}function nC(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Bhe=function(e){return e},sz={"@@functional/placeholder":!0},oz=function(e){return e===sz},WP=function(e){return function n(){return arguments.length===0||arguments.length===1&&oz(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},jhe=function t(e,n){return e===1?n:WP(function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];var o=i.filter(function(a){return a!==sz}).length;return o>=e?n.apply(void 0,i):t(e-o,WP(function(){for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];var c=i.map(function(f){return oz(f)?l.shift():f});return n.apply(void 0,Dhe(c).concat(l))}))})},nx=function(e){return jhe(e.length,e)},rC=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},zhe=nx(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),Vhe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return Bhe;var i=n.reverse(),s=i[0],o=i.slice(1);return function(){return o.reduce(function(a,l){return l(a)},s.apply(void 0,arguments))}},iC=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},az=function(e){var n=null,r=null;return function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return n&&s.every(function(a,l){return a===n[l]})||(n=s,r=e.apply(void 0,s)),r}};function Whe(t){var e;return t===0?e=1:e=Math.floor(new at(t).abs().log(10).toNumber())+1,e}function Uhe(t,e,n){for(var r=new at(t),i=0,s=[];r.lt(e)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}var Ghe=nx(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),Hhe=nx(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),Khe=nx(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const rx={rangeStep:Uhe,getDigitCount:Whe,interpolateNumber:Ghe,uninterpolateNumber:Hhe,uninterpolateTruncation:Khe};function sC(t){return Yhe(t)||Xhe(t)||lz(t)||qhe()}function qhe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xhe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Yhe(t){if(Array.isArray(t))return oC(t)}function hd(t,e){return Jhe(t)||Qhe(t,e)||lz(t,e)||Zhe()}function Zhe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lz(t,e){if(t){if(typeof t=="string")return oC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oC(t,e)}}function oC(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Qhe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,s=void 0;try{for(var o=t[Symbol.iterator](),a;!(r=(a=o.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(l){i=!0,s=l}finally{try{!r&&o.return!=null&&o.return()}finally{if(i)throw s}}return n}}function Jhe(t){if(Array.isArray(t))return t}function uz(t){var e=hd(t,2),n=e[0],r=e[1],i=n,s=r;return n>r&&(i=r,s=n),[i,s]}function cz(t,e,n){if(t.lte(0))return new at(0);var r=rx.getDigitCount(t.toNumber()),i=new at(10).pow(r),s=t.div(i),o=r!==1?.05:.1,a=new at(Math.ceil(s.div(o).toNumber())).add(n).mul(o),l=a.mul(i);return e?l:new at(Math.ceil(l))}function ede(t,e,n){var r=1,i=new at(t);if(!i.isint()&&n){var s=Math.abs(t);s<1?(r=new at(10).pow(rx.getDigitCount(t)-1),i=new at(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new at(Math.floor(t)))}else t===0?i=new at(Math.floor((e-1)/2)):n||(i=new at(Math.floor(t)));var o=Math.floor((e-1)/2),a=Vhe(zhe(function(l){return i.add(new at(l-o).mul(r)).toNumber()}),rC);return a(0,e)}function fz(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new at(0),tickMin:new at(0),tickMax:new at(0)};var s=cz(new at(e).sub(t).div(n-1),r,i),o;t<=0&&e>=0?o=new at(0):(o=new at(t).add(e).div(2),o=o.sub(new at(o).mod(s)));var a=Math.ceil(o.sub(t).div(s).toNumber()),l=Math.ceil(new at(e).sub(o).div(s).toNumber()),u=a+l+1;return u>n?fz(t,e,n,r,i+1):(u<n&&(l=e>0?l+(n-u):l,a=e>0?a:a+(n-u)),{step:s,tickMin:o.sub(new at(a).mul(s)),tickMax:o.add(new at(l).mul(s))})}function tde(t){var e=hd(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),a=uz([n,r]),l=hd(a,2),u=l[0],c=l[1];if(u===-1/0||c===1/0){var f=c===1/0?[u].concat(sC(rC(0,i-1).map(function(){return 1/0}))):[].concat(sC(rC(0,i-1).map(function(){return-1/0})),[c]);return n>r?iC(f):f}if(u===c)return ede(u,i,s);var h=fz(u,c,o,s),d=h.step,p=h.tickMin,m=h.tickMax,g=rx.rangeStep(p,m.add(new at(.1).mul(d)),d);return n>r?iC(g):g}function nde(t,e){var n=hd(t,2),r=n[0],i=n[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=uz([r,i]),a=hd(o,2),l=a[0],u=a[1];if(l===-1/0||u===1/0)return[r,i];if(l===u)return[l];var c=Math.max(e,2),f=cz(new at(u).sub(l).div(c-1),s,0),h=[].concat(sC(rx.rangeStep(new at(l),new at(u).sub(new at(.99).mul(f)),f)),[u]);return r>i?iC(h):h}var rde=az(tde),ide=az(nde),sde="Invariant failed";function Sl(t,e){throw new Error(sde)}var ode=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function pc(t){"@babel/helpers - typeof";return pc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pc(t)}function Jy(){return Jy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jy.apply(this,arguments)}function ade(t,e){return fde(t)||cde(t,e)||ude(t,e)||lde()}function lde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ude(t,e){if(t){if(typeof t=="string")return UP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UP(t,e)}}function UP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function cde(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function fde(t){if(Array.isArray(t))return t}function hde(t,e){if(t==null)return{};var n=dde(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function dde(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function pde(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mde(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,pz(r.key),r)}}function gde(t,e,n){return e&&mde(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function yde(t,e,n){return e=ev(e),vde(t,hz()?Reflect.construct(e,n||[],ev(t).constructor):e.apply(t,n))}function vde(t,e){if(e&&(pc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xde(t)}function xde(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hz(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hz=function(){return!!t})()}function ev(t){return ev=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ev(t)}function bde(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aC(t,e)}function aC(t,e){return aC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},aC(t,e)}function dz(t,e,n){return e=pz(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pz(t){var e=wde(t,"string");return pc(e)=="symbol"?e:e+""}function wde(t,e){if(pc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(pc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hp=function(t){function e(){return pde(this,e),yde(this,e,arguments)}return bde(e,t),gde(e,[{key:"render",value:function(){var r=this.props,i=r.offset,s=r.layout,o=r.width,a=r.dataKey,l=r.data,u=r.dataPointFormatter,c=r.xAxis,f=r.yAxis,h=hde(r,ode),d=We(h,!1);this.props.direction==="x"&&c.type!=="number"&&Sl();var p=l.map(function(m){var g=u(m,a),y=g.x,v=g.y,x=g.value,b=g.errorVal;if(!b)return null;var w=[],S,C;if(Array.isArray(b)){var $=ade(b,2);S=$[0],C=$[1]}else S=C=b;if(s==="vertical"){var k=c.scale,I=v+i,T=I+o,A=I-o,_=k(x-S),D=k(x+C);w.push({x1:D,y1:T,x2:D,y2:A}),w.push({x1:_,y1:I,x2:D,y2:I}),w.push({x1:_,y1:T,x2:_,y2:A})}else if(s==="horizontal"){var P=f.scale,R=y+i,F=R-o,O=R+o,M=P(x-S),V=P(x+C);w.push({x1:F,y1:V,x2:O,y2:V}),w.push({x1:R,y1:M,x2:R,y2:V}),w.push({x1:F,y1:M,x2:O,y2:M})}return U.createElement(qt,Jy({className:"recharts-errorBar",key:"bar-".concat(w.map(function(q){return"".concat(q.x1,"-").concat(q.x2,"-").concat(q.y1,"-").concat(q.y2)}))},d),w.map(function(q){return U.createElement("line",Jy({},q,{key:"line-".concat(q.x1,"-").concat(q.x2,"-").concat(q.y1,"-").concat(q.y2)}))}))});return U.createElement(qt,{className:"recharts-errorBars"},p)}}])}(U.Component);dz(hp,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});dz(hp,"displayName","ErrorBar");function dd(t){"@babel/helpers - typeof";return dd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dd(t)}function GP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _a(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GP(Object(n),!0).forEach(function(r){Sde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Sde(t,e,n){return e=Cde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cde(t){var e=$de(t,"string");return dd(e)=="symbol"?e:e+""}function $de(t,e){if(dd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(dd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mz=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,s=e.legendContent,o=Rr(n,al);if(!o)return null;var a=al.defaultProps,l=a!==void 0?_a(_a({},a),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:s==="children"?u=(r||[]).reduce(function(c,f){var h=f.item,d=f.props,p=d.sectors||d.data||[];return c.concat(p.map(function(m){return{type:o.props.iconType||h.props.legendType,value:m.name,color:m.fill,payload:m}}))},[]):u=(r||[]).map(function(c){var f=c.item,h=f.type.defaultProps,d=h!==void 0?_a(_a({},h),f.props):{},p=d.dataKey,m=d.name,g=d.legendType,y=d.hide;return{inactive:y,dataKey:p,type:l.iconType||g||"square",color:FI(f),value:m||p,payload:d}}),_a(_a(_a({},l),al.getWithHeight(o,i)),{},{payload:u,item:o})};function pd(t){"@babel/helpers - typeof";return pd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pd(t)}function HP(t){return Ede(t)||Tde(t)||Ide(t)||kde()}function kde(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ide(t,e){if(t){if(typeof t=="string")return lC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lC(t,e)}}function Tde(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ede(t){if(Array.isArray(t))return lC(t)}function lC(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function KP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ft(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KP(Object(n),!0).forEach(function(r){Hu(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hu(t,e,n){return e=Nde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nde(t){var e=Ade(t,"string");return pd(e)=="symbol"?e:e+""}function Ade(t,e){if(pd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(pd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ur(t,e,n){return Ve(t)||Ve(e)?n:pn(e)?yi(t,e,n):Be(e)?e(t):n}function kh(t,e,n,r){var i=The(t,function(a){return Ur(a,e)});if(n==="number"){var s=i.filter(function(a){return he(a)||parseFloat(a)});return s.length?[ex(s),J0(s)]:[1/0,-1/0]}var o=r?i.filter(function(a){return!Ve(a)}):i;return o.map(function(a){return pn(a)||a instanceof Date?a:""})}var Ode=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,o=-1,a=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(a<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var l=s.range,u=0;u<a;u++){var c=u>0?i[u-1].coordinate:i[a-1].coordinate,f=i[u].coordinate,h=u>=a-1?i[0].coordinate:i[u+1].coordinate,d=void 0;if(Hi(f-c)!==Hi(h-f)){var p=[];if(Hi(h-f)===Hi(l[1]-l[0])){d=h;var m=f+l[1]-l[0];p[0]=Math.min(m,(m+c)/2),p[1]=Math.max(m,(m+c)/2)}else{d=c;var g=h+l[1]-l[0];p[0]=Math.min(f,(g+f)/2),p[1]=Math.max(f,(g+f)/2)}var y=[Math.min(f,(d+f)/2),Math.max(f,(d+f)/2)];if(e>y[0]&&e<=y[1]||e>=p[0]&&e<=p[1]){o=i[u].index;break}}else{var v=Math.min(c,h),x=Math.max(c,h);if(e>(v+f)/2&&e<=(x+f)/2){o=i[u].index;break}}}else for(var b=0;b<a;b++)if(b===0&&e<=(r[b].coordinate+r[b+1].coordinate)/2||b>0&&b<a-1&&e>(r[b].coordinate+r[b-1].coordinate)/2&&e<=(r[b].coordinate+r[b+1].coordinate)/2||b===a-1&&e>(r[b].coordinate+r[b-1].coordinate)/2){o=r[b].index;break}return o},FI=function(e){var n,r=e,i=r.type.displayName,s=(n=e.type)!==null&&n!==void 0&&n.defaultProps?Ft(Ft({},e.type.defaultProps),e.props):e.props,o=s.stroke,a=s.fill,l;switch(i){case"Line":l=o;break;case"Area":case"Radar":l=o&&o!=="none"?o:a;break;default:l=a;break}return l},Pde=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,s=i===void 0?{}:i;if(!s)return{};for(var o={},a=Object.keys(s),l=0,u=a.length;l<u;l++)for(var c=s[a[l]].stackGroups,f=Object.keys(c),h=0,d=f.length;h<d;h++){var p=c[f[h]],m=p.items,g=p.cateAxisId,y=m.filter(function(C){return Ks(C.type).indexOf("Bar")>=0});if(y&&y.length){var v=y[0].type.defaultProps,x=v!==void 0?Ft(Ft({},v),y[0].props):y[0].props,b=x.barSize,w=x[g];o[w]||(o[w]=[]);var S=Ve(b)?n:b;o[w].push({item:y[0],stackList:y.slice(1),barSize:Ve(S)?void 0:bl(S,r,0)})}}return o},_de=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,s=e.sizeList,o=s===void 0?[]:s,a=e.maxBarSize,l=o.length;if(l<1)return null;var u=bl(n,i,0,!0),c,f=[];if(o[0].barSize===+o[0].barSize){var h=!1,d=i/l,p=o.reduce(function(b,w){return b+w.barSize||0},0);p+=(l-1)*u,p>=i&&(p-=(l-1)*u,u=0),p>=i&&d>0&&(h=!0,d*=.9,p=l*d);var m=(i-p)/2>>0,g={offset:m-u,size:0};c=o.reduce(function(b,w){var S={item:w.item,position:{offset:g.offset+g.size+u,size:h?d:w.barSize}},C=[].concat(HP(b),[S]);return g=C[C.length-1].position,w.stackList&&w.stackList.length&&w.stackList.forEach(function($){C.push({item:$,position:g})}),C},f)}else{var y=bl(r,i,0,!0);i-2*y-(l-1)*u<=0&&(u=0);var v=(i-2*y-(l-1)*u)/l;v>1&&(v>>=0);var x=a===+a?Math.min(v,a):v;c=o.reduce(function(b,w,S){var C=[].concat(HP(b),[{item:w.item,position:{offset:y+(v+u)*S+(v-x)/2,size:x}}]);return w.stackList&&w.stackList.length&&w.stackList.forEach(function($){C.push({item:$,position:C[C.length-1].position})}),C},f)}return c},Dde=function(e,n,r,i){var s=r.children,o=r.width,a=r.margin,l=o-(a.left||0)-(a.right||0),u=mz({children:s,legendWidth:l});if(u){var c=i||{},f=c.width,h=c.height,d=u.align,p=u.verticalAlign,m=u.layout;if((m==="vertical"||m==="horizontal"&&p==="middle")&&d!=="center"&&he(e[d]))return Ft(Ft({},e),{},Hu({},d,e[d]+(f||0)));if((m==="horizontal"||m==="vertical"&&d==="center")&&p!=="middle"&&he(e[p]))return Ft(Ft({},e),{},Hu({},p,e[p]+(h||0)))}return e},Rde=function(e,n,r){return Ve(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},gz=function(e,n,r,i,s){var o=n.props.children,a=vi(o,hp).filter(function(u){return Rde(i,s,u.props.direction)});if(a&&a.length){var l=a.map(function(u){return u.props.dataKey});return e.reduce(function(u,c){var f=Ur(c,r);if(Ve(f))return u;var h=Array.isArray(f)?[ex(f),J0(f)]:[f,f],d=l.reduce(function(p,m){var g=Ur(c,m,0),y=h[0]-Math.abs(Array.isArray(g)?g[0]:g),v=h[1]+Math.abs(Array.isArray(g)?g[1]:g);return[Math.min(y,p[0]),Math.max(v,p[1])]},[1/0,-1/0]);return[Math.min(d[0],u[0]),Math.max(d[1],u[1])]},[1/0,-1/0])}return null},Mde=function(e,n,r,i,s){var o=n.map(function(a){return gz(e,a,r,s,i)}).filter(function(a){return!Ve(a)});return o&&o.length?o.reduce(function(a,l){return[Math.min(a[0],l[0]),Math.max(a[1],l[1])]},[1/0,-1/0]):null},yz=function(e,n,r,i,s){var o=n.map(function(l){var u=l.props.dataKey;return r==="number"&&u&&gz(e,l,u,i)||kh(e,u,r,s)});if(r==="number")return o.reduce(function(l,u){return[Math.min(l[0],u[0]),Math.max(l[1],u[1])]},[1/0,-1/0]);var a={};return o.reduce(function(l,u){for(var c=0,f=u.length;c<f;c++)a[u[c]]||(a[u[c]]=!0,l.push(u[c]));return l},[])},vz=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},xz=function(e,n,r,i){if(i)return e.map(function(l){return l.coordinate});var s,o,a=e.map(function(l){return l.coordinate===n&&(s=!0),l.coordinate===r&&(o=!0),l.coordinate});return s||a.push(n),o||a.push(r),a},Us=function(e,n,r){if(!e)return null;var i=e.scale,s=e.duplicateDomain,o=e.type,a=e.range,l=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(n||r)&&o==="category"&&i.bandwidth?i.bandwidth()/l:0;if(u=e.axisType==="angleAxis"&&(a==null?void 0:a.length)>=2?Hi(a[0]-a[1])*2*u:u,n&&(e.ticks||e.niceTicks)){var c=(e.ticks||e.niceTicks).map(function(f){var h=s?s.indexOf(f):f;return{coordinate:i(h)+u,value:f,offset:u}});return c.filter(function(f){return!sp(f.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(f,h){return{coordinate:i(f)+u,value:f,index:h,offset:u}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(f){return{coordinate:i(f)+u,value:f,offset:u}}):i.domain().map(function(f,h){return{coordinate:i(f)+u,value:s?s[f]:f,index:h,offset:u}})},V1=new WeakMap,ug=function(e,n){if(typeof n!="function")return e;V1.has(e)||V1.set(e,new WeakMap);var r=V1.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},Fde=function(e,n,r){var i=e.scale,s=e.type,o=e.layout,a=e.axisType;if(i==="auto")return o==="radial"&&a==="radiusAxis"?{scale:od(),realScaleType:"band"}:o==="radial"&&a==="angleAxis"?{scale:qy(),realScaleType:"linear"}:s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:$h(),realScaleType:"point"}:s==="category"?{scale:od(),realScaleType:"band"}:{scale:qy(),realScaleType:"linear"};if(xl(i)){var l="scale".concat(j0(i));return{scale:(jP[l]||$h)(),realScaleType:jP[l]?l:"point"}}return Be(i)?{scale:i}:{scale:$h(),realScaleType:"point"}},qP=1e-4,Lde=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),s=Math.min(i[0],i[1])-qP,o=Math.max(i[0],i[1])+qP,a=e(n[0]),l=e(n[r-1]);(a<s||a>o||l<s||l>o)&&e.domain([n[0],n[r-1]])}},Bde=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},jde=function(e,n){if(!n||n.length!==2||!he(n[0])||!he(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),s=[e[0],e[1]];return(!he(e[0])||e[0]<r)&&(s[0]=r),(!he(e[1])||e[1]>i)&&(s[1]=i),s[0]>i&&(s[0]=i),s[1]<r&&(s[1]=r),s},zde=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var s=0,o=0,a=0;a<n;++a){var l=sp(e[a][r][1])?e[a][r][0]:e[a][r][1];l>=0?(e[a][r][0]=s,e[a][r][1]=s+l,s=e[a][r][1]):(e[a][r][0]=o,e[a][r][1]=o+l,o=e[a][r][1])}},Vde=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var s=0,o=0;o<n;++o){var a=sp(e[o][r][1])?e[o][r][0]:e[o][r][1];a>=0?(e[o][r][0]=s,e[o][r][1]=s+a,s=e[o][r][1]):(e[o][r][0]=0,e[o][r][1]=0)}},Wde={sign:zde,expand:iee,none:oc,silhouette:see,wiggle:oee,positive:Vde},Ude=function(e,n,r){var i=n.map(function(a){return a.props.dataKey}),s=Wde[r],o=ree().keys(i).value(function(a,l){return+Ur(a,l,0)}).order(_S).offset(s);return o(e)},Gde=function(e,n,r,i,s,o){if(!e)return null;var a=o?n.reverse():n,l={},u=a.reduce(function(f,h){var d,p=(d=h.type)!==null&&d!==void 0&&d.defaultProps?Ft(Ft({},h.type.defaultProps),h.props):h.props,m=p.stackId,g=p.hide;if(g)return f;var y=p[r],v=f[y]||{hasStack:!1,stackGroups:{}};if(pn(m)){var x=v.stackGroups[m]||{numericAxisId:r,cateAxisId:i,items:[]};x.items.push(h),v.hasStack=!0,v.stackGroups[m]=x}else v.stackGroups[op("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[h]};return Ft(Ft({},f),{},Hu({},y,v))},l),c={};return Object.keys(u).reduce(function(f,h){var d=u[h];if(d.hasStack){var p={};d.stackGroups=Object.keys(d.stackGroups).reduce(function(m,g){var y=d.stackGroups[g];return Ft(Ft({},m),{},Hu({},g,{numericAxisId:r,cateAxisId:i,items:y.items,stackedData:Ude(e,y.items,s)}))},p)}return Ft(Ft({},f),{},Hu({},h,d))},c)},Hde=function(e,n){var r=n.realScaleType,i=n.type,s=n.tickCount,o=n.originalDomain,a=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(s&&i==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=e.domain();if(!u.length)return null;var c=rde(u,s,a);return e.domain([ex(c),J0(c)]),{niceTicks:c}}if(s&&i==="number"){var f=e.domain(),h=ide(f,s,a);return{niceTicks:h}}return null};function XP(t){var e=t.axis,n=t.ticks,r=t.bandSize,i=t.entry,s=t.index,o=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Ve(i[e.dataKey])){var a=ky(n,"value",i[e.dataKey]);if(a)return a.coordinate+r/2}return n[s]?n[s].coordinate+r/2:null}var l=Ur(i,Ve(o)?e.dataKey:o);return Ve(l)?null:e.scale(l)}var YP=function(e){var n=e.axis,r=e.ticks,i=e.offset,s=e.bandSize,o=e.entry,a=e.index;if(n.type==="category")return r[a]?r[a].coordinate+i:null;var l=Ur(o,n.dataKey,n.domain[a]);return Ve(l)?null:n.scale(l)-s/2+i},Kde=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return i<=0&&s>=0?0:s<0?s:i}return r[0]},qde=function(e,n){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?Ft(Ft({},e.type.defaultProps),e.props):e.props,s=i.stackId;if(pn(s)){var o=n[s];if(o){var a=o.items.indexOf(e);return a>=0?o.stackedData[a]:null}}return null},Xde=function(e){return e.reduce(function(n,r){return[ex(r.concat([n[0]]).filter(he)),J0(r.concat([n[1]]).filter(he))]},[1/0,-1/0])},bz=function(e,n,r){return Object.keys(e).reduce(function(i,s){var o=e[s],a=o.stackedData,l=a.reduce(function(u,c){var f=Xde(c.slice(n,r+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},ZP=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,QP=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,uC=function(e,n,r){if(Be(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(he(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(ZP.test(e[0])){var s=+ZP.exec(e[0])[1];i[0]=n[0]-s}else Be(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(he(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(QP.test(e[1])){var o=+QP.exec(e[1])[1];i[1]=n[1]+o}else Be(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},tv=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var s=fI(n,function(f){return f.coordinate}),o=1/0,a=1,l=s.length;a<l;a++){var u=s[a],c=s[a-1];o=Math.min((u.coordinate||0)-(c.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0},JP=function(e,n,r){return!e||!e.length||tx(e,yi(r,"type.defaultProps.domain"))?n:e},wz=function(e,n){var r=e.type.defaultProps?Ft(Ft({},e.type.defaultProps),e.props):e.props,i=r.dataKey,s=r.name,o=r.unit,a=r.formatter,l=r.tooltipType,u=r.chartType,c=r.hide;return Ft(Ft({},We(e,!1)),{},{dataKey:i,unit:o,formatter:a,name:s||i,color:FI(e),value:Ur(n,i),type:l,payload:n,chartType:u,hide:c})};function md(t){"@babel/helpers - typeof";return md=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},md(t)}function e_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function t_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?e_(Object(n),!0).forEach(function(r){Yde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Yde(t,e,n){return e=Zde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zde(t){var e=Qde(t,"string");return md(e)=="symbol"?e:e+""}function Qde(t,e){if(md(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(md(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nv=Math.PI/180,Jde=function(e){return e*180/Math.PI},An=function(e,n,r,i){return{x:e+Math.cos(-nv*i)*r,y:n+Math.sin(-nv*i)*r}},epe=function(e,n){var r=e.x,i=e.y,s=n.x,o=n.y;return Math.sqrt(Math.pow(r-s,2)+Math.pow(i-o,2))},tpe=function(e,n){var r=e.x,i=e.y,s=n.cx,o=n.cy,a=epe({x:r,y:i},{x:s,y:o});if(a<=0)return{radius:a};var l=(r-s)/a,u=Math.acos(l);return i>o&&(u=2*Math.PI-u),{radius:a,angle:Jde(u),angleInRadian:u}},npe=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),s=Math.floor(r/360),o=Math.min(i,s);return{startAngle:n-o*360,endAngle:r-o*360}},rpe=function(e,n){var r=n.startAngle,i=n.endAngle,s=Math.floor(r/360),o=Math.floor(i/360),a=Math.min(s,o);return e+a*360},n_=function(e,n){var r=e.x,i=e.y,s=tpe({x:r,y:i},n),o=s.radius,a=s.angle,l=n.innerRadius,u=n.outerRadius;if(o<l||o>u)return!1;if(o===0)return!0;var c=npe(n),f=c.startAngle,h=c.endAngle,d=a,p;if(f<=h){for(;d>h;)d-=360;for(;d<f;)d+=360;p=d>=f&&d<=h}else{for(;d>f;)d-=360;for(;d<h;)d+=360;p=d>=h&&d<=f}return p?t_(t_({},n),{},{radius:o,angle:rpe(d,n)}):null};function gd(t){"@babel/helpers - typeof";return gd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gd(t)}var ipe=["offset"];function spe(t){return upe(t)||lpe(t)||ape(t)||ope()}function ope(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ape(t,e){if(t){if(typeof t=="string")return cC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cC(t,e)}}function lpe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function upe(t){if(Array.isArray(t))return cC(t)}function cC(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function cpe(t,e){if(t==null)return{};var n=fpe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function fpe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function r_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function un(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?r_(Object(n),!0).forEach(function(r){hpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hpe(t,e,n){return e=dpe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dpe(t){var e=ppe(t,"string");return gd(e)=="symbol"?e:e+""}function ppe(t,e){if(gd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(gd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yd(){return yd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yd.apply(this,arguments)}var mpe=function(e){var n=e.value,r=e.formatter,i=Ve(e.children)?n:e.children;return Be(r)?r(i):i},gpe=function(e,n){var r=Hi(n-e),i=Math.min(Math.abs(n-e),360);return r*i},ype=function(e,n,r){var i=e.position,s=e.viewBox,o=e.offset,a=e.className,l=s,u=l.cx,c=l.cy,f=l.innerRadius,h=l.outerRadius,d=l.startAngle,p=l.endAngle,m=l.clockWise,g=(f+h)/2,y=gpe(d,p),v=y>=0?1:-1,x,b;i==="insideStart"?(x=d+v*o,b=m):i==="insideEnd"?(x=p-v*o,b=!m):i==="end"&&(x=p+v*o,b=m),b=y<=0?b:!b;var w=An(u,c,g,x),S=An(u,c,g,x+(b?1:-1)*359),C="M".concat(w.x,",").concat(w.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(b?0:1,`,
    `).concat(S.x,",").concat(S.y),$=Ve(e.id)?op("recharts-radial-line-"):e.id;return U.createElement("text",yd({},r,{dominantBaseline:"central",className:Qe("recharts-radial-bar-label",a)}),U.createElement("defs",null,U.createElement("path",{id:$,d:C})),U.createElement("textPath",{xlinkHref:"#".concat($)},n))},vpe=function(e){var n=e.viewBox,r=e.offset,i=e.position,s=n,o=s.cx,a=s.cy,l=s.innerRadius,u=s.outerRadius,c=s.startAngle,f=s.endAngle,h=(c+f)/2;if(i==="outside"){var d=An(o,a,u+r,h),p=d.x,m=d.y;return{x:p,y:m,textAnchor:p>=o?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:o,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:o,y:a,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:o,y:a,textAnchor:"middle",verticalAnchor:"end"};var g=(l+u)/2,y=An(o,a,g,h),v=y.x,x=y.y;return{x:v,y:x,textAnchor:"middle",verticalAnchor:"middle"}},xpe=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,s=e.position,o=n,a=o.x,l=o.y,u=o.width,c=o.height,f=c>=0?1:-1,h=f*i,d=f>0?"end":"start",p=f>0?"start":"end",m=u>=0?1:-1,g=m*i,y=m>0?"end":"start",v=m>0?"start":"end";if(s==="top"){var x={x:a+u/2,y:l-f*i,textAnchor:"middle",verticalAnchor:d};return un(un({},x),r?{height:Math.max(l-r.y,0),width:u}:{})}if(s==="bottom"){var b={x:a+u/2,y:l+c+h,textAnchor:"middle",verticalAnchor:p};return un(un({},b),r?{height:Math.max(r.y+r.height-(l+c),0),width:u}:{})}if(s==="left"){var w={x:a-g,y:l+c/2,textAnchor:y,verticalAnchor:"middle"};return un(un({},w),r?{width:Math.max(w.x-r.x,0),height:c}:{})}if(s==="right"){var S={x:a+u+g,y:l+c/2,textAnchor:v,verticalAnchor:"middle"};return un(un({},S),r?{width:Math.max(r.x+r.width-S.x,0),height:c}:{})}var C=r?{width:u,height:c}:{};return s==="insideLeft"?un({x:a+g,y:l+c/2,textAnchor:v,verticalAnchor:"middle"},C):s==="insideRight"?un({x:a+u-g,y:l+c/2,textAnchor:y,verticalAnchor:"middle"},C):s==="insideTop"?un({x:a+u/2,y:l+h,textAnchor:"middle",verticalAnchor:p},C):s==="insideBottom"?un({x:a+u/2,y:l+c-h,textAnchor:"middle",verticalAnchor:d},C):s==="insideTopLeft"?un({x:a+g,y:l+h,textAnchor:v,verticalAnchor:p},C):s==="insideTopRight"?un({x:a+u-g,y:l+h,textAnchor:y,verticalAnchor:p},C):s==="insideBottomLeft"?un({x:a+g,y:l+c-h,textAnchor:v,verticalAnchor:d},C):s==="insideBottomRight"?un({x:a+u-g,y:l+c-h,textAnchor:y,verticalAnchor:d},C):Xc(s)&&(he(s.x)||Za(s.x))&&(he(s.y)||Za(s.y))?un({x:a+bl(s.x,u),y:l+bl(s.y,c),textAnchor:"end",verticalAnchor:"end"},C):un({x:a+u/2,y:l+c/2,textAnchor:"middle",verticalAnchor:"middle"},C)},bpe=function(e){return"cx"in e&&he(e.cx)};function qn(t){var e=t.offset,n=e===void 0?5:e,r=cpe(t,ipe),i=un({offset:n},r),s=i.viewBox,o=i.position,a=i.value,l=i.children,u=i.content,c=i.className,f=c===void 0?"":c,h=i.textBreakAll;if(!s||Ve(a)&&Ve(l)&&!j.isValidElement(u)&&!Be(u))return null;if(j.isValidElement(u))return j.cloneElement(u,i);var d;if(Be(u)){if(d=j.createElement(u,i),j.isValidElement(d))return d}else d=mpe(i);var p=bpe(s),m=We(i,!0);if(p&&(o==="insideStart"||o==="insideEnd"||o==="end"))return ype(i,d,m);var g=p?vpe(i):xpe(i);return U.createElement(zy,yd({className:Qe("recharts-label",f)},m,g,{breakAll:h}),d)}qn.displayName="Label";var Sz=function(e){var n=e.cx,r=e.cy,i=e.angle,s=e.startAngle,o=e.endAngle,a=e.r,l=e.radius,u=e.innerRadius,c=e.outerRadius,f=e.x,h=e.y,d=e.top,p=e.left,m=e.width,g=e.height,y=e.clockWise,v=e.labelViewBox;if(v)return v;if(he(m)&&he(g)){if(he(f)&&he(h))return{x:f,y:h,width:m,height:g};if(he(d)&&he(p))return{x:d,y:p,width:m,height:g}}return he(f)&&he(h)?{x:f,y:h,width:0,height:0}:he(n)&&he(r)?{cx:n,cy:r,startAngle:s||i||0,endAngle:o||i||0,innerRadius:u||0,outerRadius:c||l||a||0,clockWise:y}:e.viewBox?e.viewBox:{}},wpe=function(e,n){return e?e===!0?U.createElement(qn,{key:"label-implicit",viewBox:n}):pn(e)?U.createElement(qn,{key:"label-implicit",viewBox:n,value:e}):j.isValidElement(e)?e.type===qn?j.cloneElement(e,{key:"label-implicit",viewBox:n}):U.createElement(qn,{key:"label-implicit",content:e,viewBox:n}):Be(e)?U.createElement(qn,{key:"label-implicit",content:e,viewBox:n}):Xc(e)?U.createElement(qn,yd({viewBox:n},e,{key:"label-implicit"})):null:null},Spe=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,s=Sz(e),o=vi(i,qn).map(function(l,u){return j.cloneElement(l,{viewBox:n||s,key:"label-".concat(u)})});if(!r)return o;var a=wpe(e.label,n||s);return[a].concat(spe(o))};qn.parseViewBox=Sz;qn.renderCallByParent=Spe;function Cpe(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var $pe=Cpe;const kpe=ut($pe);function vd(t){"@babel/helpers - typeof";return vd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vd(t)}var Ipe=["valueAccessor"],Tpe=["data","dataKey","clockWise","id","textBreakAll"];function Epe(t){return Ppe(t)||Ope(t)||Ape(t)||Npe()}function Npe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ape(t,e){if(t){if(typeof t=="string")return fC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fC(t,e)}}function Ope(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ppe(t){if(Array.isArray(t))return fC(t)}function fC(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function rv(){return rv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rv.apply(this,arguments)}function i_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function s_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?i_(Object(n),!0).forEach(function(r){_pe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _pe(t,e,n){return e=Dpe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dpe(t){var e=Rpe(t,"string");return vd(e)=="symbol"?e:e+""}function Rpe(t,e){if(vd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(vd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function o_(t,e){if(t==null)return{};var n=Mpe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Mpe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Fpe=function(e){return Array.isArray(e.value)?kpe(e.value):e.value};function Qo(t){var e=t.valueAccessor,n=e===void 0?Fpe:e,r=o_(t,Ipe),i=r.data,s=r.dataKey,o=r.clockWise,a=r.id,l=r.textBreakAll,u=o_(r,Tpe);return!i||!i.length?null:U.createElement(qt,{className:"recharts-label-list"},i.map(function(c,f){var h=Ve(s)?n(c,f):Ur(c&&c.payload,s),d=Ve(a)?{}:{id:"".concat(a,"-").concat(f)};return U.createElement(qn,rv({},We(c,!0),u,d,{parentViewBox:c.parentViewBox,value:h,textBreakAll:l,viewBox:qn.parseViewBox(Ve(o)?c:s_(s_({},c),{},{clockWise:o})),key:"label-".concat(f),index:f}))}))}Qo.displayName="LabelList";function Lpe(t,e){return t?t===!0?U.createElement(Qo,{key:"labelList-implicit",data:e}):U.isValidElement(t)||Be(t)?U.createElement(Qo,{key:"labelList-implicit",data:e,content:t}):Xc(t)?U.createElement(Qo,rv({data:e},t,{key:"labelList-implicit"})):null:null}function Bpe(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=vi(r,Qo).map(function(o,a){return j.cloneElement(o,{data:e,key:"labelList-".concat(a)})});if(!n)return i;var s=Lpe(t.label,e);return[s].concat(Epe(i))}Qo.renderCallByParent=Bpe;function xd(t){"@babel/helpers - typeof";return xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xd(t)}function hC(){return hC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hC.apply(this,arguments)}function a_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function l_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?a_(Object(n),!0).forEach(function(r){jpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jpe(t,e,n){return e=zpe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zpe(t){var e=Vpe(t,"string");return xd(e)=="symbol"?e:e+""}function Vpe(t,e){if(xd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(xd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Wpe=function(e,n){var r=Hi(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},cg=function(e){var n=e.cx,r=e.cy,i=e.radius,s=e.angle,o=e.sign,a=e.isExternal,l=e.cornerRadius,u=e.cornerIsExternal,c=l*(a?1:-1)+i,f=Math.asin(l/c)/nv,h=u?s:s+o*f,d=An(n,r,c,h),p=An(n,r,i,h),m=u?s-o*f:s,g=An(n,r,c*Math.cos(f*nv),m);return{center:d,circleTangency:p,lineTangency:g,theta:f}},Cz=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,s=e.outerRadius,o=e.startAngle,a=e.endAngle,l=Wpe(o,a),u=o+l,c=An(n,r,s,o),f=An(n,r,s,u),h="M ".concat(c.x,",").concat(c.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(o>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(i>0){var d=An(n,r,i,o),p=An(n,r,i,u);h+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(o<=u),`,
            `).concat(d.x,",").concat(d.y," Z")}else h+="L ".concat(n,",").concat(r," Z");return h},Upe=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,s=e.outerRadius,o=e.cornerRadius,a=e.forceCornerRadius,l=e.cornerIsExternal,u=e.startAngle,c=e.endAngle,f=Hi(c-u),h=cg({cx:n,cy:r,radius:s,angle:u,sign:f,cornerRadius:o,cornerIsExternal:l}),d=h.circleTangency,p=h.lineTangency,m=h.theta,g=cg({cx:n,cy:r,radius:s,angle:c,sign:-f,cornerRadius:o,cornerIsExternal:l}),y=g.circleTangency,v=g.lineTangency,x=g.theta,b=l?Math.abs(u-c):Math.abs(u-c)-m-x;if(b<0)return a?"M ".concat(p.x,",").concat(p.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):Cz({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:u,endAngle:c});var w="M ".concat(p.x,",").concat(p.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(d.x,",").concat(d.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(b>180),",").concat(+(f<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(v.x,",").concat(v.y,`
  `);if(i>0){var S=cg({cx:n,cy:r,radius:i,angle:u,sign:f,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),C=S.circleTangency,$=S.lineTangency,k=S.theta,I=cg({cx:n,cy:r,radius:i,angle:c,sign:-f,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),T=I.circleTangency,A=I.lineTangency,_=I.theta,D=l?Math.abs(u-c):Math.abs(u-c)-k-_;if(D<0&&o===0)return"".concat(w,"L").concat(n,",").concat(r,"Z");w+="L".concat(A.x,",").concat(A.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(T.x,",").concat(T.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(D>180),",").concat(+(f>0),",").concat(C.x,",").concat(C.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat($.x,",").concat($.y,"Z")}else w+="L".concat(n,",").concat(r,"Z");return w},Gpe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},$z=function(e){var n=l_(l_({},Gpe),e),r=n.cx,i=n.cy,s=n.innerRadius,o=n.outerRadius,a=n.cornerRadius,l=n.forceCornerRadius,u=n.cornerIsExternal,c=n.startAngle,f=n.endAngle,h=n.className;if(o<s||c===f)return null;var d=Qe("recharts-sector",h),p=o-s,m=bl(a,p,0,!0),g;return m>0&&Math.abs(c-f)<360?g=Upe({cx:r,cy:i,innerRadius:s,outerRadius:o,cornerRadius:Math.min(m,p/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:c,endAngle:f}):g=Cz({cx:r,cy:i,innerRadius:s,outerRadius:o,startAngle:c,endAngle:f}),U.createElement("path",hC({},We(n,!0),{className:d,d:g,role:"img"}))};function bd(t){"@babel/helpers - typeof";return bd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bd(t)}function dC(){return dC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dC.apply(this,arguments)}function u_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function c_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?u_(Object(n),!0).forEach(function(r){Hpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hpe(t,e,n){return e=Kpe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kpe(t){var e=qpe(t,"string");return bd(e)=="symbol"?e:e+""}function qpe(t,e){if(bd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(bd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var f_={curveBasisClosed:HJ,curveBasisOpen:KJ,curveBasis:GJ,curveBumpX:OJ,curveBumpY:PJ,curveLinearClosed:qJ,curveLinear:V0,curveMonotoneX:XJ,curveMonotoneY:YJ,curveNatural:ZJ,curveStep:QJ,curveStepAfter:eee,curveStepBefore:JJ},fg=function(e){return e.x===+e.x&&e.y===+e.y},Uf=function(e){return e.x},Gf=function(e){return e.y},Xpe=function(e,n){if(Be(e))return e;var r="curve".concat(j0(e));return(r==="curveMonotone"||r==="curveBump")&&n?f_["".concat(r).concat(n==="vertical"?"Y":"X")]:f_[r]||V0},Ype=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,s=i===void 0?[]:i,o=e.baseLine,a=e.layout,l=e.connectNulls,u=l===void 0?!1:l,c=Xpe(r,a),f=u?s.filter(function(m){return fg(m)}):s,h;if(Array.isArray(o)){var d=u?o.filter(function(m){return fg(m)}):o,p=f.map(function(m,g){return c_(c_({},m),{},{base:d[g]})});return a==="vertical"?h=tg().y(Gf).x1(Uf).x0(function(m){return m.base.x}):h=tg().x(Uf).y1(Gf).y0(function(m){return m.base.y}),h.defined(fg).curve(c),h(p)}return a==="vertical"&&he(o)?h=tg().y(Gf).x1(Uf).x0(o):he(o)?h=tg().x(Uf).y1(Gf).y0(o):h=CB().x(Uf).y(Gf),h.defined(fg).curve(c),h(f)},pC=function(e){var n=e.className,r=e.points,i=e.path,s=e.pathRef;if((!r||!r.length)&&!i)return null;var o=r&&r.length?Ype(e):i;return U.createElement("path",dC({},We(e,!1),Iy(e),{className:Qe("recharts-curve",n),d:o,ref:s}))},kz={exports:{}},Zpe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Qpe=Zpe,Jpe=Qpe;function Iz(){}function Tz(){}Tz.resetWarningCache=Iz;var eme=function(){function t(r,i,s,o,a,l){if(l!==Jpe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Tz,resetWarningCache:Iz};return n.PropTypes=n,n};kz.exports=eme();var tme=kz.exports;const tt=ut(tme);var nme=Object.getOwnPropertyNames,rme=Object.getOwnPropertySymbols,ime=Object.prototype.hasOwnProperty;function h_(t,e){return function(r,i,s){return t(r,i,s)&&e(r,i,s)}}function hg(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);var s=i.cache,o=s.get(n),a=s.get(r);if(o&&a)return o===r&&a===n;s.set(n,r),s.set(r,n);var l=t(n,r,i);return s.delete(n),s.delete(r),l}}function d_(t){return nme(t).concat(rme(t))}var sme=Object.hasOwn||function(t,e){return ime.call(t,e)};function Ul(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var ome="__v",ame="__o",lme="_owner",p_=Object.getOwnPropertyDescriptor,m_=Object.keys;function ume(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function cme(t,e){return Ul(t.getTime(),e.getTime())}function fme(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function hme(t,e){return t===e}function g_(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),s=t.entries(),o,a,l=0;(o=s.next())&&!o.done;){for(var u=e.entries(),c=!1,f=0;(a=u.next())&&!a.done;){if(i[f]){f++;continue}var h=o.value,d=a.value;if(n.equals(h[0],d[0],l,f,t,e,n)&&n.equals(h[1],d[1],h[0],d[0],t,e,n)){c=i[f]=!0;break}f++}if(!c)return!1;l++}return!0}var dme=Ul;function pme(t,e,n){var r=m_(t),i=r.length;if(m_(e).length!==i)return!1;for(;i-- >0;)if(!Ez(t,e,n,r[i]))return!1;return!0}function Hf(t,e,n){var r=d_(t),i=r.length;if(d_(e).length!==i)return!1;for(var s,o,a;i-- >0;)if(s=r[i],!Ez(t,e,n,s)||(o=p_(t,s),a=p_(e,s),(o||a)&&(!o||!a||o.configurable!==a.configurable||o.enumerable!==a.enumerable||o.writable!==a.writable)))return!1;return!0}function mme(t,e){return Ul(t.valueOf(),e.valueOf())}function gme(t,e){return t.source===e.source&&t.flags===e.flags}function y_(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),s=t.values(),o,a;(o=s.next())&&!o.done;){for(var l=e.values(),u=!1,c=0;(a=l.next())&&!a.done;){if(!i[c]&&n.equals(o.value,a.value,o.value,a.value,t,e,n)){u=i[c]=!0;break}c++}if(!u)return!1}return!0}function yme(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function vme(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function Ez(t,e,n,r){return(r===lme||r===ame||r===ome)&&(t.$$typeof||e.$$typeof)?!0:sme(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}var xme="[object Arguments]",bme="[object Boolean]",wme="[object Date]",Sme="[object Error]",Cme="[object Map]",$me="[object Number]",kme="[object Object]",Ime="[object RegExp]",Tme="[object Set]",Eme="[object String]",Nme="[object URL]",Ame=Array.isArray,v_=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,x_=Object.assign,Ome=Object.prototype.toString.call.bind(Object.prototype.toString);function Pme(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areErrorsEqual,i=t.areFunctionsEqual,s=t.areMapsEqual,o=t.areNumbersEqual,a=t.areObjectsEqual,l=t.arePrimitiveWrappersEqual,u=t.areRegExpsEqual,c=t.areSetsEqual,f=t.areTypedArraysEqual,h=t.areUrlsEqual;return function(p,m,g){if(p===m)return!0;if(p==null||m==null)return!1;var y=typeof p;if(y!==typeof m)return!1;if(y!=="object")return y==="number"?o(p,m,g):y==="function"?i(p,m,g):!1;var v=p.constructor;if(v!==m.constructor)return!1;if(v===Object)return a(p,m,g);if(Ame(p))return e(p,m,g);if(v_!=null&&v_(p))return f(p,m,g);if(v===Date)return n(p,m,g);if(v===RegExp)return u(p,m,g);if(v===Map)return s(p,m,g);if(v===Set)return c(p,m,g);var x=Ome(p);return x===wme?n(p,m,g):x===Ime?u(p,m,g):x===Cme?s(p,m,g):x===Tme?c(p,m,g):x===kme?typeof p.then!="function"&&typeof m.then!="function"&&a(p,m,g):x===Nme?h(p,m,g):x===Sme?r(p,m,g):x===xme?a(p,m,g):x===bme||x===$me||x===Eme?l(p,m,g):!1}}function _me(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,i={areArraysEqual:r?Hf:ume,areDatesEqual:cme,areErrorsEqual:fme,areFunctionsEqual:hme,areMapsEqual:r?h_(g_,Hf):g_,areNumbersEqual:dme,areObjectsEqual:r?Hf:pme,arePrimitiveWrappersEqual:mme,areRegExpsEqual:gme,areSetsEqual:r?h_(y_,Hf):y_,areTypedArraysEqual:r?Hf:yme,areUrlsEqual:vme};if(n&&(i=x_({},i,n(i))),e){var s=hg(i.areArraysEqual),o=hg(i.areMapsEqual),a=hg(i.areObjectsEqual),l=hg(i.areSetsEqual);i=x_({},i,{areArraysEqual:s,areMapsEqual:o,areObjectsEqual:a,areSetsEqual:l})}return i}function Dme(t){return function(e,n,r,i,s,o,a){return t(e,n,a)}}function Rme(t){var e=t.circular,n=t.comparator,r=t.createState,i=t.equals,s=t.strict;if(r)return function(l,u){var c=r(),f=c.cache,h=f===void 0?e?new WeakMap:void 0:f,d=c.meta;return n(l,u,{cache:h,equals:i,meta:d,strict:s})};if(e)return function(l,u){return n(l,u,{cache:new WeakMap,equals:i,meta:void 0,strict:s})};var o={cache:void 0,equals:i,meta:void 0,strict:s};return function(l,u){return n(l,u,o)}}var Mme=wa();wa({strict:!0});wa({circular:!0});wa({circular:!0,strict:!0});wa({createInternalComparator:function(){return Ul}});wa({strict:!0,createInternalComparator:function(){return Ul}});wa({circular:!0,createInternalComparator:function(){return Ul}});wa({circular:!0,createInternalComparator:function(){return Ul},strict:!0});function wa(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,i=t.createState,s=t.strict,o=s===void 0?!1:s,a=_me(t),l=Pme(a),u=r?r(l):Dme(l);return Rme({circular:n,comparator:l,createState:i,equals:u,strict:o})}function Fme(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function b_(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(s){n<0&&(n=s),s-n>e?(t(s),n=-1):Fme(i)};requestAnimationFrame(r)}function mC(t){"@babel/helpers - typeof";return mC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mC(t)}function Lme(t){return Vme(t)||zme(t)||jme(t)||Bme()}function Bme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jme(t,e){if(t){if(typeof t=="string")return w_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w_(t,e)}}function w_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function zme(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Vme(t){if(Array.isArray(t))return t}function Wme(){var t={},e=function(){return null},n=!1,r=function i(s){if(!n){if(Array.isArray(s)){if(!s.length)return;var o=s,a=Lme(o),l=a[0],u=a.slice(1);if(typeof l=="number"){b_(i.bind(null,u),l);return}i(l),b_(i.bind(null,u));return}mC(s)==="object"&&(t=s,e(t)),typeof s=="function"&&s()}};return{stop:function(){n=!0},start:function(s){n=!1,r(s)},subscribe:function(s){return e=s,function(){e=function(){return null}}}}}function wd(t){"@babel/helpers - typeof";return wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wd(t)}function S_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function C_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?S_(Object(n),!0).forEach(function(r){Nz(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Nz(t,e,n){return e=Ume(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ume(t){var e=Gme(t,"string");return wd(e)==="symbol"?e:String(e)}function Gme(t,e){if(wd(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(wd(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Hme=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(s){return i.includes(s)})})},Kme=function(e){return e},qme=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Ih=function(e,n){return Object.keys(n).reduce(function(r,i){return C_(C_({},r),{},Nz({},i,e(i,n[i])))},{})},$_=function(e,n,r){return e.map(function(i){return"".concat(qme(i)," ").concat(n,"ms ").concat(r)}).join(",")};function Xme(t,e){return Qme(t)||Zme(t,e)||Az(t,e)||Yme()}function Yme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zme(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function Qme(t){if(Array.isArray(t))return t}function Jme(t){return nge(t)||tge(t)||Az(t)||ege()}function ege(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Az(t,e){if(t){if(typeof t=="string")return gC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gC(t,e)}}function tge(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function nge(t){if(Array.isArray(t))return gC(t)}function gC(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var iv=1e-4,Oz=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},Pz=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},k_=function(e,n){return function(r){var i=Oz(e,n);return Pz(i,r)}},rge=function(e,n){return function(r){var i=Oz(e,n),s=[].concat(Jme(i.map(function(o,a){return o*a}).slice(1)),[0]);return Pz(s,r)}},I_=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],s=n[1],o=n[2],a=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,s=0,o=1,a=1;break;case"ease":i=.25,s=.1,o=.25,a=1;break;case"ease-in":i=.42,s=0,o=1,a=1;break;case"ease-out":i=.42,s=0,o=.58,a=1;break;case"ease-in-out":i=0,s=0,o=.58,a=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var u=l[1].split(")")[0].split(",").map(function(g){return parseFloat(g)}),c=Xme(u,4);i=c[0],s=c[1],o=c[2],a=c[3]}}}var f=k_(i,o),h=k_(s,a),d=rge(i,o),p=function(y){return y>1?1:y<0?0:y},m=function(y){for(var v=y>1?1:y,x=v,b=0;b<8;++b){var w=f(x)-v,S=d(x);if(Math.abs(w-v)<iv||S<iv)return h(x);x=p(x-w/S)}return h(x)};return m.isStepper=!1,m},ige=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,s=i===void 0?8:i,o=e.dt,a=o===void 0?17:o,l=function(c,f,h){var d=-(c-f)*r,p=h*s,m=h+(d-p)*a/1e3,g=h*a/1e3+c;return Math.abs(g-f)<iv&&Math.abs(m)<iv?[f,0]:[g,m]};return l.isStepper=!0,l.dt=a,l},sge=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return I_(i);case"spring":return ige();default:if(i.split("(")[0]==="cubic-bezier")return I_(i)}return typeof i=="function"?i:null};function Sd(t){"@babel/helpers - typeof";return Sd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sd(t)}function T_(t){return lge(t)||age(t)||_z(t)||oge()}function oge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function age(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function lge(t){if(Array.isArray(t))return vC(t)}function E_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Tn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?E_(Object(n),!0).forEach(function(r){yC(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yC(t,e,n){return e=uge(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uge(t){var e=cge(t,"string");return Sd(e)==="symbol"?e:String(e)}function cge(t,e){if(Sd(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Sd(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fge(t,e){return pge(t)||dge(t,e)||_z(t,e)||hge()}function hge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _z(t,e){if(t){if(typeof t=="string")return vC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vC(t,e)}}function vC(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function dge(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function pge(t){if(Array.isArray(t))return t}var sv=function(e,n,r){return e+(n-e)*r},xC=function(e){var n=e.from,r=e.to;return n!==r},mge=function t(e,n,r){var i=Ih(function(s,o){if(xC(o)){var a=e(o.from,o.to,o.velocity),l=fge(a,2),u=l[0],c=l[1];return Tn(Tn({},o),{},{from:u,velocity:c})}return o},n);return r<1?Ih(function(s,o){return xC(o)?Tn(Tn({},o),{},{velocity:sv(o.velocity,i[s].velocity,r),from:sv(o.from,i[s].from,r)}):o},n):t(e,i,r-1)};const gge=function(t,e,n,r,i){var s=Hme(t,e),o=s.reduce(function(g,y){return Tn(Tn({},g),{},yC({},y,[t[y],e[y]]))},{}),a=s.reduce(function(g,y){return Tn(Tn({},g),{},yC({},y,{from:t[y],velocity:0,to:e[y]}))},{}),l=-1,u,c,f=function(){return null},h=function(){return Ih(function(y,v){return v.from},a)},d=function(){return!Object.values(a).filter(xC).length},p=function(y){u||(u=y);var v=y-u,x=v/n.dt;a=mge(n,a,x),i(Tn(Tn(Tn({},t),e),h())),u=y,d()||(l=requestAnimationFrame(f))},m=function(y){c||(c=y);var v=(y-c)/r,x=Ih(function(w,S){return sv.apply(void 0,T_(S).concat([n(v)]))},o);if(i(Tn(Tn(Tn({},t),e),x)),v<1)l=requestAnimationFrame(f);else{var b=Ih(function(w,S){return sv.apply(void 0,T_(S).concat([n(1)]))},o);i(Tn(Tn(Tn({},t),e),b))}};return f=n.isStepper?p:m,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(l)}}};function mc(t){"@babel/helpers - typeof";return mc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mc(t)}var yge=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function vge(t,e){if(t==null)return{};var n=xge(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function xge(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function W1(t){return Cge(t)||Sge(t)||wge(t)||bge()}function bge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wge(t,e){if(t){if(typeof t=="string")return bC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bC(t,e)}}function Sge(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Cge(t){if(Array.isArray(t))return bC(t)}function bC(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function N_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Oi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?N_(Object(n),!0).forEach(function(r){ih(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ih(t,e,n){return e=Dz(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $ge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kge(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Dz(r.key),r)}}function Ige(t,e,n){return e&&kge(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Dz(t){var e=Tge(t,"string");return mc(e)==="symbol"?e:String(e)}function Tge(t,e){if(mc(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(mc(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ege(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wC(t,e)}function wC(t,e){return wC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},wC(t,e)}function Nge(t){var e=Age();return function(){var r=ov(t),i;if(e){var s=ov(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return SC(this,i)}}function SC(t,e){if(e&&(mc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CC(t)}function CC(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Age(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ov(t){return ov=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ov(t)}var lo=function(t){Ege(n,t);var e=Nge(n);function n(r,i){var s;$ge(this,n),s=e.call(this,r,i);var o=s.props,a=o.isActive,l=o.attributeName,u=o.from,c=o.to,f=o.steps,h=o.children,d=o.duration;if(s.handleStyleChange=s.handleStyleChange.bind(CC(s)),s.changeStyle=s.changeStyle.bind(CC(s)),!a||d<=0)return s.state={style:{}},typeof h=="function"&&(s.state={style:c}),SC(s);if(f&&f.length)s.state={style:f[0].style};else if(u){if(typeof h=="function")return s.state={style:u},SC(s);s.state={style:l?ih({},l,u):u}}else s.state={style:{}};return s}return Ige(n,[{key:"componentDidMount",value:function(){var i=this.props,s=i.isActive,o=i.canBegin;this.mounted=!0,!(!s||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var s=this.props,o=s.isActive,a=s.canBegin,l=s.attributeName,u=s.shouldReAnimate,c=s.to,f=s.from,h=this.state.style;if(a){if(!o){var d={style:l?ih({},l,c):c};this.state&&h&&(l&&h[l]!==c||!l&&h!==c)&&this.setState(d);return}if(!(Mme(i.to,c)&&i.canBegin&&i.isActive)){var p=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var m=p||u?f:i.to;if(this.state&&h){var g={style:l?ih({},l,m):m};(l&&h[l]!==m||!l&&h!==m)&&this.setState(g)}this.runAnimation(Oi(Oi({},this.props),{},{from:m,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var s=this,o=i.from,a=i.to,l=i.duration,u=i.easing,c=i.begin,f=i.onAnimationEnd,h=i.onAnimationStart,d=gge(o,a,sge(u),l,this.changeStyle),p=function(){s.stopJSAnimation=d()};this.manager.start([h,c,p,l,f])}},{key:"runStepAnimation",value:function(i){var s=this,o=i.steps,a=i.begin,l=i.onAnimationStart,u=o[0],c=u.style,f=u.duration,h=f===void 0?0:f,d=function(m,g,y){if(y===0)return m;var v=g.duration,x=g.easing,b=x===void 0?"ease":x,w=g.style,S=g.properties,C=g.onAnimationEnd,$=y>0?o[y-1]:g,k=S||Object.keys(w);if(typeof b=="function"||b==="spring")return[].concat(W1(m),[s.runJSAnimation.bind(s,{from:$.style,to:w,duration:v,easing:b}),v]);var I=$_(k,v,b),T=Oi(Oi(Oi({},$.style),w),{},{transition:I});return[].concat(W1(m),[T,v,C]).filter(Kme)};return this.manager.start([l].concat(W1(o.reduce(d,[c,Math.max(h,a)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=Wme());var s=i.begin,o=i.duration,a=i.attributeName,l=i.to,u=i.easing,c=i.onAnimationStart,f=i.onAnimationEnd,h=i.steps,d=i.children,p=this.manager;if(this.unSubscribe=p.subscribe(this.handleStyleChange),typeof u=="function"||typeof d=="function"||u==="spring"){this.runJSAnimation(i);return}if(h.length>1){this.runStepAnimation(i);return}var m=a?ih({},a,l):l,g=$_(Object.keys(m),o,u);p.start([c,s,Oi(Oi({},m),{},{transition:g}),o,f])}},{key:"render",value:function(){var i=this.props,s=i.children;i.begin;var o=i.duration;i.attributeName,i.easing;var a=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=vge(i,yge),u=j.Children.count(s),c=this.state.style;if(typeof s=="function")return s(c);if(!a||u===0||o<=0)return s;var f=function(d){var p=d.props,m=p.style,g=m===void 0?{}:m,y=p.className,v=j.cloneElement(d,Oi(Oi({},l),{},{style:Oi(Oi({},g),c),className:y}));return v};return u===1?f(j.Children.only(s)):U.createElement("div",null,j.Children.map(s,function(h){return f(h)}))}}]),n}(j.PureComponent);lo.displayName="Animate";lo.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};lo.propTypes={from:tt.oneOfType([tt.object,tt.string]),to:tt.oneOfType([tt.object,tt.string]),attributeName:tt.string,duration:tt.number,begin:tt.number,easing:tt.oneOfType([tt.string,tt.func]),steps:tt.arrayOf(tt.shape({duration:tt.number.isRequired,style:tt.object.isRequired,easing:tt.oneOfType([tt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),tt.func]),properties:tt.arrayOf("string"),onAnimationEnd:tt.func})),children:tt.oneOfType([tt.node,tt.func]),isActive:tt.bool,canBegin:tt.bool,onAnimationEnd:tt.func,shouldReAnimate:tt.bool,onAnimationStart:tt.func,onAnimationReStart:tt.func};function Cd(t){"@babel/helpers - typeof";return Cd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cd(t)}function av(){return av=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},av.apply(this,arguments)}function Oge(t,e){return Rge(t)||Dge(t,e)||_ge(t,e)||Pge()}function Pge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _ge(t,e){if(t){if(typeof t=="string")return A_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A_(t,e)}}function A_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Dge(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function Rge(t){if(Array.isArray(t))return t}function O_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function P_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?O_(Object(n),!0).forEach(function(r){Mge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mge(t,e,n){return e=Fge(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fge(t){var e=Lge(t,"string");return Cd(e)=="symbol"?e:e+""}function Lge(t,e){if(Cd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Cd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var __=function(e,n,r,i,s){var o=Math.min(Math.abs(r)/2,Math.abs(i)/2),a=i>=0?1:-1,l=r>=0?1:-1,u=i>=0&&r>=0||i<0&&r<0?1:0,c;if(o>0&&s instanceof Array){for(var f=[0,0,0,0],h=0,d=4;h<d;h++)f[h]=s[h]>o?o:s[h];c="M".concat(e,",").concat(n+a*f[0]),f[0]>0&&(c+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(e+l*f[0],",").concat(n)),c+="L ".concat(e+r-l*f[1],",").concat(n),f[1]>0&&(c+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(e+r,",").concat(n+a*f[1])),c+="L ".concat(e+r,",").concat(n+i-a*f[2]),f[2]>0&&(c+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(e+r-l*f[2],",").concat(n+i)),c+="L ".concat(e+l*f[3],",").concat(n+i),f[3]>0&&(c+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(n+i-a*f[3])),c+="Z"}else if(o>0&&s===+s&&s>0){var p=Math.min(o,s);c="M ".concat(e,",").concat(n+a*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(u,",").concat(e+l*p,",").concat(n,`
            L `).concat(e+r-l*p,",").concat(n,`
            A `).concat(p,",").concat(p,",0,0,").concat(u,",").concat(e+r,",").concat(n+a*p,`
            L `).concat(e+r,",").concat(n+i-a*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(u,",").concat(e+r-l*p,",").concat(n+i,`
            L `).concat(e+l*p,",").concat(n+i,`
            A `).concat(p,",").concat(p,",0,0,").concat(u,",").concat(e,",").concat(n+i-a*p," Z")}else c="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return c},Bge=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,s=n.x,o=n.y,a=n.width,l=n.height;if(Math.abs(a)>0&&Math.abs(l)>0){var u=Math.min(s,s+a),c=Math.max(s,s+a),f=Math.min(o,o+l),h=Math.max(o,o+l);return r>=u&&r<=c&&i>=f&&i<=h}return!1},jge={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},LI=function(e){var n=P_(P_({},jge),e),r=j.useRef(),i=j.useState(-1),s=Oge(i,2),o=s[0],a=s[1];j.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var b=r.current.getTotalLength();b&&a(b)}catch{}},[]);var l=n.x,u=n.y,c=n.width,f=n.height,h=n.radius,d=n.className,p=n.animationEasing,m=n.animationDuration,g=n.animationBegin,y=n.isAnimationActive,v=n.isUpdateAnimationActive;if(l!==+l||u!==+u||c!==+c||f!==+f||c===0||f===0)return null;var x=Qe("recharts-rectangle",d);return v?U.createElement(lo,{canBegin:o>0,from:{width:c,height:f,x:l,y:u},to:{width:c,height:f,x:l,y:u},duration:m,animationEasing:p,isActive:v},function(b){var w=b.width,S=b.height,C=b.x,$=b.y;return U.createElement(lo,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:m,isActive:y,easing:p},U.createElement("path",av({},We(n,!0),{className:x,d:__(C,$,w,S,h),ref:r})))}):U.createElement("path",av({},We(n,!0),{className:x,d:__(l,u,c,f,h)}))};function $C(){return $C=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$C.apply(this,arguments)}var BI=function(e){var n=e.cx,r=e.cy,i=e.r,s=e.className,o=Qe("recharts-dot",s);return n===+n&&r===+r&&i===+i?U.createElement("circle",$C({},We(e,!1),Iy(e),{className:o,cx:n,cy:r,r:i})):null};function $d(t){"@babel/helpers - typeof";return $d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$d(t)}var zge=["x","y","top","left","width","height","className"];function kC(){return kC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kC.apply(this,arguments)}function D_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Vge(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?D_(Object(n),!0).forEach(function(r){Wge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wge(t,e,n){return e=Uge(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uge(t){var e=Gge(t,"string");return $d(e)=="symbol"?e:e+""}function Gge(t,e){if($d(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if($d(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hge(t,e){if(t==null)return{};var n=Kge(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Kge(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var qge=function(e,n,r,i,s,o){return"M".concat(e,",").concat(s,"v").concat(i,"M").concat(o,",").concat(n,"h").concat(r)},Xge=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,s=i===void 0?0:i,o=e.top,a=o===void 0?0:o,l=e.left,u=l===void 0?0:l,c=e.width,f=c===void 0?0:c,h=e.height,d=h===void 0?0:h,p=e.className,m=Hge(e,zge),g=Vge({x:r,y:s,top:a,left:u,width:f,height:d},m);return!he(r)||!he(s)||!he(f)||!he(d)||!he(a)||!he(u)?null:U.createElement("path",kC({},We(g,!0),{className:Qe("recharts-cross",p),d:qge(r,s,f,d,a,u)}))},Yge=KB,Zge=Yge(Object.getPrototypeOf,Object),Qge=Zge,Jge=go,eye=Qge,tye=yo,nye="[object Object]",rye=Function.prototype,iye=Object.prototype,Rz=rye.toString,sye=iye.hasOwnProperty,oye=Rz.call(Object);function aye(t){if(!tye(t)||Jge(t)!=nye)return!1;var e=eye(t);if(e===null)return!0;var n=sye.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Rz.call(n)==oye}var lye=aye;const uye=ut(lye);var cye=go,fye=yo,hye="[object Boolean]";function dye(t){return t===!0||t===!1||fye(t)&&cye(t)==hye}var pye=dye;const mye=ut(pye);function kd(t){"@babel/helpers - typeof";return kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kd(t)}function lv(){return lv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lv.apply(this,arguments)}function gye(t,e){return bye(t)||xye(t,e)||vye(t,e)||yye()}function yye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vye(t,e){if(t){if(typeof t=="string")return R_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R_(t,e)}}function R_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function xye(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function bye(t){if(Array.isArray(t))return t}function M_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function F_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?M_(Object(n),!0).forEach(function(r){wye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wye(t,e,n){return e=Sye(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sye(t){var e=Cye(t,"string");return kd(e)=="symbol"?e:e+""}function Cye(t,e){if(kd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(kd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var L_=function(e,n,r,i,s){var o=r-i,a;return a="M ".concat(e,",").concat(n),a+="L ".concat(e+r,",").concat(n),a+="L ".concat(e+r-o/2,",").concat(n+s),a+="L ".concat(e+r-o/2-i,",").concat(n+s),a+="L ".concat(e,",").concat(n," Z"),a},$ye={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},kye=function(e){var n=F_(F_({},$ye),e),r=j.useRef(),i=j.useState(-1),s=gye(i,2),o=s[0],a=s[1];j.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var x=r.current.getTotalLength();x&&a(x)}catch{}},[]);var l=n.x,u=n.y,c=n.upperWidth,f=n.lowerWidth,h=n.height,d=n.className,p=n.animationEasing,m=n.animationDuration,g=n.animationBegin,y=n.isUpdateAnimationActive;if(l!==+l||u!==+u||c!==+c||f!==+f||h!==+h||c===0&&f===0||h===0)return null;var v=Qe("recharts-trapezoid",d);return y?U.createElement(lo,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:h,x:l,y:u},to:{upperWidth:c,lowerWidth:f,height:h,x:l,y:u},duration:m,animationEasing:p,isActive:y},function(x){var b=x.upperWidth,w=x.lowerWidth,S=x.height,C=x.x,$=x.y;return U.createElement(lo,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:m,easing:p},U.createElement("path",lv({},We(n,!0),{className:v,d:L_(C,$,b,w,S),ref:r})))}):U.createElement("g",null,U.createElement("path",lv({},We(n,!0),{className:v,d:L_(l,u,c,f,h)})))},Iye=["option","shapeType","propTransformer","activeClassName","isActive"];function Id(t){"@babel/helpers - typeof";return Id=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Id(t)}function Tye(t,e){if(t==null)return{};var n=Eye(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Eye(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function B_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function uv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?B_(Object(n),!0).forEach(function(r){Nye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Nye(t,e,n){return e=Aye(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Aye(t){var e=Oye(t,"string");return Id(e)=="symbol"?e:e+""}function Oye(t,e){if(Id(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Id(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Pye(t,e){return uv(uv({},e),t)}function _ye(t,e){return t==="symbols"}function j_(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return U.createElement(LI,n);case"trapezoid":return U.createElement(kye,n);case"sector":return U.createElement($z,n);case"symbols":if(_ye(e))return U.createElement(rI,n);break;default:return null}}function Dye(t){return j.isValidElement(t)?t.props:t}function Rye(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?Pye:r,s=t.activeClassName,o=s===void 0?"recharts-active-shape":s,a=t.isActive,l=Tye(t,Iye),u;if(j.isValidElement(e))u=j.cloneElement(e,uv(uv({},l),Dye(e)));else if(Be(e))u=e(l);else if(uye(e)&&!mye(e)){var c=i(e,l);u=U.createElement(j_,{shapeType:n,elementProps:c})}else{var f=l;u=U.createElement(j_,{shapeType:n,elementProps:f})}return a?U.createElement(qt,{className:o},u):u}function ix(t,e){return e!=null&&"trapezoids"in t.props}function sx(t,e){return e!=null&&"sectors"in t.props}function Td(t,e){return e!=null&&"points"in t.props}function Mye(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,s=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&s}function Fye(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function Lye(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function Bye(t,e){var n;return ix(t,e)?n=Mye:sx(t,e)?n=Fye:Td(t,e)&&(n=Lye),n}function jye(t,e){var n;return ix(t,e)?n="trapezoids":sx(t,e)?n="sectors":Td(t,e)&&(n="points"),n}function zye(t,e){if(ix(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(sx(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return Td(t,e)?e.payload:{}}function Vye(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=jye(n,e),s=zye(n,e),o=r.filter(function(l,u){var c=tx(s,l),f=n.props[i].filter(function(p){var m=Bye(n,e);return m(p,e)}),h=n.props[i].indexOf(f[f.length-1]),d=u===h;return c&&d}),a=r.indexOf(o[o.length-1]);return a}var Wye=Math.ceil,Uye=Math.max;function Gye(t,e,n,r){for(var i=-1,s=Uye(Wye((e-t)/(n||1)),0),o=Array(s);s--;)o[r?s:++i]=t,t+=n;return o}var Hye=Gye,Kye=hj,z_=1/0,qye=17976931348623157e292;function Xye(t){if(!t)return t===0?t:0;if(t=Kye(t),t===z_||t===-z_){var e=t<0?-1:1;return e*qye}return t===t?t:0}var Mz=Xye,Yye=Hye,Zye=H0,U1=Mz;function Qye(t){return function(e,n,r){return r&&typeof r!="number"&&Zye(e,n,r)&&(n=r=void 0),e=U1(e),n===void 0?(n=e,e=0):n=U1(n),r=r===void 0?e<n?1:-1:U1(r),Yye(e,n,r,t)}}var Jye=Qye,eve=Jye,tve=eve(),nve=tve;const cv=ut(nve);function Ed(t){"@babel/helpers - typeof";return Ed=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ed(t)}function V_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function W_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V_(Object(n),!0).forEach(function(r){Fz(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Fz(t,e,n){return e=rve(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rve(t){var e=ive(t,"string");return Ed(e)=="symbol"?e:e+""}function ive(t,e){if(Ed(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ed(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var sve=["Webkit","Moz","O","ms"],ove=function(e,n){var r=e.replace(/(\w)/,function(s){return s.toUpperCase()}),i=sve.reduce(function(s,o){return W_(W_({},s),{},Fz({},o+r,n))},{});return i[e]=n,i};function gc(t){"@babel/helpers - typeof";return gc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gc(t)}function fv(){return fv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fv.apply(this,arguments)}function U_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function G1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?U_(Object(n),!0).forEach(function(r){_r(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ave(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function G_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Bz(r.key),r)}}function lve(t,e,n){return e&&G_(t.prototype,e),n&&G_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function uve(t,e,n){return e=hv(e),cve(t,Lz()?Reflect.construct(e,n||[],hv(t).constructor):e.apply(t,n))}function cve(t,e){if(e&&(gc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fve(t)}function fve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Lz(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Lz=function(){return!!t})()}function hv(t){return hv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},hv(t)}function hve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&IC(t,e)}function IC(t,e){return IC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},IC(t,e)}function _r(t,e,n){return e=Bz(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bz(t){var e=dve(t,"string");return gc(e)=="symbol"?e:e+""}function dve(t,e){if(gc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(gc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pve=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,s=e.x,o=e.width,a=e.travellerWidth;if(!n||!n.length)return{};var l=n.length,u=$h().domain(cv(0,l)).range([s,s+o-a]),c=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(i),scale:u,scaleValues:c}},H_=function(e){return e.changedTouches&&!!e.changedTouches.length},yc=function(t){function e(n){var r;return ave(this,e),r=uve(this,e,[n]),_r(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),_r(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),_r(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,s=i.endIndex,o=i.onDragEnd,a=i.startIndex;o==null||o({endIndex:s,startIndex:a})}),r.detachDragEndListener()}),_r(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),_r(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),_r(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),_r(r,"handleSlideDragStart",function(i){var s=H_(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return hve(e,t),lve(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,s=r.endX,o=this.state.scaleValues,a=this.props,l=a.gap,u=a.data,c=u.length-1,f=Math.min(i,s),h=Math.max(i,s),d=e.getIndexInRange(o,f),p=e.getIndexInRange(o,h);return{startIndex:d-d%l,endIndex:p===c?c:p-p%l}}},{key:"getTextOfTick",value:function(r){var i=this.props,s=i.data,o=i.tickFormatter,a=i.dataKey,l=Ur(s[r],a,r);return Be(o)?o(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,s=i.slideMoveStartX,o=i.startX,a=i.endX,l=this.props,u=l.x,c=l.width,f=l.travellerWidth,h=l.startIndex,d=l.endIndex,p=l.onChange,m=r.pageX-s;m>0?m=Math.min(m,u+c-f-a,u+c-f-o):m<0&&(m=Math.max(m,u-o,u-a));var g=this.getIndex({startX:o+m,endX:a+m});(g.startIndex!==h||g.endIndex!==d)&&p&&p(g),this.setState({startX:o+m,endX:a+m,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var s=H_(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,s=i.brushMoveStartX,o=i.movingTravellerId,a=i.endX,l=i.startX,u=this.state[o],c=this.props,f=c.x,h=c.width,d=c.travellerWidth,p=c.onChange,m=c.gap,g=c.data,y={startX:this.state.startX,endX:this.state.endX},v=r.pageX-s;v>0?v=Math.min(v,f+h-d-u):v<0&&(v=Math.max(v,f-u)),y[o]=u+v;var x=this.getIndex(y),b=x.startIndex,w=x.endIndex,S=function(){var $=g.length-1;return o==="startX"&&(a>l?b%m===0:w%m===0)||a<l&&w===$||o==="endX"&&(a>l?w%m===0:b%m===0)||a>l&&w===$};this.setState(_r(_r({},o,u+v),"brushMoveStartX",r.pageX),function(){p&&S()&&p(x)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var s=this,o=this.state,a=o.scaleValues,l=o.startX,u=o.endX,c=this.state[i],f=a.indexOf(c);if(f!==-1){var h=f+r;if(!(h===-1||h>=a.length)){var d=a[h];i==="startX"&&d>=u||i==="endX"&&d<=l||this.setState(_r({},i,d),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,s=r.y,o=r.width,a=r.height,l=r.fill,u=r.stroke;return U.createElement("rect",{stroke:u,fill:l,x:i,y:s,width:o,height:a})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,s=r.y,o=r.width,a=r.height,l=r.data,u=r.children,c=r.padding,f=j.Children.only(u);return f?U.cloneElement(f,{x:i,y:s,width:o,height:a,margin:c,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,i){var s,o,a=this,l=this.props,u=l.y,c=l.travellerWidth,f=l.height,h=l.traveller,d=l.ariaLabel,p=l.data,m=l.startIndex,g=l.endIndex,y=Math.max(r,this.props.x),v=G1(G1({},We(this.props,!1)),{},{x:y,y:u,width:c,height:f}),x=d||"Min value: ".concat((s=p[m])===null||s===void 0?void 0:s.name,", Max value: ").concat((o=p[g])===null||o===void 0?void 0:o.name);return U.createElement(qt,{tabIndex:0,role:"slider","aria-label":x,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(w){["ArrowLeft","ArrowRight"].includes(w.key)&&(w.preventDefault(),w.stopPropagation(),a.handleTravellerMoveKeyboard(w.key==="ArrowRight"?1:-1,i))},onFocus:function(){a.setState({isTravellerFocused:!0})},onBlur:function(){a.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(h,v))}},{key:"renderSlide",value:function(r,i){var s=this.props,o=s.y,a=s.height,l=s.stroke,u=s.travellerWidth,c=Math.min(r,i)+u,f=Math.max(Math.abs(i-r)-u,0);return U.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:c,y:o,width:f,height:a})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,s=r.endIndex,o=r.y,a=r.height,l=r.travellerWidth,u=r.stroke,c=this.state,f=c.startX,h=c.endX,d=5,p={pointerEvents:"none",fill:u};return U.createElement(qt,{className:"recharts-brush-texts"},U.createElement(zy,fv({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,h)-d,y:o+a/2},p),this.getTextOfTick(i)),U.createElement(zy,fv({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,h)+l+d,y:o+a/2},p),this.getTextOfTick(s)))}},{key:"render",value:function(){var r=this.props,i=r.data,s=r.className,o=r.children,a=r.x,l=r.y,u=r.width,c=r.height,f=r.alwaysShowText,h=this.state,d=h.startX,p=h.endX,m=h.isTextActive,g=h.isSlideMoving,y=h.isTravellerMoving,v=h.isTravellerFocused;if(!i||!i.length||!he(a)||!he(l)||!he(u)||!he(c)||u<=0||c<=0)return null;var x=Qe("recharts-brush",s),b=U.Children.count(o)===1,w=ove("userSelect","none");return U.createElement(qt,{className:x,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),b&&this.renderPanorama(),this.renderSlide(d,p),this.renderTravellerLayer(d,"startX"),this.renderTravellerLayer(p,"endX"),(m||g||y||v||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,s=r.y,o=r.width,a=r.height,l=r.stroke,u=Math.floor(s+a/2)-1;return U.createElement(U.Fragment,null,U.createElement("rect",{x:i,y:s,width:o,height:a,fill:l,stroke:"none"}),U.createElement("line",{x1:i+1,y1:u,x2:i+o-1,y2:u,fill:"none",stroke:"#fff"}),U.createElement("line",{x1:i+1,y1:u+2,x2:i+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var s;return U.isValidElement(r)?s=U.cloneElement(r,i):Be(r)?s=r(i):s=e.renderDefaultTraveller(i),s}},{key:"getDerivedStateFromProps",value:function(r,i){var s=r.data,o=r.width,a=r.x,l=r.travellerWidth,u=r.updateId,c=r.startIndex,f=r.endIndex;if(s!==i.prevData||u!==i.prevUpdateId)return G1({prevData:s,prevTravellerWidth:l,prevUpdateId:u,prevX:a,prevWidth:o},s&&s.length?pve({data:s,width:o,x:a,travellerWidth:l,startIndex:c,endIndex:f}):{scale:null,scaleValues:null});if(i.scale&&(o!==i.prevWidth||a!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([a,a+o-l]);var h=i.scale.domain().map(function(d){return i.scale(d)});return{prevData:s,prevTravellerWidth:l,prevUpdateId:u,prevX:a,prevWidth:o,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(r,i){for(var s=r.length,o=0,a=s-1;a-o>1;){var l=Math.floor((o+a)/2);r[l]>i?a=l:o=l}return i>=r[a]?a:o}}])}(j.PureComponent);_r(yc,"displayName","Brush");_r(yc,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var mve=cI;function gve(t,e){var n;return mve(t,function(r,i,s){return n=e(r,i,s),!n}),!!n}var yve=gve,vve=BB,xve=va,bve=yve,wve=Ar,Sve=H0;function Cve(t,e,n){var r=wve(t)?vve:bve;return n&&Sve(t,e,n)&&(e=void 0),r(t,xve(e))}var $ve=Cve;const kve=ut($ve);var xs=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},K_=aj;function Ive(t,e,n){e=="__proto__"&&K_?K_(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var Tve=Ive,Eve=Tve,Nve=sj,Ave=va;function Ove(t,e){var n={};return e=Ave(e),Nve(t,function(r,i,s){Eve(n,i,e(r,i,s))}),n}var Pve=Ove;const _ve=ut(Pve);function Dve(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var Rve=Dve,Mve=cI;function Fve(t,e){var n=!0;return Mve(t,function(r,i,s){return n=!!e(r,i,s),n}),n}var Lve=Fve,Bve=Rve,jve=Lve,zve=va,Vve=Ar,Wve=H0;function Uve(t,e,n){var r=Vve(t)?Bve:jve;return n&&Wve(t,e,n)&&(e=void 0),r(t,zve(e))}var Gve=Uve;const jz=ut(Gve);var Hve=["x","y"];function Nd(t){"@babel/helpers - typeof";return Nd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nd(t)}function TC(){return TC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},TC.apply(this,arguments)}function q_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Kf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?q_(Object(n),!0).forEach(function(r){Kve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Kve(t,e,n){return e=qve(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qve(t){var e=Xve(t,"string");return Nd(e)=="symbol"?e:e+""}function Xve(t,e){if(Nd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Nd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Yve(t,e){if(t==null)return{};var n=Zve(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Zve(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Qve(t,e){var n=t.x,r=t.y,i=Yve(t,Hve),s="".concat(n),o=parseInt(s,10),a="".concat(r),l=parseInt(a,10),u="".concat(e.height||i.height),c=parseInt(u,10),f="".concat(e.width||i.width),h=parseInt(f,10);return Kf(Kf(Kf(Kf(Kf({},e),i),o?{x:o}:{}),l?{y:l}:{}),{},{height:c,width:h,name:e.name,radius:e.radius})}function X_(t){return U.createElement(Rye,TC({shapeType:"rectangle",propTransformer:Qve,activeClassName:"recharts-active-bar"},t))}var Jve=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var s=typeof r=="number";return s?e(r,i):(s||Sl(),n)}},e0e=["value","background"],zz;function vc(t){"@babel/helpers - typeof";return vc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vc(t)}function t0e(t,e){if(t==null)return{};var n=n0e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function n0e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function dv(){return dv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dv.apply(this,arguments)}function Y_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Zt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y_(Object(n),!0).forEach(function(r){Lo(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function r0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Z_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Wz(r.key),r)}}function i0e(t,e,n){return e&&Z_(t.prototype,e),n&&Z_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function s0e(t,e,n){return e=pv(e),o0e(t,Vz()?Reflect.construct(e,n||[],pv(t).constructor):e.apply(t,n))}function o0e(t,e){if(e&&(vc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return a0e(t)}function a0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Vz(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Vz=function(){return!!t})()}function pv(t){return pv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},pv(t)}function l0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&EC(t,e)}function EC(t,e){return EC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},EC(t,e)}function Lo(t,e,n){return e=Wz(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wz(t){var e=u0e(t,"string");return vc(e)=="symbol"?e:e+""}function u0e(t,e){if(vc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(vc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Zs=function(t){function e(){var n;r0e(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=s0e(this,e,[].concat(i)),Lo(n,"state",{isAnimationFinished:!1}),Lo(n,"id",op("recharts-bar-")),Lo(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),Lo(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return l0e(e,t),i0e(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,s=this.props,o=s.shape,a=s.dataKey,l=s.activeIndex,u=s.activeBar,c=We(this.props,!1);return r&&r.map(function(f,h){var d=h===l,p=d?u:o,m=Zt(Zt(Zt({},c),f),{},{isActive:d,option:p,index:h,dataKey:a,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return U.createElement(qt,dv({className:"recharts-bar-rectangle"},Ty(i.props,f,h),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(h)}),U.createElement(X_,m))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,s=i.data,o=i.layout,a=i.isAnimationActive,l=i.animationBegin,u=i.animationDuration,c=i.animationEasing,f=i.animationId,h=this.state.prevData;return U.createElement(lo,{begin:l,duration:u,isActive:a,easing:c,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(d){var p=d.t,m=s.map(function(g,y){var v=h&&h[y];if(v){var x=zi(v.x,g.x),b=zi(v.y,g.y),w=zi(v.width,g.width),S=zi(v.height,g.height);return Zt(Zt({},g),{},{x:x(p),y:b(p),width:w(p),height:S(p)})}if(o==="horizontal"){var C=zi(0,g.height),$=C(p);return Zt(Zt({},g),{},{y:g.y+g.height-$,height:$})}var k=zi(0,g.width),I=k(p);return Zt(Zt({},g),{},{width:I})});return U.createElement(qt,null,r.renderRectanglesStatically(m))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,s=r.isAnimationActive,o=this.state.prevData;return s&&i&&i.length&&(!o||!tx(o,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,s=i.data,o=i.dataKey,a=i.activeIndex,l=We(this.props.background,!1);return s.map(function(u,c){u.value;var f=u.background,h=t0e(u,e0e);if(!f)return null;var d=Zt(Zt(Zt(Zt(Zt({},h),{},{fill:"#eee"},f),l),Ty(r.props,u,c)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:o,index:c,className:"recharts-bar-background-rectangle"});return U.createElement(X_,dv({key:"background-bar-".concat(c),option:r.props.background,isActive:c===a},d))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.data,a=s.xAxis,l=s.yAxis,u=s.layout,c=s.children,f=vi(c,hp);if(!f)return null;var h=u==="vertical"?o[0].height/2:o[0].width/2,d=function(g,y){var v=Array.isArray(g.value)?g.value[1]:g.value;return{x:g.x,y:g.y,value:v,errorVal:Ur(g,y)}},p={clipPath:r?"url(#clipPath-".concat(i,")"):null};return U.createElement(qt,p,f.map(function(m){return U.cloneElement(m,{key:"error-bar-".concat(i,"-").concat(m.props.dataKey),data:o,xAxis:a,yAxis:l,layout:u,offset:h,dataPointFormatter:d})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,s=r.data,o=r.className,a=r.xAxis,l=r.yAxis,u=r.left,c=r.top,f=r.width,h=r.height,d=r.isAnimationActive,p=r.background,m=r.id;if(i||!s||!s.length)return null;var g=this.state.isAnimationFinished,y=Qe("recharts-bar",o),v=a&&a.allowDataOverflow,x=l&&l.allowDataOverflow,b=v||x,w=Ve(m)?this.id:m;return U.createElement(qt,{className:y},v||x?U.createElement("defs",null,U.createElement("clipPath",{id:"clipPath-".concat(w)},U.createElement("rect",{x:v?u:u-f/2,y:x?c:c-h/2,width:v?f:f*2,height:x?h:h*2}))):null,U.createElement(qt,{className:"recharts-bar-rectangles",clipPath:b?"url(#clipPath-".concat(w,")"):null},p?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(b,w),(!d||g)&&Qo.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(j.PureComponent);zz=Zs;Lo(Zs,"displayName","Bar");Lo(Zs,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Xs.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Lo(Zs,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,s=t.xAxis,o=t.yAxis,a=t.xAxisTicks,l=t.yAxisTicks,u=t.stackedData,c=t.dataStartIndex,f=t.displayedData,h=t.offset,d=Bde(r,n);if(!d)return null;var p=e.layout,m=n.type.defaultProps,g=m!==void 0?Zt(Zt({},m),n.props):n.props,y=g.dataKey,v=g.children,x=g.minPointSize,b=p==="horizontal"?o:s,w=u?b.scale.domain():null,S=Kde({numericAxis:b}),C=vi(v,mj),$=f.map(function(k,I){var T,A,_,D,P,R;u?T=jde(u[c+I],w):(T=Ur(k,y),Array.isArray(T)||(T=[S,T]));var F=Jve(x,zz.defaultProps.minPointSize)(T[1],I);if(p==="horizontal"){var O,M=[o.scale(T[0]),o.scale(T[1])],V=M[0],q=M[1];A=YP({axis:s,ticks:a,bandSize:i,offset:d.offset,entry:k,index:I}),_=(O=q??V)!==null&&O!==void 0?O:void 0,D=d.size;var K=V-q;if(P=Number.isNaN(K)?0:K,R={x:A,y:o.y,width:D,height:o.height},Math.abs(F)>0&&Math.abs(P)<Math.abs(F)){var Z=Hi(P||F)*(Math.abs(F)-Math.abs(P));_-=Z,P+=Z}}else{var re=[s.scale(T[0]),s.scale(T[1])],ie=re[0],le=re[1];if(A=ie,_=YP({axis:o,ticks:l,bandSize:i,offset:d.offset,entry:k,index:I}),D=le-ie,P=d.size,R={x:s.x,y:_,width:s.width,height:P},Math.abs(F)>0&&Math.abs(D)<Math.abs(F)){var ge=Hi(D||F)*(Math.abs(F)-Math.abs(D));D+=ge}}return Zt(Zt(Zt({},k),{},{x:A,y:_,width:D,height:P,value:u?T:T[1],payload:k,background:R},C&&C[I]&&C[I].props),{},{tooltipPayload:[wz(n,k)],tooltipPosition:{x:A+D/2,y:_+P/2}})});return Zt({data:$,layout:p},h)});function Ad(t){"@babel/helpers - typeof";return Ad=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ad(t)}function c0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Q_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Uz(r.key),r)}}function f0e(t,e,n){return e&&Q_(t.prototype,e),n&&Q_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function J_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Li(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?J_(Object(n),!0).forEach(function(r){ox(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ox(t,e,n){return e=Uz(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uz(t){var e=h0e(t,"string");return Ad(e)=="symbol"?e:e+""}function h0e(t,e){if(Ad(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ad(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Gz=function(e,n,r,i,s){var o=e.width,a=e.height,l=e.layout,u=e.children,c=Object.keys(n),f={left:r.left,leftMirror:r.left,right:o-r.right,rightMirror:o-r.right,top:r.top,topMirror:r.top,bottom:a-r.bottom,bottomMirror:a-r.bottom},h=!!Rr(u,Zs);return c.reduce(function(d,p){var m=n[p],g=m.orientation,y=m.domain,v=m.padding,x=v===void 0?{}:v,b=m.mirror,w=m.reversed,S="".concat(g).concat(b?"Mirror":""),C,$,k,I,T;if(m.type==="number"&&(m.padding==="gap"||m.padding==="no-gap")){var A=y[1]-y[0],_=1/0,D=m.categoricalDomain.sort(xQ);if(D.forEach(function(re,ie){ie>0&&(_=Math.min((re||0)-(D[ie-1]||0),_))}),Number.isFinite(_)){var P=_/A,R=m.layout==="vertical"?r.height:r.width;if(m.padding==="gap"&&(C=P*R/2),m.padding==="no-gap"){var F=bl(e.barCategoryGap,P*R),O=P*R/2;C=O-F-(O-F)/R*F}}}i==="xAxis"?$=[r.left+(x.left||0)+(C||0),r.left+r.width-(x.right||0)-(C||0)]:i==="yAxis"?$=l==="horizontal"?[r.top+r.height-(x.bottom||0),r.top+(x.top||0)]:[r.top+(x.top||0)+(C||0),r.top+r.height-(x.bottom||0)-(C||0)]:$=m.range,w&&($=[$[1],$[0]]);var M=Fde(m,s,h),V=M.scale,q=M.realScaleType;V.domain(y).range($),Lde(V);var K=Hde(V,Li(Li({},m),{},{realScaleType:q}));i==="xAxis"?(T=g==="top"&&!b||g==="bottom"&&b,k=r.left,I=f[S]-T*m.height):i==="yAxis"&&(T=g==="left"&&!b||g==="right"&&b,k=f[S]-T*m.width,I=r.top);var Z=Li(Li(Li({},m),K),{},{realScaleType:q,x:k,y:I,scale:V,width:i==="xAxis"?r.width:m.width,height:i==="yAxis"?r.height:m.height});return Z.bandSize=tv(Z,K),!m.hide&&i==="xAxis"?f[S]+=(T?-1:1)*Z.height:m.hide||(f[S]+=(T?-1:1)*Z.width),Li(Li({},d),{},ox({},p,Z))},{})},Hz=function(e,n){var r=e.x,i=e.y,s=n.x,o=n.y;return{x:Math.min(r,s),y:Math.min(i,o),width:Math.abs(s-r),height:Math.abs(o-i)}},d0e=function(e){var n=e.x1,r=e.y1,i=e.x2,s=e.y2;return Hz({x:n,y:r},{x:i,y:s})},Kz=function(){function t(e){c0e(this,t),this.scale=e}return f0e(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,s=r.position;if(n!==void 0){if(s)switch(s){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(n)+a}default:return this.scale(n)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],s=r[r.length-1];return i<=s?n>=i&&n<=s:n>=s&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])}();ox(Kz,"EPS",1e-4);var jI=function(e){var n=Object.keys(e).reduce(function(r,i){return Li(Li({},r),{},ox({},i,Kz.create(e[i])))},{});return Li(Li({},n),{},{apply:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=s.bandAware,a=s.position;return _ve(i,function(l,u){return n[u].apply(l,{bandAware:o,position:a})})},isInRange:function(i){return jz(i,function(s,o){return n[o].isInRange(s)})}})};function p0e(t){return(t%180+180)%180}var m0e=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=p0e(i),o=s*Math.PI/180,a=Math.atan(r/n),l=o>a&&o<Math.PI-a?r/Math.sin(o):n/Math.cos(o);return Math.abs(l)},g0e=va,y0e=ap,v0e=U0;function x0e(t){return function(e,n,r){var i=Object(e);if(!y0e(e)){var s=g0e(n);e=v0e(e),n=function(a){return s(i[a],a,i)}}var o=t(e,n,r);return o>-1?i[s?e[o]:o]:void 0}}var b0e=x0e,w0e=Mz;function S0e(t){var e=w0e(t),n=e%1;return e===e?n?e-n:e:0}var C0e=S0e,$0e=JB,k0e=va,I0e=C0e,T0e=Math.max;function E0e(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:I0e(n);return i<0&&(i=T0e(r+i,0)),$0e(t,k0e(e),i)}var N0e=E0e,A0e=b0e,O0e=N0e,P0e=A0e(O0e),_0e=P0e;const D0e=ut(_0e);var R0e=wZ(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),zI=j.createContext(void 0),VI=j.createContext(void 0),qz=j.createContext(void 0),Xz=j.createContext({}),Yz=j.createContext(void 0),Zz=j.createContext(0),Qz=j.createContext(0),eD=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,s=n.offset,o=e.clipPathId,a=e.children,l=e.width,u=e.height,c=R0e(s);return U.createElement(zI.Provider,{value:r},U.createElement(VI.Provider,{value:i},U.createElement(Xz.Provider,{value:s},U.createElement(qz.Provider,{value:c},U.createElement(Yz.Provider,{value:o},U.createElement(Zz.Provider,{value:u},U.createElement(Qz.Provider,{value:l},a)))))))},M0e=function(){return j.useContext(Yz)},Jz=function(e){var n=j.useContext(zI);n==null&&Sl();var r=n[e];return r==null&&Sl(),r},F0e=function(){var e=j.useContext(zI);return Do(e)},L0e=function(){var e=j.useContext(VI),n=D0e(e,function(r){return jz(r.domain,Number.isFinite)});return n||Do(e)},eV=function(e){var n=j.useContext(VI);n==null&&Sl();var r=n[e];return r==null&&Sl(),r},B0e=function(){var e=j.useContext(qz);return e},j0e=function(){return j.useContext(Xz)},WI=function(){return j.useContext(Qz)},UI=function(){return j.useContext(Zz)};function xc(t){"@babel/helpers - typeof";return xc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xc(t)}function z0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function V0e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,nV(r.key),r)}}function W0e(t,e,n){return e&&V0e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function U0e(t,e,n){return e=mv(e),G0e(t,tV()?Reflect.construct(e,n||[],mv(t).constructor):e.apply(t,n))}function G0e(t,e){if(e&&(xc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return H0e(t)}function H0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tV=function(){return!!t})()}function mv(t){return mv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},mv(t)}function K0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&NC(t,e)}function NC(t,e){return NC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},NC(t,e)}function tD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function nD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tD(Object(n),!0).forEach(function(r){GI(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function GI(t,e,n){return e=nV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nV(t){var e=q0e(t,"string");return xc(e)=="symbol"?e:e+""}function q0e(t,e){if(xc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(xc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function X0e(t,e){return J0e(t)||Q0e(t,e)||Z0e(t,e)||Y0e()}function Y0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Z0e(t,e){if(t){if(typeof t=="string")return rD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rD(t,e)}}function rD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Q0e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function J0e(t){if(Array.isArray(t))return t}function AC(){return AC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},AC.apply(this,arguments)}var exe=function(e,n){var r;return U.isValidElement(e)?r=U.cloneElement(e,n):Be(e)?r=e(n):r=U.createElement("line",AC({},n,{className:"recharts-reference-line-line"})),r},txe=function(e,n,r,i,s,o,a,l,u){var c=s.x,f=s.y,h=s.width,d=s.height;if(r){var p=u.y,m=e.y.apply(p,{position:o});if(xs(u,"discard")&&!e.y.isInRange(m))return null;var g=[{x:c+h,y:m},{x:c,y:m}];return l==="left"?g.reverse():g}if(n){var y=u.x,v=e.x.apply(y,{position:o});if(xs(u,"discard")&&!e.x.isInRange(v))return null;var x=[{x:v,y:f+d},{x:v,y:f}];return a==="top"?x.reverse():x}if(i){var b=u.segment,w=b.map(function(S){return e.apply(S,{position:o})});return xs(u,"discard")&&kve(w,function(S){return!e.isInRange(S)})?null:w}return null};function nxe(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,s=t.yAxisId,o=t.shape,a=t.className,l=t.alwaysShow,u=M0e(),c=Jz(i),f=eV(s),h=B0e();if(!u||!h)return null;qs(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=jI({x:c.scale,y:f.scale}),p=pn(e),m=pn(n),g=r&&r.length===2,y=txe(d,p,m,g,h,t.position,c.orientation,f.orientation,t);if(!y)return null;var v=X0e(y,2),x=v[0],b=x.x,w=x.y,S=v[1],C=S.x,$=S.y,k=xs(t,"hidden")?"url(#".concat(u,")"):void 0,I=nD(nD({clipPath:k},We(t,!0)),{},{x1:b,y1:w,x2:C,y2:$});return U.createElement(qt,{className:Qe("recharts-reference-line",a)},exe(o,I),qn.renderCallByParent(t,d0e({x1:b,y1:w,x2:C,y2:$})))}var HI=function(t){function e(){return z0e(this,e),U0e(this,e,arguments)}return K0e(e,t),W0e(e,[{key:"render",value:function(){return U.createElement(nxe,this.props)}}])}(U.Component);GI(HI,"displayName","ReferenceLine");GI(HI,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function OC(){return OC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},OC.apply(this,arguments)}function bc(t){"@babel/helpers - typeof";return bc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bc(t)}function iD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iD(Object(n),!0).forEach(function(r){ax(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ixe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,iV(r.key),r)}}function sxe(t,e,n){return e&&ixe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function oxe(t,e,n){return e=gv(e),axe(t,rV()?Reflect.construct(e,n||[],gv(t).constructor):e.apply(t,n))}function axe(t,e){if(e&&(bc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lxe(t)}function lxe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rV=function(){return!!t})()}function gv(t){return gv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},gv(t)}function uxe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PC(t,e)}function PC(t,e){return PC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},PC(t,e)}function ax(t,e,n){return e=iV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iV(t){var e=cxe(t,"string");return bc(e)=="symbol"?e:e+""}function cxe(t,e){if(bc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(bc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fxe=function(e){var n=e.x,r=e.y,i=e.xAxis,s=e.yAxis,o=jI({x:i.scale,y:s.scale}),a=o.apply({x:n,y:r},{bandAware:!0});return xs(e,"discard")&&!o.isInRange(a)?null:a},lx=function(t){function e(){return rxe(this,e),oxe(this,e,arguments)}return uxe(e,t),sxe(e,[{key:"render",value:function(){var r=this.props,i=r.x,s=r.y,o=r.r,a=r.alwaysShow,l=r.clipPathId,u=pn(i),c=pn(s);if(qs(a===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!c)return null;var f=fxe(this.props);if(!f)return null;var h=f.x,d=f.y,p=this.props,m=p.shape,g=p.className,y=xs(this.props,"hidden")?"url(#".concat(l,")"):void 0,v=sD(sD({clipPath:y},We(this.props,!0)),{},{cx:h,cy:d});return U.createElement(qt,{className:Qe("recharts-reference-dot",g)},e.renderDot(m,v),qn.renderCallByParent(this.props,{x:h-o,y:d-o,width:2*o,height:2*o}))}}])}(U.Component);ax(lx,"displayName","ReferenceDot");ax(lx,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});ax(lx,"renderDot",function(t,e){var n;return U.isValidElement(t)?n=U.cloneElement(t,e):Be(t)?n=t(e):n=U.createElement(BI,OC({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function _C(){return _C=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_C.apply(this,arguments)}function wc(t){"@babel/helpers - typeof";return wc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wc(t)}function oD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function aD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oD(Object(n),!0).forEach(function(r){ux(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dxe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,oV(r.key),r)}}function pxe(t,e,n){return e&&dxe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function mxe(t,e,n){return e=yv(e),gxe(t,sV()?Reflect.construct(e,n||[],yv(t).constructor):e.apply(t,n))}function gxe(t,e){if(e&&(wc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yxe(t)}function yxe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sV=function(){return!!t})()}function yv(t){return yv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},yv(t)}function vxe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&DC(t,e)}function DC(t,e){return DC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},DC(t,e)}function ux(t,e,n){return e=oV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oV(t){var e=xxe(t,"string");return wc(e)=="symbol"?e:e+""}function xxe(t,e){if(wc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(wc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bxe=function(e,n,r,i,s){var o=s.x1,a=s.x2,l=s.y1,u=s.y2,c=s.xAxis,f=s.yAxis;if(!c||!f)return null;var h=jI({x:c.scale,y:f.scale}),d={x:e?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:r?h.y.apply(l,{position:"start"}):h.y.rangeMin},p={x:n?h.x.apply(a,{position:"end"}):h.x.rangeMax,y:i?h.y.apply(u,{position:"end"}):h.y.rangeMax};return xs(s,"discard")&&(!h.isInRange(d)||!h.isInRange(p))?null:Hz(d,p)},cx=function(t){function e(){return hxe(this,e),mxe(this,e,arguments)}return vxe(e,t),pxe(e,[{key:"render",value:function(){var r=this.props,i=r.x1,s=r.x2,o=r.y1,a=r.y2,l=r.className,u=r.alwaysShow,c=r.clipPathId;qs(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=pn(i),h=pn(s),d=pn(o),p=pn(a),m=this.props.shape;if(!f&&!h&&!d&&!p&&!m)return null;var g=bxe(f,h,d,p,this.props);if(!g&&!m)return null;var y=xs(this.props,"hidden")?"url(#".concat(c,")"):void 0;return U.createElement(qt,{className:Qe("recharts-reference-area",l)},e.renderRect(m,aD(aD({clipPath:y},We(this.props,!0)),g)),qn.renderCallByParent(this.props,g))}}])}(U.Component);ux(cx,"displayName","ReferenceArea");ux(cx,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});ux(cx,"renderRect",function(t,e){var n;return U.isValidElement(t)?n=U.cloneElement(t,e):Be(t)?n=t(e):n=U.createElement(LI,_C({},e,{className:"recharts-reference-area-rect"})),n});function aV(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function wxe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return m0e(r,n)}function Sxe(t,e,n){var r=n==="width",i=t.x,s=t.y,o=t.width,a=t.height;return e===1?{start:r?i:s,end:r?i+o:s+a}:{start:r?i+o:s+a,end:r?i:s}}function vv(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var s=n();return t*(e-t*s/2-r)>=0&&t*(e+t*s/2-i)<=0}function Cxe(t,e){return aV(t,e+1)}function $xe(t,e,n,r,i){for(var s=(r||[]).slice(),o=e.start,a=e.end,l=0,u=1,c=o,f=function(){var p=r==null?void 0:r[l];if(p===void 0)return{v:aV(r,u)};var m=l,g,y=function(){return g===void 0&&(g=n(p,m)),g},v=p.coordinate,x=l===0||vv(t,v,y,c,a);x||(l=0,c=o,u+=1),x&&(c=v+t*(y()/2+i),l+=u)},h;u<=s.length;)if(h=f(),h)return h.v;return[]}function Od(t){"@babel/helpers - typeof";return Od=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Od(t)}function lD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Wn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lD(Object(n),!0).forEach(function(r){kxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kxe(t,e,n){return e=Ixe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ixe(t){var e=Txe(t,"string");return Od(e)=="symbol"?e:e+""}function Txe(t,e){if(Od(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Od(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Exe(t,e,n,r,i){for(var s=(r||[]).slice(),o=s.length,a=e.start,l=e.end,u=function(h){var d=s[h],p,m=function(){return p===void 0&&(p=n(d,h)),p};if(h===o-1){var g=t*(d.coordinate+t*m()/2-l);s[h]=d=Wn(Wn({},d),{},{tickCoord:g>0?d.coordinate-g*t:d.coordinate})}else s[h]=d=Wn(Wn({},d),{},{tickCoord:d.coordinate});var y=vv(t,d.tickCoord,m,a,l);y&&(l=d.tickCoord-t*(m()/2+i),s[h]=Wn(Wn({},d),{},{isShow:!0}))},c=o-1;c>=0;c--)u(c);return s}function Nxe(t,e,n,r,i,s){var o=(r||[]).slice(),a=o.length,l=e.start,u=e.end;if(s){var c=r[a-1],f=n(c,a-1),h=t*(c.coordinate+t*f/2-u);o[a-1]=c=Wn(Wn({},c),{},{tickCoord:h>0?c.coordinate-h*t:c.coordinate});var d=vv(t,c.tickCoord,function(){return f},l,u);d&&(u=c.tickCoord-t*(f/2+i),o[a-1]=Wn(Wn({},c),{},{isShow:!0}))}for(var p=s?a-1:a,m=function(v){var x=o[v],b,w=function(){return b===void 0&&(b=n(x,v)),b};if(v===0){var S=t*(x.coordinate-t*w()/2-l);o[v]=x=Wn(Wn({},x),{},{tickCoord:S<0?x.coordinate-S*t:x.coordinate})}else o[v]=x=Wn(Wn({},x),{},{tickCoord:x.coordinate});var C=vv(t,x.tickCoord,w,l,u);C&&(l=x.tickCoord+t*(w()/2+i),o[v]=Wn(Wn({},x),{},{isShow:!0}))},g=0;g<p;g++)m(g);return o}function KI(t,e,n){var r=t.tick,i=t.ticks,s=t.viewBox,o=t.minTickGap,a=t.orientation,l=t.interval,u=t.tickFormatter,c=t.unit,f=t.angle;if(!i||!i.length||!r)return[];if(he(l)||Xs.isSsr)return Cxe(i,typeof l=="number"&&he(l)?l:0);var h=[],d=a==="top"||a==="bottom"?"width":"height",p=c&&d==="width"?Ch(c,{fontSize:e,letterSpacing:n}):{width:0,height:0},m=function(x,b){var w=Be(u)?u(x.value,b):x.value;return d==="width"?wxe(Ch(w,{fontSize:e,letterSpacing:n}),p,f):Ch(w,{fontSize:e,letterSpacing:n})[d]},g=i.length>=2?Hi(i[1].coordinate-i[0].coordinate):1,y=Sxe(s,g,d);return l==="equidistantPreserveStart"?$xe(g,y,m,i,o):(l==="preserveStart"||l==="preserveStartEnd"?h=Nxe(g,y,m,i,o,l==="preserveStartEnd"):h=Exe(g,y,m,i,o),h.filter(function(v){return v.isShow}))}var Axe=["viewBox"],Oxe=["viewBox"],Pxe=["ticks"];function Sc(t){"@babel/helpers - typeof";return Sc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sc(t)}function Nu(){return Nu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nu.apply(this,arguments)}function uD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function rr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uD(Object(n),!0).forEach(function(r){qI(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function H1(t,e){if(t==null)return{};var n=_xe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function _xe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Dxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cD(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,uV(r.key),r)}}function Rxe(t,e,n){return e&&cD(t.prototype,e),n&&cD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Mxe(t,e,n){return e=xv(e),Fxe(t,lV()?Reflect.construct(e,n||[],xv(t).constructor):e.apply(t,n))}function Fxe(t,e){if(e&&(Sc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lxe(t)}function Lxe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lV=function(){return!!t})()}function xv(t){return xv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},xv(t)}function Bxe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&RC(t,e)}function RC(t,e){return RC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},RC(t,e)}function qI(t,e,n){return e=uV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uV(t){var e=jxe(t,"string");return Sc(e)=="symbol"?e:e+""}function jxe(t,e){if(Sc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Sc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var of=function(t){function e(n){var r;return Dxe(this,e),r=Mxe(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return Bxe(e,t),Rxe(e,[{key:"shouldComponentUpdate",value:function(r,i){var s=r.viewBox,o=H1(r,Axe),a=this.props,l=a.viewBox,u=H1(a,Oxe);return!Uu(s,l)||!Uu(o,u)||!Uu(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,s=i.x,o=i.y,a=i.width,l=i.height,u=i.orientation,c=i.tickSize,f=i.mirror,h=i.tickMargin,d,p,m,g,y,v,x=f?-1:1,b=r.tickSize||c,w=he(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":d=p=r.coordinate,g=o+ +!f*l,m=g-x*b,v=m-x*h,y=w;break;case"left":m=g=r.coordinate,p=s+ +!f*a,d=p-x*b,y=d-x*h,v=w;break;case"right":m=g=r.coordinate,p=s+ +f*a,d=p+x*b,y=d+x*h,v=w;break;default:d=p=r.coordinate,g=o+ +f*l,m=g+x*b,v=m+x*h,y=w;break}return{line:{x1:d,y1:m,x2:p,y2:g},tick:{x:y,y:v}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,s=r.mirror,o;switch(i){case"left":o=s?"start":"end";break;case"right":o=s?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,s=r.mirror,o="end";switch(i){case"left":case"right":o="middle";break;case"top":o=s?"start":"end";break;default:o=s?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,s=r.y,o=r.width,a=r.height,l=r.orientation,u=r.mirror,c=r.axisLine,f=rr(rr(rr({},We(this.props,!1)),We(c,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var h=+(l==="top"&&!u||l==="bottom"&&u);f=rr(rr({},f),{},{x1:i,y1:s+h*a,x2:i+o,y2:s+h*a})}else{var d=+(l==="left"&&!u||l==="right"&&u);f=rr(rr({},f),{},{x1:i+d*o,y1:s,x2:i+d*o,y2:s+a})}return U.createElement("line",Nu({},f,{className:Qe("recharts-cartesian-axis-line",yi(c,"className"))}))}},{key:"renderTicks",value:function(r,i,s){var o=this,a=this.props,l=a.tickLine,u=a.stroke,c=a.tick,f=a.tickFormatter,h=a.unit,d=KI(rr(rr({},this.props),{},{ticks:r}),i,s),p=this.getTickTextAnchor(),m=this.getTickVerticalAnchor(),g=We(this.props,!1),y=We(c,!1),v=rr(rr({},g),{},{fill:"none"},We(l,!1)),x=d.map(function(b,w){var S=o.getTickLineCoord(b),C=S.line,$=S.tick,k=rr(rr(rr(rr({textAnchor:p,verticalAnchor:m},g),{},{stroke:"none",fill:u},y),$),{},{index:w,payload:b,visibleTicksCount:d.length,tickFormatter:f});return U.createElement(qt,Nu({className:"recharts-cartesian-axis-tick",key:"tick-".concat(b.value,"-").concat(b.coordinate,"-").concat(b.tickCoord)},Ty(o.props,b,w)),l&&U.createElement("line",Nu({},v,C,{className:Qe("recharts-cartesian-axis-tick-line",yi(l,"className"))})),c&&e.renderTickItem(c,k,"".concat(Be(f)?f(b.value,w):b.value).concat(h||"")))});return U.createElement("g",{className:"recharts-cartesian-axis-ticks"},x)}},{key:"render",value:function(){var r=this,i=this.props,s=i.axisLine,o=i.width,a=i.height,l=i.ticksGenerator,u=i.className,c=i.hide;if(c)return null;var f=this.props,h=f.ticks,d=H1(f,Pxe),p=h;return Be(l)&&(p=h&&h.length>0?l(this.props):l(d)),o<=0||a<=0||!p||!p.length?null:U.createElement(qt,{className:Qe("recharts-cartesian-axis",u),ref:function(g){r.layerReference=g}},s&&this.renderAxisLine(),this.renderTicks(p,this.state.fontSize,this.state.letterSpacing),qn.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,s){var o;return U.isValidElement(r)?o=U.cloneElement(r,i):Be(r)?o=r(i):o=U.createElement(zy,Nu({},i,{className:"recharts-cartesian-axis-tick-value"}),s),o}}])}(j.Component);qI(of,"displayName","CartesianAxis");qI(of,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var zxe=["x1","y1","x2","y2","key"],Vxe=["offset"];function Cl(t){"@babel/helpers - typeof";return Cl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cl(t)}function fD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Xn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fD(Object(n),!0).forEach(function(r){Wxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wxe(t,e,n){return e=Uxe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uxe(t){var e=Gxe(t,"string");return Cl(e)=="symbol"?e:e+""}function Gxe(t,e){if(Cl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Cl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function el(){return el=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},el.apply(this,arguments)}function hD(t,e){if(t==null)return{};var n=Hxe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Hxe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Kxe=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,i=e.x,s=e.y,o=e.width,a=e.height,l=e.ry;return U.createElement("rect",{x:i,y:s,ry:l,width:o,height:a,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function cV(t,e){var n;if(U.isValidElement(t))n=U.cloneElement(t,e);else if(Be(t))n=t(e);else{var r=e.x1,i=e.y1,s=e.x2,o=e.y2,a=e.key,l=hD(e,zxe),u=We(l,!1);u.offset;var c=hD(u,Vxe);n=U.createElement("line",el({},c,{x1:r,y1:i,x2:s,y2:o,fill:"none",key:a}))}return n}function qxe(t){var e=t.x,n=t.width,r=t.horizontal,i=r===void 0?!0:r,s=t.horizontalPoints;if(!i||!s||!s.length)return null;var o=s.map(function(a,l){var u=Xn(Xn({},t),{},{x1:e,y1:a,x2:e+n,y2:a,key:"line-".concat(l),index:l});return cV(i,u)});return U.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function Xxe(t){var e=t.y,n=t.height,r=t.vertical,i=r===void 0?!0:r,s=t.verticalPoints;if(!i||!s||!s.length)return null;var o=s.map(function(a,l){var u=Xn(Xn({},t),{},{x1:a,y1:e,x2:a,y2:e+n,key:"line-".concat(l),index:l});return cV(i,u)});return U.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function Yxe(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,i=t.y,s=t.width,o=t.height,a=t.horizontalPoints,l=t.horizontal,u=l===void 0?!0:l;if(!u||!e||!e.length)return null;var c=a.map(function(h){return Math.round(h+i-i)}).sort(function(h,d){return h-d});i!==c[0]&&c.unshift(0);var f=c.map(function(h,d){var p=!c[d+1],m=p?i+o-h:c[d+1]-h;if(m<=0)return null;var g=d%e.length;return U.createElement("rect",{key:"react-".concat(d),y:h,x:r,height:m,width:s,stroke:"none",fill:e[g],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return U.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function Zxe(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,s=t.x,o=t.y,a=t.width,l=t.height,u=t.verticalPoints;if(!n||!r||!r.length)return null;var c=u.map(function(h){return Math.round(h+s-s)}).sort(function(h,d){return h-d});s!==c[0]&&c.unshift(0);var f=c.map(function(h,d){var p=!c[d+1],m=p?s+a-h:c[d+1]-h;if(m<=0)return null;var g=d%r.length;return U.createElement("rect",{key:"react-".concat(d),x:h,y:o,width:m,height:l,stroke:"none",fill:r[g],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return U.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var Qxe=function(e,n){var r=e.xAxis,i=e.width,s=e.height,o=e.offset;return xz(KI(Xn(Xn(Xn({},of.defaultProps),r),{},{ticks:Us(r,!0),viewBox:{x:0,y:0,width:i,height:s}})),o.left,o.left+o.width,n)},Jxe=function(e,n){var r=e.yAxis,i=e.width,s=e.height,o=e.offset;return xz(KI(Xn(Xn(Xn({},of.defaultProps),r),{},{ticks:Us(r,!0),viewBox:{x:0,y:0,width:i,height:s}})),o.top,o.top+o.height,n)},au={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function XI(t){var e,n,r,i,s,o,a=WI(),l=UI(),u=j0e(),c=Xn(Xn({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:au.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:au.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:au.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:au.horizontalFill,vertical:(s=t.vertical)!==null&&s!==void 0?s:au.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:au.verticalFill,x:he(t.x)?t.x:u.left,y:he(t.y)?t.y:u.top,width:he(t.width)?t.width:u.width,height:he(t.height)?t.height:u.height}),f=c.x,h=c.y,d=c.width,p=c.height,m=c.syncWithTicks,g=c.horizontalValues,y=c.verticalValues,v=F0e(),x=L0e();if(!he(d)||d<=0||!he(p)||p<=0||!he(f)||f!==+f||!he(h)||h!==+h)return null;var b=c.verticalCoordinatesGenerator||Qxe,w=c.horizontalCoordinatesGenerator||Jxe,S=c.horizontalPoints,C=c.verticalPoints;if((!S||!S.length)&&Be(w)){var $=g&&g.length,k=w({yAxis:x?Xn(Xn({},x),{},{ticks:$?g:x.ticks}):void 0,width:a,height:l,offset:u},$?!0:m);qs(Array.isArray(k),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Cl(k),"]")),Array.isArray(k)&&(S=k)}if((!C||!C.length)&&Be(b)){var I=y&&y.length,T=b({xAxis:v?Xn(Xn({},v),{},{ticks:I?y:v.ticks}):void 0,width:a,height:l,offset:u},I?!0:m);qs(Array.isArray(T),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Cl(T),"]")),Array.isArray(T)&&(C=T)}return U.createElement("g",{className:"recharts-cartesian-grid"},U.createElement(Kxe,{fill:c.fill,fillOpacity:c.fillOpacity,x:c.x,y:c.y,width:c.width,height:c.height,ry:c.ry}),U.createElement(qxe,el({},c,{offset:u,horizontalPoints:S,xAxis:v,yAxis:x})),U.createElement(Xxe,el({},c,{offset:u,verticalPoints:C,xAxis:v,yAxis:x})),U.createElement(Yxe,el({},c,{horizontalPoints:S})),U.createElement(Zxe,el({},c,{verticalPoints:C})))}XI.displayName="CartesianGrid";var ebe=["type","layout","connectNulls","ref"],tbe=["key"];function Cc(t){"@babel/helpers - typeof";return Cc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cc(t)}function dD(t,e){if(t==null)return{};var n=nbe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function nbe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Th(){return Th=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Th.apply(this,arguments)}function pD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Pr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pD(Object(n),!0).forEach(function(r){Bi(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lu(t){return obe(t)||sbe(t)||ibe(t)||rbe()}function rbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ibe(t,e){if(t){if(typeof t=="string")return MC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return MC(t,e)}}function sbe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function obe(t){if(Array.isArray(t))return MC(t)}function MC(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function abe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mD(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,hV(r.key),r)}}function lbe(t,e,n){return e&&mD(t.prototype,e),n&&mD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ube(t,e,n){return e=bv(e),cbe(t,fV()?Reflect.construct(e,n||[],bv(t).constructor):e.apply(t,n))}function cbe(t,e){if(e&&(Cc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fbe(t)}function fbe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fV=function(){return!!t})()}function bv(t){return bv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},bv(t)}function hbe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&FC(t,e)}function FC(t,e){return FC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},FC(t,e)}function Bi(t,e,n){return e=hV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hV(t){var e=dbe(t,"string");return Cc(e)=="symbol"?e:e+""}function dbe(t,e){if(Cc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Cc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var dp=function(t){function e(){var n;abe(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=ube(this,e,[].concat(i)),Bi(n,"state",{isAnimationFinished:!0,totalLength:0}),Bi(n,"generateSimpleStrokeDasharray",function(o,a){return"".concat(a,"px ").concat(o-a,"px")}),Bi(n,"getStrokeDasharray",function(o,a,l){var u=l.reduce(function(y,v){return y+v});if(!u)return n.generateSimpleStrokeDasharray(a,o);for(var c=Math.floor(o/u),f=o%u,h=a-o,d=[],p=0,m=0;p<l.length;m+=l[p],++p)if(m+l[p]>f){d=[].concat(lu(l.slice(0,p)),[f-m]);break}var g=d.length%2===0?[0,h]:[h];return[].concat(lu(e.repeat(l,c)),lu(d),g).map(function(y){return"".concat(y,"px")}).join(", ")}),Bi(n,"id",op("recharts-line-")),Bi(n,"pathRef",function(o){n.mainCurve=o}),Bi(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),Bi(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return hbe(e,t),lbe(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.points,a=s.xAxis,l=s.yAxis,u=s.layout,c=s.children,f=vi(c,hp);if(!f)return null;var h=function(m,g){return{x:m.x,y:m.y,value:m.value,errorVal:Ur(m.payload,g)}},d={clipPath:r?"url(#clipPath-".concat(i,")"):null};return U.createElement(qt,d,f.map(function(p){return U.cloneElement(p,{key:"bar-".concat(p.props.dataKey),data:o,xAxis:a,yAxis:l,layout:u,dataPointFormatter:h})}))}},{key:"renderDots",value:function(r,i,s){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var a=this.props,l=a.dot,u=a.points,c=a.dataKey,f=We(this.props,!1),h=We(l,!0),d=u.map(function(m,g){var y=Pr(Pr(Pr({key:"dot-".concat(g),r:3},f),h),{},{index:g,cx:m.x,cy:m.y,value:m.value,dataKey:c,payload:m.payload,points:u});return e.renderDotItem(l,y)}),p={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return U.createElement(qt,Th({className:"recharts-line-dots",key:"dots"},p),d)}},{key:"renderCurveStatically",value:function(r,i,s,o){var a=this.props,l=a.type,u=a.layout,c=a.connectNulls;a.ref;var f=dD(a,ebe),h=Pr(Pr(Pr({},We(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(s,")"):null,points:r},o),{},{type:l,layout:u,connectNulls:c});return U.createElement(pC,Th({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var s=this,o=this.props,a=o.points,l=o.strokeDasharray,u=o.isAnimationActive,c=o.animationBegin,f=o.animationDuration,h=o.animationEasing,d=o.animationId,p=o.animateNewValues,m=o.width,g=o.height,y=this.state,v=y.prevPoints,x=y.totalLength;return U.createElement(lo,{begin:c,duration:f,isActive:u,easing:h,from:{t:0},to:{t:1},key:"line-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(b){var w=b.t;if(v){var S=v.length/a.length,C=a.map(function(A,_){var D=Math.floor(_*S);if(v[D]){var P=v[D],R=zi(P.x,A.x),F=zi(P.y,A.y);return Pr(Pr({},A),{},{x:R(w),y:F(w)})}if(p){var O=zi(m*2,A.x),M=zi(g/2,A.y);return Pr(Pr({},A),{},{x:O(w),y:M(w)})}return Pr(Pr({},A),{},{x:A.x,y:A.y})});return s.renderCurveStatically(C,r,i)}var $=zi(0,x),k=$(w),I;if(l){var T="".concat(l).split(/[,\s]+/gim).map(function(A){return parseFloat(A)});I=s.getStrokeDasharray(k,x,T)}else I=s.generateSimpleStrokeDasharray(x,k);return s.renderCurveStatically(a,r,i,{strokeDasharray:I})})}},{key:"renderCurve",value:function(r,i){var s=this.props,o=s.points,a=s.isAnimationActive,l=this.state,u=l.prevPoints,c=l.totalLength;return a&&o&&o.length&&(!u&&c>0||!tx(u,o))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(o,r,i)}},{key:"render",value:function(){var r,i=this.props,s=i.hide,o=i.dot,a=i.points,l=i.className,u=i.xAxis,c=i.yAxis,f=i.top,h=i.left,d=i.width,p=i.height,m=i.isAnimationActive,g=i.id;if(s||!a||!a.length)return null;var y=this.state.isAnimationFinished,v=a.length===1,x=Qe("recharts-line",l),b=u&&u.allowDataOverflow,w=c&&c.allowDataOverflow,S=b||w,C=Ve(g)?this.id:g,$=(r=We(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},k=$.r,I=k===void 0?3:k,T=$.strokeWidth,A=T===void 0?2:T,_=EQ(o)?o:{},D=_.clipDot,P=D===void 0?!0:D,R=I*2+A;return U.createElement(qt,{className:x},b||w?U.createElement("defs",null,U.createElement("clipPath",{id:"clipPath-".concat(C)},U.createElement("rect",{x:b?h:h-d/2,y:w?f:f-p/2,width:b?d:d*2,height:w?p:p*2})),!P&&U.createElement("clipPath",{id:"clipPath-dots-".concat(C)},U.createElement("rect",{x:h-R/2,y:f-R/2,width:d+R,height:p+R}))):null,!v&&this.renderCurve(S,C),this.renderErrorBar(S,C),(v||o)&&this.renderDots(S,P,C),(!m||y)&&Qo.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var s=r.length%2!==0?[].concat(lu(r),[0]):r,o=[],a=0;a<i;++a)o=[].concat(lu(o),lu(s));return o}},{key:"renderDotItem",value:function(r,i){var s;if(U.isValidElement(r))s=U.cloneElement(r,i);else if(Be(r))s=r(i);else{var o=i.key,a=dD(i,tbe),l=Qe("recharts-line-dot",typeof r!="boolean"?r.className:"");s=U.createElement(BI,Th({key:o},a,{className:l}))}return s}}])}(j.PureComponent);Bi(dp,"displayName","Line");Bi(dp,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Xs.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Bi(dp,"getComposedData",function(t){var e=t.props,n=t.xAxis,r=t.yAxis,i=t.xAxisTicks,s=t.yAxisTicks,o=t.dataKey,a=t.bandSize,l=t.displayedData,u=t.offset,c=e.layout,f=l.map(function(h,d){var p=Ur(h,o);return c==="horizontal"?{x:XP({axis:n,ticks:i,bandSize:a,entry:h,index:d}),y:Ve(p)?null:r.scale(p),value:p,payload:h}:{x:Ve(p)?null:n.scale(p),y:XP({axis:r,ticks:s,bandSize:a,entry:h,index:d}),value:p,payload:h}});return Pr({points:f,layout:c},u)});function $c(t){"@babel/helpers - typeof";return $c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$c(t)}function pbe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mbe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,mV(r.key),r)}}function gbe(t,e,n){return e&&mbe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ybe(t,e,n){return e=wv(e),vbe(t,dV()?Reflect.construct(e,n||[],wv(t).constructor):e.apply(t,n))}function vbe(t,e){if(e&&($c(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xbe(t)}function xbe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dV=function(){return!!t})()}function wv(t){return wv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},wv(t)}function bbe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&LC(t,e)}function LC(t,e){return LC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},LC(t,e)}function pV(t,e,n){return e=mV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mV(t){var e=wbe(t,"string");return $c(e)=="symbol"?e:e+""}function wbe(t,e){if($c(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if($c(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function BC(){return BC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},BC.apply(this,arguments)}function Sbe(t){var e=t.xAxisId,n=WI(),r=UI(),i=Jz(e);return i==null?null:U.createElement(of,BC({},i,{className:Qe("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(o){return Us(o,!0)}}))}var af=function(t){function e(){return pbe(this,e),ybe(this,e,arguments)}return bbe(e,t),gbe(e,[{key:"render",value:function(){return U.createElement(Sbe,this.props)}}])}(U.Component);pV(af,"displayName","XAxis");pV(af,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function kc(t){"@babel/helpers - typeof";return kc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kc(t)}function Cbe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $be(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,vV(r.key),r)}}function kbe(t,e,n){return e&&$be(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ibe(t,e,n){return e=Sv(e),Tbe(t,gV()?Reflect.construct(e,n||[],Sv(t).constructor):e.apply(t,n))}function Tbe(t,e){if(e&&(kc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ebe(t)}function Ebe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gV=function(){return!!t})()}function Sv(t){return Sv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Sv(t)}function Nbe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jC(t,e)}function jC(t,e){return jC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},jC(t,e)}function yV(t,e,n){return e=vV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vV(t){var e=Abe(t,"string");return kc(e)=="symbol"?e:e+""}function Abe(t,e){if(kc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(kc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zC(){return zC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zC.apply(this,arguments)}var Obe=function(e){var n=e.yAxisId,r=WI(),i=UI(),s=eV(n);return s==null?null:U.createElement(of,zC({},s,{className:Qe("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(a){return Us(a,!0)}}))},lf=function(t){function e(){return Cbe(this,e),Ibe(this,e,arguments)}return Nbe(e,t),kbe(e,[{key:"render",value:function(){return U.createElement(Obe,this.props)}}])}(U.Component);yV(lf,"displayName","YAxis");yV(lf,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function gD(t){return Rbe(t)||Dbe(t)||_be(t)||Pbe()}function Pbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _be(t,e){if(t){if(typeof t=="string")return VC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VC(t,e)}}function Dbe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Rbe(t){if(Array.isArray(t))return VC(t)}function VC(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var WC=function(e,n,r,i,s){var o=vi(e,HI),a=vi(e,lx),l=[].concat(gD(o),gD(a)),u=vi(e,cx),c="".concat(i,"Id"),f=i[0],h=n;if(l.length&&(h=l.reduce(function(m,g){if(g.props[c]===r&&xs(g.props,"extendDomain")&&he(g.props[f])){var y=g.props[f];return[Math.min(m[0],y),Math.max(m[1],y)]}return m},h)),u.length){var d="".concat(f,"1"),p="".concat(f,"2");h=u.reduce(function(m,g){if(g.props[c]===r&&xs(g.props,"extendDomain")&&he(g.props[d])&&he(g.props[p])){var y=g.props[d],v=g.props[p];return[Math.min(m[0],y,v),Math.max(m[1],y,v)]}return m},h)}return s&&s.length&&(h=s.reduce(function(m,g){return he(g)?[Math.min(m[0],g),Math.max(m[1],g)]:m},h)),h},xV={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function s(l,u,c,f,h){if(typeof c!="function")throw new TypeError("The listener must be a function");var d=new i(c,f||l,h),p=n?n+u:u;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],d]:l._events[p].push(d):(l._events[p]=d,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],c,f;if(this._eventsCount===0)return u;for(f in c=this._events)e.call(c,f)&&u.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},a.prototype.listeners=function(u){var c=n?n+u:u,f=this._events[c];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,d=f.length,p=new Array(d);h<d;h++)p[h]=f[h].fn;return p},a.prototype.listenerCount=function(u){var c=n?n+u:u,f=this._events[c];return f?f.fn?1:f.length:0},a.prototype.emit=function(u,c,f,h,d,p){var m=n?n+u:u;if(!this._events[m])return!1;var g=this._events[m],y=arguments.length,v,x;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),y){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,c),!0;case 3:return g.fn.call(g.context,c,f),!0;case 4:return g.fn.call(g.context,c,f,h),!0;case 5:return g.fn.call(g.context,c,f,h,d),!0;case 6:return g.fn.call(g.context,c,f,h,d,p),!0}for(x=1,v=new Array(y-1);x<y;x++)v[x-1]=arguments[x];g.fn.apply(g.context,v)}else{var b=g.length,w;for(x=0;x<b;x++)switch(g[x].once&&this.removeListener(u,g[x].fn,void 0,!0),y){case 1:g[x].fn.call(g[x].context);break;case 2:g[x].fn.call(g[x].context,c);break;case 3:g[x].fn.call(g[x].context,c,f);break;case 4:g[x].fn.call(g[x].context,c,f,h);break;default:if(!v)for(w=1,v=new Array(y-1);w<y;w++)v[w-1]=arguments[w];g[x].fn.apply(g[x].context,v)}}return!0},a.prototype.on=function(u,c,f){return s(this,u,c,f,!1)},a.prototype.once=function(u,c,f){return s(this,u,c,f,!0)},a.prototype.removeListener=function(u,c,f,h){var d=n?n+u:u;if(!this._events[d])return this;if(!c)return o(this,d),this;var p=this._events[d];if(p.fn)p.fn===c&&(!h||p.once)&&(!f||p.context===f)&&o(this,d);else{for(var m=0,g=[],y=p.length;m<y;m++)(p[m].fn!==c||h&&!p[m].once||f&&p[m].context!==f)&&g.push(p[m]);g.length?this._events[d]=g.length===1?g[0]:g:o(this,d)}return this},a.prototype.removeAllListeners=function(u){var c;return u?(c=n?n+u:u,this._events[c]&&o(this,c)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(xV);var Mbe=xV.exports;const Fbe=ut(Mbe);var K1=new Fbe,q1="recharts.syncMouseEvents";function Pd(t){"@babel/helpers - typeof";return Pd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pd(t)}function Lbe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bbe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,bV(r.key),r)}}function jbe(t,e,n){return e&&Bbe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function X1(t,e,n){return e=bV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bV(t){var e=zbe(t,"string");return Pd(e)=="symbol"?e:e+""}function zbe(t,e){if(Pd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Pd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Vbe=function(){function t(){Lbe(this,t),X1(this,"activeIndex",0),X1(this,"coordinateList",[]),X1(this,"layout","horizontal")}return jbe(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,s=i===void 0?null:i,o=n.container,a=o===void 0?null:o,l=n.layout,u=l===void 0?null:l,c=n.offset,f=c===void 0?null:c,h=n.mouseHandlerCallback,d=h===void 0?null:h;this.coordinateList=(r=s??this.coordinateList)!==null&&r!==void 0?r:[],this.container=a??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=d??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),s=i.x,o=i.y,a=i.height,l=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,c=((r=window)===null||r===void 0?void 0:r.scrollY)||0,f=s+l+u,h=o+this.offset.top+a/2+c;this.mouseHandlerCallback({pageX:f,pageY:h})}}}])}();function Wbe(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&he(r)&&he(i))return!0}return!1}function Ube(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function wV(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,s=t.endAngle,o=An(e,n,r,i),a=An(e,n,r,s);return{points:[o,a],cx:e,cy:n,radius:r,startAngle:i,endAngle:s}}function Gbe(t,e,n){var r,i,s,o;if(t==="horizontal")r=e.x,s=r,i=n.top,o=n.top+n.height;else if(t==="vertical")i=e.y,o=i,r=n.left,s=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var a=e.cx,l=e.cy,u=e.innerRadius,c=e.outerRadius,f=e.angle,h=An(a,l,u,f),d=An(a,l,c,f);r=h.x,i=h.y,s=d.x,o=d.y}else return wV(e);return[{x:r,y:i},{x:s,y:o}]}function _d(t){"@babel/helpers - typeof";return _d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_d(t)}function yD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yD(Object(n),!0).forEach(function(r){Hbe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hbe(t,e,n){return e=Kbe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kbe(t){var e=qbe(t,"string");return _d(e)=="symbol"?e:e+""}function qbe(t,e){if(_d(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(_d(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Xbe(t){var e,n,r=t.element,i=t.tooltipEventType,s=t.isActive,o=t.activeCoordinate,a=t.activePayload,l=t.offset,u=t.activeTooltipIndex,c=t.tooltipAxisBandSize,f=t.layout,h=t.chartName,d=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!d||!s||!o||h!=="ScatterChart"&&i!=="axis")return null;var p,m=pC;if(h==="ScatterChart")p=o,m=Xge;else if(h==="BarChart")p=Ube(f,o,l,c),m=LI;else if(f==="radial"){var g=wV(o),y=g.cx,v=g.cy,x=g.radius,b=g.startAngle,w=g.endAngle;p={cx:y,cy:v,startAngle:b,endAngle:w,innerRadius:x,outerRadius:x},m=$z}else p={points:Gbe(f,o,l)},m=pC;var S=dg(dg(dg(dg({stroke:"#ccc",pointerEvents:"none"},l),p),We(d,!1)),{},{payload:a,payloadIndex:u,className:Qe("recharts-tooltip-cursor",d.className)});return j.isValidElement(d)?j.cloneElement(d,S):j.createElement(m,S)}var Ybe=["item"],Zbe=["children","className","width","height","style","compact","title","desc"];function Ic(t){"@babel/helpers - typeof";return Ic=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ic(t)}function Au(){return Au=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Au.apply(this,arguments)}function vD(t,e){return e1e(t)||Jbe(t,e)||CV(t,e)||Qbe()}function Qbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jbe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function e1e(t){if(Array.isArray(t))return t}function xD(t,e){if(t==null)return{};var n=t1e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function t1e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function n1e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r1e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$V(r.key),r)}}function i1e(t,e,n){return e&&r1e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function s1e(t,e,n){return e=Cv(e),o1e(t,SV()?Reflect.construct(e,n||[],Cv(t).constructor):e.apply(t,n))}function o1e(t,e){if(e&&(Ic(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return a1e(t)}function a1e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function SV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(SV=function(){return!!t})()}function Cv(t){return Cv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Cv(t)}function l1e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UC(t,e)}function UC(t,e){return UC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},UC(t,e)}function Tc(t){return f1e(t)||c1e(t)||CV(t)||u1e()}function u1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CV(t,e){if(t){if(typeof t=="string")return GC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GC(t,e)}}function c1e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function f1e(t){if(Array.isArray(t))return GC(t)}function GC(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function bD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function te(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bD(Object(n),!0).forEach(function(r){Ee(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ee(t,e,n){return e=$V(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $V(t){var e=h1e(t,"string");return Ic(e)=="symbol"?e:e+""}function h1e(t,e){if(Ic(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ic(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var d1e={xAxis:["bottom","top"],yAxis:["left","right"]},p1e={width:"100%",height:"100%"},kV={x:0,y:0};function pg(t){return t}var m1e=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},g1e=function(e,n,r,i){var s=n.find(function(c){return c&&c.index===r});if(s){if(e==="horizontal")return{x:s.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:s.coordinate};if(e==="centric"){var o=s.coordinate,a=i.radius;return te(te(te({},i),An(i.cx,i.cy,a,o)),{},{angle:o,radius:a})}var l=s.coordinate,u=i.angle;return te(te(te({},i),An(i.cx,i.cy,l,u)),{},{angle:u,radius:l})}return kV},fx=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,s=n.dataEndIndex,o=(r??[]).reduce(function(a,l){var u=l.props.data;return u&&u.length?[].concat(Tc(a),Tc(u)):a},[]);return o.length>0?o:e&&e.length&&he(i)&&he(s)?e.slice(i,s+1):[]};function IV(t){return t==="number"?[0,"auto"]:void 0}var HC=function(e,n,r,i){var s=e.graphicalItems,o=e.tooltipAxis,a=fx(n,e);return r<0||!s||!s.length||r>=a.length?null:s.reduce(function(l,u){var c,f=(c=u.props.data)!==null&&c!==void 0?c:n;f&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(f=f.slice(e.dataStartIndex,e.dataEndIndex+1));var h;if(o.dataKey&&!o.allowDuplicatedCategory){var d=f===void 0?a:f;h=ky(d,o.dataKey,i)}else h=f&&f[r]||a[r];return h?[].concat(Tc(l),[wz(u,h)]):l},[])},wD=function(e,n,r,i){var s=i||{x:e.chartX,y:e.chartY},o=m1e(s,r),a=e.orderedTooltipTicks,l=e.tooltipAxis,u=e.tooltipTicks,c=Ode(o,a,u,l);if(c>=0&&u){var f=u[c]&&u[c].value,h=HC(e,n,c,f),d=g1e(r,a,c,s);return{activeTooltipIndex:c,activeLabel:f,activePayload:h,activeCoordinate:d}}return null},y1e=function(e,n){var r=n.axes,i=n.graphicalItems,s=n.axisType,o=n.axisIdKey,a=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,c=e.layout,f=e.children,h=e.stackOffset,d=vz(c,s);return r.reduce(function(p,m){var g,y=m.type.defaultProps!==void 0?te(te({},m.type.defaultProps),m.props):m.props,v=y.type,x=y.dataKey,b=y.allowDataOverflow,w=y.allowDuplicatedCategory,S=y.scale,C=y.ticks,$=y.includeHidden,k=y[o];if(p[k])return p;var I=fx(e.data,{graphicalItems:i.filter(function(K){var Z,re=o in K.props?K.props[o]:(Z=K.type.defaultProps)===null||Z===void 0?void 0:Z[o];return re===k}),dataStartIndex:l,dataEndIndex:u}),T=I.length,A,_,D;Wbe(y.domain,b,v)&&(A=uC(y.domain,null,b),d&&(v==="number"||S!=="auto")&&(D=kh(I,x,"category")));var P=IV(v);if(!A||A.length===0){var R,F=(R=y.domain)!==null&&R!==void 0?R:P;if(x){if(A=kh(I,x,v),v==="category"&&d){var O=vQ(A);w&&O?(_=A,A=cv(0,T)):w||(A=JP(F,A,m).reduce(function(K,Z){return K.indexOf(Z)>=0?K:[].concat(Tc(K),[Z])},[]))}else if(v==="category")w?A=A.filter(function(K){return K!==""&&!Ve(K)}):A=JP(F,A,m).reduce(function(K,Z){return K.indexOf(Z)>=0||Z===""||Ve(Z)?K:[].concat(Tc(K),[Z])},[]);else if(v==="number"){var M=Mde(I,i.filter(function(K){var Z,re,ie=o in K.props?K.props[o]:(Z=K.type.defaultProps)===null||Z===void 0?void 0:Z[o],le="hide"in K.props?K.props.hide:(re=K.type.defaultProps)===null||re===void 0?void 0:re.hide;return ie===k&&($||!le)}),x,s,c);M&&(A=M)}d&&(v==="number"||S!=="auto")&&(D=kh(I,x,"category"))}else d?A=cv(0,T):a&&a[k]&&a[k].hasStack&&v==="number"?A=h==="expand"?[0,1]:bz(a[k].stackGroups,l,u):A=yz(I,i.filter(function(K){var Z=o in K.props?K.props[o]:K.type.defaultProps[o],re="hide"in K.props?K.props.hide:K.type.defaultProps.hide;return Z===k&&($||!re)}),v,c,!0);if(v==="number")A=WC(f,A,k,s,C),F&&(A=uC(F,A,b));else if(v==="category"&&F){var V=F,q=A.every(function(K){return V.indexOf(K)>=0});q&&(A=V)}}return te(te({},p),{},Ee({},k,te(te({},y),{},{axisType:s,domain:A,categoricalDomain:D,duplicateDomain:_,originalDomain:(g=y.domain)!==null&&g!==void 0?g:P,isCategorical:d,layout:c})))},{})},v1e=function(e,n){var r=n.graphicalItems,i=n.Axis,s=n.axisType,o=n.axisIdKey,a=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,c=e.layout,f=e.children,h=fx(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:u}),d=h.length,p=vz(c,s),m=-1;return r.reduce(function(g,y){var v=y.type.defaultProps!==void 0?te(te({},y.type.defaultProps),y.props):y.props,x=v[o],b=IV("number");if(!g[x]){m++;var w;return p?w=cv(0,d):a&&a[x]&&a[x].hasStack?(w=bz(a[x].stackGroups,l,u),w=WC(f,w,x,s)):(w=uC(b,yz(h,r.filter(function(S){var C,$,k=o in S.props?S.props[o]:(C=S.type.defaultProps)===null||C===void 0?void 0:C[o],I="hide"in S.props?S.props.hide:($=S.type.defaultProps)===null||$===void 0?void 0:$.hide;return k===x&&!I}),"number",c),i.defaultProps.allowDataOverflow),w=WC(f,w,x,s)),te(te({},g),{},Ee({},x,te(te({axisType:s},i.defaultProps),{},{hide:!0,orientation:yi(d1e,"".concat(s,".").concat(m%2),null),domain:w,originalDomain:b,isCategorical:p,layout:c})))}return g},{})},x1e=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,s=n.AxisComp,o=n.graphicalItems,a=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,c=e.children,f="".concat(i,"Id"),h=vi(c,s),d={};return h&&h.length?d=y1e(e,{axes:h,graphicalItems:o,axisType:i,axisIdKey:f,stackGroups:a,dataStartIndex:l,dataEndIndex:u}):o&&o.length&&(d=v1e(e,{Axis:s,graphicalItems:o,axisType:i,axisIdKey:f,stackGroups:a,dataStartIndex:l,dataEndIndex:u})),d},b1e=function(e){var n=Do(e),r=Us(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:fI(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:tv(n,r)}},SD=function(e){var n=e.children,r=e.defaultShowTooltip,i=Rr(n,yc),s=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(s=i.props.startIndex),i.props.endIndex>=0&&(o=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!r}},w1e=function(e){return!e||!e.length?!1:e.some(function(n){var r=Ks(n&&n.type);return r&&r.indexOf("Bar")>=0})},CD=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},S1e=function(e,n){var r=e.props,i=e.graphicalItems,s=e.xAxisMap,o=s===void 0?{}:s,a=e.yAxisMap,l=a===void 0?{}:a,u=r.width,c=r.height,f=r.children,h=r.margin||{},d=Rr(f,yc),p=Rr(f,al),m=Object.keys(l).reduce(function(w,S){var C=l[S],$=C.orientation;return!C.mirror&&!C.hide?te(te({},w),{},Ee({},$,w[$]+C.width)):w},{left:h.left||0,right:h.right||0}),g=Object.keys(o).reduce(function(w,S){var C=o[S],$=C.orientation;return!C.mirror&&!C.hide?te(te({},w),{},Ee({},$,yi(w,"".concat($))+C.height)):w},{top:h.top||0,bottom:h.bottom||0}),y=te(te({},g),m),v=y.bottom;d&&(y.bottom+=d.props.height||yc.defaultProps.height),p&&n&&(y=Dde(y,i,r,n));var x=u-y.left-y.right,b=c-y.top-y.bottom;return te(te({brushBottom:v},y),{},{width:Math.max(x,0),height:Math.max(b,0)})},C1e=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},TV=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,s=i===void 0?"axis":i,o=e.validateTooltipEventTypes,a=o===void 0?["axis"]:o,l=e.axisComponents,u=e.legendContent,c=e.formatAxisMap,f=e.defaultProps,h=function(y,v){var x=v.graphicalItems,b=v.stackGroups,w=v.offset,S=v.updateId,C=v.dataStartIndex,$=v.dataEndIndex,k=y.barSize,I=y.layout,T=y.barGap,A=y.barCategoryGap,_=y.maxBarSize,D=CD(I),P=D.numericAxisName,R=D.cateAxisName,F=w1e(x),O=[];return x.forEach(function(M,V){var q=fx(y.data,{graphicalItems:[M],dataStartIndex:C,dataEndIndex:$}),K=M.type.defaultProps!==void 0?te(te({},M.type.defaultProps),M.props):M.props,Z=K.dataKey,re=K.maxBarSize,ie=K["".concat(P,"Id")],le=K["".concat(R,"Id")],ge={},ye=l.reduce(function(jn,Gt){var Ni=v["".concat(Gt.axisType,"Map")],gr=K["".concat(Gt.axisType,"Id")];Ni&&Ni[gr]||Gt.axisType==="zAxis"||Sl();var Zr=Ni[gr];return te(te({},jn),{},Ee(Ee({},Gt.axisType,Zr),"".concat(Gt.axisType,"Ticks"),Us(Zr)))},ge),ne=ye[R],ue=ye["".concat(R,"Ticks")],ce=b&&b[ie]&&b[ie].hasStack&&qde(M,b[ie].stackGroups),ee=Ks(M.type).indexOf("Bar")>=0,Te=tv(ne,ue),Ce=[],Pe=F&&Pde({barSize:k,stackGroups:b,totalSize:C1e(ye,R)});if(ee){var Oe,Le,Ke=Ve(re)?_:re,Bn=(Oe=(Le=tv(ne,ue,!0))!==null&&Le!==void 0?Le:Ke)!==null&&Oe!==void 0?Oe:0;Ce=_de({barGap:T,barCategoryGap:A,bandSize:Bn!==Te?Bn:Te,sizeList:Pe[le],maxBarSize:Ke}),Bn!==Te&&(Ce=Ce.map(function(jn){return te(te({},jn),{},{position:te(te({},jn.position),{},{offset:jn.position.offset-Bn/2})})}))}var At=M&&M.type&&M.type.getComposedData;At&&O.push({props:te(te({},At(te(te({},ye),{},{displayedData:q,props:y,dataKey:Z,item:M,bandSize:Te,barPosition:Ce,offset:w,stackedData:ce,layout:I,dataStartIndex:C,dataEndIndex:$}))),{},Ee(Ee(Ee({key:M.key||"item-".concat(V)},P,ye[P]),R,ye[R]),"animationId",S)),childIndex:OQ(M,y.children),item:M})}),O},d=function(y,v){var x=y.props,b=y.dataStartIndex,w=y.dataEndIndex,S=y.updateId;if(!HA({props:x}))return null;var C=x.children,$=x.layout,k=x.stackOffset,I=x.data,T=x.reverseStackOrder,A=CD($),_=A.numericAxisName,D=A.cateAxisName,P=vi(C,r),R=Gde(I,P,"".concat(_,"Id"),"".concat(D,"Id"),k,T),F=l.reduce(function(K,Z){var re="".concat(Z.axisType,"Map");return te(te({},K),{},Ee({},re,x1e(x,te(te({},Z),{},{graphicalItems:P,stackGroups:Z.axisType===_&&R,dataStartIndex:b,dataEndIndex:w}))))},{}),O=S1e(te(te({},F),{},{props:x,graphicalItems:P}),v==null?void 0:v.legendBBox);Object.keys(F).forEach(function(K){F[K]=c(x,F[K],O,K.replace("Map",""),n)});var M=F["".concat(D,"Map")],V=b1e(M),q=h(x,te(te({},F),{},{dataStartIndex:b,dataEndIndex:w,updateId:S,graphicalItems:P,stackGroups:R,offset:O}));return te(te({formattedGraphicalItems:q,graphicalItems:P,offset:O,stackGroups:R},V),F)},p=function(g){function y(v){var x,b,w;return n1e(this,y),w=s1e(this,y,[v]),Ee(w,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Ee(w,"accessibilityManager",new Vbe),Ee(w,"handleLegendBBoxUpdate",function(S){if(S){var C=w.state,$=C.dataStartIndex,k=C.dataEndIndex,I=C.updateId;w.setState(te({legendBBox:S},d({props:w.props,dataStartIndex:$,dataEndIndex:k,updateId:I},te(te({},w.state),{},{legendBBox:S}))))}}),Ee(w,"handleReceiveSyncEvent",function(S,C,$){if(w.props.syncId===S){if($===w.eventEmitterSymbol&&typeof w.props.syncMethod!="function")return;w.applySyncEvent(C)}}),Ee(w,"handleBrushChange",function(S){var C=S.startIndex,$=S.endIndex;if(C!==w.state.dataStartIndex||$!==w.state.dataEndIndex){var k=w.state.updateId;w.setState(function(){return te({dataStartIndex:C,dataEndIndex:$},d({props:w.props,dataStartIndex:C,dataEndIndex:$,updateId:k},w.state))}),w.triggerSyncEvent({dataStartIndex:C,dataEndIndex:$})}}),Ee(w,"handleMouseEnter",function(S){var C=w.getMouseInfo(S);if(C){var $=te(te({},C),{},{isTooltipActive:!0});w.setState($),w.triggerSyncEvent($);var k=w.props.onMouseEnter;Be(k)&&k($,S)}}),Ee(w,"triggeredAfterMouseMove",function(S){var C=w.getMouseInfo(S),$=C?te(te({},C),{},{isTooltipActive:!0}):{isTooltipActive:!1};w.setState($),w.triggerSyncEvent($);var k=w.props.onMouseMove;Be(k)&&k($,S)}),Ee(w,"handleItemMouseEnter",function(S){w.setState(function(){return{isTooltipActive:!0,activeItem:S,activePayload:S.tooltipPayload,activeCoordinate:S.tooltipPosition||{x:S.cx,y:S.cy}}})}),Ee(w,"handleItemMouseLeave",function(){w.setState(function(){return{isTooltipActive:!1}})}),Ee(w,"handleMouseMove",function(S){S.persist(),w.throttleTriggeredAfterMouseMove(S)}),Ee(w,"handleMouseLeave",function(S){w.throttleTriggeredAfterMouseMove.cancel();var C={isTooltipActive:!1};w.setState(C),w.triggerSyncEvent(C);var $=w.props.onMouseLeave;Be($)&&$(C,S)}),Ee(w,"handleOuterEvent",function(S){var C=AQ(S),$=yi(w.props,"".concat(C));if(C&&Be($)){var k,I;/.*touch.*/i.test(C)?I=w.getMouseInfo(S.changedTouches[0]):I=w.getMouseInfo(S),$((k=I)!==null&&k!==void 0?k:{},S)}}),Ee(w,"handleClick",function(S){var C=w.getMouseInfo(S);if(C){var $=te(te({},C),{},{isTooltipActive:!0});w.setState($),w.triggerSyncEvent($);var k=w.props.onClick;Be(k)&&k($,S)}}),Ee(w,"handleMouseDown",function(S){var C=w.props.onMouseDown;if(Be(C)){var $=w.getMouseInfo(S);C($,S)}}),Ee(w,"handleMouseUp",function(S){var C=w.props.onMouseUp;if(Be(C)){var $=w.getMouseInfo(S);C($,S)}}),Ee(w,"handleTouchMove",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&w.throttleTriggeredAfterMouseMove(S.changedTouches[0])}),Ee(w,"handleTouchStart",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&w.handleMouseDown(S.changedTouches[0])}),Ee(w,"handleTouchEnd",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&w.handleMouseUp(S.changedTouches[0])}),Ee(w,"handleDoubleClick",function(S){var C=w.props.onDoubleClick;if(Be(C)){var $=w.getMouseInfo(S);C($,S)}}),Ee(w,"handleContextMenu",function(S){var C=w.props.onContextMenu;if(Be(C)){var $=w.getMouseInfo(S);C($,S)}}),Ee(w,"triggerSyncEvent",function(S){w.props.syncId!==void 0&&K1.emit(q1,w.props.syncId,S,w.eventEmitterSymbol)}),Ee(w,"applySyncEvent",function(S){var C=w.props,$=C.layout,k=C.syncMethod,I=w.state.updateId,T=S.dataStartIndex,A=S.dataEndIndex;if(S.dataStartIndex!==void 0||S.dataEndIndex!==void 0)w.setState(te({dataStartIndex:T,dataEndIndex:A},d({props:w.props,dataStartIndex:T,dataEndIndex:A,updateId:I},w.state)));else if(S.activeTooltipIndex!==void 0){var _=S.chartX,D=S.chartY,P=S.activeTooltipIndex,R=w.state,F=R.offset,O=R.tooltipTicks;if(!F)return;if(typeof k=="function")P=k(O,S);else if(k==="value"){P=-1;for(var M=0;M<O.length;M++)if(O[M].value===S.activeLabel){P=M;break}}var V=te(te({},F),{},{x:F.left,y:F.top}),q=Math.min(_,V.x+V.width),K=Math.min(D,V.y+V.height),Z=O[P]&&O[P].value,re=HC(w.state,w.props.data,P),ie=O[P]?{x:$==="horizontal"?O[P].coordinate:q,y:$==="horizontal"?K:O[P].coordinate}:kV;w.setState(te(te({},S),{},{activeLabel:Z,activeCoordinate:ie,activePayload:re,activeTooltipIndex:P}))}else w.setState(S)}),Ee(w,"renderCursor",function(S){var C,$=w.state,k=$.isTooltipActive,I=$.activeCoordinate,T=$.activePayload,A=$.offset,_=$.activeTooltipIndex,D=$.tooltipAxisBandSize,P=w.getTooltipEventType(),R=(C=S.props.active)!==null&&C!==void 0?C:k,F=w.props.layout,O=S.key||"_recharts-cursor";return U.createElement(Xbe,{key:O,activeCoordinate:I,activePayload:T,activeTooltipIndex:_,chartName:n,element:S,isActive:R,layout:F,offset:A,tooltipAxisBandSize:D,tooltipEventType:P})}),Ee(w,"renderPolarAxis",function(S,C,$){var k=yi(S,"type.axisType"),I=yi(w.state,"".concat(k,"Map")),T=S.type.defaultProps,A=T!==void 0?te(te({},T),S.props):S.props,_=I&&I[A["".concat(k,"Id")]];return j.cloneElement(S,te(te({},_),{},{className:Qe(k,_.className),key:S.key||"".concat(C,"-").concat($),ticks:Us(_,!0)}))}),Ee(w,"renderPolarGrid",function(S){var C=S.props,$=C.radialLines,k=C.polarAngles,I=C.polarRadius,T=w.state,A=T.radiusAxisMap,_=T.angleAxisMap,D=Do(A),P=Do(_),R=P.cx,F=P.cy,O=P.innerRadius,M=P.outerRadius;return j.cloneElement(S,{polarAngles:Array.isArray(k)?k:Us(P,!0).map(function(V){return V.coordinate}),polarRadius:Array.isArray(I)?I:Us(D,!0).map(function(V){return V.coordinate}),cx:R,cy:F,innerRadius:O,outerRadius:M,key:S.key||"polar-grid",radialLines:$})}),Ee(w,"renderLegend",function(){var S=w.state.formattedGraphicalItems,C=w.props,$=C.children,k=C.width,I=C.height,T=w.props.margin||{},A=k-(T.left||0)-(T.right||0),_=mz({children:$,formattedGraphicalItems:S,legendWidth:A,legendContent:u});if(!_)return null;var D=_.item,P=xD(_,Ybe);return j.cloneElement(D,te(te({},P),{},{chartWidth:k,chartHeight:I,margin:T,onBBoxUpdate:w.handleLegendBBoxUpdate}))}),Ee(w,"renderTooltip",function(){var S,C=w.props,$=C.children,k=C.accessibilityLayer,I=Rr($,Fi);if(!I)return null;var T=w.state,A=T.isTooltipActive,_=T.activeCoordinate,D=T.activePayload,P=T.activeLabel,R=T.offset,F=(S=I.props.active)!==null&&S!==void 0?S:A;return j.cloneElement(I,{viewBox:te(te({},R),{},{x:R.left,y:R.top}),active:F,label:P,payload:F?D:[],coordinate:_,accessibilityLayer:k})}),Ee(w,"renderBrush",function(S){var C=w.props,$=C.margin,k=C.data,I=w.state,T=I.offset,A=I.dataStartIndex,_=I.dataEndIndex,D=I.updateId;return j.cloneElement(S,{key:S.key||"_recharts-brush",onChange:ug(w.handleBrushChange,S.props.onChange),data:k,x:he(S.props.x)?S.props.x:T.left,y:he(S.props.y)?S.props.y:T.top+T.height+T.brushBottom-($.bottom||0),width:he(S.props.width)?S.props.width:T.width,startIndex:A,endIndex:_,updateId:"brush-".concat(D)})}),Ee(w,"renderReferenceElement",function(S,C,$){if(!S)return null;var k=w,I=k.clipPathId,T=w.state,A=T.xAxisMap,_=T.yAxisMap,D=T.offset,P=S.type.defaultProps||{},R=S.props,F=R.xAxisId,O=F===void 0?P.xAxisId:F,M=R.yAxisId,V=M===void 0?P.yAxisId:M;return j.cloneElement(S,{key:S.key||"".concat(C,"-").concat($),xAxis:A[O],yAxis:_[V],viewBox:{x:D.left,y:D.top,width:D.width,height:D.height},clipPathId:I})}),Ee(w,"renderActivePoints",function(S){var C=S.item,$=S.activePoint,k=S.basePoint,I=S.childIndex,T=S.isRange,A=[],_=C.props.key,D=C.item.type.defaultProps!==void 0?te(te({},C.item.type.defaultProps),C.item.props):C.item.props,P=D.activeDot,R=D.dataKey,F=te(te({index:I,dataKey:R,cx:$.x,cy:$.y,r:4,fill:FI(C.item),strokeWidth:2,stroke:"#fff",payload:$.payload,value:$.value},We(P,!1)),Iy(P));return A.push(y.renderActiveDot(P,F,"".concat(_,"-activePoint-").concat(I))),k?A.push(y.renderActiveDot(P,te(te({},F),{},{cx:k.x,cy:k.y}),"".concat(_,"-basePoint-").concat(I))):T&&A.push(null),A}),Ee(w,"renderGraphicChild",function(S,C,$){var k=w.filterFormatItem(S,C,$);if(!k)return null;var I=w.getTooltipEventType(),T=w.state,A=T.isTooltipActive,_=T.tooltipAxis,D=T.activeTooltipIndex,P=T.activeLabel,R=w.props.children,F=Rr(R,Fi),O=k.props,M=O.points,V=O.isRange,q=O.baseLine,K=k.item.type.defaultProps!==void 0?te(te({},k.item.type.defaultProps),k.item.props):k.item.props,Z=K.activeDot,re=K.hide,ie=K.activeBar,le=K.activeShape,ge=!!(!re&&A&&F&&(Z||ie||le)),ye={};I!=="axis"&&F&&F.props.trigger==="click"?ye={onClick:ug(w.handleItemMouseEnter,S.props.onClick)}:I!=="axis"&&(ye={onMouseLeave:ug(w.handleItemMouseLeave,S.props.onMouseLeave),onMouseEnter:ug(w.handleItemMouseEnter,S.props.onMouseEnter)});var ne=j.cloneElement(S,te(te({},k.props),ye));function ue(Gt){return typeof _.dataKey=="function"?_.dataKey(Gt.payload):null}if(ge)if(D>=0){var ce,ee;if(_.dataKey&&!_.allowDuplicatedCategory){var Te=typeof _.dataKey=="function"?ue:"payload.".concat(_.dataKey.toString());ce=ky(M,Te,P),ee=V&&q&&ky(q,Te,P)}else ce=M==null?void 0:M[D],ee=V&&q&&q[D];if(le||ie){var Ce=S.props.activeIndex!==void 0?S.props.activeIndex:D;return[j.cloneElement(S,te(te(te({},k.props),ye),{},{activeIndex:Ce})),null,null]}if(!Ve(ce))return[ne].concat(Tc(w.renderActivePoints({item:k,activePoint:ce,basePoint:ee,childIndex:D,isRange:V})))}else{var Pe,Oe=(Pe=w.getItemByXY(w.state.activeCoordinate))!==null&&Pe!==void 0?Pe:{graphicalItem:ne},Le=Oe.graphicalItem,Ke=Le.item,Bn=Ke===void 0?S:Ke,At=Le.childIndex,jn=te(te(te({},k.props),ye),{},{activeIndex:At});return[j.cloneElement(Bn,jn),null,null]}return V?[ne,null,null]:[ne,null]}),Ee(w,"renderCustomized",function(S,C,$){return j.cloneElement(S,te(te({key:"recharts-customized-".concat($)},w.props),w.state))}),Ee(w,"renderMap",{CartesianGrid:{handler:pg,once:!0},ReferenceArea:{handler:w.renderReferenceElement},ReferenceLine:{handler:pg},ReferenceDot:{handler:w.renderReferenceElement},XAxis:{handler:pg},YAxis:{handler:pg},Brush:{handler:w.renderBrush,once:!0},Bar:{handler:w.renderGraphicChild},Line:{handler:w.renderGraphicChild},Area:{handler:w.renderGraphicChild},Radar:{handler:w.renderGraphicChild},RadialBar:{handler:w.renderGraphicChild},Scatter:{handler:w.renderGraphicChild},Pie:{handler:w.renderGraphicChild},Funnel:{handler:w.renderGraphicChild},Tooltip:{handler:w.renderCursor,once:!0},PolarGrid:{handler:w.renderPolarGrid,once:!0},PolarAngleAxis:{handler:w.renderPolarAxis},PolarRadiusAxis:{handler:w.renderPolarAxis},Customized:{handler:w.renderCustomized}}),w.clipPathId="".concat((x=v.id)!==null&&x!==void 0?x:op("recharts"),"-clip"),w.throttleTriggeredAfterMouseMove=dj(w.triggeredAfterMouseMove,(b=v.throttleDelay)!==null&&b!==void 0?b:1e3/60),w.state={},w}return l1e(y,g),i1e(y,[{key:"componentDidMount",value:function(){var x,b;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(x=this.props.margin.left)!==null&&x!==void 0?x:0,top:(b=this.props.margin.top)!==null&&b!==void 0?b:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var x=this.props,b=x.children,w=x.data,S=x.height,C=x.layout,$=Rr(b,Fi);if($){var k=$.props.defaultIndex;if(!(typeof k!="number"||k<0||k>this.state.tooltipTicks.length-1)){var I=this.state.tooltipTicks[k]&&this.state.tooltipTicks[k].value,T=HC(this.state,w,k,I),A=this.state.tooltipTicks[k].coordinate,_=(this.state.offset.top+S)/2,D=C==="horizontal",P=D?{x:A,y:_}:{y:A,x:_},R=this.state.formattedGraphicalItems.find(function(O){var M=O.item;return M.type.name==="Scatter"});R&&(P=te(te({},P),R.props.points[k].tooltipPosition),T=R.props.points[k].tooltipPayload);var F={activeTooltipIndex:k,isTooltipActive:!0,activeLabel:I,activePayload:T,activeCoordinate:P};this.setState(F),this.renderCursor($),this.accessibilityManager.setIndex(k)}}}},{key:"getSnapshotBeforeUpdate",value:function(x,b){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==b.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==x.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==x.margin){var w,S;this.accessibilityManager.setDetails({offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0}})}return null}},{key:"componentDidUpdate",value:function(x){$S([Rr(x.children,Fi)],[Rr(this.props.children,Fi)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var x=Rr(this.props.children,Fi);if(x&&typeof x.props.shared=="boolean"){var b=x.props.shared?"axis":"item";return a.indexOf(b)>=0?b:s}return s}},{key:"getMouseInfo",value:function(x){if(!this.container)return null;var b=this.container,w=b.getBoundingClientRect(),S=rue(w),C={chartX:Math.round(x.pageX-S.left),chartY:Math.round(x.pageY-S.top)},$=w.width/b.offsetWidth||1,k=this.inRange(C.chartX,C.chartY,$);if(!k)return null;var I=this.state,T=I.xAxisMap,A=I.yAxisMap,_=this.getTooltipEventType(),D=wD(this.state,this.props.data,this.props.layout,k);if(_!=="axis"&&T&&A){var P=Do(T).scale,R=Do(A).scale,F=P&&P.invert?P.invert(C.chartX):null,O=R&&R.invert?R.invert(C.chartY):null;return te(te({},C),{},{xValue:F,yValue:O},D)}return D?te(te({},C),D):null}},{key:"inRange",value:function(x,b){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,S=this.props.layout,C=x/w,$=b/w;if(S==="horizontal"||S==="vertical"){var k=this.state.offset,I=C>=k.left&&C<=k.left+k.width&&$>=k.top&&$<=k.top+k.height;return I?{x:C,y:$}:null}var T=this.state,A=T.angleAxisMap,_=T.radiusAxisMap;if(A&&_){var D=Do(A);return n_({x:C,y:$},D)}return null}},{key:"parseEventsOfWrapper",value:function(){var x=this.props.children,b=this.getTooltipEventType(),w=Rr(x,Fi),S={};w&&b==="axis"&&(w.props.trigger==="click"?S={onClick:this.handleClick}:S={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var C=Iy(this.props,this.handleOuterEvent);return te(te({},C),S)}},{key:"addListener",value:function(){K1.on(q1,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){K1.removeListener(q1,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(x,b,w){for(var S=this.state.formattedGraphicalItems,C=0,$=S.length;C<$;C++){var k=S[C];if(k.item===x||k.props.key===x.key||b===Ks(k.item.type)&&w===k.childIndex)return k}return null}},{key:"renderClipPath",value:function(){var x=this.clipPathId,b=this.state.offset,w=b.left,S=b.top,C=b.height,$=b.width;return U.createElement("defs",null,U.createElement("clipPath",{id:x},U.createElement("rect",{x:w,y:S,height:C,width:$})))}},{key:"getXScales",value:function(){var x=this.state.xAxisMap;return x?Object.entries(x).reduce(function(b,w){var S=vD(w,2),C=S[0],$=S[1];return te(te({},b),{},Ee({},C,$.scale))},{}):null}},{key:"getYScales",value:function(){var x=this.state.yAxisMap;return x?Object.entries(x).reduce(function(b,w){var S=vD(w,2),C=S[0],$=S[1];return te(te({},b),{},Ee({},C,$.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(x){var b;return(b=this.state.xAxisMap)===null||b===void 0||(b=b[x])===null||b===void 0?void 0:b.scale}},{key:"getYScaleByAxisId",value:function(x){var b;return(b=this.state.yAxisMap)===null||b===void 0||(b=b[x])===null||b===void 0?void 0:b.scale}},{key:"getItemByXY",value:function(x){var b=this.state,w=b.formattedGraphicalItems,S=b.activeItem;if(w&&w.length)for(var C=0,$=w.length;C<$;C++){var k=w[C],I=k.props,T=k.item,A=T.type.defaultProps!==void 0?te(te({},T.type.defaultProps),T.props):T.props,_=Ks(T.type);if(_==="Bar"){var D=(I.data||[]).find(function(O){return Bge(x,O)});if(D)return{graphicalItem:k,payload:D}}else if(_==="RadialBar"){var P=(I.data||[]).find(function(O){return n_(x,O)});if(P)return{graphicalItem:k,payload:P}}else if(ix(k,S)||sx(k,S)||Td(k,S)){var R=Vye({graphicalItem:k,activeTooltipItem:S,itemData:A.data}),F=A.activeIndex===void 0?R:A.activeIndex;return{graphicalItem:te(te({},k),{},{childIndex:F}),payload:Td(k,S)?A.data[R]:k.props.data[R]}}}return null}},{key:"render",value:function(){var x=this;if(!HA(this))return null;var b=this.props,w=b.children,S=b.className,C=b.width,$=b.height,k=b.style,I=b.compact,T=b.title,A=b.desc,_=xD(b,Zbe),D=We(_,!1);if(I)return U.createElement(eD,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},U.createElement(IS,Au({},D,{width:C,height:$,title:T,desc:A}),this.renderClipPath(),qA(w,this.renderMap)));if(this.props.accessibilityLayer){var P,R;D.tabIndex=(P=this.props.tabIndex)!==null&&P!==void 0?P:0,D.role=(R=this.props.role)!==null&&R!==void 0?R:"application",D.onKeyDown=function(O){x.accessibilityManager.keyboardEvent(O)},D.onFocus=function(){x.accessibilityManager.focus()}}var F=this.parseEventsOfWrapper();return U.createElement(eD,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},U.createElement("div",Au({className:Qe("recharts-wrapper",S),style:te({position:"relative",cursor:"default",width:C,height:$},k)},F,{ref:function(M){x.container=M}}),U.createElement(IS,Au({},D,{width:C,height:$,title:T,desc:A,style:p1e}),this.renderClipPath(),qA(w,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(j.Component);Ee(p,"displayName",n),Ee(p,"defaultProps",te({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),Ee(p,"getDerivedStateFromProps",function(g,y){var v=g.dataKey,x=g.data,b=g.children,w=g.width,S=g.height,C=g.layout,$=g.stackOffset,k=g.margin,I=y.dataStartIndex,T=y.dataEndIndex;if(y.updateId===void 0){var A=SD(g);return te(te(te({},A),{},{updateId:0},d(te(te({props:g},A),{},{updateId:0}),y)),{},{prevDataKey:v,prevData:x,prevWidth:w,prevHeight:S,prevLayout:C,prevStackOffset:$,prevMargin:k,prevChildren:b})}if(v!==y.prevDataKey||x!==y.prevData||w!==y.prevWidth||S!==y.prevHeight||C!==y.prevLayout||$!==y.prevStackOffset||!Uu(k,y.prevMargin)){var _=SD(g),D={chartX:y.chartX,chartY:y.chartY,isTooltipActive:y.isTooltipActive},P=te(te({},wD(y,x,C)),{},{updateId:y.updateId+1}),R=te(te(te({},_),D),P);return te(te(te({},R),d(te({props:g},R),y)),{},{prevDataKey:v,prevData:x,prevWidth:w,prevHeight:S,prevLayout:C,prevStackOffset:$,prevMargin:k,prevChildren:b})}if(!$S(b,y.prevChildren)){var F,O,M,V,q=Rr(b,yc),K=q&&(F=(O=q.props)===null||O===void 0?void 0:O.startIndex)!==null&&F!==void 0?F:I,Z=q&&(M=(V=q.props)===null||V===void 0?void 0:V.endIndex)!==null&&M!==void 0?M:T,re=K!==I||Z!==T,ie=!Ve(x),le=ie&&!re?y.updateId:y.updateId+1;return te(te({updateId:le},d(te(te({props:g},y),{},{updateId:le,dataStartIndex:K,dataEndIndex:Z}),y)),{},{prevChildren:b,dataStartIndex:K,dataEndIndex:Z})}return null}),Ee(p,"renderActiveDot",function(g,y,v){var x;return j.isValidElement(g)?x=j.cloneElement(g,y):Be(g)?x=g(y):x=U.createElement(BI,y),U.createElement(qt,{className:"recharts-active-dot",key:v},x)});var m=j.forwardRef(function(y,v){return U.createElement(p,Au({},y,{ref:v}))});return m.displayName=p.displayName,m},$1e=TV({chartName:"LineChart",GraphicalChild:dp,axisComponents:[{axisType:"xAxis",AxisComp:af},{axisType:"yAxis",AxisComp:lf}],formatAxisMap:Gz}),k1e=TV({chartName:"BarChart",GraphicalChild:Zs,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:af},{axisType:"yAxis",AxisComp:lf}],formatAxisMap:Gz});const I1e=[{name:"Delta",totalDelays:324,weatherDelays:120,mechanicalDelays:84,airTrafficDelays:120},{name:"United",totalDelays:280,weatherDelays:98,mechanicalDelays:62,airTrafficDelays:120},{name:"American",totalDelays:410,weatherDelays:142,mechanicalDelays:105,airTrafficDelays:163},{name:"Southwest",totalDelays:235,weatherDelays:75,mechanicalDelays:55,airTrafficDelays:105},{name:"JetBlue",totalDelays:185,weatherDelays:60,mechanicalDelays:45,airTrafficDelays:80}],T1e=()=>N.jsx("div",{className:"h-80 w-full",children:N.jsx(pj,{width:"100%",height:"100%",children:N.jsxs(k1e,{data:I1e,margin:{top:10,right:30,left:0,bottom:20},barSize:20,children:[N.jsx(XI,{strokeDasharray:"3 3"}),N.jsx(af,{dataKey:"name"}),N.jsx(lf,{}),N.jsx(Fi,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},formatter:(t,e)=>[t,e==="totalDelays"?"Total Delays":e==="weatherDelays"?"Weather Delays":e==="mechanicalDelays"?"Mechanical Delays":"Air Traffic Delays"]}),N.jsx(al,{formatter:t=>{const e=t==="totalDelays"?"Total Delays":t==="weatherDelays"?"Weather Delays":t==="mechanicalDelays"?"Mechanical Delays":"Air Traffic Delays";return N.jsx("span",{className:"text-xs font-medium",children:e})}}),N.jsx(Zs,{dataKey:"weatherDelays",stackId:"a",fill:"#3B82F6"}),N.jsx(Zs,{dataKey:"mechanicalDelays",stackId:"a",fill:"#F97316"}),N.jsx(Zs,{dataKey:"airTrafficDelays",stackId:"a",fill:"#8B5CF6"})]})})}),E1e=()=>N.jsxs("div",{className:"space-y-6",children:[N.jsxs("div",{className:"flex items-center justify-between",children:[N.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Flight Delay Analytics"}),N.jsxs("div",{className:"flex items-center space-x-2",children:[N.jsx("span",{className:"text-sm text-gray-500",children:"Last updated:"}),N.jsx("span",{className:"text-sm font-medium",children:"March 15, 2024 09:30 AM EST"})]})]}),N.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[N.jsx(eg,{title:"Average Delay Time",value:"32.5 min",change:"+5.2%",trend:"up",icon:N.jsx(Cy,{className:"h-6 w-6 text-blue-600"})}),N.jsx(eg,{title:"Total Delayed Flights",value:"1,432",change:"-2.3%",trend:"down",icon:N.jsx($y,{className:"h-6 w-6 text-blue-600"})}),N.jsx(eg,{title:"Weather-Related Delays",value:"495",change:"+8.7%",trend:"up",icon:N.jsx(Wu,{className:"h-6 w-6 text-blue-600"})}),N.jsx(eg,{title:"Critical Delays (>2h)",value:"89",change:"-12.4%",trend:"down",icon:N.jsx(q3,{className:"h-6 w-6 text-blue-600"})})]}),N.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[N.jsxs("div",{className:"rounded-lg border bg-white p-6 shadow-sm",children:[N.jsx("h2",{className:"mb-4 text-lg font-semibold text-gray-900",children:"Delays by Airline"}),N.jsx(T1e,{})]}),N.jsxs("div",{className:"rounded-lg border bg-white p-6 shadow-sm",children:[N.jsx("h2",{className:"mb-4 text-lg font-semibold text-gray-900",children:"Weather Impact Analysis"}),N.jsx("div",{className:"flex h-[300px] items-center justify-center",children:N.jsx("p",{className:"text-gray-500",children:"Weather impact chart will be implemented next"})})]})]}),N.jsxs("div",{className:"rounded-lg border bg-white p-6 shadow-sm",children:[N.jsxs("div",{className:"flex items-center justify-between",children:[N.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Flight Delays"}),N.jsx("button",{className:"rounded-md bg-blue-50 px-3 py-1 text-sm font-medium text-blue-600 hover:bg-blue-100",children:"View All"})]}),N.jsx("div",{className:"mt-4 overflow-x-auto",children:N.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[N.jsx("thead",{children:N.jsxs("tr",{children:[N.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Flight"}),N.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Route"}),N.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Delay"}),N.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Reason"}),N.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Status"})]})}),N.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:[{flight:"DL1234",route:"JFK → LAX",delay:"45 min",reason:"Weather",status:"Departed"},{flight:"UA789",route:"ORD → SFO",delay:"120 min",reason:"Technical",status:"Scheduled"},{flight:"AA456",route:"MIA → DFW",delay:"30 min",reason:"Air Traffic",status:"Boarding"}].map((t,e)=>N.jsxs("tr",{children:[N.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:N.jsx("div",{className:"flex items-center",children:N.jsx("span",{className:"font-medium text-gray-900",children:t.flight})})}),N.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-500",children:t.route}),N.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-500",children:t.delay}),N.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-500",children:t.reason}),N.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:N.jsx("span",{className:`inline-flex rounded-full px-2 text-xs font-semibold leading-5 ${t.status==="Departed"?"bg-green-100 text-green-800":t.status==="Boarding"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:t.status})})]},e))})]})})]})]}),N1e=()=>N.jsxs("div",{className:"space-y-6",children:[N.jsxs("div",{className:"flex items-center justify-between",children:[N.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Weather Analysis"}),N.jsxs("div",{className:"flex space-x-2",children:[N.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Generate Report"}),N.jsx("button",{className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Export Data"})]})]}),N.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[N.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:N.jsxs("div",{className:"flex items-center space-x-3",children:[N.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:N.jsx(Y3,{className:"h-6 w-6 text-blue-600"})}),N.jsxs("div",{children:[N.jsx("p",{className:"text-sm text-gray-500",children:"Temperature"}),N.jsx("p",{className:"text-xl font-semibold",children:"72°F"})]})]})}),N.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:N.jsxs("div",{className:"flex items-center space-x-3",children:[N.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:N.jsx(Z3,{className:"h-6 w-6 text-green-600"})}),N.jsxs("div",{children:[N.jsx("p",{className:"text-sm text-gray-500",children:"Wind Speed"}),N.jsx("p",{className:"text-xl font-semibold",children:"12 mph"})]})]})}),N.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:N.jsxs("div",{className:"flex items-center space-x-3",children:[N.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:N.jsx(Wu,{className:"h-6 w-6 text-purple-600"})}),N.jsxs("div",{children:[N.jsx("p",{className:"text-sm text-gray-500",children:"Cloud Cover"}),N.jsx("p",{className:"text-xl font-semibold",children:"65%"})]})]})}),N.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:N.jsxs("div",{className:"flex items-center space-x-3",children:[N.jsx("div",{className:"p-3 bg-cyan-100 rounded-lg",children:N.jsx(T7,{className:"h-6 w-6 text-cyan-600"})}),N.jsxs("div",{children:[N.jsx("p",{className:"text-sm text-gray-500",children:"Precipitation"}),N.jsx("p",{className:"text-xl font-semibold",children:"30%"})]})]})})]}),N.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[N.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:[N.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Hourly Forecast"}),N.jsx("div",{className:"h-64 bg-gray-50 rounded-lg flex items-center justify-center",children:N.jsx("p",{className:"text-gray-500",children:"Hourly forecast chart will be displayed here"})})]}),N.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:[N.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Weather Impact Analysis"}),N.jsx("div",{className:"h-64 bg-gray-50 rounded-lg flex items-center justify-center",children:N.jsx("p",{className:"text-gray-500",children:"Weather impact analysis chart will be displayed here"})})]})]}),N.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:[N.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Weather Alerts"}),N.jsxs("div",{className:"space-y-4",children:[N.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:N.jsxs("div",{className:"flex items-center",children:[N.jsx("div",{className:"flex-shrink-0",children:N.jsx(Wu,{className:"h-5 w-5 text-yellow-600"})}),N.jsxs("div",{className:"ml-3",children:[N.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Strong Winds Expected"}),N.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Wind gusts up to 35mph expected between 2PM and 6PM"})]})]})}),N.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:N.jsxs("div",{className:"flex items-center",children:[N.jsx("div",{className:"flex-shrink-0",children:N.jsx(Wu,{className:"h-5 w-5 text-blue-600"})}),N.jsxs("div",{className:"ml-3",children:[N.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Potential Thunderstorms"}),N.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"60% chance of thunderstorms developing after 8PM"})]})]})})]})]})]}),A1e=()=>N.jsxs("div",{className:"space-y-6",children:[N.jsxs("div",{className:"flex items-center justify-between",children:[N.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Flight Scheduling"}),N.jsxs("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[N.jsx($y,{className:"h-5 w-5"}),"Schedule New Flight"]})]}),N.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[N.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[N.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[N.jsx(X3,{className:"h-6 w-6 text-blue-600"}),N.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Today's Schedule"})]}),N.jsx("div",{className:"space-y-4",children:[1,2,3].map(t=>N.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-md",children:[N.jsxs("div",{children:[N.jsxs("p",{className:"font-medium text-gray-900",children:["Flight AA",t,"23"]}),N.jsx("p",{className:"text-sm text-gray-600",children:"LAX → JFK"})]}),N.jsxs("div",{className:"flex items-center gap-2",children:[N.jsx(Cy,{className:"h-4 w-4 text-gray-500"}),N.jsxs("span",{className:"text-sm text-gray-600",children:["09:0",t," AM"]})]})]},t))})]}),N.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[N.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[N.jsx($y,{className:"h-6 w-6 text-green-600"}),N.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Available Aircraft"})]}),N.jsx("div",{className:"space-y-4",children:[1,2,3].map(t=>N.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-md",children:[N.jsxs("div",{children:[N.jsxs("p",{className:"font-medium text-gray-900",children:["Boeing 73",t]}),N.jsxs("p",{className:"text-sm text-gray-600",children:["Registration: N",t,"23AA"]})]}),N.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full",children:"Available"})]},t))})]}),N.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[N.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[N.jsx(Cy,{className:"h-6 w-6 text-purple-600"}),N.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Upcoming Maintenance"})]}),N.jsx("div",{className:"space-y-4",children:[1,2,3].map(t=>N.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-md",children:[N.jsxs("div",{children:[N.jsxs("p",{className:"font-medium text-gray-900",children:["Aircraft N",t,"45AA"]}),N.jsx("p",{className:"text-sm text-gray-600",children:"Type: Routine Check"})]}),N.jsxs("span",{className:"text-sm text-gray-600",children:["In ",t," days"]})]},t))})]})]})]}),EV=j.createContext({});function O1e(t){const e=j.useRef(null);return e.current===null&&(e.current=t()),e.current}const YI=j.createContext(null),NV=j.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function P1e(t=!0){const e=j.useContext(YI);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=j.useId();j.useEffect(()=>{t&&i(s)},[t]);const o=j.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const ZI=typeof window<"u",_1e=ZI?j.useLayoutEffect:j.useEffect,zr=t=>t;let KC=zr;function QI(t){let e;return()=>(e===void 0&&(e=t()),e)}const Ec=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},Qs=t=>t*1e3,Js=t=>t/1e3,D1e={skipAnimations:!1,useManualTiming:!1};function R1e(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(u){s.has(u)&&(l.schedule(u),t()),u(o)}const l={schedule:(u,c=!1,f=!1)=>{const d=f&&r?e:n;return c&&s.add(u),d.has(u)||d.add(u),u},cancel:u=>{n.delete(u),s.delete(u)},process:u=>{if(o=u,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(a),e.clear(),r=!1,i&&(i=!1,l.process(u))}};return l}const mg=["read","resolveKeyframes","update","preRender","render","postRender"],M1e=40;function AV(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=mg.reduce((y,v)=>(y[v]=R1e(s),y),{}),{read:a,resolveKeyframes:l,update:u,preRender:c,render:f,postRender:h}=o,d=()=>{const y=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(y-i.timestamp,M1e),1),i.timestamp=y,i.isProcessing=!0,a.process(i),l.process(i),u.process(i),c.process(i),f.process(i),h.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(d))},p=()=>{n=!0,r=!0,i.isProcessing||t(d)};return{schedule:mg.reduce((y,v)=>{const x=o[v];return y[v]=(b,w=!1,S=!1)=>(n||p(),x.schedule(b,w,S)),y},{}),cancel:y=>{for(let v=0;v<mg.length;v++)o[mg[v]].cancel(y)},state:i,steps:o}}const{schedule:$t,cancel:sa,state:Nn,steps:Y1}=AV(typeof requestAnimationFrame<"u"?requestAnimationFrame:zr,!0),OV=j.createContext({strict:!1}),$D={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Nc={};for(const t in $D)Nc[t]={isEnabled:e=>$D[t].some(n=>!!e[n])};function F1e(t){for(const e in t)Nc[e]={...Nc[e],...t[e]}}const L1e=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function $v(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||L1e.has(t)}let PV=t=>!$v(t);function B1e(t){t&&(PV=e=>e.startsWith("on")?!$v(e):t(e))}try{B1e(require("@emotion/is-prop-valid").default)}catch{}function j1e(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(PV(i)||n===!0&&$v(i)||!e&&!$v(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function z1e(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const hx=j.createContext({});function Dd(t){return typeof t=="string"||Array.isArray(t)}function dx(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const JI=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],eT=["initial",...JI];function px(t){return dx(t.animate)||eT.some(e=>Dd(t[e]))}function _V(t){return!!(px(t)||t.variants)}function V1e(t,e){if(px(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Dd(n)?n:void 0,animate:Dd(r)?r:void 0}}return t.inherit!==!1?e:{}}function W1e(t){const{initial:e,animate:n}=V1e(t,j.useContext(hx));return j.useMemo(()=>({initial:e,animate:n}),[kD(e),kD(n)])}function kD(t){return Array.isArray(t)?t.join(" "):t}const U1e=Symbol.for("motionComponentSymbol");function Ou(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function G1e(t,e,n){return j.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Ou(n)&&(n.current=r))},[e])}const tT=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),H1e="framerAppearId",DV="data-"+tT(H1e),{schedule:nT,cancel:sqe}=AV(queueMicrotask,!1),RV=j.createContext({});function K1e(t,e,n,r,i){var s,o;const{visualElement:a}=j.useContext(hx),l=j.useContext(OV),u=j.useContext(YI),c=j.useContext(NV).reducedMotion,f=j.useRef(null);r=r||l.renderer,!f.current&&r&&(f.current=r(t,{visualState:e,parent:a,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:c}));const h=f.current,d=j.useContext(RV);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&q1e(f.current,n,i,d);const p=j.useRef(!1);j.useInsertionEffect(()=>{h&&p.current&&h.update(n,u)});const m=n[DV],g=j.useRef(!!m&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,m))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,m)));return _1e(()=>{h&&(p.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),nT.render(h.render),g.current&&h.animationState&&h.animationState.animateChanges())}),j.useEffect(()=>{h&&(!g.current&&h.animationState&&h.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)===null||y===void 0||y.call(window,m)}),g.current=!1))}),h}function q1e(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:MV(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&Ou(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:u})}function MV(t){if(t)return t.options.allowProjection!==!1?t.projection:MV(t.parent)}function X1e({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var s,o;t&&F1e(t);function a(u,c){let f;const h={...j.useContext(NV),...u,layoutId:Y1e(u)},{isStatic:d}=h,p=W1e(u),m=r(u,d);if(!d&&ZI){Z1e();const g=Q1e(h);f=g.MeasureLayout,p.visualElement=K1e(i,m,h,e,g.ProjectionNode)}return N.jsxs(hx.Provider,{value:p,children:[f&&p.visualElement?N.jsx(f,{visualElement:p.visualElement,...h}):null,n(i,u,G1e(m,p.visualElement,c),m,d,p.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${(o=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&o!==void 0?o:""})`}`;const l=j.forwardRef(a);return l[U1e]=i,l}function Y1e({layoutId:t}){const e=j.useContext(EV).id;return e&&t!==void 0?e+"-"+t:t}function Z1e(t,e){j.useContext(OV).strict}function Q1e(t){const{drag:e,layout:n}=Nc;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const J1e=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function rT(t){return typeof t!="string"||t.includes("-")?!1:!!(J1e.indexOf(t)>-1||/[A-Z]/u.test(t))}function ID(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function iT(t,e,n,r){if(typeof e=="function"){const[i,s]=ID(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=ID(r);e=e(n!==void 0?n:t.custom,i,s)}return e}const qC=t=>Array.isArray(t),ewe=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),twe=t=>qC(t)?t[t.length-1]||0:t,Qn=t=>!!(t&&t.getVelocity);function Wg(t){const e=Qn(t)?t.get():t;return ewe(e)?e.toValue():e}function nwe({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,s){const o={latestValues:rwe(r,i,s,t),renderState:e()};return n&&(o.onMount=a=>n({props:r,current:a,...o}),o.onUpdate=a=>n(a)),o}const FV=t=>(e,n)=>{const r=j.useContext(hx),i=j.useContext(YI),s=()=>nwe(t,e,r,i);return n?s():O1e(s)};function rwe(t,e,n,r){const i={},s=r(t,{});for(const h in s)i[h]=Wg(s[h]);let{initial:o,animate:a}=t;const l=px(t),u=_V(t);e&&u&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let c=n?n.initial===!1:!1;c=c||o===!1;const f=c?a:o;if(f&&typeof f!="boolean"&&!dx(f)){const h=Array.isArray(f)?f:[f];for(let d=0;d<h.length;d++){const p=iT(t,h[d]);if(p){const{transitionEnd:m,transition:g,...y}=p;for(const v in y){let x=y[v];if(Array.isArray(x)){const b=c?x.length-1:0;x=x[b]}x!==null&&(i[v]=x)}for(const v in m)i[v]=m[v]}}}return i}const uf=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Gl=new Set(uf),LV=t=>e=>typeof e=="string"&&e.startsWith(t),BV=LV("--"),iwe=LV("var(--"),sT=t=>iwe(t)?swe.test(t.split("/*")[0].trim()):!1,swe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,jV=(t,e)=>e&&typeof t=="number"?e.transform(t):t,uo=(t,e,n)=>n>e?e:n<t?t:n,cf={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Rd={...cf,transform:t=>uo(0,1,t)},gg={...cf,default:1},pp=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),To=pp("deg"),bs=pp("%"),Ne=pp("px"),owe=pp("vh"),awe=pp("vw"),TD={...bs,parse:t=>bs.parse(t)/100,transform:t=>bs.transform(t*100)},lwe={borderWidth:Ne,borderTopWidth:Ne,borderRightWidth:Ne,borderBottomWidth:Ne,borderLeftWidth:Ne,borderRadius:Ne,radius:Ne,borderTopLeftRadius:Ne,borderTopRightRadius:Ne,borderBottomRightRadius:Ne,borderBottomLeftRadius:Ne,width:Ne,maxWidth:Ne,height:Ne,maxHeight:Ne,top:Ne,right:Ne,bottom:Ne,left:Ne,padding:Ne,paddingTop:Ne,paddingRight:Ne,paddingBottom:Ne,paddingLeft:Ne,margin:Ne,marginTop:Ne,marginRight:Ne,marginBottom:Ne,marginLeft:Ne,backgroundPositionX:Ne,backgroundPositionY:Ne},uwe={rotate:To,rotateX:To,rotateY:To,rotateZ:To,scale:gg,scaleX:gg,scaleY:gg,scaleZ:gg,skew:To,skewX:To,skewY:To,distance:Ne,translateX:Ne,translateY:Ne,translateZ:Ne,x:Ne,y:Ne,z:Ne,perspective:Ne,transformPerspective:Ne,opacity:Rd,originX:TD,originY:TD,originZ:Ne},ED={...cf,transform:Math.round},oT={...lwe,...uwe,zIndex:ED,size:Ne,fillOpacity:Rd,strokeOpacity:Rd,numOctaves:ED},cwe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},fwe=uf.length;function hwe(t,e,n){let r="",i=!0;for(let s=0;s<fwe;s++){const o=uf[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const u=jV(a,oT[o]);if(!l){i=!1;const c=cwe[o]||o;r+=`${c}(${u}) `}n&&(e[o]=u)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function aT(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const u=e[l];if(Gl.has(l)){o=!0;continue}else if(BV(l)){i[l]=u;continue}else{const c=jV(u,oT[l]);l.startsWith("origin")?(a=!0,s[l]=c):r[l]=c}}if(e.transform||(o||n?r.transform=hwe(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:c=0}=s;r.transformOrigin=`${l} ${u} ${c}`}}const dwe={offset:"stroke-dashoffset",array:"stroke-dasharray"},pwe={offset:"strokeDashoffset",array:"strokeDasharray"};function mwe(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?dwe:pwe;t[s.offset]=Ne.transform(-r);const o=Ne.transform(e),a=Ne.transform(n);t[s.array]=`${o} ${a}`}function ND(t,e,n){return typeof t=="string"?t:Ne.transform(e+n*t)}function gwe(t,e,n){const r=ND(e,t.x,t.width),i=ND(n,t.y,t.height);return`${r} ${i}`}function lT(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...u},c,f){if(aT(t,u,f),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:d,dimensions:p}=t;h.transform&&(p&&(d.transform=h.transform),delete h.transform),p&&(i!==void 0||s!==void 0||d.transform)&&(d.transformOrigin=gwe(p,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),o!==void 0&&mwe(h,o,a,l,!1)}const uT=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),zV=()=>({...uT(),attrs:{}}),cT=t=>typeof t=="string"&&t.toLowerCase()==="svg";function VV(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const WV=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function UV(t,e,n,r){VV(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(WV.has(i)?i:tT(i),e.attrs[i])}const kv={};function ywe(t){Object.assign(kv,t)}function GV(t,{layout:e,layoutId:n}){return Gl.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!kv[t]||t==="opacity")}function fT(t,e,n){var r;const{style:i}=t,s={};for(const o in i)(Qn(i[o])||e.style&&Qn(e.style[o])||GV(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}function HV(t,e,n){const r=fT(t,e,n);for(const i in t)if(Qn(t[i])||Qn(e[i])){const s=uf.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function vwe(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const AD=["x","y","width","height","cx","cy","r"],xwe={useVisualState:FV({scrapeMotionValuesFromProps:HV,createRenderState:zV,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let s=!!t.drag;if(!s){for(const a in i)if(Gl.has(a)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let a=0;a<AD.length;a++){const l=AD[a];t[l]!==e[l]&&(o=!0)}o&&$t.read(()=>{vwe(n,r),$t.render(()=>{lT(r,i,cT(n.tagName),t.transformTemplate),UV(n,r)})})}})},bwe={useVisualState:FV({scrapeMotionValuesFromProps:fT,createRenderState:uT})};function KV(t,e,n){for(const r in e)!Qn(e[r])&&!GV(r,n)&&(t[r]=e[r])}function wwe({transformTemplate:t},e){return j.useMemo(()=>{const n=uT();return aT(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Swe(t,e){const n=t.style||{},r={};return KV(r,n,t),Object.assign(r,wwe(t,e)),r}function Cwe(t,e){const n={},r=Swe(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function $we(t,e,n,r){const i=j.useMemo(()=>{const s=zV();return lT(s,e,cT(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};KV(s,t.style,t),i.style={...s,...i.style}}return i}function kwe(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(rT(n)?$we:Cwe)(r,s,o,n),u=j1e(r,typeof n=="string",t),c=n!==j.Fragment?{...u,...l,ref:i}:{},{children:f}=r,h=j.useMemo(()=>Qn(f)?f.get():f,[f]);return j.createElement(n,{...c,children:h})}}function Iwe(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...rT(r)?xwe:bwe,preloadedFeatures:t,useRender:kwe(i),createVisualElement:e,Component:r};return X1e(o)}}function qV(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function mx(t,e,n){const r=t.getProps();return iT(r,e,n!==void 0?n:r.custom,t)}const Twe=QI(()=>window.ScrollTimeline!==void 0);class Ewe{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(Twe()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Nwe extends Ewe{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function hT(t,e){return t?t[e]||t.default||t:void 0}const XC=2e4;function XV(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<XC;)e+=n,r=t.next(e);return e>=XC?1/0:e}function dT(t){return typeof t=="function"}function OD(t,e){t.timeline=e,t.onfinish=null}const pT=t=>Array.isArray(t)&&typeof t[0]=="number",Awe={linearEasing:void 0};function Owe(t,e){const n=QI(t);return()=>{var r;return(r=Awe[e])!==null&&r!==void 0?r:n()}}const Iv=Owe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),YV=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=t(Ec(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function ZV(t){return!!(typeof t=="function"&&Iv()||!t||typeof t=="string"&&(t in YC||Iv())||pT(t)||Array.isArray(t)&&t.every(ZV))}const sh=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,YC={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:sh([0,.65,.55,1]),circOut:sh([.55,0,1,.45]),backIn:sh([.31,.01,.66,-.59]),backOut:sh([.33,1.53,.69,.99])};function QV(t,e){if(t)return typeof t=="function"&&Iv()?YV(t,e):pT(t)?sh(t):Array.isArray(t)?t.map(n=>QV(n,e)||YC.easeOut):YC[t]}const _i={x:!1,y:!1};function JV(){return _i.x||_i.y}function Pwe(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const s=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function e4(t,e){const n=Pwe(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function PD(t){return e=>{e.pointerType==="touch"||JV()||t(e)}}function _we(t,e,n={}){const[r,i,s]=e4(t,n),o=PD(a=>{const{target:l}=a,u=e(a);if(typeof u!="function"||!l)return;const c=PD(f=>{u(f),l.removeEventListener("pointerleave",c)});l.addEventListener("pointerleave",c,i)});return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const t4=(t,e)=>e?t===e?!0:t4(t,e.parentElement):!1,mT=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Dwe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Rwe(t){return Dwe.has(t.tagName)||t.tabIndex!==-1}const oh=new WeakSet;function _D(t){return e=>{e.key==="Enter"&&t(e)}}function Z1(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Mwe=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=_D(()=>{if(oh.has(n))return;Z1(n,"down");const i=_D(()=>{Z1(n,"up")}),s=()=>Z1(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function DD(t){return mT(t)&&!JV()}function Fwe(t,e,n={}){const[r,i,s]=e4(t,n),o=a=>{const l=a.currentTarget;if(!DD(a)||oh.has(l))return;oh.add(l);const u=e(a),c=(d,p)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",h),!(!DD(d)||!oh.has(l))&&(oh.delete(l),typeof u=="function"&&u(d,{success:p}))},f=d=>{c(d,n.useGlobalTarget||t4(l,d.target))},h=d=>{c(d,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",h,i)};return r.forEach(a=>{!Rwe(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),a.addEventListener("focus",u=>Mwe(u,i),i)}),s}function Lwe(t){return t==="x"||t==="y"?_i[t]?null:(_i[t]=!0,()=>{_i[t]=!1}):_i.x||_i.y?null:(_i.x=_i.y=!0,()=>{_i.x=_i.y=!1})}const n4=new Set(["width","height","top","left","right","bottom",...uf]);let Ug;function Bwe(){Ug=void 0}const ws={now:()=>(Ug===void 0&&ws.set(Nn.isProcessing||D1e.useManualTiming?Nn.timestamp:performance.now()),Ug),set:t=>{Ug=t,queueMicrotask(Bwe)}};function gT(t,e){t.indexOf(e)===-1&&t.push(e)}function yT(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class vT{constructor(){this.subscriptions=[]}add(e){return gT(this.subscriptions,e),()=>yT(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function r4(t,e){return e?t*(1e3/e):0}const RD=30,jwe=t=>!isNaN(parseFloat(t));class zwe{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=ws.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=ws.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=jwe(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new vT);const r=this.events[e].add(n);return e==="change"?()=>{r(),$t.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ws.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>RD)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,RD);return r4(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Md(t,e){return new zwe(t,e)}function Vwe(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Md(n))}function Wwe(t,e){const n=mx(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=twe(s[o]);Vwe(t,o,a)}}function Uwe(t){return!!(Qn(t)&&t.add)}function ZC(t,e){const n=t.getValue("willChange");if(Uwe(n))return n.add(e)}function i4(t){return t.props[DV]}const s4=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Gwe=1e-7,Hwe=12;function Kwe(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=s4(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>Gwe&&++a<Hwe);return o}function mp(t,e,n,r){if(t===e&&n===r)return zr;const i=s=>Kwe(s,0,1,t,n);return s=>s===0||s===1?s:s4(i(s),e,r)}const o4=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,a4=t=>e=>1-t(1-e),l4=mp(.33,1.53,.69,.99),xT=a4(l4),u4=o4(xT),c4=t=>(t*=2)<1?.5*xT(t):.5*(2-Math.pow(2,-10*(t-1))),bT=t=>1-Math.sin(Math.acos(t)),f4=a4(bT),h4=o4(bT),d4=t=>/^0[^.\s]+$/u.test(t);function qwe(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||d4(t):!0}const Eh=t=>Math.round(t*1e5)/1e5,wT=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Xwe(t){return t==null}const Ywe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,ST=(t,e)=>n=>!!(typeof n=="string"&&Ywe.test(n)&&n.startsWith(t)||e&&!Xwe(n)&&Object.prototype.hasOwnProperty.call(n,e)),p4=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(wT);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Zwe=t=>uo(0,255,t),Q1={...cf,transform:t=>Math.round(Zwe(t))},tl={test:ST("rgb","red"),parse:p4("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Q1.transform(t)+", "+Q1.transform(e)+", "+Q1.transform(n)+", "+Eh(Rd.transform(r))+")"};function Qwe(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const QC={test:ST("#"),parse:Qwe,transform:tl.transform},Pu={test:ST("hsl","hue"),parse:p4("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+bs.transform(Eh(e))+", "+bs.transform(Eh(n))+", "+Eh(Rd.transform(r))+")"},Un={test:t=>tl.test(t)||QC.test(t)||Pu.test(t),parse:t=>tl.test(t)?tl.parse(t):Pu.test(t)?Pu.parse(t):QC.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?tl.transform(t):Pu.transform(t)},Jwe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function eSe(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(wT))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(Jwe))===null||n===void 0?void 0:n.length)||0)>0}const m4="number",g4="color",tSe="var",nSe="var(",MD="${}",rSe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Fd(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(rSe,l=>(Un.test(l)?(r.color.push(s),i.push(g4),n.push(Un.parse(l))):l.startsWith(nSe)?(r.var.push(s),i.push(tSe),n.push(l)):(r.number.push(s),i.push(m4),n.push(parseFloat(l))),++s,MD)).split(MD);return{values:n,split:a,indexes:r,types:i}}function y4(t){return Fd(t).values}function v4(t){const{split:e,types:n}=Fd(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===m4?s+=Eh(i[o]):a===g4?s+=Un.transform(i[o]):s+=i[o]}return s}}const iSe=t=>typeof t=="number"?0:t;function sSe(t){const e=y4(t);return v4(t)(e.map(iSe))}const oa={test:eSe,parse:y4,createTransformer:v4,getAnimatableNone:sSe},oSe=new Set(["brightness","contrast","saturate","opacity"]);function aSe(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(wT)||[];if(!r)return t;const i=n.replace(r,"");let s=oSe.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const lSe=/\b([a-z-]*)\(.*?\)/gu,JC={...oa,getAnimatableNone:t=>{const e=t.match(lSe);return e?e.map(aSe).join(" "):t}},uSe={...oT,color:Un,backgroundColor:Un,outlineColor:Un,fill:Un,stroke:Un,borderColor:Un,borderTopColor:Un,borderRightColor:Un,borderBottomColor:Un,borderLeftColor:Un,filter:JC,WebkitFilter:JC},CT=t=>uSe[t];function x4(t,e){let n=CT(t);return n!==JC&&(n=oa),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const cSe=new Set(["auto","none","0"]);function fSe(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!cSe.has(s)&&Fd(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=x4(n,i)}const FD=t=>t===cf||t===Ne,LD=(t,e)=>parseFloat(t.split(", ")[e]),BD=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return LD(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?LD(s[1],t):0}},hSe=new Set(["x","y","z"]),dSe=uf.filter(t=>!hSe.has(t));function pSe(t){const e=[];return dSe.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Ac={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:BD(4,13),y:BD(5,14)};Ac.translateX=Ac.x;Ac.translateY=Ac.y;const cl=new Set;let e$=!1,t$=!1;function b4(){if(t$){const t=Array.from(cl).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=pSe(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}t$=!1,e$=!1,cl.forEach(t=>t.complete()),cl.clear()}function w4(){cl.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(t$=!0)})}function mSe(){w4(),b4()}class $T{constructor(e,n,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(cl.add(this),e$||(e$=!0,$t.read(w4),$t.resolveKeyframes(b4))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i==null?void 0:i.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),cl.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,cl.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const S4=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),gSe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function ySe(t){const e=gSe.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function C4(t,e,n=1){const[r,i]=ySe(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return S4(o)?parseFloat(o):o}return sT(i)?C4(i,e,n+1):i}const $4=t=>e=>e.test(t),vSe={test:t=>t==="auto",parse:t=>t},k4=[cf,Ne,bs,To,awe,owe,vSe],jD=t=>k4.find($4(t));class I4 extends $T{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),sT(u))){const c=C4(u,n.current);c!==void 0&&(e[l]=c),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!n4.has(r)||e.length!==2)return;const[i,s]=e,o=jD(i),a=jD(s);if(o!==a)if(FD(o)&&FD(a))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)qwe(e[i])&&r.push(i);r.length&&fSe(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ac[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=Ac[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,u])=>{n.getValue(l).set(u)}),this.resolveNoneKeyframes()}}const zD=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(oa.test(t)||t==="0")&&!t.startsWith("url("));function xSe(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function bSe(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=zD(i,e),a=zD(s,e);return!o||!a?!1:xSe(t)||(n==="spring"||dT(n))&&r}const wSe=t=>t!==null;function gx(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(wSe),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const SSe=40;class T4{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=ws.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>SSe?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&mSe(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=ws.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:u}=this.options;if(!u&&!bSe(e,r,i,s))if(o)this.options.duration=0;else{l&&l(gx(e,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const c=this.initPlayback(e,n);c!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...c},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Pt=(t,e,n)=>t+(e-t)*n;function J1(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function CSe({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=J1(l,a,t+1/3),s=J1(l,a,t),o=J1(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Tv(t,e){return n=>n>0?e:t}const ew=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},$Se=[QC,tl,Pu],kSe=t=>$Se.find(e=>e.test(t));function VD(t){const e=kSe(t);if(!e)return!1;let n=e.parse(t);return e===Pu&&(n=CSe(n)),n}const WD=(t,e)=>{const n=VD(t),r=VD(e);if(!n||!r)return Tv(t,e);const i={...n};return s=>(i.red=ew(n.red,r.red,s),i.green=ew(n.green,r.green,s),i.blue=ew(n.blue,r.blue,s),i.alpha=Pt(n.alpha,r.alpha,s),tl.transform(i))},ISe=(t,e)=>n=>e(t(n)),gp=(...t)=>t.reduce(ISe),n$=new Set(["none","hidden"]);function TSe(t,e){return n$.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function ESe(t,e){return n=>Pt(t,e,n)}function kT(t){return typeof t=="number"?ESe:typeof t=="string"?sT(t)?Tv:Un.test(t)?WD:OSe:Array.isArray(t)?E4:typeof t=="object"?Un.test(t)?WD:NSe:Tv}function E4(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>kT(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function NSe(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=kT(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function ASe(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][i[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[s]=l,i[o]++}return r}const OSe=(t,e)=>{const n=oa.createTransformer(e),r=Fd(t),i=Fd(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?n$.has(t)&&!i.values.length||n$.has(e)&&!r.values.length?TSe(t,e):gp(E4(ASe(r,i),i.values),n):Tv(t,e)};function N4(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Pt(t,e,n):kT(t)(t,e)}const PSe=5;function A4(t,e,n){const r=Math.max(e-PSe,0);return r4(n-t(r),e-r)}const Rt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},tw=.001;function _Se({duration:t=Rt.duration,bounce:e=Rt.bounce,velocity:n=Rt.velocity,mass:r=Rt.mass}){let i,s,o=1-e;o=uo(Rt.minDamping,Rt.maxDamping,o),t=uo(Rt.minDuration,Rt.maxDuration,Js(t)),o<1?(i=u=>{const c=u*o,f=c*t,h=c-n,d=r$(u,o),p=Math.exp(-f);return tw-h/d*p},s=u=>{const f=u*o*t,h=f*n+n,d=Math.pow(o,2)*Math.pow(u,2)*t,p=Math.exp(-f),m=r$(Math.pow(u,2),o);return(-i(u)+tw>0?-1:1)*((h-d)*p)/m}):(i=u=>{const c=Math.exp(-u*t),f=(u-n)*t+1;return-tw+c*f},s=u=>{const c=Math.exp(-u*t),f=(n-u)*(t*t);return c*f});const a=5/t,l=RSe(i,s,a);if(t=Qs(t),isNaN(l))return{stiffness:Rt.stiffness,damping:Rt.damping,duration:t};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:t}}}const DSe=12;function RSe(t,e,n){let r=n;for(let i=1;i<DSe;i++)r=r-t(r)/e(r);return r}function r$(t,e){return t*Math.sqrt(1-e*e)}const MSe=["duration","bounce"],FSe=["stiffness","damping","mass"];function UD(t,e){return e.some(n=>t[n]!==void 0)}function LSe(t){let e={velocity:Rt.velocity,stiffness:Rt.stiffness,damping:Rt.damping,mass:Rt.mass,isResolvedFromDuration:!1,...t};if(!UD(t,FSe)&&UD(t,MSe))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*uo(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Rt.mass,stiffness:i,damping:s}}else{const n=_Se(t);e={...e,...n,mass:Rt.mass},e.isResolvedFromDuration=!0}return e}function O4(t=Rt.visualDuration,e=Rt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:u,mass:c,duration:f,velocity:h,isResolvedFromDuration:d}=LSe({...n,velocity:-Js(n.velocity||0)}),p=h||0,m=u/(2*Math.sqrt(l*c)),g=o-s,y=Js(Math.sqrt(l/c)),v=Math.abs(g)<5;r||(r=v?Rt.restSpeed.granular:Rt.restSpeed.default),i||(i=v?Rt.restDelta.granular:Rt.restDelta.default);let x;if(m<1){const w=r$(y,m);x=S=>{const C=Math.exp(-m*y*S);return o-C*((p+m*y*g)/w*Math.sin(w*S)+g*Math.cos(w*S))}}else if(m===1)x=w=>o-Math.exp(-y*w)*(g+(p+y*g)*w);else{const w=y*Math.sqrt(m*m-1);x=S=>{const C=Math.exp(-m*y*S),$=Math.min(w*S,300);return o-C*((p+m*y*g)*Math.sinh($)+w*g*Math.cosh($))/w}}const b={calculatedDuration:d&&f||null,next:w=>{const S=x(w);if(d)a.done=w>=f;else{let C=0;m<1&&(C=w===0?Qs(p):A4(x,w,S));const $=Math.abs(C)<=r,k=Math.abs(o-S)<=i;a.done=$&&k}return a.value=a.done?o:S,a},toString:()=>{const w=Math.min(XV(b),XC),S=YV(C=>b.next(w*C).value,w,30);return w+"ms "+S}};return b}function GD({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:c}){const f=t[0],h={done:!1,value:f},d=$=>a!==void 0&&$<a||l!==void 0&&$>l,p=$=>a===void 0?l:l===void 0||Math.abs(a-$)<Math.abs(l-$)?a:l;let m=n*e;const g=f+m,y=o===void 0?g:o(g);y!==g&&(m=y-f);const v=$=>-m*Math.exp(-$/r),x=$=>y+v($),b=$=>{const k=v($),I=x($);h.done=Math.abs(k)<=u,h.value=h.done?y:I};let w,S;const C=$=>{d(h.value)&&(w=$,S=O4({keyframes:[h.value,p(h.value)],velocity:A4(x,$,h.value),damping:i,stiffness:s,restDelta:u,restSpeed:c}))};return C(0),{calculatedDuration:null,next:$=>{let k=!1;return!S&&w===void 0&&(k=!0,b($),C($)),w!==void 0&&$>=w?S.next($-w):(!k&&b($),h)}}}const BSe=mp(.42,0,1,1),jSe=mp(0,0,.58,1),P4=mp(.42,0,.58,1),zSe=t=>Array.isArray(t)&&typeof t[0]!="number",HD={linear:zr,easeIn:BSe,easeInOut:P4,easeOut:jSe,circIn:bT,circInOut:h4,circOut:f4,backIn:xT,backInOut:u4,backOut:l4,anticipate:c4},KD=t=>{if(pT(t)){KC(t.length===4);const[e,n,r,i]=t;return mp(e,n,r,i)}else if(typeof t=="string")return KC(HD[t]!==void 0),HD[t];return t};function VSe(t,e,n){const r=[],i=n||N4,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||zr:e;a=gp(l,a)}r.push(a)}return r}function WSe(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(KC(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=VSe(e,r,i),l=a.length,u=c=>{if(o&&c<t[0])return e[0];let f=0;if(l>1)for(;f<t.length-2&&!(c<t[f+1]);f++);const h=Ec(t[f],t[f+1],c);return a[f](h)};return n?c=>u(uo(t[0],t[s-1],c)):u}function USe(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Ec(0,e,r);t.push(Pt(n,1,i))}}function GSe(t){const e=[0];return USe(e,t.length-1),e}function HSe(t,e){return t.map(n=>n*e)}function KSe(t,e){return t.map(()=>e||P4).splice(0,t.length-1)}function Ev({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=zSe(r)?r.map(KD):KD(r),s={done:!1,value:e[0]},o=HSe(n&&n.length===e.length?n:GSe(e),t),a=WSe(o,e,{ease:Array.isArray(i)?i:KSe(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const qSe=t=>{const e=({timestamp:n})=>t(n);return{start:()=>$t.update(e,!0),stop:()=>sa(e),now:()=>Nn.isProcessing?Nn.timestamp:ws.now()}},XSe={decay:GD,inertia:GD,tween:Ev,keyframes:Ev,spring:O4},YSe=t=>t/100;class IT extends T4{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,o=(i==null?void 0:i.KeyframeResolver)||$T,a=(l,u)=>this.onKeyframesResolved(l,u);this.resolver=new o(s,a,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=dT(n)?n:XSe[n]||Ev;let l,u;a!==Ev&&typeof e[0]!="number"&&(l=gp(YSe,N4(e[0],e[1])),e=[0,100]);const c=a({...this.options,keyframes:e});s==="mirror"&&(u=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=XV(c));const{calculatedDuration:f}=c,h=f+i,d=h*(r+1)-i;return{generator:c,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:f,resolvedDuration:h,totalDuration:d}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:$}=this.options;return{done:!0,value:$[$.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:u,totalDuration:c,resolvedDuration:f}=r;if(this.startTime===null)return s.next(0);const{delay:h,repeat:d,repeatType:p,repeatDelay:m,onUpdate:g}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-c/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const y=this.currentTime-h*(this.speed>=0?1:-1),v=this.speed>=0?y<0:y>c;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=c);let x=this.currentTime,b=s;if(d){const $=Math.min(this.currentTime,c)/f;let k=Math.floor($),I=$%1;!I&&$>=1&&(I=1),I===1&&k--,k=Math.min(k,d+1),!!(k%2)&&(p==="reverse"?(I=1-I,m&&(I-=m/f)):p==="mirror"&&(b=o)),x=uo(0,1,I)*f}const w=v?{done:!1,value:l[0]}:b.next(x);a&&(w.value=a(w.value));let{done:S}=w;!v&&u!==null&&(S=this.speed>=0?this.currentTime>=c:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&S);return C&&i!==void 0&&(w.value=gx(l,this.options,i)),g&&g(w.value),C&&this.finish(),w}get duration(){const{resolved:e}=this;return e?Js(e.calculatedDuration):0}get time(){return Js(this.currentTime)}set time(e){e=Qs(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Js(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=qSe,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const ZSe=new Set(["opacity","clipPath","filter","transform"]);function QSe(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const u={[e]:n};l&&(u.offset=l);const c=QV(a,i);return Array.isArray(c)&&(u.easing=c),t.animate(u,{delay:r,duration:i,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const JSe=QI(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Nv=10,eCe=2e4;function tCe(t){return dT(t.type)||t.type==="spring"||!ZV(t.ease)}function nCe(t,e){const n=new IT({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<eCe;)r=n.sample(s),i.push(r.value),s+=Nv;return{times:void 0,keyframes:i,duration:s-Nv,ease:"linear"}}const _4={anticipate:c4,backInOut:u4,circInOut:h4};function rCe(t){return t in _4}class qD extends T4{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new I4(s,(o,a)=>this.onKeyframesResolved(o,a),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:s,type:o,motionValue:a,name:l,startTime:u}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof s=="string"&&Iv()&&rCe(s)&&(s=_4[s]),tCe(this.options)){const{onComplete:f,onUpdate:h,motionValue:d,element:p,...m}=this.options,g=nCe(e,m);e=g.keyframes,e.length===1&&(e[1]=e[0]),r=g.duration,i=g.times,s=g.ease,o="keyframes"}const c=QSe(a.owner.current,l,e,{...this.options,duration:r,times:i,ease:s});return c.startTime=u??this.calcStartTime(),this.pendingTimeline?(OD(c,this.pendingTimeline),this.pendingTimeline=void 0):c.onfinish=()=>{const{onComplete:f}=this.options;a.set(gx(e,this.options,n)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:c,duration:r,times:i,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Js(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Js(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Qs(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return zr;const{animation:r}=n;OD(r,e)}return zr}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:c,onComplete:f,element:h,...d}=this.options,p=new IT({...d,keyframes:r,duration:i,type:s,ease:o,times:a,isGenerator:!0}),m=Qs(this.time);u.setWithVelocity(p.sample(m-Nv).value,p.sample(m).value,Nv)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:o,type:a}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=n.owner.getProps();return JSe()&&r&&ZSe.has(r)&&!l&&!u&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}const iCe={type:"spring",stiffness:500,damping:25,restSpeed:10},sCe=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),oCe={type:"keyframes",duration:.8},aCe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},lCe=(t,{keyframes:e})=>e.length>2?oCe:Gl.has(t)?t.startsWith("scale")?sCe(e[1]):iCe:aCe;function uCe({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const TT=(t,e,n,r={},i,s)=>o=>{const a=hT(r,t)||{},l=a.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Qs(l);let c={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-u,onUpdate:h=>{e.set(h),a.onUpdate&&a.onUpdate(h)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};uCe(a)||(c={...c,...lCe(t,c)}),c.duration&&(c.duration=Qs(c.duration)),c.repeatDelay&&(c.repeatDelay=Qs(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let f=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(c.duration=0,c.delay===0&&(f=!0)),f&&!s&&e.get()!==void 0){const h=gx(c.keyframes,a);if(h!==void 0)return $t.update(()=>{c.onUpdate(h),c.onComplete()}),new Nwe([])}return!s&&qD.supports(c)?new qD(c):new IT(c)};function cCe({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function D4(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const u=[],c=i&&t.animationState&&t.animationState.getState()[i];for(const f in l){const h=t.getValue(f,(s=t.latestValues[f])!==null&&s!==void 0?s:null),d=l[f];if(d===void 0||c&&cCe(c,f))continue;const p={delay:n,...hT(o||{},f)};let m=!1;if(window.MotionHandoffAnimation){const y=i4(t);if(y){const v=window.MotionHandoffAnimation(y,f,$t);v!==null&&(p.startTime=v,m=!0)}}ZC(t,f),h.start(TT(f,h,d,t.shouldReduceMotion&&n4.has(f)?{type:!1}:p,t,m));const g=h.animation;g&&u.push(g)}return a&&Promise.all(u).then(()=>{$t.update(()=>{a&&Wwe(t,a)})}),u}function i$(t,e,n={}){var r;const i=mx(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(D4(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:f,staggerDirection:h}=s;return fCe(t,e,c+u,f,h,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,c]=l==="beforeChildren"?[o,a]:[a,o];return u().then(()=>c())}else return Promise.all([o(),a(n.delay)])}function fCe(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(t.variantChildren).sort(hCe).forEach((u,c)=>{u.notify("AnimationStart",e),o.push(i$(u,e,{...s,delay:n+l(c)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function hCe(t,e){return t.sortNodePosition(e)}function dCe(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>i$(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=i$(t,e,n);else{const i=typeof e=="function"?mx(t,e,n.custom):e;r=Promise.all(D4(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const pCe=eT.length;function R4(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?R4(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<pCe;n++){const r=eT[n],i=t.props[r];(Dd(i)||i===!1)&&(e[r]=i)}return e}const mCe=[...JI].reverse(),gCe=JI.length;function yCe(t){return e=>Promise.all(e.map(({animation:n,options:r})=>dCe(t,n,r)))}function vCe(t){let e=yCe(t),n=XD(),r=!0;const i=l=>(u,c)=>{var f;const h=mx(t,c,l==="exit"?(f=t.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(h){const{transition:d,transitionEnd:p,...m}=h;u={...u,...m,...p}}return u};function s(l){e=l(t)}function o(l){const{props:u}=t,c=R4(t.parent)||{},f=[],h=new Set;let d={},p=1/0;for(let g=0;g<gCe;g++){const y=mCe[g],v=n[y],x=u[y]!==void 0?u[y]:c[y],b=Dd(x),w=y===l?v.isActive:null;w===!1&&(p=g);let S=x===c[y]&&x!==u[y]&&b;if(S&&r&&t.manuallyAnimateOnMount&&(S=!1),v.protectedKeys={...d},!v.isActive&&w===null||!x&&!v.prevProp||dx(x)||typeof x=="boolean")continue;const C=xCe(v.prevProp,x);let $=C||y===l&&v.isActive&&!S&&b||g>p&&b,k=!1;const I=Array.isArray(x)?x:[x];let T=I.reduce(i(y),{});w===!1&&(T={});const{prevResolvedValues:A={}}=v,_={...A,...T},D=F=>{$=!0,h.has(F)&&(k=!0,h.delete(F)),v.needsAnimating[F]=!0;const O=t.getValue(F);O&&(O.liveStyle=!1)};for(const F in _){const O=T[F],M=A[F];if(d.hasOwnProperty(F))continue;let V=!1;qC(O)&&qC(M)?V=!qV(O,M):V=O!==M,V?O!=null?D(F):h.add(F):O!==void 0&&h.has(F)?D(F):v.protectedKeys[F]=!0}v.prevProp=x,v.prevResolvedValues=T,v.isActive&&(d={...d,...T}),r&&t.blockInitialAnimation&&($=!1),$&&(!(S&&C)||k)&&f.push(...I.map(F=>({animation:F,options:{type:y}})))}if(h.size){const g={};h.forEach(y=>{const v=t.getBaseTarget(y),x=t.getValue(y);x&&(x.liveStyle=!0),g[y]=v??null}),f.push({animation:g})}let m=!!f.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(m=!1),r=!1,m?e(f):Promise.resolve()}function a(l,u){var c;if(n[l].isActive===u)return Promise.resolve();(c=t.variantChildren)===null||c===void 0||c.forEach(h=>{var d;return(d=h.animationState)===null||d===void 0?void 0:d.setActive(l,u)}),n[l].isActive=u;const f=o(l);for(const h in n)n[h].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=XD(),r=!0}}}function xCe(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!qV(e,t):!1}function Da(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function XD(){return{animate:Da(!0),whileInView:Da(),whileHover:Da(),whileTap:Da(),whileDrag:Da(),whileFocus:Da(),exit:Da()}}class Sa{constructor(e){this.isMounted=!1,this.node=e}update(){}}class bCe extends Sa{constructor(e){super(e),e.animationState||(e.animationState=vCe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();dx(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let wCe=0;class SCe extends Sa{constructor(){super(...arguments),this.id=wCe++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const CCe={animation:{Feature:bCe},exit:{Feature:SCe}};function Ld(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function yp(t){return{point:{x:t.pageX,y:t.pageY}}}const $Ce=t=>e=>mT(e)&&t(e,yp(e));function Nh(t,e,n,r){return Ld(t,e,$Ce(n),r)}const YD=(t,e)=>Math.abs(t-e);function kCe(t,e){const n=YD(t.x,e.x),r=YD(t.y,e.y);return Math.sqrt(n**2+r**2)}class M4{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=rw(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,d=kCe(f.offset,{x:0,y:0})>=3;if(!h&&!d)return;const{point:p}=f,{timestamp:m}=Nn;this.history.push({...p,timestamp:m});const{onStart:g,onMove:y}=this.handlers;h||(g&&g(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,f)},this.handlePointerMove=(f,h)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=nw(h,this.transformPagePoint),$t.update(this.updatePoint,!0)},this.handlePointerUp=(f,h)=>{this.end();const{onEnd:d,onSessionEnd:p,resumeAnimation:m}=this.handlers;if(this.dragSnapToOrigin&&m&&m(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=rw(f.type==="pointercancel"?this.lastMoveEventInfo:nw(h,this.transformPagePoint),this.history);this.startEvent&&d&&d(f,g),p&&p(f,g)},!mT(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=yp(e),a=nw(o,this.transformPagePoint),{point:l}=a,{timestamp:u}=Nn;this.history=[{...l,timestamp:u}];const{onSessionStart:c}=n;c&&c(e,rw(a,this.history)),this.removeListeners=gp(Nh(this.contextWindow,"pointermove",this.handlePointerMove),Nh(this.contextWindow,"pointerup",this.handlePointerUp),Nh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),sa(this.updatePoint)}}function nw(t,e){return e?{point:e(t.point)}:t}function ZD(t,e){return{x:t.x-e.x,y:t.y-e.y}}function rw({point:t},e){return{point:t,delta:ZD(t,F4(e)),offset:ZD(t,ICe(e)),velocity:TCe(e,.1)}}function ICe(t){return t[0]}function F4(t){return t[t.length-1]}function TCe(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=F4(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Qs(e)));)n--;if(!r)return{x:0,y:0};const s=Js(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const L4=1e-4,ECe=1-L4,NCe=1+L4,B4=.01,ACe=0-B4,OCe=0+B4;function Gr(t){return t.max-t.min}function PCe(t,e,n){return Math.abs(t-e)<=n}function QD(t,e,n,r=.5){t.origin=r,t.originPoint=Pt(e.min,e.max,t.origin),t.scale=Gr(n)/Gr(e),t.translate=Pt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=ECe&&t.scale<=NCe||isNaN(t.scale))&&(t.scale=1),(t.translate>=ACe&&t.translate<=OCe||isNaN(t.translate))&&(t.translate=0)}function Ah(t,e,n,r){QD(t.x,e.x,n.x,r?r.originX:void 0),QD(t.y,e.y,n.y,r?r.originY:void 0)}function JD(t,e,n){t.min=n.min+e.min,t.max=t.min+Gr(e)}function _Ce(t,e,n){JD(t.x,e.x,n.x),JD(t.y,e.y,n.y)}function eR(t,e,n){t.min=e.min-n.min,t.max=t.min+Gr(e)}function Oh(t,e,n){eR(t.x,e.x,n.x),eR(t.y,e.y,n.y)}function DCe(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Pt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Pt(n,t,r.max):Math.min(t,n)),t}function tR(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function RCe(t,{top:e,left:n,bottom:r,right:i}){return{x:tR(t.x,n,i),y:tR(t.y,e,r)}}function nR(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function MCe(t,e){return{x:nR(t.x,e.x),y:nR(t.y,e.y)}}function FCe(t,e){let n=.5;const r=Gr(t),i=Gr(e);return i>r?n=Ec(e.min,e.max-r,t.min):r>i&&(n=Ec(t.min,t.max-i,e.min)),uo(0,1,n)}function LCe(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const s$=.35;function BCe(t=s$){return t===!1?t=0:t===!0&&(t=s$),{x:rR(t,"left","right"),y:rR(t,"top","bottom")}}function rR(t,e,n){return{min:iR(t,e),max:iR(t,n)}}function iR(t,e){return typeof t=="number"?t:t[e]||0}const sR=()=>({translate:0,scale:1,origin:0,originPoint:0}),_u=()=>({x:sR(),y:sR()}),oR=()=>({min:0,max:0}),Ht=()=>({x:oR(),y:oR()});function ii(t){return[t("x"),t("y")]}function j4({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function jCe({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function zCe(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function iw(t){return t===void 0||t===1}function o$({scale:t,scaleX:e,scaleY:n}){return!iw(t)||!iw(e)||!iw(n)}function Va(t){return o$(t)||z4(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function z4(t){return aR(t.x)||aR(t.y)}function aR(t){return t&&t!=="0%"}function Av(t,e,n){const r=t-n,i=e*r;return n+i}function lR(t,e,n,r,i){return i!==void 0&&(t=Av(t,i,r)),Av(t,n,r)+e}function a$(t,e=0,n=1,r,i){t.min=lR(t.min,e,n,r,i),t.max=lR(t.max,e,n,r,i)}function V4(t,{x:e,y:n}){a$(t.x,e.translate,e.scale,e.originPoint),a$(t.y,n.translate,n.scale,n.originPoint)}const uR=.999999999999,cR=1.0000000000001;function VCe(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Ru(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,V4(t,o)),r&&Va(s.latestValues)&&Ru(t,s.latestValues))}e.x<cR&&e.x>uR&&(e.x=1),e.y<cR&&e.y>uR&&(e.y=1)}function Du(t,e){t.min=t.min+e,t.max=t.max+e}function fR(t,e,n,r,i=.5){const s=Pt(t.min,t.max,i);a$(t,e,n,s,r)}function Ru(t,e){fR(t.x,e.x,e.scaleX,e.scale,e.originX),fR(t.y,e.y,e.scaleY,e.scale,e.originY)}function W4(t,e){return j4(zCe(t.getBoundingClientRect(),e))}function WCe(t,e,n){const r=W4(t,n),{scroll:i}=e;return i&&(Du(r.x,i.offset.x),Du(r.y,i.offset.y)),r}const U4=({current:t})=>t?t.ownerDocument.defaultView:null,UCe=new WeakMap;class GCe{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ht(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=c=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(yp(c).point)},s=(c,f)=>{const{drag:h,dragPropagation:d,onDragStart:p}=this.getProps();if(h&&!d&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Lwe(h),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ii(g=>{let y=this.getAxisMotionValue(g).get()||0;if(bs.test(y)){const{projection:v}=this.visualElement;if(v&&v.layout){const x=v.layout.layoutBox[g];x&&(y=Gr(x)*(parseFloat(y)/100))}}this.originPoint[g]=y}),p&&$t.postRender(()=>p(c,f)),ZC(this.visualElement,"transform");const{animationState:m}=this.visualElement;m&&m.setActive("whileDrag",!0)},o=(c,f)=>{const{dragPropagation:h,dragDirectionLock:d,onDirectionLock:p,onDrag:m}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:g}=f;if(d&&this.currentDirection===null){this.currentDirection=HCe(g),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",f.point,g),this.updateAxis("y",f.point,g),this.visualElement.render(),m&&m(c,f)},a=(c,f)=>this.stop(c,f),l=()=>ii(c=>{var f;return this.getAnimationState(c)==="paused"&&((f=this.getAxisMotionValue(c).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new M4(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:U4(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&$t.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!yg(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=DCe(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&Ou(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=RCe(i.layoutBox,n):this.constraints=!1,this.elastic=BCe(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&ii(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=LCe(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ou(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=WCe(r,i.root,this.visualElement.getTransformPagePoint());let o=MCe(i.layout.layoutBox,s);if(n){const a=n(jCe(o));this.hasMutatedConstraints=!!a,a&&(o=j4(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=ii(c=>{if(!yg(c,n,this.currentDirection))return;let f=l&&l[c]||{};o&&(f={min:0,max:0});const h=i?200:1e6,d=i?40:1e7,p={type:"inertia",velocity:r?e[c]:0,bounceStiffness:h,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(c,p)});return Promise.all(u).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return ZC(this.visualElement,e),r.start(TT(e,r,0,n,this.visualElement,!1))}stopAnimation(){ii(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ii(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){ii(n=>{const{drag:r}=this.getProps();if(!yg(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-Pt(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ou(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ii(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=FCe({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ii(o=>{if(!yg(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(Pt(l,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;UCe.set(this.visualElement,this);const e=this.visualElement.current,n=Nh(e,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Ou(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),$t.read(r);const o=Ld(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(ii(c=>{const f=this.getAxisMotionValue(c);f&&(this.originPoint[c]+=l[c].translate,f.set(f.get()+l[c].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=s$,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function yg(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function HCe(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class KCe extends Sa{constructor(e){super(e),this.removeGroupControls=zr,this.removeListeners=zr,this.controls=new GCe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||zr}unmount(){this.removeGroupControls(),this.removeListeners()}}const hR=t=>(e,n)=>{t&&$t.postRender(()=>t(e,n))};class qCe extends Sa{constructor(){super(...arguments),this.removePointerDownListener=zr}onPointerDown(e){this.session=new M4(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:U4(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:hR(e),onStart:hR(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&$t.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=Nh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Gg={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function dR(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const qf={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ne.test(t))t=parseFloat(t);else return t;const n=dR(t,e.target.x),r=dR(t,e.target.y);return`${n}% ${r}%`}},XCe={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=oa.parse(t);if(i.length>5)return r;const s=oa.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const u=Pt(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),s(i)}};class YCe extends j.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;ywe(ZCe),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Gg.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||$t.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),nT.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function G4(t){const[e,n]=P1e(),r=j.useContext(EV);return N.jsx(YCe,{...t,layoutGroup:r,switchLayoutGroup:j.useContext(RV),isPresent:e,safeToRemove:n})}const ZCe={borderRadius:{...qf,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:qf,borderTopRightRadius:qf,borderBottomLeftRadius:qf,borderBottomRightRadius:qf,boxShadow:XCe};function QCe(t,e,n){const r=Qn(t)?t:Md(t);return r.start(TT("",r,e,n)),r.animation}function JCe(t){return t instanceof SVGElement&&t.tagName!=="svg"}const e$e=(t,e)=>t.depth-e.depth;class t$e{constructor(){this.children=[],this.isDirty=!1}add(e){gT(this.children,e),this.isDirty=!0}remove(e){yT(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(e$e),this.isDirty=!1,this.children.forEach(e)}}function n$e(t,e){const n=ws.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(sa(r),t(s-e))};return $t.read(r,!0),()=>sa(r)}const H4=["TopLeft","TopRight","BottomLeft","BottomRight"],r$e=H4.length,pR=t=>typeof t=="string"?parseFloat(t):t,mR=t=>typeof t=="number"||Ne.test(t);function i$e(t,e,n,r,i,s){i?(t.opacity=Pt(0,n.opacity!==void 0?n.opacity:1,s$e(r)),t.opacityExit=Pt(e.opacity!==void 0?e.opacity:1,0,o$e(r))):s&&(t.opacity=Pt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<r$e;o++){const a=`border${H4[o]}Radius`;let l=gR(e,a),u=gR(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||mR(l)===mR(u)?(t[a]=Math.max(Pt(pR(l),pR(u),r),0),(bs.test(u)||bs.test(l))&&(t[a]+="%")):t[a]=u}(e.rotate||n.rotate)&&(t.rotate=Pt(e.rotate||0,n.rotate||0,r))}function gR(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const s$e=K4(0,.5,f4),o$e=K4(.5,.95,zr);function K4(t,e,n){return r=>r<t?0:r>e?1:n(Ec(t,e,r))}function yR(t,e){t.min=e.min,t.max=e.max}function ti(t,e){yR(t.x,e.x),yR(t.y,e.y)}function vR(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function xR(t,e,n,r,i){return t-=e,t=Av(t,1/n,r),i!==void 0&&(t=Av(t,1/i,r)),t}function a$e(t,e=0,n=1,r=.5,i,s=t,o=t){if(bs.test(e)&&(e=parseFloat(e),e=Pt(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Pt(s.min,s.max,r);t===s&&(a-=e),t.min=xR(t.min,e,n,a,i),t.max=xR(t.max,e,n,a,i)}function bR(t,e,[n,r,i],s,o){a$e(t,e[n],e[r],e[i],e.scale,s,o)}const l$e=["x","scaleX","originX"],u$e=["y","scaleY","originY"];function wR(t,e,n,r){bR(t.x,e,l$e,n?n.x:void 0,r?r.x:void 0),bR(t.y,e,u$e,n?n.y:void 0,r?r.y:void 0)}function SR(t){return t.translate===0&&t.scale===1}function q4(t){return SR(t.x)&&SR(t.y)}function CR(t,e){return t.min===e.min&&t.max===e.max}function c$e(t,e){return CR(t.x,e.x)&&CR(t.y,e.y)}function $R(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function X4(t,e){return $R(t.x,e.x)&&$R(t.y,e.y)}function kR(t){return Gr(t.x)/Gr(t.y)}function IR(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class f$e{constructor(){this.members=[]}add(e){gT(this.members,e),e.scheduleRender()}remove(e){if(yT(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function h$e(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:c,rotateX:f,rotateY:h,skewX:d,skewY:p}=n;u&&(r=`perspective(${u}px) ${r}`),c&&(r+=`rotate(${c}deg) `),f&&(r+=`rotateX(${f}deg) `),h&&(r+=`rotateY(${h}deg) `),d&&(r+=`skewX(${d}deg) `),p&&(r+=`skewY(${p}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const Wa={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},ah=typeof window<"u"&&window.MotionDebug!==void 0,sw=["","X","Y","Z"],d$e={visibility:"hidden"},TR=1e3;let p$e=0;function ow(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function Y4(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=i4(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",$t,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&Y4(r)}function Z4({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=p$e++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,ah&&(Wa.totalNodes=Wa.resolvedTargetDeltas=Wa.recalculatedProjection=0),this.nodes.forEach(y$e),this.nodes.forEach(S$e),this.nodes.forEach(C$e),this.nodes.forEach(v$e),ah&&window.MotionDebug.record(Wa)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new t$e)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new vT),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=JCe(o),this.instance=o;const{layoutId:l,layout:u,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||l)&&(this.isLayoutDirty=!0),t){let f;const h=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=n$e(h,250),Gg.hasAnimatedSinceResize&&(Gg.hasAnimatedSinceResize=!1,this.nodes.forEach(NR))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&c&&(l||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h,hasRelativeTargetChanged:d,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||c.getDefaultTransition()||E$e,{onLayoutAnimationStart:g,onLayoutAnimationComplete:y}=c.getProps(),v=!this.targetLayout||!X4(this.targetLayout,p)||d,x=!h&&d;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||x||h&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,x);const b={...hT(m,"layout"),onPlay:g,onComplete:y};(c.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b)}else h||NR(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,sa(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach($$e),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Y4(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const f=this.path[c];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(ER);return}this.isUpdating||this.nodes.forEach(b$e),this.isUpdating=!1,this.nodes.forEach(w$e),this.nodes.forEach(m$e),this.nodes.forEach(g$e),this.clearAllSnapshots();const a=ws.now();Nn.delta=uo(0,1e3/60,a-Nn.timestamp),Nn.timestamp=a,Nn.isProcessing=!0,Y1.update.process(Nn),Y1.preRender.process(Nn),Y1.render.process(Nn),Nn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,nT.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(x$e),this.sharedNodes.forEach(k$e)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,$t.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){$t.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ht(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!q4(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;o&&(a||Va(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),N$e(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return Ht();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(A$e))){const{scroll:c}=this.root;c&&(Du(l.x,c.offset.x),Du(l.y,c.offset.y))}return l}removeElementScroll(o){var a;const l=Ht();if(ti(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:f,options:h}=c;c!==this.root&&f&&h.layoutScroll&&(f.wasRoot&&ti(l,o),Du(l.x,f.offset.x),Du(l.y,f.offset.y))}return l}applyTransform(o,a=!1){const l=Ht();ti(l,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Ru(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Va(c.latestValues)&&Ru(l,c.latestValues)}return Va(this.latestValues)&&Ru(l,this.latestValues),l}removeTransform(o){const a=Ht();ti(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Va(u.latestValues))continue;o$(u.latestValues)&&u.updateSnapshot();const c=Ht(),f=u.measurePageBox();ti(c,f),wR(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return Va(this.latestValues)&&wR(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Nn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:h}=this.options;if(!(!this.layout||!(f||h))){if(this.resolvedRelativeTargetAt=Nn.timestamp,!this.targetDelta&&!this.relativeTarget){const d=this.getClosestProjectingParent();d&&d.layout&&this.animationProgress!==1?(this.relativeParent=d,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ht(),this.relativeTargetOrigin=Ht(),Oh(this.relativeTargetOrigin,this.layout.layoutBox,d.layout.layoutBox),ti(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ht(),this.targetWithTransforms=Ht()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),_Ce(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ti(this.target,this.layout.layoutBox),V4(this.target,this.targetDelta)):ti(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const d=this.getClosestProjectingParent();d&&!!d.resumingFrom==!!this.resumingFrom&&!d.options.layoutScroll&&d.target&&this.animationProgress!==1?(this.relativeParent=d,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ht(),this.relativeTargetOrigin=Ht(),Oh(this.relativeTargetOrigin,this.target,d.target),ti(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ah&&Wa.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||o$(this.parent.latestValues)||z4(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Nn.timestamp&&(u=!1),u)return;const{layout:c,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||f))return;ti(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,d=this.treeScale.y;VCe(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Ht());const{target:p}=a;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(vR(this.prevProjectionDelta.x,this.projectionDelta.x),vR(this.prevProjectionDelta.y,this.projectionDelta.y)),Ah(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==d||!IR(this.projectionDelta.x,this.prevProjectionDelta.x)||!IR(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),ah&&Wa.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=_u(),this.projectionDelta=_u(),this.projectionDeltaWithTransform=_u()}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},f=_u();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const h=Ht(),d=l?l.source:void 0,p=this.layout?this.layout.source:void 0,m=d!==p,g=this.getStack(),y=!g||g.members.length<=1,v=!!(m&&!y&&this.options.crossfade===!0&&!this.path.some(T$e));this.animationProgress=0;let x;this.mixTargetDelta=b=>{const w=b/1e3;AR(f.x,o.x,w),AR(f.y,o.y,w),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Oh(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),I$e(this.relativeTarget,this.relativeTargetOrigin,h,w),x&&c$e(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=Ht()),ti(x,this.relativeTarget)),m&&(this.animationValues=c,i$e(c,u,this.latestValues,w,v,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=w},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(sa(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=$t.update(()=>{Gg.hasAnimatedSinceResize=!0,this.currentAnimation=QCe(0,TR,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(TR),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:c}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&Q4(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Ht();const f=Gr(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const h=Gr(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+h}ti(a,l),Ru(a,c),Ah(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new f$e),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&ow("z",o,u,this.animationValues);for(let c=0;c<sw.length;c++)ow(`rotate${sw[c]}`,o,u,this.animationValues),ow(`skew${sw[c]}`,o,u,this.animationValues);o.render();for(const c in u)o.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return d$e;const u={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Wg(o==null?void 0:o.pointerEvents)||"",u.transform=c?c(this.latestValues,""):"none",u;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const m={};return this.options.layoutId&&(m.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,m.pointerEvents=Wg(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Va(this.latestValues)&&(m.transform=c?c({},""):"none",this.hasProjected=!1),m}const h=f.animationValues||f.latestValues;this.applyTransformsToTarget(),u.transform=h$e(this.projectionDeltaWithTransform,this.treeScale,h),c&&(u.transform=c(h,u.transform));const{x:d,y:p}=this.projectionDelta;u.transformOrigin=`${d.origin*100}% ${p.origin*100}% 0`,f.animationValues?u.opacity=f===this?(l=(a=h.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:u.opacity=f===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const m in kv){if(h[m]===void 0)continue;const{correct:g,applyTo:y}=kv[m],v=u.transform==="none"?h[m]:g(h[m],f);if(y){const x=y.length;for(let b=0;b<x;b++)u[y[b]]=v}else u[m]=v}return this.options.layoutId&&(u.pointerEvents=f===this?Wg(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(ER),this.root.sharedNodes.clear()}}}function m$e(t){t.updateLayout()}function g$e(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?ii(f=>{const h=o?n.measuredBox[f]:n.layoutBox[f],d=Gr(h);h.min=r[f].min,h.max=h.min+d}):Q4(s,n.layoutBox,r)&&ii(f=>{const h=o?n.measuredBox[f]:n.layoutBox[f],d=Gr(r[f]);h.max=h.min+d,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+d)});const a=_u();Ah(a,r,n.layoutBox);const l=_u();o?Ah(l,t.applyTransform(i,!0),n.measuredBox):Ah(l,r,n.layoutBox);const u=!q4(a);let c=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:d}=f;if(h&&d){const p=Ht();Oh(p,n.layoutBox,h.layoutBox);const m=Ht();Oh(m,r,d.layoutBox),X4(p,m)||(c=!0),f.options.layoutRoot&&(t.relativeTarget=m,t.relativeTargetOrigin=p,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:c})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function y$e(t){ah&&Wa.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function v$e(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function x$e(t){t.clearSnapshot()}function ER(t){t.clearMeasurements()}function b$e(t){t.isLayoutDirty=!1}function w$e(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function NR(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function S$e(t){t.resolveTargetDelta()}function C$e(t){t.calcProjection()}function $$e(t){t.resetSkewAndRotation()}function k$e(t){t.removeLeadSnapshot()}function AR(t,e,n){t.translate=Pt(e.translate,0,n),t.scale=Pt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function OR(t,e,n,r){t.min=Pt(e.min,n.min,r),t.max=Pt(e.max,n.max,r)}function I$e(t,e,n,r){OR(t.x,e.x,n.x,r),OR(t.y,e.y,n.y,r)}function T$e(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const E$e={duration:.45,ease:[.4,0,.1,1]},PR=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),_R=PR("applewebkit/")&&!PR("chrome/")?Math.round:zr;function DR(t){t.min=_R(t.min),t.max=_R(t.max)}function N$e(t){DR(t.x),DR(t.y)}function Q4(t,e,n){return t==="position"||t==="preserve-aspect"&&!PCe(kR(e),kR(n),.2)}function A$e(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const O$e=Z4({attachResizeListener:(t,e)=>Ld(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),aw={current:void 0},J4=Z4({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!aw.current){const t=new O$e({});t.mount(window),t.setOptions({layoutScroll:!0}),aw.current=t}return aw.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),P$e={pan:{Feature:qCe},drag:{Feature:KCe,ProjectionNode:J4,MeasureLayout:G4}};function RR(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&$t.postRender(()=>s(e,yp(e)))}class _$e extends Sa{mount(){const{current:e}=this.node;e&&(this.unmount=_we(e,n=>(RR(this.node,n,"Start"),r=>RR(this.node,r,"End"))))}unmount(){}}class D$e extends Sa{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=gp(Ld(this.node.current,"focus",()=>this.onFocus()),Ld(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function MR(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&$t.postRender(()=>s(e,yp(e)))}class R$e extends Sa{mount(){const{current:e}=this.node;e&&(this.unmount=Fwe(e,n=>(MR(this.node,n,"Start"),(r,{success:i})=>MR(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const l$=new WeakMap,lw=new WeakMap,M$e=t=>{const e=l$.get(t.target);e&&e(t)},F$e=t=>{t.forEach(M$e)};function L$e({root:t,...e}){const n=t||document;lw.has(n)||lw.set(n,{});const r=lw.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(F$e,{root:t,...e})),r[i]}function B$e(t,e,n){const r=L$e(e);return l$.set(t,n),r.observe(t),()=>{l$.delete(t),r.unobserve(t)}}const j$e={some:0,all:1};class z$e extends Sa{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:j$e[i]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:f}=this.node.getProps(),h=u?c:f;h&&h(l)};return B$e(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(V$e(e,n))&&this.startObserver()}unmount(){}}function V$e({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const W$e={inView:{Feature:z$e},tap:{Feature:R$e},focus:{Feature:D$e},hover:{Feature:_$e}},U$e={layout:{ProjectionNode:J4,MeasureLayout:G4}},u$={current:null},eW={current:!1};function G$e(){if(eW.current=!0,!!ZI)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>u$.current=t.matches;t.addListener(e),e()}else u$.current=!1}const H$e=[...k4,Un,oa],K$e=t=>H$e.find($4(t)),FR=new WeakMap;function q$e(t,e,n){for(const r in e){const i=e[r],s=n[r];if(Qn(i))t.addValue(r,i);else if(Qn(s))t.addValue(r,Md(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,Md(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const LR=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class X$e{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=$T,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const d=ws.now();this.renderScheduledAt<d&&(this.renderScheduledAt=d,$t.render(this.render,!1,!0))};const{latestValues:l,renderState:u,onUpdate:c}=o;this.onUpdate=c,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=px(n),this.isVariantNode=_V(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const d in h){const p=h[d];l[d]!==void 0&&Qn(p)&&p.set(l[d],!1)}}mount(e){this.current=e,FR.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),eW.current||G$e(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:u$.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){FR.delete(this.current),this.projection&&this.projection.unmount(),sa(this.notifyUpdate),sa(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Gl.has(e),i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&$t.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Nc){const n=Nc[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ht()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<LR.length;r++){const i=LR[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=q$e(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Md(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(S4(i)||d4(i))?i=parseFloat(i):!K$e(i)&&oa.test(n)&&(i=x4(e,n)),this.setBaseTarget(e,Qn(i)?i.get():i)),Qn(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=iT(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Qn(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new vT),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class tW extends X$e{constructor(){super(...arguments),this.KeyframeResolver=I4}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Qn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Y$e(t){return window.getComputedStyle(t)}class Z$e extends tW{constructor(){super(...arguments),this.type="html",this.renderInstance=VV}readValueFromInstance(e,n){if(Gl.has(n)){const r=CT(n);return r&&r.default||0}else{const r=Y$e(e),i=(BV(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return W4(e,n)}build(e,n,r){aT(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return fT(e,n,r)}}class Q$e extends tW{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ht}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Gl.has(n)){const r=CT(n);return r&&r.default||0}return n=WV.has(n)?n:tT(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return HV(e,n,r)}build(e,n,r){lT(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){UV(e,n,r,i)}mount(e){this.isSVGTag=cT(e.tagName),super.mount(e)}}const J$e=(t,e)=>rT(t)?new Q$e(e):new Z$e(e,{allowProjection:t!==j.Fragment}),eke=Iwe({...CCe,...W$e,...P$e,...U$e},J$e),Xf=z1e(eke);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tke=1e-7,nke=1e-4;class nW{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class ET{refCount(e){return yr("refCount")}incRef(e){return yr("incRef")}timerAvailable(){return!0}time(e){return yr("time")}read(e){return yr("read")}readSync(e){return yr("readSync")}readToGPU(e,n){return yr("readToGPU")}numDataIds(){return yr("numDataIds")}disposeData(e,n){return yr("disposeData")}write(e,n,r){return yr("write")}move(e,n,r,i,s){return yr("move")}createTensorFromGPUData(e,n,r){return yr("createTensorFromGPUData")}memory(){return yr("memory")}floatPrecision(){return yr("floatPrecision")}epsilon(){return this.floatPrecision()===32?tke:nke}dispose(){return yr("dispose")}}function yr(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rke(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,du(t,e,n)}function $l(t,e,n){return Math.max(t,Math.min(e,n))}function NT(t){return t%2===0?t:t+1}function du(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function ike(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function E(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function AT(t,e,n=""){E(et(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function rW(t){E(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function J(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function et(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Oc(t){return t%1===0}function c$(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function Ku(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function BR(t,e=i=>0,n,r){return new Promise((i,s)=>{let o=0;const a=()=>{if(t()){i();return}o++;const l=e(o);if(n!=null&&o>=n){s();return}r!=null?r(a,l):setTimeout(a,l)};a()})}function iW(t,e){let n=1,r=-1;for(let s=0;s<t.length;++s)if(t[s]>=0)n*=t[s];else if(t[s]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${s}`);r=s}else if(t[s]<0)throw Error(`Shapes can not be < 0. Found ${t[s]} at dim ${s}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const i=t.slice();return i[r]=e/n,i}function Me(t,e){const n=e.length;return t=t==null?e.map((r,i)=>i):[].concat(t),E(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),E(t.every(r=>Oc(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function Ca(t,e){const n=[],r=[],i=e!=null&&Array.isArray(e)&&e.length===0,s=e==null||i?null:Me(e,t).sort();let o=0;for(let a=0;a<t.length;++a){if(s!=null){if(s[o]===a&&t[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${t[a]}' is not 1`);(s[o]==null||s[o]>a)&&t[a]===1&&(n.push(t[a]),r.push(a)),s[o]<=a&&o++}t[a]!==1&&(n.push(t[a]),r.push(a))}return{newShape:n,keptDims:r}}function _n(t,e){return Lt(t,e)}function Lt(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function ske(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function oke(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function sW(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function Ov(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function ake(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function vp(t){return typeof t=="string"||t instanceof String}function lke(t){return typeof t=="boolean"}function f$(t){return typeof t=="number"}function ff(t){return Array.isArray(t)?ff(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":f$(t)?"float32":vp(t)?"string":lke(t)?"bool":"float32"}function h$(t){return!!(t&&t.constructor&&t.call&&t.apply)}function d$(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function Se(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function oW(t,e,n,r=!1){const i=new Array;if(e.length===1){const s=e[0]*(r?2:1);for(let o=0;o<s;o++)i[o]=n[t+o]}else{const s=e[0],o=e.slice(1),a=o.reduce((l,u)=>l*u)*(r?2:1);for(let l=0;l<s;l++)i[l]=oW(t+l*a,o,n,r)}return i}function Yi(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((i,s)=>i*s)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return oW(0,t,e,n)}function uke(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function OT(t,e){const n=Dn(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function Dn(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function aW(t,e){const n=t.reduce((r,i)=>r*i,1);if(e==null||e==="float32")return Yi(t,new Float32Array(n));if(e==="int32")return Yi(t,new Int32Array(n));if(e==="bool")return Yi(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function xo(t){t.forEach(e=>{E(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function Ss(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let i=0;i<t.length-1;++i)r+=n[i]*t[i];return r}function hf(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let i=0;i<r.length-1;++i)r[i]=Math.floor(t/n[i]),t-=r[i]*n[i];return r[r.length-1]=t,r}function PT(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jR="tfjsflags";class cke{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=fke,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(Y().getBool("IS_TEST")||Y().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const i=this.urlFlags[e];Y().getBool("IS_TEST")||Y().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${i}.`),this.set(e,i)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(PT(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);jR in e&&e[jR].split(",").forEach(r=>{const[i,s]=r.split(":");this.urlFlags[i]=dke(i,s)})}}function fke(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(hke(e,r[0],r[1]),r.join("="))),e}function hke(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function dke(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function Y(){return lW}let lW=null;function pke(t){lW=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let uw;function uW(){if(uw==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");uw=t}return uw}function mke(){const t=uW();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function _T(t,e){const n=mke();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const yx="Abs",xp="Acos",bp="Acosh",df="Add",DT="AddN",RT="All",MT="Any",vx="ArgMax",xx="ArgMin",wp="Asin",Sp="Asinh",Cp="Atan",$p="Atanh",kp="Atan2",bx="AvgPool",FT="AvgPoolGrad",wx="AvgPool3D",LT="AvgPool3DGrad",Sx="BatchMatMul",Cx="BatchToSpaceND",BT="Bincount",jT="BitwiseAnd",gke="BroadcastTo",cW="BroadcastArgs",Ip="Cast",Tp="Ceil",Ep="ClipByValue",zT="Complex",$x="ComplexAbs",kx="Concat",Ix="Conv2D",VT="Conv2DBackpropFilter",Tx="Conv2DBackpropInput",Ex="Conv3D",WT="Conv3DBackpropFilterV2",UT="Conv3DBackpropInputV2",Np="Cos",Ap="Cosh",GT="Cumprod",Nx="Cumsum",HT="CropAndResize",KT="DenseBincount",qT="DepthToSpace",Ax="DepthwiseConv2dNative",XT="DepthwiseConv2dNativeBackpropFilter",YT="DepthwiseConv2dNativeBackpropInput",fW="Diag",Ox="Dilation2D",p$="Dilation2DBackpropInput",m$="Dilation2DBackpropFilter",yke="Draw",Op="RealDiv",ZT="Einsum",Pp="Elu",QT="EluGrad",_p="Erf",Px="Equal",Dp="Exp",_x="ExpandDims",Rp="Expm1",JT="FFT",e2="Fill",t2="FlipLeftRight",Mp="Floor",Fp="FloorDiv",Dx="FusedBatchNorm",Rx="GatherV2",hW="GatherNd",Mx="Greater",Lp="GreaterEqual",Bp="Identity",n2="IFFT",r2="Imag",jp="IsFinite",zp="IsInf",Vp="IsNan",Fx="LeakyRelu",Lx="Less",Bx="LessEqual",dW="LinSpace",Wp="Log",Up="Log1p",jx="LogicalAnd",zx="LogicalNot",Vx="LogicalOr",vke="LogSoftmax",Wx="LRN",i2="LRNGrad",Ux="Max",Gp="Maximum",Gx="MaxPool",s2="MaxPoolGrad",Hx="MaxPool3D",o2="MaxPool3DGrad",pW="MaxPoolWithArgmax",Kx="Mean",qx="Min",Hp="Minimum",Xx="MirrorPad",Kp="Mod",mW="Multinomial",qp="Multiply",Yx="Neg",Zx="NotEqual",a2="NonMaxSuppressionV3",l2="NonMaxSuppressionV4",u2="NonMaxSuppressionV5",Qx="OnesLike",Jx="OneHot",eb="Pack",tb="PadV2",Xp="Pow",nb="Prelu",rb="Prod",gW="RaggedGather",yW="RaggedRange",vW="RaggedTensorToTensor",c2="Range",f2="Real",Yp="Reciprocal",Zp="Relu",ib="Reshape",sb="ResizeNearestNeighbor",h2="ResizeNearestNeighborGrad",ob="ResizeBilinear",d2="ResizeBilinearGrad",Qp="Relu6",ab="Reverse",Jp="Round",em="Rsqrt",xW="ScatterNd",bW="TensorScatterUpdate",wW="SearchSorted",lb="Select",tm="Selu",ub="Slice",nm="Sin",rm="Sinh",im="Sign",sm="Sigmoid",om="Softplus",am="Sqrt",cb="Sum",fb="SpaceToBatchND",hb="SplitV",db="Softmax",SW="SparseFillEmptyRows",CW="SparseReshape",$W="SparseSegmentMean",kW="SparseSegmentSum",IW="SparseToDense",lm="SquaredDifference",p2="Square",m2="StaticRegexReplace",g2="StridedSlice",TW="StringNGrams",EW="StringSplit",NW="StringToHashBucketFast",um="Sub",cm="Tan",fm="Tanh",hm="Tile",y2="TopK",v2="Transform",qu="Transpose",x2="Unique",pb="Unpack",mb="UnsortedSegmentSum",gb="ZerosLike",dm="Step",xke="FromPixels",b2="RotateWithOffset",Pv="_FusedMatMul",_v="FusedConv2D",AW="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fr(...t){Y().getBool("IS_TEST")||Y().getBool("PROD")||console.warn(...t)}function bke(...t){Y().getBool("IS_TEST")||Y().getBool("PROD")||console.log(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dv=_T("kernelRegistry",()=>new Map),g$=_T("gradRegistry",()=>new Map);function zR(t,e){const n=PW(t,e);return Dv.get(n)}function VR(t){return g$.get(t)}function WR(t){const e=Dv.entries(),n=[];for(;;){const{done:r,value:i}=e.next();if(r)break;const[s,o]=i,[a]=s.split("_");a===t&&n.push(o)}return n}function OW(t){const{kernelName:e,backendName:n}=t,r=PW(e,n);Dv.has(r)&&Fr(`The kernel '${e}' for backend '${n}' is already registered`),Dv.set(r,t)}function wke(t){const{kernelName:e}=t;g$.has(e)&&Y().getBool("DEBUG")&&Fr(`Overriding the gradient for '${e}'`),g$.set(e,t)}function PW(t,e){return`${e}_${t}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _W(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var DW=yt,fi=null;try{fi=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function yt(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}yt.prototype.__isLong__;Object.defineProperty(yt.prototype,"__isLong__",{value:!0});function Or(t){return(t&&t.__isLong__)===!0}yt.isLong=Or;var UR={},GR={};function Hl(t,e){var n,r,i;return e?(t>>>=0,(i=0<=t&&t<256)&&(r=GR[t],r)?r:(n=vt(t,(t|0)<0?-1:0,!0),i&&(GR[t]=n),n)):(t|=0,(i=-128<=t&&t<128)&&(r=UR[t],r)?r:(n=vt(t,t<0?-1:0,!1),i&&(UR[t]=n),n))}yt.fromInt=Hl;function hi(t,e){if(isNaN(t))return e?nl:di;if(e){if(t<0)return nl;if(t>=RW)return LW}else{if(t<=-KR)return Sr;if(t+1>=KR)return FW}return t<0?hi(-t,e).neg():vt(t%Pc|0,t/Pc|0,e)}yt.fromNumber=hi;function vt(t,e,n){return new yt(t,e,n)}yt.fromBits=vt;var Rv=Math.pow;function w2(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return di;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return w2(t.substring(1),e,n).neg();for(var i=hi(Rv(n,8)),s=di,o=0;o<t.length;o+=8){var a=Math.min(8,t.length-o),l=parseInt(t.substring(o,o+a),n);if(a<8){var u=hi(Rv(n,a));s=s.mul(u).add(hi(l))}else s=s.mul(i),s=s.add(hi(l))}return s.unsigned=e,s}yt.fromString=w2;function is(t,e){return typeof t=="number"?hi(t,e):typeof t=="string"?w2(t,e):vt(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}yt.fromValue=is;var HR=65536,Ske=1<<24,Pc=HR*HR,RW=Pc*Pc,KR=RW/2,qR=Hl(Ske),di=Hl(0);yt.ZERO=di;var nl=Hl(0,!0);yt.UZERO=nl;var Mu=Hl(1);yt.ONE=Mu;var MW=Hl(1,!0);yt.UONE=MW;var y$=Hl(-1);yt.NEG_ONE=y$;var FW=vt(-1,2147483647,!1);yt.MAX_VALUE=FW;var LW=vt(-1,-1,!0);yt.MAX_UNSIGNED_VALUE=LW;var Sr=vt(0,-2147483648,!1);yt.MIN_VALUE=Sr;var de=yt.prototype;de.toInt=function(){return this.unsigned?this.low>>>0:this.low};de.toNumber=function(){return this.unsigned?(this.high>>>0)*Pc+(this.low>>>0):this.high*Pc+(this.low>>>0)};de.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Sr)){var n=hi(e),r=this.div(n),i=r.mul(n).sub(this);return r.toString(e)+i.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var s=hi(Rv(e,6),this.unsigned),o=this,a="";;){var l=o.div(s),u=o.sub(l.mul(s)).toInt()>>>0,c=u.toString(e);if(o=l,o.isZero())return c+a;for(;c.length<6;)c="0"+c;a=""+c+a}};de.getHighBits=function(){return this.high};de.getHighBitsUnsigned=function(){return this.high>>>0};de.getLowBits=function(){return this.low};de.getLowBitsUnsigned=function(){return this.low>>>0};de.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Sr)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,n=31;n>0&&!(e&1<<n);n--);return this.high!=0?n+33:n+1};de.isZero=function(){return this.high===0&&this.low===0};de.eqz=de.isZero;de.isNegative=function(){return!this.unsigned&&this.high<0};de.isPositive=function(){return this.unsigned||this.high>=0};de.isOdd=function(){return(this.low&1)===1};de.isEven=function(){return(this.low&1)===0};de.equals=function(e){return Or(e)||(e=is(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};de.eq=de.equals;de.notEquals=function(e){return!this.eq(e)};de.neq=de.notEquals;de.ne=de.notEquals;de.lessThan=function(e){return this.comp(e)<0};de.lt=de.lessThan;de.lessThanOrEqual=function(e){return this.comp(e)<=0};de.lte=de.lessThanOrEqual;de.le=de.lessThanOrEqual;de.greaterThan=function(e){return this.comp(e)>0};de.gt=de.greaterThan;de.greaterThanOrEqual=function(e){return this.comp(e)>=0};de.gte=de.greaterThanOrEqual;de.ge=de.greaterThanOrEqual;de.compare=function(e){if(Or(e)||(e=is(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};de.comp=de.compare;de.negate=function(){return!this.unsigned&&this.eq(Sr)?Sr:this.not().add(Mu)};de.neg=de.negate;de.add=function(e){Or(e)||(e=is(e));var n=this.high>>>16,r=this.high&65535,i=this.low>>>16,s=this.low&65535,o=e.high>>>16,a=e.high&65535,l=e.low>>>16,u=e.low&65535,c=0,f=0,h=0,d=0;return d+=s+u,h+=d>>>16,d&=65535,h+=i+l,f+=h>>>16,h&=65535,f+=r+a,c+=f>>>16,f&=65535,c+=n+o,c&=65535,vt(h<<16|d,c<<16|f,this.unsigned)};de.subtract=function(e){return Or(e)||(e=is(e)),this.add(e.neg())};de.sub=de.subtract;de.multiply=function(e){if(this.isZero())return di;if(Or(e)||(e=is(e)),fi){var n=fi.mul(this.low,this.high,e.low,e.high);return vt(n,fi.get_high(),this.unsigned)}if(e.isZero())return di;if(this.eq(Sr))return e.isOdd()?Sr:di;if(e.eq(Sr))return this.isOdd()?Sr:di;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(qR)&&e.lt(qR))return hi(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,i=this.high&65535,s=this.low>>>16,o=this.low&65535,a=e.high>>>16,l=e.high&65535,u=e.low>>>16,c=e.low&65535,f=0,h=0,d=0,p=0;return p+=o*c,d+=p>>>16,p&=65535,d+=s*c,h+=d>>>16,d&=65535,d+=o*u,h+=d>>>16,d&=65535,h+=i*c,f+=h>>>16,h&=65535,h+=s*u,f+=h>>>16,h&=65535,h+=o*l,f+=h>>>16,h&=65535,f+=r*c+i*u+s*l+o*a,f&=65535,vt(d<<16|p,f<<16|h,this.unsigned)};de.mul=de.multiply;de.divide=function(e){if(Or(e)||(e=is(e)),e.isZero())throw Error("division by zero");if(fi){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var n=(this.unsigned?fi.div_u:fi.div_s)(this.low,this.high,e.low,e.high);return vt(n,fi.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?nl:di;var r,i,s;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return nl;if(e.gt(this.shru(1)))return MW;s=nl}else{if(this.eq(Sr)){if(e.eq(Mu)||e.eq(y$))return Sr;if(e.eq(Sr))return Mu;var o=this.shr(1);return r=o.div(e).shl(1),r.eq(di)?e.isNegative()?Mu:y$:(i=this.sub(e.mul(r)),s=r.add(i.div(e)),s)}else if(e.eq(Sr))return this.unsigned?nl:di;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=di}for(i=this;i.gte(e);){r=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),l=a<=48?1:Rv(2,a-48),u=hi(r),c=u.mul(e);c.isNegative()||c.gt(i);)r-=l,u=hi(r,this.unsigned),c=u.mul(e);u.isZero()&&(u=Mu),s=s.add(u),i=i.sub(c)}return s};de.div=de.divide;de.modulo=function(e){if(Or(e)||(e=is(e)),fi){var n=(this.unsigned?fi.rem_u:fi.rem_s)(this.low,this.high,e.low,e.high);return vt(n,fi.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};de.mod=de.modulo;de.rem=de.modulo;de.not=function(){return vt(~this.low,~this.high,this.unsigned)};de.and=function(e){return Or(e)||(e=is(e)),vt(this.low&e.low,this.high&e.high,this.unsigned)};de.or=function(e){return Or(e)||(e=is(e)),vt(this.low|e.low,this.high|e.high,this.unsigned)};de.xor=function(e){return Or(e)||(e=is(e)),vt(this.low^e.low,this.high^e.high,this.unsigned)};de.shiftLeft=function(e){return Or(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?vt(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):vt(0,this.low<<e-32,this.unsigned)};de.shl=de.shiftLeft;de.shiftRight=function(e){return Or(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?vt(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):vt(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};de.shr=de.shiftRight;de.shiftRightUnsigned=function(e){if(Or(e)&&(e=e.toInt()),e&=63,e===0)return this;var n=this.high;if(e<32){var r=this.low;return vt(r>>>e|n<<32-e,n>>>e,this.unsigned)}else return e===32?vt(n,0,this.unsigned):vt(n>>>e-32,0,this.unsigned)};de.shru=de.shiftRightUnsigned;de.shr_u=de.shiftRightUnsigned;de.toSigned=function(){return this.unsigned?vt(this.low,this.high,!1):this};de.toUnsigned=function(){return this.unsigned?this:vt(this.low,this.high,!0)};de.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};de.toBytesLE=function(){var e=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};de.toBytesBE=function(){var e=this.high,n=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};yt.fromBytes=function(e,n,r){return r?yt.fromBytesLE(e,n):yt.fromBytesBE(e,n)};yt.fromBytesLE=function(e,n){return new yt(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)};yt.fromBytesBE=function(e,n){return new yt(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)};const BW=ut(DW),Cke=SF({__proto__:null,default:BW},[DW]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ga=BW||Cke;function yb(t){return Ga.fromString(t,!0,16)}const jW=yb("c3a5c85c97cb3127"),Ua=yb("b492b66fbe98f273"),Yn=yb("9ae16a3b2f90404f");function v$(t){return t.xor(t.shru(47))}function zW(t,e,n){const r=t.slice(e,e+n);return Ga.fromBytes(Array.from(r),!0,!0)}function ct(t,e){return zW(t,e,8)}function XR(t,e){return zW(t,e,4)}function fn(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function Jo(t,e,n=yb("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let i=e.xor(r).mul(n);return i=i.xor(i.shru(47)),i=i.mul(n),i}function $ke(t,e,n,r,i,s){i=i.add(t),s=fn(s.add(i).add(r),21);const o=i;return i=i.add(e),i=i.add(n),s=s.add(fn(i,44)),[i.add(r),s.add(o)]}function vg(t,e,n,r){return $ke(ct(t,e),ct(t,e+8),ct(t,e+16),ct(t,e+24),n,r)}function kke(t,e=t.length){if(e>=8){const n=Yn.add(e*2),r=ct(t,0).add(Yn),i=ct(t,e-8),s=fn(i,37).mul(n).add(r),o=fn(r,25).add(i).mul(n);return Jo(s,o,n)}if(e>=4){const n=Yn.add(e*2),r=XR(t,0);return Jo(r.shl(3).add(e),XR(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],i=t[e-1],s=n+(r<<8),o=e+(i<<2);return v$(Yn.mul(s).xor(jW.mul(o))).mul(Yn)}return Yn}function Ike(t,e=t.length){const n=Yn.add(e*2),r=ct(t,0).mul(Ua),i=ct(t,8),s=ct(t,e-8).mul(n),o=ct(t,e-16).mul(Yn);return Jo(fn(r.add(i),43).add(fn(s,30)).add(o),r.add(fn(i.add(Yn),18)).add(s),n)}function Tke(t,e=t.length){const n=Yn.add(e*2),r=ct(t,0).mul(Yn),i=ct(t,8),s=ct(t,e-8).mul(n),o=ct(t,e-16).mul(Yn),a=fn(r.add(i),43).add(fn(s,30)).add(o),l=Jo(a,r.add(fn(i.add(Yn),18)).add(s),n),u=ct(t,16).mul(n),c=ct(t,24),f=a.add(ct(t,e-32)).mul(n),h=l.add(ct(t,e-24)).mul(n);return Jo(fn(u.add(c),43).add(fn(f,30)).add(h),u.add(fn(c.add(r),18)).add(f),n)}function Eke(t,e=t.length){const n=Ga.fromNumber(81,!0);if(e<=32)return e<=16?kke(t,e):Ike(t,e);if(e<=64)return Tke(t,e);let r=n,i=n.mul(Ua).add(113),s=v$(i.mul(Yn).add(113)).mul(Yn),o=[Ga.UZERO,Ga.UZERO],a=[Ga.UZERO,Ga.UZERO];r=r.mul(Yn).add(ct(t,0));let l=0;const u=(e-1>>6)*64,c=u+(e-1&63)-63;do r=fn(r.add(i).add(o[0]).add(ct(t,l+8)),37).mul(Ua),i=fn(i.add(o[1]).add(ct(t,l+48)),42).mul(Ua),r=r.xor(a[1]),i=i.add(o[0]).add(ct(t,l+40)),s=fn(s.add(a[0]),33).mul(Ua),o=vg(t,l,o[1].mul(Ua),r.add(a[0])),a=vg(t,l+32,s.add(a[1]),i.add(ct(t,l+16))),[s,r]=[r,s],l+=64;while(l!==u);const f=Ua.add(s.and(255).shl(1));return l=c,a[0]=a[0].add(e-1&63),o[0]=o[0].add(a[0]),a[0]=a[0].add(o[0]),r=fn(r.add(i).add(o[0]).add(ct(t,l+8)),37).mul(f),i=fn(i.add(o[1]).add(ct(t,l+48)),42).mul(f),r=r.xor(a[1].mul(9)),i=i.add(o[0].mul(9).add(ct(t,l+40))),s=fn(s.add(a[0]),33).mul(f),o=vg(t,l,o[1].mul(f),r.add(a[0])),a=vg(t,l+32,s.add(a[1]),i.add(ct(t,l+16))),[s,r]=[r,s],Jo(Jo(o[0],a[0],f).add(v$(i).mul(jW)).add(s),Jo(o[1],a[1],f).add(r),f)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $a(t,e){return e==="string"?ea(t):Kl([t],e)}function Nke(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function Kl(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=kl(t)),Y().getBool("DEBUG")&&ske(t,e),Nke(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function sr(){return Y().platform.now()}function ea(t,e="utf-8"){return e=e||"utf-8",Y().platform.encode(t,e)}function aa(t,e="utf-8"){return e=e||"utf-8",Y().platform.decode(t,e)}function Si(t){return Y().platform.isTypedArray!=null?Y().platform.isTypedArray(t):_W(t)}function kl(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||PT(t)||t==null||Si(t)&&n)e.push(t);else if(Array.isArray(t)||Si(t))for(let r=0;r<t.length;++r)kl(t[r],e,n);else{let r=-1;for(const i of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(i)&&(r=Math.max(r,Number(i)));for(let i=0;i<=r;i++)kl(t[i],e,n)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ake{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new Pke)}profileKernel(e,n,r){let i;const s=()=>{i=r()};let o;const a=sr();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(s);else{s();for(const u of i)u.dataSync();o=Promise.resolve({kernelMs:sr()-a})}if(Y().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let u=0;u<i.length;u++){const c=i[u];c.data().then(f=>{Oke(f,c.dtype,e)})}return{kernelName:e,outputs:i,inputs:n,timeMs:o.then(u=>u.kernelMs),extraInfo:o.then(u=>u.getExtraProfileInfo!=null?u.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:i,inputs:s,extraInfo:o}=e;r.forEach(a=>{Promise.all([a.data(),i,o]).then(l=>{this.logger.logKernelProfile(n,a,l[0],l[1],s,l[2])})})}}function Oke(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const i=t[r];if(isNaN(i)||!isFinite(i))return console.warn(`Found ${i} in the result of '${n}'`),!0}return!1}class Pke{logKernelProfile(e,n,r,i,s,o){const a=typeof i=="number"?Ku(`${i}ms`,9):i.error,l=Ku(e,25),u=n.rank,c=n.size,f=Ku(n.shape.toString(),14);let h="";for(const d in s){const p=s[d];if(p!=null){const m=p.shape||n.shape,g=m.length;h+=`${d}: ${g}D ${g>0?m:""} `}}console.log(`%c${l}	%c${a}	%c${u}D ${f}	%c${c}	%c${h}	%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ke(t,e,n){const r={},i={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<t.length;l++){const u=t[l],c=u.inputs;for(const f in c){const h=c[f];let d=!1;for(let p=0;p<e.length;p++)if(r[h.id]){u.outputs.forEach(m=>r[m.id]=!0),d=!0,i[u.id]=!0;break}if(d)break}}const s={};s[n.id]=!0;const o={};for(let l=t.length-1;l>=0;l--){const u=t[l],c=u.inputs;for(let f=0;f<u.outputs.length;f++)if(s[u.outputs[f].id]){for(const h in c)s[c[h].id]=!0,o[u.id]=!0;break}}const a=[];for(let l=0;l<t.length;l++){const u=t[l];if(i[u.id]&&o[u.id]){const c={};for(const h in u.inputs){const d=u.inputs[h];r[d.id]&&(c[h]=d)}const f=Object.assign({},u);f.inputs=c,f.outputs=u.outputs,a.push(f)}}return a}function Dke(t,e,n,r){for(let i=e.length-1;i>=0;i--){const s=e[i],o=[];if(s.outputs.forEach(l=>{const u=t[l.id];u!=null?o.push(u):o.push(null)}),s.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${s.kernelName}.`);const a=s.gradient(o);for(const l in s.inputs){if(!(l in a))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(a)}.`);const u=n(()=>a[l]());if(u.dtype!=="float32")throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${u.dtype}'`);const c=s.inputs[l];if(!et(u.shape,c.shape))throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input '${l}' has shape '${u.shape}', which does not match the shape of the input '${c.shape}'`);if(t[c.id]==null)t[c.id]=u;else{const f=t[c.id];t[c.id]=r(f,u),f.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YR=20,Yf=3,cw=7;function Rke(t,e,n,r){const i=Se(e),s=Mke(t,e,n,i),o=e.length,a=Hg(t,e,n,i,s),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${o}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(a.map(u=>"    "+u).join(`
`)),l.join(`
`)}function Mke(t,e,n,r){const i=J(e),s=r[r.length-1],o=new Array(s).fill(0),a=e.length,l=n==="complex64"?uh(t):t;if(a>1)for(let u=0;u<i/s;u++){const c=u*s;for(let f=0;f<s;f++)o[f]=Math.max(o[f],lh(l[c+f],0,n).length)}return o}function lh(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(cw))} + ${parseFloat(t[1].toFixed(cw))}j`:vp(t)?r=`'${t}'`:n==="bool"?r=VW(t):r=parseFloat(t.toFixed(cw)).toString(),Ku(r,e)}function VW(t){return t===0?"false":"true"}function Hg(t,e,n,r,i,s=!0){const o=n==="complex64"?2:1,a=e[0],l=e.length;if(l===0){if(n==="complex64"){const m=uh(t);return[lh(m[0],0,n)]}return n==="bool"?[VW(t[0])]:[t[0].toString()]}if(l===1){if(a>YR){const g=Yf*o;let y=Array.from(t.slice(0,g)),v=Array.from(t.slice((a-Yf)*o,a*o));return n==="complex64"&&(y=uh(y),v=uh(v)),["["+y.map((x,b)=>lh(x,i[b],n)).join(", ")+", ..., "+v.map((x,b)=>lh(x,i[a-Yf+b],n)).join(", ")+"]"]}return["["+(n==="complex64"?uh(t):Array.from(t)).map((g,y)=>lh(g,i[y],n)).join(", ")+"]"]}const u=e.slice(1),c=r.slice(1),f=r[0]*o,h=[];if(a>YR){for(let m=0;m<Yf;m++){const g=m*f,y=g+f;h.push(...Hg(t.slice(g,y),u,n,c,i,!1))}h.push("...");for(let m=a-Yf;m<a;m++){const g=m*f,y=g+f;h.push(...Hg(t.slice(g,y),u,n,c,i,m===a-1))}}else for(let m=0;m<a;m++){const g=m*f,y=g+f;h.push(...Hg(t.slice(g,y),u,n,c,i,m===a-1))}const d=l===2?",":"";h[0]="["+(a>0?h[0]+d:"");for(let m=1;m<h.length-1;m++)h[m]=" "+h[m]+d;let p=`,
`;for(let m=2;m<l;m++)p+=`
`;return h[h.length-1]=" "+h[h.length-1]+"]"+(s?"":p),h}function uh(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Sn{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=J(e),r!=null){const i=r.length;E(i===this.size,()=>`Length of values '${i}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Lt(n,this.size),this.strides=Se(e)}set(e,...n){n.length===0&&(n=[0]),E(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const i of e){if(i<0||i>=this.shape[n]){const s=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(s)}n++}let r=e[e.length-1];for(let i=0;i<e.length-1;++i)r+=this.strides[i]*e[i];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return Vi().makeTensor(this.values,this.shape,this.dtype)}}let Vi=null,pu=null;function Fke(t){Vi=t}function Lke(t){pu=t}class Qt{constructor(e,n,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=J(e),this.strides=Se(e),this.dataId=r,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return pu.buffer(this.shape,this.dtype,e)}bufferSync(){return pu.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return Yi(this.shape,e,this.dtype==="complex64")}arraySync(){return Yi(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=Vi().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>aa(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),Vi().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=Vi().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>aa(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await Vi().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Vi().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return pu.print(this,e)}clone(){return this.throwIfDisposed(),pu.clone(this)}toString(e=!1){const n=this.dataSync();return Rke(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),pu.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),Vi().makeVariable(this,e,n,r)}}Object.defineProperty(Qt,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function Q(){return _T("Tensor",()=>Qt)}Q();class Mv extends Qt{constructor(e,n,r,i){super(e.shape,e.dtype,e.dataId,i),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!et(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);Vi().disposeTensor(this),this.dataId=e.dataId,Vi().incRef(this,null)}dispose(){Vi().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(Mv,Symbol.hasInstance,{value:t=>t instanceof Qt&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ZR;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(ZR||(ZR={}));var x$;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(x$||(x$={}));var b$;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(b$||(b$={}));var w$;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(w$||(w$={}));var S$;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(S$||(S$={}));const Bke={float32:w$,int32:x$,bool:b$,complex64:S$};function Tr(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return Bke[t][e]}function S2(t){return Tr(t,"int32")}function WW(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function UW(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zt(t,e){if(t.dtype===e.dtype)return[t,e];const n=Tr(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function GW(t){const e=[];return HW(t,e,new Set),e}function HW(t,e,n){if(t==null)return;if(t instanceof Qt){e.push(t);return}if(!jke(t))return;const r=t;for(const i in r){const s=r[i];n.has(s)||(n.add(s),HW(s,e,n))}}function jke(t){return Array.isArray(t)||typeof t=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fw(t){return t.kernelName!=null}class QR{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class _c{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new QR}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(Fr(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new Ake(this.backendInstance),!0}setupRegisteredKernels(){WR(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){WR(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof ET)&&typeof r.then=="function"){const i=++this.pendingBackendInitId,s=r.then(o=>i<this.pendingBackendInitId?!1:(this.registry[e]=o,this.pendingBackendInit=null,!0)).catch(o=>(i<this.pendingBackendInitId||(this.pendingBackendInit=null,Fr(`Initialization of backend ${e} failed`),Fr(o.stack||o.message)),!1));return this.pendingBackendInit=s,{success:s,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return Fr(`Initialization of backend ${e} failed`),Fr(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:i,asyncInit:s}=this.initializeBackend(r);if(s||i)return{name:r,asyncInit:s}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),i=r.backend,s=this.readSync(n),o=i.refCount(n);i.disposeData(n,!0),r.backend=e,e.move(n,s,r.shape,r.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let i;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(i),()=>(i=n(),i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),i))}scopedRun(e,n,r){e();try{const i=r();return n(),i}catch(i){throw n(),i}}nextTensorId(){return _c.nextTensorId++}nextVariableId(){return _c.nextVariableId++}clone(e){const n=W.runKernel(Bp,{x:e}),r={x:e},i=o=>({x:()=>{const a="float32",l={x:o},u={dtype:a};return W.runKernel(Ip,l,u)}}),s=[];return this.addTapeNode(this.state.activeScope.name,r,[n],i,s,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,!(zR(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const i=this.backend.numDataIds();let s=0;r.forEach(l=>{s+=l.dtype==="complex64"?3:1});const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=i-n-s-o;if(a>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${a} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const i=this.isTapeOn(),s=this.state.numBytes,o=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let a;this.backendName==null&&this.backend;let l;const u=fw(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(fw(e)){const{kernelName:p,inputs:m,attrs:g}=e;this.backendName==null&&this.backend;const y=zR(p,this.backendName);E(y!=null,()=>`Cannot find registered kernel '${p}' for backend '${this.backendName}'`),a=()=>{const v=this.backend.numDataIds();l=y.kernelFunc({inputs:m,attrs:g,backend:this.backend});const x=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(p,v,x);const b=x.map(w=>w.rank!=null?w:this.makeTensorFromTensorInfo(w));if(i){const w=this.getTensorsForGradient(p,m,b);r=this.saveTensorsForBackwardMode(w)}return b}}else{const{forwardFunc:p}=e,m=g=>{i&&(r=g.map(y=>this.keep(this.clone(y))))};a=()=>{const g=this.backend.numDataIds();l=this.tidy(()=>p(this.backend,m));const y=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,g,y),y}}const{inputs:c,attrs:f}=e,h=fw(e)?null:e.backwardsFunc;let d;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=a():(d=this.profiler.profileKernel(u,c,()=>a()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(d),n=d.outputs)}),i&&this.addTapeNode(u,c,n,h,r,f),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map(p=>c[p]!=null?c[p].shape:null),outputShapes:n.map(p=>p.shape),kernelTimeMs:d.timeMs,extraInfo:d.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,n,r){const i=VR(e);if(i!=null){const s=i.inputsToSave||[],o=i.outputsToSave||[];let a;i.saveAllInputs?(E(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),a=Object.keys(n).map(u=>n[u])):a=s.map(u=>n[u]);const l=r.filter((u,c)=>o[c]);return a.concat(l)}return[]}makeTensor(e,n,r,i){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",i=i||this.backend;let s=e;r==="string"&&vp(e[0])&&(s=e.map(l=>ea(l)));const o=i.write(s,n,r),a=new Qt(n,r,o,this.nextTensorId());if(this.trackTensor(a,i),r==="string"){const l=this.state.tensorInfo.get(o),u=ake(s);this.state.numBytes+=u-l.bytes,l.bytes=u}return a}makeTensorFromDataId(e,n,r,i){r=r||"float32";const s={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(s,i)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:i,dtype:s}=e,o=new Qt(i,s,r,this.nextTensorId());return this.trackTensor(o,n),o}makeVariable(e,n=!0,r,i){r=r||this.nextVariableId().toString(),i!=null&&i!==e.dtype&&(e=e.cast(i));const s=new Mv(e,n,r,this.nextTensorId());if(this.state.registeredVariables[s.name]!=null)throw new Error(`Variable with name ${s.name} was already registered`);return this.state.registeredVariables[s.name]=s,this.incRef(s,this.backend),s}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*Ov(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof Mv||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*Ov(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(i=>i.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const i of this.state.activeProfile.kernels)i.kernelTimeMs=await i.kernelTimeMs,i.extraInfo=await i.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,i,s,o){const a={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:s},l=VR(e);l!=null&&(i=l.gradFunc),i!=null&&(a.gradient=u=>(u=u.map((c,f)=>{if(c==null){const h=r[f],d=Dn(h.size,h.dtype);return this.makeTensor(d,h.shape,h.dtype)}return c}),i(u.length>1?u:u[0],s,o))),this.state.activeTape.push(a)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=GW(e),r=new Set(n.map(s=>s.id));for(let s=0;s<this.state.activeScope.track.length;s++){const o=this.state.activeScope.track[s];!o.kept&&!r.has(o.id)&&o.dispose()}const i=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(s=>{!s.kept&&s.scopeId===i.id&&this.track(s)})}gradients(e,n,r,i=!1){if(E(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const s=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));E(s instanceof Qt,()=>"The result y returned by f() must be a tensor.");const o=_ke(this.state.activeTape,n,s);if(!i&&o.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const a={};a[s.id]=r??zke(s.shape),Dke(a,o,u=>this.tidy(u),Vke);const l=n.map(u=>a[u.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(u=>{for(const c of u.saved)c.dispose()}),this.state.activeTape=null),{value:s,grads:l}})}customGrad(e){return E(h$(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{E(n.every(a=>a instanceof Qt),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const i={};n.forEach((a,l)=>{i[l]=a});const s=(a,l)=>(r=e(...n,l),E(r.value instanceof Qt,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),E(h$(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),o=(a,l)=>{const u=r.gradFunc(a,l),c=Array.isArray(u)?u:[u];E(c.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),E(c.every(h=>h instanceof Qt),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const f={};return c.forEach((h,d)=>{f[d]=()=>h}),f};return this.runKernelFunc({forwardFunc:s,backwardsFunc:o,inputs:i})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=sr(),r=await this.backend.time(e);return r.wallMs=sr()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new QR;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}_c.nextTensorId=0;_c.nextVariableId=0;function zke(t){const e=OT(J(t),"float32");return W.makeTensor(e,t,"float32")}function KW(){const t=uW();if(t._tfengine==null){const e=new cke(t);t._tfengine=new _c(e)}return pke(t._tfengine.ENV),Fke(()=>t._tfengine),t._tfengine}const W=KW();function Vke(t,e){const n={a:t,b:e};return W.runKernel(df,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wke(){return typeof navigator<"u"&&navigator!=null}function qW(t){if(t||Wke()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function XW(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fr=Y();fr.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});fr.registerFlag("IS_BROWSER",()=>XW());fr.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");fr.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));fr.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));fr.registerFlag("PROD",()=>!1);fr.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>fr.getBool("DEBUG"));fr.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);fr.registerFlag("IS_TEST",()=>!1);fr.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>fr.getBool("DEBUG"));fr.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);fr.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);fr.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vb(t,e){let n=t;if(Si(t))return e==="string"?[]:[t.length];if(WW(t)){const i=t.channels||"RGBA";return[t.height,t.width*i.length]}else if(UW(t))return[t.buffer.size/(e==null?4:Ov(e))];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||Si(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&Y().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&YW(t,r,[]),r}function YW(t,e,n){if(n=n||[],!Array.isArray(t)&&!Si(t)){E(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}E(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),E(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let i=0;i<t.length;++i)YW(t[i],r,n.concat(i))}function JR(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function L(t,e,n,r="numeric"){if(t instanceof Q())return JR(r,t.dtype,e,n),t;let i=ff(t);if(i!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),JR(r,i,e,n),t==null||!Si(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const l=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}const s=vb(t,i);!Si(t)&&!Array.isArray(t)&&(t=[t]);const a=i!=="string"?Kl(t,i):kl(t,[],!0);return W.makeTensor(a,s,i)}function ZW(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((s,o)=>L(s,`${e}[${o}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uke="__op";function H(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+Uke;const i=(...s)=>{W.startScope(n);try{const o=r(...s);return PT(o)&&console.error("Cannot return a Promise inside of tidy."),W.endScope(o),o}catch(o){throw W.endScope(null),o}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gke(t,e){const n=L(t,"real","complex"),r=L(e,"imag","complex");AT(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const i={real:n,imag:r};return W.runKernel(zT,i)}const Dc=H({complex_:Gke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xb(t,e,n,r){if(r==null)r=ff(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(UW(t)||WW(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return W.backend.createTensorFromGPUData(t,e||n,r)}if(!Si(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){xo(e);const i=J(e),s=J(n);E(i===s,()=>`Based on the provided shape, [${e}], the tensor should have ${i} values but has ${s}`);for(let o=0;o<n.length;++o){const a=n[o],l=o===n.length-1?a!==J(e.slice(o)):!0;E(n[o]===e[o]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!Si(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?Kl(t,r):kl(t,[],!0),W.makeTensor(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QW(t,e,n){const r=vb(t,n);return xb(t,e,r,n)}class pf{static join(e){return new pf(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>Si(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let r=0;r<e.length;r++){const i=e[r];r!==e.length-1&&i.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const s=n+i.byteLength;this.shards.push({buffer:i,start:n,end:s}),n=s}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const i=n-e,s=new ArrayBuffer(i),o=new Uint8Array(s);let a=0;for(let l=r;l<this.shards.length;l++){const u=this.shards[l],f=e+a-u.start,h=a,p=Math.min(n,u.end)-u.start,m=new Uint8Array(u.buffer,f,p-f);if(o.set(m,h),a+=m.length,n<u.end)break}return s}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(i){return e<i.start?-1:e>=i.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=Hke(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function Hke(t,e){let n=0,r=t.length;for(;n<=r;){const i=Math.floor((r-n)/2)+n,s=e(t[i]);if(s===0)return i;s<0?r=i:n=i+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ls(){return W}function eM(){return W.memory()}function X(t,e){return W.tidy(t,e)}function je(t){GW(t).forEach(n=>n.dispose())}function Cs(t){return W.keep(t)}function JW(t,e,n=1){return W.registerBackend(t,e,n)}function Kke(){return W.backend}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tM=4;async function nM(t,e){const n=[],r=[],i=Array.isArray(t)?t.map(o=>o.name):Object.keys(t);for(let o=0;o<i.length;++o){const a=i[o],l=Array.isArray(t)?t[o].tensor:t[a];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${l.dtype}`);const u={name:a,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const c=new Promise(async f=>{const h=await l.bytes(),d=h.reduce((g,y)=>g+y.length,0)+tM*h.length,p=new Uint8Array(d);let m=0;for(let g=0;g<h.length;g++){const y=h[g],v=new Uint8Array(new Uint32Array([y.length]).buffer);p.set(v,m),m+=tM,p.set(y,m),m+=y.length}f(p)});r.push(c)}else r.push(l.data());e!=null&&(u.group=e),n.push(u)}const s=await Promise.all(r);return{data:qke(s),specs:n}}function qke(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(s=>{if(e+=s.byteLength,n.push(s.byteLength===s.buffer.byteLength?s:new s.constructor(s)),!(s instanceof Float32Array||s instanceof Int32Array||s instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${s.constructor.name}`)});const r=new Uint8Array(e);let i=0;return n.forEach(s=>{r.set(new Uint8Array(s.buffer),i),i+=s.byteLength}),r.buffer}const C2=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function rM(t){return C2?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function Xke(t){if(C2)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function Yke(t){if(C2){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function Zke(t){return pf.join(t)}function eU(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:rM(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:rM(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new pf(t.weightData).byteLength}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Gn{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return Gn.instance==null&&(Gn.instance=new Gn),Gn.instance}static registerSaveRouter(e){Gn.getInstance().saveRouters.push(e)}static registerLoadRouter(e){Gn.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return Gn.getHandlers(e,"save")}static getLoadHandlers(e,n){return Gn.getHandlers(e,"load",n)}static getHandlers(e,n,r){const i=[];return(n==="load"?Gn.getInstance().loadRouters:Gn.getInstance().saveRouters).forEach(o=>{const a=o(e,r);a!==null&&i.push(a)}),i}}const Qke=t=>Gn.getSaveHandlers(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C$="tensorflowjs",$$=1,rl="models_store",Bo="model_info_store";function tU(){if(!Y().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function k$(t){const e=t.result;e.createObjectStore(rl,{keyPath:"modelPath"}),e.createObjectStore(Bo,{keyPath:"modelPath"})}class Il{constructor(e){if(this.indexedDB=tU(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,i)=>{const s=this.indexedDB.open(C$,$$);s.onupgradeneeded=()=>k$(s),s.onsuccess=()=>{const o=s.result;if(n==null){const a=o.transaction(rl,"readonly"),u=a.objectStore(rl).get(this.modelPath);u.onsuccess=()=>{if(u.result==null)return o.close(),i(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(u.result.modelArtifacts)},u.onerror=c=>(o.close(),i(u.error)),a.oncomplete=()=>o.close()}else{n.weightData=pf.join(n.weightData);const a=eU(n),l=o.transaction(Bo,"readwrite");let u=l.objectStore(Bo),c;try{c=u.put({modelPath:this.modelPath,modelArtifactsInfo:a})}catch(h){return i(h)}let f;c.onsuccess=()=>{f=o.transaction(rl,"readwrite");const h=f.objectStore(rl);let d;try{d=h.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:a})}catch(p){return i(p)}d.onsuccess=()=>r({modelArtifactsInfo:a}),d.onerror=p=>{u=l.objectStore(Bo);const m=u.delete(this.modelPath);m.onsuccess=()=>(o.close(),i(d.error)),m.onerror=g=>(o.close(),i(d.error))}},c.onerror=h=>(o.close(),i(c.error)),l.oncomplete=()=>{f==null?o.close():f.oncomplete=()=>o.close()}}},s.onerror=o=>i(s.error)})}}Il.URL_SCHEME="indexeddb://";const nU=t=>Y().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Il.URL_SCHEME)?Jke(t.slice(Il.URL_SCHEME.length)):null;Gn.registerSaveRouter(nU);Gn.registerLoadRouter(nU);function Jke(t){return new Il(t)}function eIe(t){return t.startsWith(Il.URL_SCHEME)?t.slice(Il.URL_SCHEME.length):t}class tIe{constructor(){this.indexedDB=tU()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(C$,$$);r.onupgradeneeded=()=>k$(r),r.onsuccess=()=>{const i=r.result,s=i.transaction(Bo,"readonly"),a=s.objectStore(Bo).getAll();a.onsuccess=()=>{const l={};for(const u of a.result)l[u.modelPath]=u.modelArtifactsInfo;e(l)},a.onerror=l=>(i.close(),n(a.error)),s.oncomplete=()=>i.close()},r.onerror=i=>n(r.error)})}async removeModel(e){return e=eIe(e),new Promise((n,r)=>{const i=this.indexedDB.open(C$,$$);i.onupgradeneeded=()=>k$(i),i.onsuccess=()=>{const s=i.result,o=s.transaction(Bo,"readwrite"),a=o.objectStore(Bo),l=a.get(e);let u;l.onsuccess=()=>{if(l.result==null)return s.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const c=a.delete(e),f=()=>{u=s.transaction(rl,"readwrite");const d=u.objectStore(rl).delete(e);d.onsuccess=()=>n(l.result.modelArtifactsInfo),d.onerror=p=>r(l.error)};c.onsuccess=f,c.onerror=h=>(f(),s.close(),r(l.error))}},l.onerror=c=>(s.close(),r(l.error)),o.oncomplete=()=>{u==null?s.close():u.oncomplete=()=>s.close()}},i.onerror=s=>r(i.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bs="/",mu="tensorflowjs_models",rU="info",nIe="model_topology",rIe="weight_specs",iIe="weight_data",sIe="model_metadata";function iU(t){return{info:[mu,t,rU].join(Bs),topology:[mu,t,nIe].join(Bs),weightSpecs:[mu,t,rIe].join(Bs),weightData:[mu,t,iIe].join(Bs),modelMetadata:[mu,t,sIe].join(Bs)}}function sU(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function oIe(t){const e=t.split(Bs);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(Bs)}function aIe(t){return t.startsWith(Tl.URL_SCHEME)?t.slice(Tl.URL_SCHEME.length):t}class Tl{constructor(e){if(!Y().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=iU(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),i=eU(e),s=pf.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,Xke(s));const o={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),{modelArtifactsInfo:i}}catch{throw sU(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${i.modelTopologyBytes}, weightSpecsBytes=${i.weightSpecsBytes}, weightDataBytes=${i.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const i=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(i==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=i;const s=this.LS.getItem(this.keys.modelMetadata);if(s!=null){const a=JSON.parse(s);n.format=a.format,n.generatedBy=a.generatedBy,n.convertedBy=a.convertedBy,a.signature!=null&&(n.signature=a.signature),a.userDefinedMetadata!=null&&(n.userDefinedMetadata=a.userDefinedMetadata),a.modelInitializer!=null&&(n.modelInitializer=a.modelInitializer),a.initializerSignature!=null&&(n.initializerSignature=a.initializerSignature),a.trainingConfig!=null&&(n.trainingConfig=a.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(o==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=Yke(o),n}}Tl.URL_SCHEME="localstorage://";const oU=t=>Y().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Tl.URL_SCHEME)?lIe(t.slice(Tl.URL_SCHEME.length)):null;Gn.registerSaveRouter(oU);Gn.registerLoadRouter(oU);function lIe(t){return new Tl(t)}class uIe{constructor(){E(Y().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),E(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=mu+Bs,r=Bs+rU;for(let i=0;i<this.LS.length;++i){const s=this.LS.key(i);if(s.startsWith(n)&&s.endsWith(r)){const o=oIe(s);e[o]=JSON.parse(this.LS.getItem(s))}}return e}async removeModel(e){e=aIe(e);const n=iU(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return sU(n),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iM="://";class us{constructor(){this.managers={}}static getInstance(){return us.instance==null&&(us.instance=new us),us.instance}static registerManager(e,n){E(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(iM)&&(e=e.slice(0,e.indexOf(iM))),E(e.length>0,()=>"scheme must not be an empty string.");const r=us.getInstance();E(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=us.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(us.getInstance().managers)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cIe{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!Y().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const i=this.functionRefs[r.data.index];i(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return _W(e)}}if(Y().get("IS_BROWSER")){Y().setPlatform("browser",new cIe);try{us.registerManager(Tl.URL_SCHEME,new uIe)}catch{}try{us.registerManager(Il.URL_SCHEME,new tIe)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fIe={importFetch:()=>require("node-fetch")};let hw;class hIe{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return Y().global.fetch!=null?Y().global.fetch(e,n):(hw==null&&(hw=fIe.importFetch()),hw(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}Y().get("IS_NODE")&&!Y().get("IS_BROWSER")&&Y().setPlatform("node",new hIe);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Re(t,e="float32",n){return e=e||"float32",xo(t),new Sn(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dIe(t,e){const n=L(t,"x","cast");if(!oke(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},i={dtype:e};return W.runKernel(Ip,r,i)}const me=H({cast_:dIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pIe(t){const n={x:L(t,"x","clone","string_or_numeric")};return W.runKernel(Bp,n)}const fl=H({clone_:pIe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mIe(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */KW();const gIe={buffer:Re,cast:me,clone:fl,print:mIe};Lke(gIe);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yIe(t,e){let n=L(t,"a","add"),r=L(e,"b","add");[n,r]=zt(n,r);const i={a:n,b:r};return W.runKernel(df,i)}const oe=H({add_:yIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vIe(t,e){let n=L(t,"a","floorDiv"),r=L(e,"b","floorDiv");[n,r]=zt(n,r);const i={a:n,b:r};return W.runKernel(Fp,i)}const aU=H({floorDiv_:vIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xIe(t,e){let n=L(t,"a","div"),r=L(e,"b","div");if([n,r]=zt(n,r),n.dtype==="int32"&&r.dtype==="int32")return aU(n,r);const i={a:n,b:r},s={};return W.runKernel(Op,i,s)}const ke=H({div_:xIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bIe(t,e){let n=L(t,"a","mul"),r=L(e,"b","mul");[n,r]=zt(n,r);const i={a:n,b:r};return W.runKernel(qp,i)}const z=H({mul_:bIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wIe(t){const e=L(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return W.runKernel($x,n)}else{const n={x:e};return W.runKernel(yx,n)}}const Hn=H({abs_:wIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SIe(t){const n={x:L(t,"x","acos")};return W.runKernel(xp,n)}const CIe=H({acos_:SIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ie(t){const n={x:L(t,"x","acosh")};return W.runKernel(bp,n)}const kIe=H({acosh_:$Ie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IIe(t,e=null,n=!1){const i={x:L(t,"x","all","bool")},s={axis:e,keepDims:n};return W.runKernel(RT,i,s)}const lU=H({all_:IIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TIe(t,e=null,n=!1){const i={x:L(t,"x","any","bool")},s={axis:e,keepDims:n};return W.runKernel(MT,i,s)}const I$=H({any_:TIe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EIe(t,e=0){const r={x:L(t,"x","argMax")},i={axis:e};return W.runKernel(vx,r,i)}const Bd=H({argMax_:EIe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NIe(t,e=0){const r={x:L(t,"x","argMin")},i={axis:e};return W.runKernel(xx,r,i)}const AIe=H({argMin_:NIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OIe(t){const n={x:L(t,"x","asin")};return W.runKernel(wp,n)}const PIe=H({asin_:OIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ie(t){const n={x:L(t,"x","asinh")};return W.runKernel(Sp,n)}const DIe=H({asinh_:_Ie});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RIe(t){const n={x:L(t,"x","atan")};return W.runKernel(Cp,n)}const MIe=H({atan_:RIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FIe(t,e){let n=L(t,"a","atan2"),r=L(e,"b","atan2");[n,r]=zt(n,r);const i={a:n,b:r};return W.runKernel(kp,i)}const LIe=H({atan2_:FIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BIe(t){const n={x:L(t,"x","atanh")};return W.runKernel($p,n)}const jIe=H({atanh_:BIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pm(t,e,n,r,i="NHWC",s){const o=t[3],a=[...e,o],l=wo(i);return $n(t,a,n,s,r,null,null,l)}function Ii(t,e,n,r,i,s,o="channelsLast"){const[a,l]=jd(e);let u;if(o==="channelsLast")u=[a,l,t[3],t[3]];else if(o==="channelsFirst")u=[a,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return $n(t,u,n,r,i,s,!1,o)}function bo(t,e,n,r,i,s,o="NDHWC"){const[a,l,u]=T$(e);let c,f;if(o==="NDHWC")f="channelsLast",c=[a,l,u,t[4],t[4]];else if(o==="NCDHW")f="channelsFirst",c=[a,l,u,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return ka(t,c,n,r,i,!1,f,s)}function $n(t,e,n,r,i,s,o=!1,a="channelsLast"){let[l,u,c,f]=[-1,-1,-1,-1];if(a==="channelsLast")[l,u,c,f]=t;else if(a==="channelsFirst")[l,f,u,c]=t;else throw new Error(`Unknown dataFormat ${a}`);const[h,d,,p]=e,[m,g]=jd(n),[y,v]=jd(r),x=Xu(h,y),b=Xu(d,v),{padInfo:w,outHeight:S,outWidth:C}=WIe(i,u,c,m,g,x,b,s,a),$=o?p*f:p;let k;return a==="channelsFirst"?k=[l,$,S,C]:a==="channelsLast"&&(k=[l,S,C,$]),{batchSize:l,dataFormat:a,inHeight:u,inWidth:c,inChannels:f,outHeight:S,outWidth:C,outChannels:$,padInfo:w,strideHeight:m,strideWidth:g,filterHeight:h,filterWidth:d,effectiveFilterHeight:x,effectiveFilterWidth:b,dilationHeight:y,dilationWidth:v,inShape:t,outShape:k,filterShape:e}}function ka(t,e,n,r,i,s=!1,o="channelsLast",a){let[l,u,c,f,h]=[-1,-1,-1,-1,-1];if(o==="channelsLast")[l,u,c,f,h]=t;else if(o==="channelsFirst")[l,h,u,c,f]=t;else throw new Error(`Unknown dataFormat ${o}`);const[d,p,m,,g]=e,[y,v,x]=T$(n),[b,w,S]=T$(r),C=Xu(d,b),$=Xu(p,w),k=Xu(m,S),{padInfo:I,outDepth:T,outHeight:A,outWidth:_}=UIe(i,u,c,f,y,v,x,C,$,k,a),D=s?g*h:g;let P;return o==="channelsFirst"?P=[l,D,T,A,_]:o==="channelsLast"&&(P=[l,T,A,_,D]),{batchSize:l,dataFormat:o,inDepth:u,inHeight:c,inWidth:f,inChannels:h,outDepth:T,outHeight:A,outWidth:_,outChannels:D,padInfo:I,strideDepth:y,strideHeight:v,strideWidth:x,filterDepth:d,filterHeight:p,filterWidth:m,effectiveFilterDepth:C,effectiveFilterHeight:$,effectiveFilterWidth:k,dilationDepth:b,dilationHeight:w,dilationWidth:S,inShape:t,outShape:P,filterShape:e}}function zIe(t,e,n,r,i){r==null&&(r=$2(t,e,n));const s=t[0],o=t[1],a=zd((s-e+2*r)/n+1,i),l=zd((o-e+2*r)/n+1,i);return[a,l]}function VIe(t,e,n,r,i,s){i==null&&(i=$2(t,e[0],r[0]));const o=[0,0,0,n];for(let a=0;a<3;a++)t[a]+2*i>=e[a]&&(o[a]=zd((t[a]-e[a]+2*i)/r[a]+1,s));return o}function $2(t,e,n,r=1){const i=Xu(e,r);return Math.floor((t[0]*(n-1)-n+i)/2)}function jd(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function T$(t){return typeof t=="number"?[t,t,t]:t}function Xu(t,e){return e<=1?t:t+(t-1)*(e-1)}function WIe(t,e,n,r,i,s,o,a,l){let u,c,f;if(typeof t=="number"){u={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const d=zIe([e,n],s,r,t,a);c=d[0],f=d[1]}else if(t==="same"){c=Math.ceil(e/r),f=Math.ceil(n/i);const h=Math.max(0,(c-1)*r+s-e),d=Math.max(0,(f-1)*i+o-n),p=Math.floor(h/2),m=h-p,g=Math.floor(d/2),y=d-g;u={top:p,bottom:m,left:g,right:y,type:"SAME"}}else if(t==="valid")u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((e-s+1)/r),f=Math.ceil((n-o+1)/i);else if(typeof t=="object"){const h=l==="channelsLast"?t[1][0]:t[2][0],d=l==="channelsLast"?t[1][1]:t[2][1],p=l==="channelsLast"?t[2][0]:t[3][0],m=l==="channelsLast"?t[2][1]:t[3][1];u={top:h,bottom:d,left:p,right:m,type:h===0&&d===0&&p===0&&m===0?"VALID":"EXPLICIT"},c=zd((e-s+h+d)/r+1,a),f=zd((n-o+p+m)/i+1,a)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:u,outHeight:c,outWidth:f}}function UIe(t,e,n,r,i,s,o,a,l,u,c){let f,h,d,p;if(t==="valid"&&(t=0),typeof t=="number"){f={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const g=VIe([e,n,r,1],[a,l,u],1,[i,s,o],t,c);h=g[0],d=g[1],p=g[2]}else if(t==="same"){h=Math.ceil(e/i),d=Math.ceil(n/s),p=Math.ceil(r/o);const m=(h-1)*i+a-e,g=(d-1)*s+l-n,y=(p-1)*o+u-r,v=Math.floor(m/2),x=m-v,b=Math.floor(g/2),w=g-b,S=Math.floor(y/2),C=y-S;f={top:b,bottom:w,left:S,right:C,front:v,back:x,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:f,outDepth:h,outHeight:d,outWidth:p}}function zd(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function El(t){const[e,n,r]=jd(t);return e===1&&n===1&&r===1}function Mn(t,e){return El(t)||El(e)}function Nl(t){return jd(t).every(e=>e>0)}function wo(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function mr(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")E(Oc(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(i=>{E(Oc(i),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${i}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GIe(t,e){const r={x:L(t,"x","reshape","string_or_numeric")},i={shape:e};return W.runKernel(ib,r,i)}const G=H({reshape_:GIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HIe(t,e,n,r,i){const s=L(t,"x","avgPool","float32"),o=1;E(Mn(n,o),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`);let a=s,l=!1;s.rank===3&&(l=!0,a=G(s,[1,s.shape[0],s.shape[1],s.shape[2]])),E(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),mr("avgPool",r,i);const u={x:a},c={filterSize:e,strides:n,pad:r,dimRoundingMode:i};let f=W.runKernel(bx,u,c);return f=me(f,s.dtype),l?G(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const k2=H({avgPool_:HIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KIe(t,e,n,r,i,s="NDHWC"){const o=L(t,"x","avgPool3d","float32");let a=o,l=!1;o.rank===4&&(l=!0,a=G(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),E(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),E(s==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),E(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),mr("avgPool3d",r,i);const u={x:a},c={filterSize:e,strides:n,pad:r,dimRoundingMode:i,dataFormat:s};let f=W.runKernel(wx,u,c);return f=me(f,a.dtype),l?G(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const qIe=H({avgPool3d_:KIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XIe(t,e=0){E(t.length>=1,()=>"Pass at least one tensor to concat");const n=ZW(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(s=>{if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${s.dtype}. `)}),n.length===1)return fl(n[0]);const r=n,i={axis:e};return W.runKernel(kx,r,i)}const cr=H({concat_:XIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YIe(t,e,n=!1,r=!1){let i=L(t,"a","matMul"),s=L(e,"b","matMul");[i,s]=zt(i,s);const o={a:i,b:s},a={transposeA:n,transposeB:r};return W.runKernel(Sx,o,a)}const Ye=H({matMul_:YIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZIe(t){const n={x:L(t,"x","sigmoid","float32")};return W.runKernel(sm,n)}const mf=H({sigmoid_:ZIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QIe(t,e,n){const r=L(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const i={x:r},s={begin:e,size:n};return W.runKernel(ub,i,s)}const ft=H({slice_:QIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JIe(t){const n={x:L(t,"x","tanh","float32")};return W.runKernel(fm,n)}const bb=H({tanh_:JIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eTe(t,e,n){const r=L(t,"x","batchToSpaceND"),i=e.reduce((a,l)=>a*l);E(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),E(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),E(r.shape[0]%i===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${i}`);const s={x:r},o={blockShape:e,crops:n};return W.runKernel(Cx,s,o)}const I2=H({batchToSpaceND_:eTe});function tTe(t){let e;return t.rank===0||t.rank===1?e=G(t,[1,1,1,t.size]):t.rank===2?e=G(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=G(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nTe(t,e,n,r,i,s){s==null&&(s=.001);const o=L(t,"x","batchNorm"),a=L(e,"mean","batchNorm"),l=L(n,"variance","batchNorm");let u;i!=null&&(u=L(i,"scale","batchNorm"));let c;r!=null&&(c=L(r,"offset","batchNorm")),E(a.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),E(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),E(u==null||a.rank===u.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const h={x:tTe(o),scale:u,offset:c,mean:a,variance:l},d={varianceEpsilon:s},p=W.runKernel(Dx,h,d);return G(p,o.shape)}const wb=H({batchNorm_:nTe});function rTe(t,e,n,r,i,s){const o=L(t,"x","batchNorm"),a=L(e,"mean","batchNorm"),l=L(n,"variance","batchNorm");let u;i!=null&&(u=L(i,"scale","batchNorm"));let c;return r!=null&&(c=L(r,"offset","batchNorm")),E(o.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${o.rank}.`),E(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),E(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),u!=null&&E(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${u.rank}.`),c!=null&&E(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${c.rank}.`),wb(o,a,l,c,u,s)}const iTe=H({batchNorm2d_:rTe});function sTe(t,e,n,r,i,s){const o=L(t,"x","batchNorm"),a=L(e,"mean","batchNorm"),l=L(n,"variance","batchNorm");let u;i!=null&&(u=L(i,"scale","batchNorm"));let c;return r!=null&&(c=L(r,"offset","batchNorm")),E(o.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${o.rank}.`),E(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),E(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),u!=null&&E(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${u.rank}.`),c!=null&&E(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${c.rank}.`),wb(o,a,l,c,u,s)}const oTe=H({batchNorm3d_:sTe});function aTe(t,e,n,r,i,s){const o=L(t,"x","batchNorm"),a=L(e,"mean","batchNorm"),l=L(n,"variance","batchNorm");let u;i!=null&&(u=L(i,"scale","batchNorm"));let c;return r!=null&&(c=L(r,"offset","batchNorm")),E(o.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${o.rank}.`),E(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),E(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),u!=null&&E(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${u.rank}.`),c!=null&&E(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${c.rank}.`),wb(o,a,l,c,u,s)}const lTe=H({batchNorm4d_:aTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uTe(t,e,n){const r=L(t,"x","bincount"),i=L(e,"weights","bincount");E(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),E(n>=0,()=>`size must be non-negative, but got ${n}.`),E(i.size===r.size||i.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${i.shape}.`);const s={x:r,weights:i},o={size:n};return W.runKernel(BT,s,o)}const cTe=H({bincount_:uTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fTe(t,e){let n=L(t,"broadcastTo","x");const r=n.shape;if(xo(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const u=n.shape.slice();for(;u.length<e.length;)u.unshift(1);n=G(n,u)}const i=n.shape,s=Array.from(e);for(let u=e.length-1;u>=0;u--)if(i[u]===e[u])s[u]=1;else if(n.shape[u]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(s.map((u,c)=>u>1?c:-1).filter(u=>u>=0).length===0)return fl(n);const a={x:n},l={reps:s};return W.runKernel(hm,a,l)}const Ph=H({broadcastTo_:fTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hTe(t){const n={x:L(t,"x","ceil","float32")};return W.runKernel(Tp,n)}const dTe=H({ceil_:hTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sb(t,e,n){xo(t),n=n||ff(e);const r={shape:t,value:e,dtype:n};return W.runKernel(e2,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pTe(t,e,n){const r=L(t,"x","clipByValue");if(E(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return Sb(r.shape,e,r.dtype);const i={x:r},s={clipValueMin:e,clipValueMax:n};return W.runKernel(Ep,i,s)}const Hr=H({clipByValue_:pTe});function mTe(t){return cr(t,0)}const gTe=H({concat1d_:mTe});function yTe(t,e){return cr(t,e)}const vTe=H({concat2d_:yTe});function xTe(t,e){return cr(t,e)}const bTe=H({concat3d_:xTe});function wTe(t,e){return cr(t,e)}const STe=H({concat4d_:wTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CTe(t,e,n,r,i="NHWC",s=[1,1],o){const a=L(t,"x","conv2d","float32"),l=L(e,"filter","conv2d","float32");let u=a,c=!1;a.rank===3&&(c=!0,u=G(a,[1,a.shape[0],a.shape[1],a.shape[2]])),E(u.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`),E(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),mr("conv2d",r,o);const f=i==="NHWC"?u.shape[3]:u.shape[1];E(f===l.shape[2],()=>`Error in conv2d: depth of input (${f}) must match input depth for filter ${l.shape[2]}.`),E(Mn(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),E(Nl(s),()=>"Error in conv2D: Dilated rates should be larger than 0."),E(Nl(n),()=>"Error in conv2D: Strides should be larger than 0.");const h={x:u,filter:l},d={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:o},p=W.runKernel(Ix,h,d);return c?G(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const Al=H({conv2d_:CTe});function $Te(t,e,n,r,i="NWC",s=1,o){const a=L(t,"x","conv1d"),l=L(e,"filter","conv1d");let u=a,c=!1;a.rank===2&&(c=!0,u=G(a,[1,a.shape[0],a.shape[1]])),E(u.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`),E(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),mr("conv1d",r,o),E(u.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${l.shape[1]}.`),E(Mn(n,s),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${s}'`),E(Nl(s),()=>"Error in conv1D: Dilated rates should be larger than 0."),E(Nl(n),()=>"Error in conv1D: Stride should be larger than 0."),E(i==="NWC",()=>`Error in conv1d: got dataFormat of ${i} but only NWC is currently supported.`);const f=G(l,[1,l.shape[0],l.shape[1],l.shape[2]]),h=G(u,[u.shape[0],1,u.shape[1],u.shape[2]]),g=Al(h,f,[1,n],r,"NHWC",[1,s],o);return c?G(g,[g.shape[2],g.shape[3]]):G(g,[g.shape[0],g.shape[2],g.shape[3]])}const uU=H({conv1d_:$Te});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kTe(t,e,n,r,i,s="NHWC",o){E(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let a=t,l=e,u=!1;e.rank===3&&(u=!0,l=G(e,[1,e.shape[0],e.shape[1],e.shape[2]]),a=[1,t[0],t[1],t[2]]),E(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),E(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),E(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const c=s==="NHWC"?a[3]:a[1],f=s==="NHWC"?l.shape[3]:l.shape[1];E(c===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[2]}.`),E(f===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${f}) must match output depth for filter ${n.shape[3]}.`),mr("conv2dDerInput",i,o);const h={dy:l,filter:n},d={strides:r,pad:i,dataFormat:s,dimRoundingMode:o,inputShape:a},p=W.runKernel(Tx,h,d);return u?G(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const T2=H({conv2DBackpropInput_:kTe});function ITe(t,e,n,r,i,s){const o=L(t,"x","conv2dTranspose"),a=L(e,"filter","conv2dTranspose");return T2(n,o,a,r,i,"NHWC",s)}const cU=H({conv2dTranspose_:ITe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TTe(t,e,n,r,i="NDHWC",s=[1,1,1]){const o=L(t,"x","conv3d"),a=L(e,"filter","conv3d");let l=o,u=!1;o.rank===4&&(u=!0,l=G(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),E(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),E(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),E(l.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${a.shape[3]}.`),E(Mn(n,s),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),E(i==="NDHWC",()=>`Error in conv3d: got dataFormat of ${i} but only NDHWC is currently supported.`),E(Nl(s),()=>"Error in conv3D: Dilated rates should be larger than 0."),E(Nl(n),()=>"Error in conv3D: Strides should be larger than 0.");const c={x:l,filter:a},f={strides:n,pad:r,dataFormat:i,dilations:s},h=W.runKernel(Ex,c,f);return u?G(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const ETe=H({conv3d_:TTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NTe(t,e,n,r,i){E(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let s=t,o=e,a=!1;e.rank===4&&(a=!0,o=G(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),s=[1,t[0],t[1],t[2],t[3]]);const l=s[4],u=o.shape[4];E(s.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${s.length}.`),E(o.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${o.rank}`),E(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),E(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),E(u===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${n.shape[4]}.`);const c={dy:o,filter:n},f={pad:i,strides:r,inputShape:s},h=W.runKernel(UT,c,f);return a?G(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const fU=H({conv3DBackpropInput_:NTe});function ATe(t,e,n,r,i){const s=L(t,"x","conv3dTranspose"),o=L(e,"filter","conv3dTranspose");return fU(n,s,o,r,i)}const OTe=H({conv3dTranspose_:ATe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PTe(t){const n={x:L(t,"x","cos","float32")};return W.runKernel(Np,n)}const E2=H({cos_:PTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Te(t){const n={x:L(t,"x","cosh","float32")};return W.runKernel(Ap,n)}const hU=H({cosh_:_Te});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DTe(t,e=0,n=!1,r=!1){const s={x:L(t,"x","cumprod")},o={axis:e,exclusive:n,reverse:r};return W.runKernel(GT,s,o)}const E$=H({cumprod_:DTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RTe(t,e=0,n=!1,r=!1){const s={x:L(t,"x","cumsum")},o={axis:e,exclusive:n,reverse:r};return W.runKernel(Nx,s,o)}const dU=H({cumsum_:RTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MTe(t,e,n,r=!1){const i=L(t,"x","denseBincount"),s=L(e,"weights","denseBincount");E(i.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${i.dtype}`),E(i.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${i.rank}.`),E(n>=0,()=>`size must be non-negative, but got ${n}.`),E(s.size===i.size||s.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${i.shape}, weights shape: ${s.shape}.`);const o={x:i,weights:s},a={size:n,binaryOutput:r};return W.runKernel(KT,o,a)}const sM=H({denseBincount_:MTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FTe(t,e,n="NHWC"){const r=L(t,"x","depthToSpace","float32"),i=n==="NHWC"?r.shape[1]:r.shape[2],s=n==="NHWC"?r.shape[2]:r.shape[3],o=n==="NHWC"?r.shape[3]:r.shape[1];E(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),E(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e}  for depthToSpace with input shape
    ${r.shape}`),E(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${e} for depthToSpace with input shape
        ${r.shape}`),E(o%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${o} for depthToSpace with input shape ${r.shape}`);const a={x:r},l={blockSize:e,dataFormat:n};return W.runKernel(qT,a,l)}const LTe=H({depthToSpace_:FTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BTe(t,e,n,r,i="NHWC",s=[1,1],o){const a=L(t,"x","depthwiseConv2d","float32"),l=L(e,"filter","depthwiseConv2d","float32");let u=a,c=!1;a.rank===3&&(c=!0,u=G(a,[1,a.shape[0],a.shape[1],a.shape[2]])),E(u.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`),E(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const f=i==="NHWC"?u.shape[3]:u.shape[1];E(f===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${f}) must match the inChannels dimension in filter ${l.shape[2]}.`),mr("depthwiseConv2d",r,o);const h={x:u,filter:l},d={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:o},p=W.runKernel(Ax,h,d);return c?G(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const N2=H({depthwiseConv2d_:BTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jTe(t,e,n,r,i=[1,1],s="NHWC"){const o=L(t,"x","dilation2d"),a=L(e,"filter","dilation2d");E(o.rank===3||o.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${o.rank}.`),E(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),E(s==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${s}`);let l=o,u=!1;o.rank===3&&(l=G(o,[1,o.shape[0],o.shape[1],o.shape[2]]),u=!0),E(l.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${a.shape[2]}`);const c={x:l,filter:a},f={strides:n,pad:r,dilations:i},h=W.runKernel(Ox,c,f);return u?G(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const zTe=H({dilation2d_:jTe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rc(t,e){const n=t.length,r=[];for(let i=0;i<n;i++){const s=n-1-i,o=t[s]||1;(e[e.length-1-i]||1)>1&&o===1&&r.unshift(s)}return r}function on(t,e){const n=[];for(let r=0;r<e.length;r++){const i=t[t.length-r-1],s=e.length-r-1,o=e[s];(i==null||i===1&&o>1)&&n.unshift(s)}return n}function _e(t,e){const n=Math.max(t.length,e.length),r=new Array(n);for(let i=0;i<n;i++){let s=t[t.length-i-1];s==null&&(s=1);let o=e[e.length-i-1];if(o==null&&(o=1),s===1)r[n-i-1]=o;else if(o===1)r[n-i-1]=s;else if(s!==o){const a=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(a)}else r[n-i-1]=s}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VTe(t,e){let n=L(t,"a","equal","string_or_numeric"),r=L(e,"b","equal","string_or_numeric");[n,r]=zt(n,r),_e(n.shape,r.shape);const i={a:n,b:r};return W.runKernel(Px,i)}const Es=H({equal_:VTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WTe(t,e,n){const r=L(e,"a","where"),i=L(n,"b","where"),s=L(t,"condition","where","bool"),o=_e(_e(s.shape,r.shape),i.shape),a=Ph(s,o),l=Ph(r,o),u=Ph(i,o),c={condition:a,t:l,e:u};return W.runKernel(lb,c)}const Jn=H({where_:WTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UTe(t){const n={x:L(t,"x","zerosLike")};return W.runKernel(gb,n)}const Ge=H({zerosLike_:UTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GTe(t,e){let n=L(t,"a","div"),r=L(e,"b","div");[n,r]=zt(n,r);const i=ke(n,r),s=Ge(i),o=Es(r,s);return Jn(o,s,i)}const HTe=H({divNoNan_:GTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KTe(t,e){const n=L(t,"t1","dot"),r=L(e,"t2","dot");E((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const i=n.rank===1?n.size:n.shape[1],s=r.rank===1?r.size:r.shape[0];if(E(i===s,()=>`Error in dot: inner dimensions of inputs must match, but got ${i} and ${s}.`),n.rank===1&&r.rank===1){const o=G(n,[1,-1]),a=G(r,[-1,1]),l=Ye(o,a);return G(l,[])}else if(n.rank===1&&r.rank===2){const o=G(n,[1,-1]),a=G(r,[r.shape[0],r.shape[1]]),l=Ye(o,a);return G(l,[l.size])}else if(n.rank===2&&r.rank===1){const o=G(r,[-1,1]),a=Ye(n,o);return G(a,[a.size])}else{const o=G(r,[r.shape[0],r.shape[1]]);return Ye(n,o)}}const qTe=H({dot_:KTe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XTe(t,...e){const n=e.map((i,s)=>L(i,`tensors${s}`,"einsum")),r={equation:t};return W.runKernel(ZT,n,r)}const Zf=H({einsum_:XTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YTe(t){const n={x:L(t,"x","elu","float32")};return W.runKernel(Pp,n)}const Cb=H({elu_:YTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZTe(t){let e=L(t,"x","erf");E(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=me(e,"float32"));const n={x:e};return W.runKernel(_p,n)}const pU=H({erf_:ZTe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A2(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function mU(t,e,n){const r=t.length+e.length,i=[];let s=0,o=0;for(let a=0;a<r;a++)n.indexOf(a)===-1?i.push(t[s++]):i.push(e[o++]);return i}function yn(t,e){const n=[],r=t.length;for(let s=0;s<r;s++)e.indexOf(s)===-1&&n.push(t[s]);const i=e.map(s=>t[s]);return[n,i]}function Yt(t,e){const n=e.map(r=>1);return mU(t,n,e)}function kn(t,e,n){E(A2(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function Nt(t,e){if(A2(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function Ia(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function Vt(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QTe(t,e=null,n=!1){const i={x:L(t,"x","max")},s={reductionIndices:e,keepDims:n};return W.runKernel(Ux,i,s)}const Zi=H({max_:QTe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JTe(t,e=null,n=!1){const i={x:L(t,"x","min")},s={axis:e,keepDims:n};return W.runKernel(qx,i,s)}const Fv=H({min_:JTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e2e(t,e){let n=L(t,"base","pow"),r=L(e,"exp","pow");[n,r]=zt(n,r);const i={a:n,b:r};return W.runKernel(Xp,i)}const Ol=H({pow_:e2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ze(t,e){if((Si(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&Si(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return xb(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t2e(t){const n={x:L(t,"x","sqrt","float32")};return W.runKernel(am,n)}const Rn=H({sqrt_:t2e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n2e(t){const e=L(t,"x","square"),n={};return W.runKernel("Square",{x:e},n)}const gt=H({square_:n2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r2e(t,e=null,n=!1){let r=L(t,"x","sum");r.dtype==="bool"&&(r=me(r,"int32"));const i={x:r},s={axis:e,keepDims:n};return W.runKernel(cb,i,s)}const $e=H({sum_:r2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i2e(t,e="euclidean",n=null,r=!1){t=L(t,"x","norm");const i=gU(t,e,n);let s=i.shape;if(r){const o=Me(n,t.shape);s=Yt(i.shape,o)}return G(i,s)}function gU(t,e,n=null){if(t.rank===0)return Hn(t);if(t.rank!==1&&n===null)return gU(G(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return $e(Hn(t),n);if(e===1/0)return Zi(Hn(t),n);if(e===-1/0)return Fv(Hn(t),n);if(e==="euclidean"||e===2)return Rn($e(Ol(Hn(t),Ze(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return Zi($e(Hn(t),n[0]),n[1]-1);if(e===1/0)return Zi($e(Hn(t),n[1]),n[0]);if(e===-1/0)return Fv($e(Hn(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return Rn($e(gt(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const $b=H({norm_:i2e});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s2e(t,e=null,n=!1){return $b(t,"euclidean",e,n)}const o2e=H({euclideanNorm_:s2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a2e(t){const n={x:L(t,"x","exp")};return W.runKernel(Dp,n)}const Ns=H({exp_:a2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l2e(t,e=0){const n=L(t,"x","expandDims","string_or_numeric");E(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},i={dim:e};return W.runKernel(_x,r,i)}const or=H({expandDims_:l2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u2e(t){const n={x:L(t,"x","expm1")};return W.runKernel(Rp,n)}const c2e=H({expm1_:u2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f2e(t,e){const n=L(t,"x","tile","string_or_numeric");E(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},i={reps:e};return W.runKernel(hm,r,i)}const Ki=H({tile_:f2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h2e(t,e,n,r="float32"){e==null&&(e=t);const i=Re([t,e],r),s=t<=e?t:e;for(let a=0;a<s;++a)i.set(1,a,a);const o=G(i.toTensor(),[t,e]);if(n==null)return o;if(n.length===1)return Ki(or(o,0),[n[0],1,1]);if(n.length===2)return Ki(or(or(o,0),0),[n[0],n[1],1,1]);if(n.length===3)return Ki(or(or(or(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const yU=H({eye_:h2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d2e(t){const n={x:L(t,"x","floor","float32")};return W.runKernel(Mp,n)}const kb=H({floor_:d2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p2e(t,e,n=0,r=0){const i=L(t,"x","gather"),s=L(e,"indices","gather","int32"),o={x:i,indices:s},a={axis:n,batchDims:r};return W.runKernel(Rx,o,a)}const O2=H({gather_:p2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m2e(t,e){let n=L(t,"a","greater","string_or_numeric"),r=L(e,"b","greater","string_or_numeric");[n,r]=zt(n,r),_e(n.shape,r.shape);const i={a:n,b:r};return W.runKernel(Mx,i)}const Xr=H({greater_:m2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g2e(t,e){let n=L(t,"a","greaterEqual","string_or_numeric"),r=L(e,"b","greaterEqual","string_or_numeric");[n,r]=zt(n,r),_e(n.shape,r.shape);const i={a:n,b:r};return W.runKernel(Lp,i)}const ql=H({greaterEqual_:g2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y2e(t){const n={input:L(t,"input","imag")};return W.runKernel(r2,n)}const P2=H({imag_:y2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v2e(t){const n={x:L(t,"x","isFinite")};return W.runKernel(jp,n)}const x2e=H({isFinite_:v2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b2e(t){const n={x:L(t,"x","isInf")};return W.runKernel(zp,n)}const w2e=H({isInf_:b2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S2e(t){const n={x:L(t,"x","isNaN")};return W.runKernel(Vp,n)}const C2e=H({isNaN_:S2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $2e(t,e=.2){const r={x:L(t,"x","leakyRelu")},i={alpha:e};return W.runKernel(Fx,r,i)}const _2=H({leakyRelu_:$2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k2e(t,e){let n=L(t,"a","less","string_or_numeric"),r=L(e,"b","less","string_or_numeric");[n,r]=zt(n,r),_e(n.shape,r.shape);const i={a:n,b:r};return W.runKernel(Lx,i)}const Lv=H({less_:k2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I2e(t,e){let n=L(t,"a","lessEqual","string_or_numeric"),r=L(e,"b","lessEqual","string_or_numeric");[n,r]=zt(n,r),_e(n.shape,r.shape);const i={a:n,b:r};return W.runKernel(Bx,i)}const gf=H({lessEqual_:I2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T2e(t,e=5,n=1,r=1,i=.5){const s=L(t,"x","localResponseNormalization");E(s.rank===4||s.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${s.rank}.`),E(Oc(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let o=s,a=!1;s.rank===3&&(a=!0,o=G(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const l={x:o},u={depthRadius:e,bias:n,alpha:r,beta:i},c=W.runKernel(Wx,l,u);return a?G(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const E2e=H({localResponseNormalization_:T2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N2e(t){const n={x:L(t,"x","log","float32")};return W.runKernel(Wp,n)}const As=H({log_:N2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A2e(t){const n={x:L(t,"x","log1p")};return W.runKernel(Up,n)}const vU=H({log1p_:A2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O2e(t,e){E(h$(t),()=>"The f passed in variableGrads(f) must be a function"),E(e==null||Array.isArray(e)&&e.every(u=>u instanceof Mv),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const u in W.registeredVariables)e.push(W.registeredVariables[u])}const r=n?e.filter(u=>!u.trainable):null,i=e.length;e=e.filter(u=>u.trainable),E(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${i} variables is trainable.`);const s=!0,{value:o,grads:a}=W.gradients(t,e,null,s);E(a.some(u=>u!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),E(o.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${o.rank} tensor`);const l={};return e.forEach((u,c)=>{a[c]!=null&&(l[u.name]=a[c])}),r!=null&&r.forEach(u=>l[u.name]=null),{value:o,grads:l}}function Mc(t){return W.customGrad(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P2e(t){const n={x:L(t,"x","neg")};return W.runKernel(Yx,n)}const jt=H({neg_:P2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _2e(t){const n={x:L(t,"x","softplus")};return W.runKernel(om,n)}const mm=H({softplus_:_2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D2e(t){const e=L(t,"x","logSigmoid");return Mc(r=>({value:jt(mm(jt(r))),gradFunc:o=>z(o,mf(jt(r)))}))(e)}const R2e=H({logSigmoid_:D2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M2e(t,e){let n=L(t,"a","sub"),r=L(e,"b","sub");[n,r]=zt(n,r);const i={a:n,b:r};return W.runKernel(um,i)}const Ie=H({sub_:M2e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F2e(t,e=-1){const n=L(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return Mc((i,s)=>{const a=Zi(i,e,!0),l=Ie(i,a),u=Ie(me(l,"float32"),As($e(Ns(l),e,!0)));return s([u]),{value:u,gradFunc:(f,h)=>{const[d]=h,p=!0,m=Ns(d);return Ie(f,z($e(f,e,p),m))}}})(n)}const xU=H({logSoftmax_:F2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L2e(t,e=null,n=!1){const r=L(t,"x","logSumExp"),i=Me(e,r.shape),s=Zi(r,i,!0),o=Ie(r,s),a=Ns(o),l=$e(a,i),u=As(l),c=oe(G(s,u.shape),u);if(n){const f=Yt(c.shape,i);return G(c,f)}return c}const bU=H({logSumExp_:L2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B2e(t,e){const n=L(t,"a","logicalAnd","bool"),r=L(e,"b","logicalAnd","bool");_e(n.shape,r.shape);const i={a:n,b:r};return W.runKernel(jx,i)}const co=H({logicalAnd_:B2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j2e(t){const n={x:L(t,"x","logicalNot","bool")};return W.runKernel(zx,n)}const D2=H({logicalNot_:j2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z2e(t,e){const n=L(t,"a","logicalOr","bool"),r=L(e,"b","logicalOr","bool");_e(n.shape,r.shape);const i={a:n,b:r};return W.runKernel(Vx,i)}const wU=H({logicalOr_:z2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V2e(t,e){const n=L(t,"a","logicalXor","bool"),r=L(e,"b","logicalXor","bool");return _e(n.shape,r.shape),co(wU(t,e),D2(co(t,e)))}const W2e=H({logicalXor_:V2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U2e(t,e,n,r,i){const s=L(t,"x","maxPool"),o=1;let a=s,l=!1;s.rank===3&&(l=!0,a=G(s,[1,s.shape[0],s.shape[1],s.shape[2]])),E(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),E(Mn(n,o),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),mr("maxPool",r,i);const u={x:a},c={filterSize:e,strides:n,pad:r,dimRoundingMode:i},f=W.runKernel(Gx,u,c);return l?G(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const R2=H({maxPool_:U2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G2e(t,e=[1,1,1],n,r,i,s="NDHWC"){const o=L(t,"x","maxPool3d");let a=o,l=!1;o.rank===4&&(l=!0,a=G(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),E(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),E(s==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),mr("maxPool3d",r,i);const u={x:a},c={filterSize:e,strides:n,pad:r,dimRoundingMode:i,dataFormat:s},f=W.runKernel(Hx,u,c);return l?G(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const H2e=H({maxPool3d_:G2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K2e(t,e){let n=L(t,"a","maximum"),r=L(e,"b","maximum");[n,r]=zt(n,r),n.dtype==="bool"&&(n=me(n,"int32"),r=me(r,"int32")),_e(n.shape,r.shape);const i={a:n,b:r};return W.runKernel(Gp,i)}const Ta=H({maximum_:K2e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q2e(t,e=null,n=!1){const i={x:L(t,"x","mean")},s={axis:e,keepDims:n};return W.runKernel(Kx,i,s)}const Xt=H({mean_:q2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hn(t,e="float32"){if(xo(t),e==="complex64"){const r=hn(t,"float32"),i=hn(t,"float32");return Dc(r,i)}const n=Dn(J(t),e);return W.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ea(t,e="float32"){if(xo(t),e==="complex64"){const r=Ea(t,"float32"),i=hn(t,"float32");return Dc(r,i)}const n=OT(J(t),e);return W.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X2e(t,e){let n=L(t,"a","minimum"),r=L(e,"b","minimum");[n,r]=zt(n,r),n.dtype==="bool"&&(n=me(n,"int32"),r=me(r,"int32")),_e(n.shape,r.shape);const i={a:n,b:r};return W.runKernel(Hp,i)}const Vd=H({minimum_:X2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y2e(t,e,n){E(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=L(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");E(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const i=n==="reflect"?1:0;for(let a=0;a<r.rank;a++)E(e[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),E(e[a][0]>=0&&e[a][0]<=r.shape[a]-i&&e[a][1]>=0&&e[a][1]<=r.shape[a]-i,()=>`Padding in dimension ${a} cannot be greater than or equal to ${r.shape[a]-i} or less than 0 for input of shape ${r.shape}`);const s={paddings:e,mode:n},o={x:r};return W.runKernel(Xx,o,s)}const Z2e=H({mirrorPad_:Y2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q2e(t,e){let n=L(t,"a","mod"),r=L(e,"b","mod");[n,r]=zt(n,r);const i={a:n,b:r};return W.runKernel(Kp,i)}const J2e=H({mod_:Q2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eEe(t,e=null,n=!1){t=L(t,"x","moments");const r=Me(e,t.shape),i=Xt(t,r,n);let s=i.shape;n||(s=Yt(i.shape,r));const o=gt(Ie(me(t,"float32"),G(i,s))),a=Xt(o,r,n);return{mean:i,variance:a}}const M2=H({moments_:eEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tEe(t,e){let n=L(t,"a","notEqual","string_or_numeric"),r=L(e,"b","notEqual","string_or_numeric");[n,r]=zt(n,r),_e(n.shape,r.shape);const i={a:n,b:r};return W.runKernel(Zx,i)}const Bv=H({notEqual_:tEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nEe(t,e,n=1,r=0,i="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const o={indices:L(t,"indices","oneHot","int32")},a={dtype:i,depth:e,onValue:n,offValue:r};return W.runKernel(Jx,o,a)}const SU=H({oneHot_:nEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rEe(t){const n={x:L(t,"x","onesLike")};return W.runKernel(Qx,n)}const Ci=H({onesLike_:rEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iEe(t,e,n=0){const r=L(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const i={paddings:e,constantValue:n},s={x:r};return W.runKernel(tb,s,i)}const F2=H({pad_:iEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sEe(t,e,n){const r=L(t,"x","spaceToBatchND");E(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),E(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),E(r.shape.reduce((o,a,l)=>l>0&&l<=e.length?o&&(a+n[l-1][0]+n[l-1][1])%e[l-1]===0:o,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const i={x:r},s={blockShape:e,paddings:n};return W.runKernel(fb,i,s)}const L2=H({spaceToBatchND_:sEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oEe(t,e,n,r,i,s,o){i==null&&(i=[1,1]),s==null&&(s=1),r===0&&(r="valid");const a=L(t,"x","maxPool");let l=a,u=!1;a.rank===3&&(u=!0,l=G(a,[1,a.shape[0],a.shape[1],a.shape[2]])),E(Mn(s,i),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${s} and dilations '${i}'`);const c=Ii(l.shape,e,s,i,r),f=[c.dilationHeight,c.dilationWidth];let h;r==="same"?h=lEe([c.filterHeight,c.filterWidth],f):h=[[0,0],[0,0]];const d=f[0]===1&&f[1]===1,[p,m]=aEe([c.inHeight,c.inWidth],f,h),g=d?r:"valid",y=d?l:L2(l,f,p),x=(n==="avg"?()=>k2(y,e,s,g,o):()=>R2(y,e,s,g,o))(),b=d?x:I2(x,f,m);return u?G(b,[b.shape[1],b.shape[2],b.shape[3]]):b}function aEe(t,e,n){const r=n.map(c=>c[0]),i=n.map(c=>c[1]),s=t.concat(r,i),o=e.map((c,f)=>(c-s[f]%c)%c),a=i.map((c,f)=>c+o[f]),l=e.map((c,f)=>[r[f],a[f]]),u=e.map((c,f)=>[0,o[f]]);return[l,u]}function lEe(t,e){const r=t.map((o,a)=>o+(o-1)*(e[a]-1)).map(o=>o-1),i=r.map(o=>Math.floor(o/2)),s=r.map((o,a)=>o-i[a]);return r.map((o,a)=>[i[a],s[a]])}const uEe=H({pool_:oEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cEe(t,e){const n=L(t,"x","prelu"),r=L(e,"alpha","prelu"),i={x:n,alpha:r};return W.runKernel(nb,i)}const B2=H({prelu_:cEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fEe(t,e=null,n=!1){let r=L(t,"x","prod");r.dtype==="bool"&&(r=me(r,"int32"));const i={x:r},s={axis:e,keepDims:n};return W.runKernel(rb,i,s)}const hEe=H({prod_:fEe});var j2={exports:{}};j2.exports;(function(t){(function(e,n,r){function i(l){var u=this,c=a();u.next=function(){var f=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=f-(u.c=f|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function s(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function o(l,u){var c=new i(l),f=u&&u.state,h=c.next;return h.int32=function(){return c.next()*4294967296|0},h.double=function(){return h()+(h()*2097152|0)*11102230246251565e-32},h.quick=h,f&&(typeof f=="object"&&s(f,c),h.state=function(){return s(c,{})}),h}function a(){var l=4022871197,u=function(c){c=String(c);for(var f=0;f<c.length;f++){l+=c.charCodeAt(f);var h=.02519603282416938*l;l=h>>>0,h-=l,h*=l,l=h>>>0,h-=l,l+=h*4294967296}return(l>>>0)*23283064365386963e-26};return u}n&&n.exports?n.exports=o:this.alea=o})(Gi,t)})(j2);var dEe=j2.exports,z2={exports:{}};z2.exports;(function(t){(function(e,n,r){function i(a){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var f=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^f^f>>>8},a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function s(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function o(a,l){var u=new i(a),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var h=u.next()>>>11,d=(u.next()>>>0)/4294967296,p=(h+d)/(1<<21);while(p===0);return p},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&s(c,u),f.state=function(){return s(u,{})}),f}n&&n.exports?n.exports=o:this.xor128=o})(Gi,t)})(z2);var pEe=z2.exports,V2={exports:{}};V2.exports;(function(t){(function(e,n,r){function i(a){var l=this,u="";l.next=function(){var f=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(f^f<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function s(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function o(a,l){var u=new i(a),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var h=u.next()>>>11,d=(u.next()>>>0)/4294967296,p=(h+d)/(1<<21);while(p===0);return p},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&s(c,u),f.state=function(){return s(u,{})}),f}n&&n.exports?n.exports=o:this.xorwow=o})(Gi,t)})(V2);var mEe=V2.exports,W2={exports:{}};W2.exports;(function(t){(function(e,n,r){function i(a){var l=this;l.next=function(){var c=l.x,f=l.i,h,d;return h=c[f],h^=h>>>7,d=h^h<<24,h=c[f+1&7],d^=h^h>>>10,h=c[f+3&7],d^=h^h>>>3,h=c[f+4&7],d^=h^h<<7,h=c[f+7&7],h=h^h<<13,d^=h^h<<9,c[f]=d,l.i=f+1&7,d};function u(c,f){var h,d=[];if(f===(f|0))d[0]=f;else for(f=""+f,h=0;h<f.length;++h)d[h&7]=d[h&7]<<15^f.charCodeAt(h)+d[h+1&7]<<13;for(;d.length<8;)d.push(0);for(h=0;h<8&&d[h]===0;++h);for(h==8?d[7]=-1:d[h],c.x=d,c.i=0,h=256;h>0;--h)c.next()}u(l,a)}function s(a,l){return l.x=a.x.slice(),l.i=a.i,l}function o(a,l){a==null&&(a=+new Date);var u=new i(a),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var h=u.next()>>>11,d=(u.next()>>>0)/4294967296,p=(h+d)/(1<<21);while(p===0);return p},f.int32=u.next,f.quick=f,c&&(c.x&&s(c,u),f.state=function(){return s(u,{})}),f}n&&n.exports?n.exports=o:this.xorshift7=o})(Gi,t)})(W2);var gEe=W2.exports,U2={exports:{}};U2.exports;(function(t){(function(e,n,r){function i(a){var l=this;l.next=function(){var c=l.w,f=l.X,h=l.i,d,p;return l.w=c=c+1640531527|0,p=f[h+34&127],d=f[h=h+1&127],p^=p<<13,d^=d<<17,p^=p>>>15,d^=d>>>12,p=f[h]=p^d,l.i=h,p+(c^c>>>16)|0};function u(c,f){var h,d,p,m,g,y=[],v=128;for(f===(f|0)?(d=f,f=null):(f=f+"\0",d=0,v=Math.max(v,f.length)),p=0,m=-32;m<v;++m)f&&(d^=f.charCodeAt((m+32)%f.length)),m===0&&(g=d),d^=d<<10,d^=d>>>15,d^=d<<4,d^=d>>>13,m>=0&&(g=g+1640531527|0,h=y[m&127]^=d+g,p=h==0?p+1:0);for(p>=128&&(y[(f&&f.length||0)&127]=-1),p=127,m=4*128;m>0;--m)d=y[p+34&127],h=y[p=p+1&127],d^=d<<13,h^=h<<17,d^=d>>>15,h^=h>>>12,y[p]=d^h;c.w=g,c.X=y,c.i=p}u(l,a)}function s(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function o(a,l){a==null&&(a=+new Date);var u=new i(a),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var h=u.next()>>>11,d=(u.next()>>>0)/4294967296,p=(h+d)/(1<<21);while(p===0);return p},f.int32=u.next,f.quick=f,c&&(c.X&&s(c,u),f.state=function(){return s(u,{})}),f}n&&n.exports?n.exports=o:this.xor4096=o})(Gi,t)})(U2);var yEe=U2.exports,G2={exports:{}};G2.exports;(function(t){(function(e,n,r){function i(a){var l=this,u="";l.next=function(){var f=l.b,h=l.c,d=l.d,p=l.a;return f=f<<25^f>>>7^h,h=h-d|0,d=d<<24^d>>>8^p,p=p-f|0,l.b=f=f<<20^f>>>12^h,l.c=h=h-d|0,l.d=d<<16^h>>>16^p,l.a=p-f|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):u+=a;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function s(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function o(a,l){var u=new i(a),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var h=u.next()>>>11,d=(u.next()>>>0)/4294967296,p=(h+d)/(1<<21);while(p===0);return p},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&s(c,u),f.state=function(){return s(u,{})}),f}n&&n.exports?n.exports=o:this.tychei=o})(Gi,t)})(G2);var vEe=G2.exports,CU={exports:{}};const xEe={},bEe=Object.freeze(Object.defineProperty({__proto__:null,default:xEe},Symbol.toStringTag,{value:"Module"})),wEe=G8(bEe);(function(t){(function(e,n,r){var i=256,s=6,o=52,a="random",l=r.pow(i,s),u=r.pow(2,o),c=u*2,f=i-1,h;function d(b,w,S){var C=[];w=w==!0?{entropy:!0}:w||{};var $=y(g(w.entropy?[b,x(n)]:b??v(),3),C),k=new p(C),I=function(){for(var T=k.g(s),A=l,_=0;T<u;)T=(T+_)*i,A*=i,_=k.g(1);for(;T>=c;)T/=2,A/=2,_>>>=1;return(T+_)/A};return I.int32=function(){return k.g(4)|0},I.quick=function(){return k.g(4)/4294967296},I.double=I,y(x(k.S),n),(w.pass||S||function(T,A,_,D){return D&&(D.S&&m(D,k),T.state=function(){return m(k,{})}),_?(r[a]=T,A):T})(I,$,"global"in w?w.global:this==r,w.state)}function p(b){var w,S=b.length,C=this,$=0,k=C.i=C.j=0,I=C.S=[];for(S||(b=[S++]);$<i;)I[$]=$++;for($=0;$<i;$++)I[$]=I[k=f&k+b[$%S]+(w=I[$])],I[k]=w;(C.g=function(T){for(var A,_=0,D=C.i,P=C.j,R=C.S;T--;)A=R[D=f&D+1],_=_*i+R[f&(R[D]=R[P=f&P+A])+(R[P]=A)];return C.i=D,C.j=P,_})(i)}function m(b,w){return w.i=b.i,w.j=b.j,w.S=b.S.slice(),w}function g(b,w){var S=[],C=typeof b,$;if(w&&C=="object")for($ in b)try{S.push(g(b[$],w-1))}catch{}return S.length?S:C=="string"?b:b+"\0"}function y(b,w){for(var S=b+"",C,$=0;$<S.length;)w[f&$]=f&(C^=w[f&$]*19)+S.charCodeAt($++);return x(w)}function v(){try{var b;return h&&(b=h.randomBytes)?b=b(i):(b=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(b)),x(b)}catch{var w=e.navigator,S=w&&w.plugins;return[+new Date,e,S,e.screen,x(n)]}}function x(b){return String.fromCharCode.apply(0,b)}if(y(r.random(),n),t.exports){t.exports=d;try{h=wEe}catch{}}else r["seed"+a]=d})(typeof self<"u"?self:Gi,[],Math)})(CU);var SEe=CU.exports,CEe=dEe,$Ee=pEe,kEe=mEe,IEe=gEe,TEe=yEe,EEe=vEe,Xl=SEe;Xl.alea=CEe;Xl.xor128=$Ee;Xl.xorwow=kEe;Xl.xorshift7=IEe;Xl.xor4096=TEe;Xl.tychei=EEe;var H2=Xl;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $U{constructor(e,n,r,i,s){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const o=s||Math.random();this.random=H2.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const i=this.nextVal;return this.nextVal=NaN,i}let e,n,r=!1;for(;!r;){let i,s,o;do i=2*this.random()-1,s=2*this.random()-1,o=i*i+s*s;while(o>=1||o===0);const a=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*i*a,n=this.mean+this.stdDev*s*a,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class NEe{constructor(e=0,n=1,r,i){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,i==null&&(i=Math.random()),typeof i=="number"&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=H2.alea(i)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AEe(t,e=0,n=1,r,i){if(xo(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const s=new $U(e,n,r,!1,i),o=Re(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=s.nextValue();return o.toTensor()}const OEe=H({randomNormal_:AEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PEe(t,e=0,n=1,r="float32",i){xo(t);const s=Re(t,r),o=new NEe(e,n,null,i);for(let a=0;a<s.values.length;a++)s.values[a]=o.nextValue();return s.toTensor()}const gm=H({randomUniform_:PEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wd(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const i={start:t,stop:e,step:n,dtype:r};return W.runKernel(c2,{},i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ee(t){const n={input:L(t,"input","real")};return W.runKernel(f2,n)}const jv=H({real_:_Ee});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DEe(t){const n={x:L(t,"x","reciprocal")};return W.runKernel(Yp,n)}const REe=H({reciprocal_:DEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MEe(t){const n={x:L(t,"x","relu")};return W.runKernel(Zp,n)}const Yl=H({relu_:MEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FEe(t){const n={x:L(t,"x","relu6")};return W.runKernel(Qp,n)}const kU=H({relu6_:FEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LEe(t,e){const r={x:L(t,"x","reverse")},i={dims:e};return W.runKernel(ab,r,i)}const Pl=H({reverse_:LEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BEe(t){const n={x:L(t,"x","round")};return W.runKernel(Jp,n)}const IU=H({round_:BEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jEe(t){const n={x:L(t,"x","rsqrt","float32")};return W.runKernel(em,n)}const TU=H({rsqrt_:jEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zEe(t){const n={x:L(t,"x","selu")};return W.runKernel(tm,n)}const EU=H({selu_:zEe});function VEe(t,e,n,r,i,s=[1,1],o="NHWC"){const a=L(t,"x","separableConv2d"),l=L(e,"depthwiseFilter","separableConv2d"),u=L(n,"pointwiseFilter","separableConv2d");let c=a,f=!1;if(a.rank===3&&(f=!0,c=G(a,[1,a.shape[0],a.shape[1],a.shape[2]])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");E(c.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`),E(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),E(u.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),E(u.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`),E(u.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`);const h=l.shape[2],d=l.shape[3];E(u.shape[2]===h*d,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${h*d}, but got ${u.shape[2]}.`);const p=N2(c,l,r,i,o,s),g=Al(p,u,1,"valid",o);return f?G(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const NU=H({separableConv2d_:VEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WEe(t){const n={x:L(t,"x","sign")};return W.runKernel(im,n)}const UEe=H({sign_:WEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GEe(t){const n={x:L(t,"x","sin","float32")};return W.runKernel(nm,n)}const AU=H({sin_:GEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HEe(t){const n={x:L(t,"x","sinh")};return W.runKernel(rm,n)}const OU=H({sinh_:HEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KEe(t,e,n){const r=L(t,"x","slice1d");return E(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),ft(r,[e],[n])}const K2=H({slice1d_:KEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qEe(t,e,n){const r=L(t,"x","slice2d");return E(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),ft(r,e,n)}const PU=H({slice2d_:qEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XEe(t,e,n){const r=L(t,"x","slice3d");return E(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),ft(r,e,n)}const q2=H({slice3d_:XEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YEe(t,e,n){const r=L(t,"x","slice4d");return E(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),ft(r,e,n)}const zv=H({slice4d_:YEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZEe(t,e=-1){const n=L(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},i={dim:e};return W.runKernel(db,r,i)}const X2=H({softmax_:ZEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QEe(t){E(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return W.runKernel(JT,e)}const _U=H({fft_:QEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JEe(t){E(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return W.runKernel(n2,e)}const N$=H({ifft_:JEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eNe(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const i=G(t,[n,e]);r=N$(i)}else{const i=[n,2*(e-1)],s=G(jv(t),[n,e]),o=G(P2(t),[n,e]),a=Pl(ft(s,[0,1],[n,e-2]),1),l=z(Pl(ft(o,[0,1],[n,e-2]),1),Ze(-1)),u=cr([s,a],1),c=cr([o,l],1),f=G(Dc(u,c),[i[0],i[1]]);r=N$(f)}if(r=jv(r),t.rank===3&&t.shape[0]!==0){const i=r,s=t.shape[0];r=G(r,[s,r.shape[0]/s,r.shape[1]]),i.dispose()}return r}const tNe=H({irfft_:eNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nNe(t,e,n=0){const i={x:L(t,"x","split")},s={numOrSizeSplits:e,axis:n};return W.runKernel(hb,i,s)}const Vr=H({split_:nNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rNe(t,e){E(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let i;if(e!=null&&e<n){const p=t.shape.map(g=>0),m=t.shape.map(g=>g);m[t.shape.length-1]=e,i=ft(t,p,m),n=e}else if(e!=null&&e>n){const p=t.shape.map(m=>m);p[t.shape.length-1]=e-n,i=cr([t,hn(p)],t.shape.length-1),n=e}else i=t;const s=Ge(i),o=G(Dc(i,s),[r,n]),a=_U(o),l=Math.floor(n/2)+1,u=jv(a),c=P2(a),f=Vr(u,[l,n-l],u.shape.length-1),h=Vr(c,[l,n-l],c.shape.length-1),d=i.shape.slice();return d[i.shape.length-1]=l,G(Dc(f[0],h[0]),d)}const iNe=H({rfft_:rNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sNe(t,e){let n=L(t,"a","squaredDifference"),r=L(e,"b","squaredDifference");[n,r]=zt(n,r),_e(n.shape,r.shape);const i={a:n,b:r},s={};return W.runKernel(lm,i,s)}const oNe=H({squaredDifference_:sNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aNe(t,e){const n=L(t,"x","squeeze","string_or_numeric");return G(n,Ca(n.shape,e).newShape)}const ym=H({squeeze_:aNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lNe(t,e=0){const n=ZW(t,"tensors","stack","string_or_numeric");E(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&E(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,i={axis:e};return W.runKernel(eb,r,i)}const fo=H({stack_:lNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uNe(t,e=0){const r={x:L(t,"x","step")},i={alpha:e};return W.runKernel(dm,r,i)}const vm=H({step_:uNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cNe(t,e,n,r,i=0,s=0,o=0,a=0,l=0){const c={x:L(t,"x","stridedSlice","string_or_numeric")},f={begin:e,end:n,strides:r,beginMask:i,endMask:s,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:l};return W.runKernel(g2,c,f)}const fNe=H({stridedSlice_:cNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hNe(t){const n={x:L(t,"x","tan","float32")};return W.runKernel(cm,n)}const dNe=H({tan_:hNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cr(t,e){rW(t);const n=vb(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return xb(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kg(t,e,n){if(rW(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=vb(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return xb(t,e,r,n)}function DU(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,i=e.rank>1?e.rank-1:1,s=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${i}.`;if(n.rank<i)throw new Error(s+` update.rank < ${i}. `);if(t.length<r+(n.rank-i))throw new Error(s+` Output shape length < ${r+(n.rank-i)}`);if(n.rank!==i+t.length-r)throw new Error(s+` update.rank != ${i+t.length-r}`);for(let o=0;o<i;++o)if(n.shape[o]!==e.shape[o])throw new Error(s+` updates.shape[${o}] (${n.shape[o]}) != indices.shape[${o}] (${e.shape[o]}).`);for(let o=0;o<n.rank-i;++o)if(n.shape[o+i]!==t[o+r])throw new Error(s+` updates.shape[${o+i}] (${n.shape[o+i]}) != shape[${o+i}] (${t[o+i]})`)}function pNe(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}DU(n,e,t)}function Zl(t,e,n){const r=e.shape.length,i=r>1?e.shape[r-1]:1,s=n.length;let o=1;for(let f=i;f<s;++f)o*=n[f];const a=i<1?1:i,l=J(e.shape)/a,u=[...Se(n.slice(0,i)),1],c=J(n);return{sliceRank:i,numUpdates:l,sliceSize:o,strides:u,outputSize:c}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mNe(t,e=1,n=!0){const r=L(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const i=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>i)throw new Error(`'k' passed to topk() must be <= the last dimension (${i}) but got ${e}`);const s={x:r},o={k:e,sorted:n},[a,l]=W.runKernel(y2,s,o);return{values:a,indices:l}}const gNe=H({topk_:mNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yNe(t,e=0,n=1,r,i){if(xo(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const s=new $U(e,n,r,!0,i),o=Re(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=s.nextValue();return o.toTensor()}const RU=H({truncatedNormal_:yNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vNe(t,e=0){const n=L(t,"x","unique","string_or_numeric");E(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},i={axis:e},[s,o]=W.runKernel(x2,r,i);return{values:s,indices:o}}const xNe=H({unique_:vNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bNe(t,e,n){const r=L(t,"x","unsortedSegmentSum"),i=L(e,"segmentIds","unsortedSegmentSum","int32");E(Oc(n),()=>"numSegments must be of dtype int");const s={x:r,segmentIds:i},o={numSegments:n};return W.runKernel(mb,s,o)}const MU=H({unsortedSegmentSum_:bNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wNe(t,e=0){const n=L(t,"x","unstack","string_or_numeric");E(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},i={axis:e};return W.runKernel(pb,r,i)}const _l=H({unstack_:wNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SNe(t,e=!0,n,r){return W.makeVariable(t,e,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FU(t,e){const n=[];for(let s=0;s<e.length;s++)e[s]&&n.push(s);const r=Re(t,"int32"),i=Re([n.length,t.length],"int32");for(let s=0;s<n.length;s++){const o=r.indexToLoc(n[s]),a=s*t.length;i.values.set(o,a)}return i.toTensor()}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CNe(t,e,n){const r=L(t,"x","transpose");if(e==null&&(e=r.shape.map((o,a)=>a).reverse()),E(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(o=>{E(o>=0&&o<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const i={x:r},s={perm:e};return r.dtype==="complex64"?X(()=>{let o=jv(r),a=P2(r);return o=W.runKernel(qu,{x:o},s),a=W.runKernel(qu,{x:a},s),n&&(a=jt(a)),Dc(o,a)}):W.runKernel(qu,i,s)}const Ue=H({transpose_:CNe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ne(t,e){if(e==null)return t.shape.slice();if(et(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kNe(t,e,n,r){const i=L(t,"x","dropout");if(E(i.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${i.dtype} tensor instead.`),E(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof Qt?i.clone():i;const s=$Ne(i,n),o=1-e,a=ke(kb(oe(gm(s,0,1,"float32",r),o)),o);return z(i,a)}const INe=H({dropout_:kNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TNe(t,e,n,r,i,s="NHWC",o){let a=t;t.rank===3&&(a=G(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=G(e,[1,e.shape[0],e.shape[1],e.shape[2]])),E(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),E(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),E(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const u=s==="NHWC"?a.shape[3]:a.shape[1],c=s==="NHWC"?l.shape[3]:l.shape[1];E(u===n[2],()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${n[2]}.`),E(c===n[3],()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${n[3]}).`),mr("conv2dDerFilter",i,o);const f={x:a,dy:l},h={strides:r,pad:i,dataFormat:s,dimRoundingMode:o,filterShape:n};return W.runKernel(VT,f,h)}const Y2=H({conv2DBackpropFilter_:TNe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z2(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return z(t,vm(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function Q2(t,e){let n=e;const r=on(t.shape,e.shape);return r.length>0&&(n=$e(n,r)),G(n,t.shape)}function J2(t,e,n,r){if(e==="linear")return t;if(e==="relu")return Yl(t);if(e==="elu")return Cb(t);if(e==="relu6")return kU(t);if(e==="prelu")return B2(t,n);if(e==="leakyrelu")return _2(t,r);if(e==="sigmoid")return mf(t);throw new Error(`Unknown fused activation ${e}.`)}const eE=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ENe({x:t,filter:e,strides:n,pad:r,dataFormat:i="NHWC",dilations:s=[1,1],dimRoundingMode:o,bias:a,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(l=l||"linear",eE(W.state.gradientDepth,l)===!1){E(i==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${i} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let S=Al(t,e,n,r,i,s,o);return a!=null&&(S=oe(S,a)),J2(S,l,u,c)}const f=L(t,"x","conv2d","float32"),h=L(e,"filter","conv2d","float32");let d=f,p=!1;f.rank===3&&(p=!0,d=G(f,[1,f.shape[0],f.shape[1],f.shape[2]])),E(d.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${d.rank}.`),E(h.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${h.rank}.`),mr("fused conv2d",r,o);const m=i==="NHWC"?d.shape[3]:d.shape[1];E(h.shape[2]===m,()=>`Error in conv2d: depth of input (${m}) must match input depth for filter ${h.shape[2]}.`),E(Mn(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`);const g=$n(d.shape,h.shape,n,s,r,o);let y;a!=null&&(y=L(a,"bias","fused conv2d"),[y]=zt(y,f),i==="NHWC"?_e(g.outShape,y.shape):(E(y.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${y.shape.length}.`),E(y.shape.length===0||y.shape[0]===g.outChannels||y.shape[0]===1,()=>`Error in fused conv2d: bias shape (${y.shape}) is not compatible with the number of output channels (${g.outChannels})`)));let v;if(u!=null){const S=u.shape;if(E(S.length<=1||S.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${S.length}.`),S.length===1)E(S[0]===1||S[0]===g.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${S}) is not compatible with the number of output channels (${g.outChannels}).`);else if(S.length===3)try{_e(S,g.outShape)}catch{const $=`Error in fused conv2d: PReLU activation weights (${S}) is not compatible with the output shape of the conv2d (${g.outShape}).`;throw Error($)}v=L(u,"prelu weights","fused conv2d")}const x=(S,C)=>{E(i==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${i} but only NHWC is currently supported.`);const[$,k,I,T]=C,A=Z2(S,I,l);E(El(s),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`);const _=T2(k.shape,A,$,n,r),D=Y2(k,A,$.shape,n,r),P=[_,D];if(T!=null){const R=Q2(T,A);P.push(R)}return P},b={x:d,filter:h,bias:y,preluActivationWeights:v},w={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:o,activation:l,leakyreluAlpha:c};return a==null?Mc((C,$,k)=>{let I=W.runKernel(_v,b,w);return k([$,C,I]),p&&(I=G(I,[I.shape[1],I.shape[2],I.shape[3]])),{value:I,gradFunc:x}})(d,h):Mc((C,$,k,I)=>{let T=W.runKernel(_v,b,w);return I([$,C,T,k]),p&&(T=G(T,[T.shape[1],T.shape[2],T.shape[3]])),{value:T,gradFunc:x}})(d,h,y)}const NNe=H({fusedConv2d_:ENe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ANe(t,e,n,r,i,s=[1,1],o){let a=t;t.rank===3&&(a=G(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=G(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u={x:a,dy:l},c={strides:r,pad:i,dimRoundingMode:o,dilations:s,filterShape:n};return W.runKernel(XT,u,c)}const ONe=H({depthwiseConv2dNativeBackpropFilter_:ANe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PNe(t,e,n,r,i,s=[1,1],o){let a=e,l=!1;e.rank===3&&(l=!0,a=G(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u={dy:a,filter:n},c={strides:r,pad:i,dimRoundingMode:o,dilations:s,inputShape:t},f=W.runKernel(YT,u,c);return l?G(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const _Ne=H({depthwiseConv2dNativeBackpropInput_:PNe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DNe({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:i,activation:s="linear",preluActivationWeights:o,leakyreluAlpha:a=.2}){if(eE(W.state.gradientDepth,s)===!1){let T=Ye(t,e,n,r);return i!=null&&(T=oe(T,i)),J2(T,s,o,a)}let l=L(t,"a","fused matMul"),u=L(e,"b","fused matMul");[l,u]=zt(l,u);const c=n?l.shape[l.rank-2]:l.shape[l.rank-1],f=r?u.shape[u.rank-1]:u.shape[u.rank-2],h=n?l.shape[l.rank-1]:l.shape[l.rank-2],d=r?u.shape[u.rank-2]:u.shape[u.rank-1],p=l.shape.slice(0,-2),m=u.shape.slice(0,-2),g=J(p),y=J(m);E(c===f,()=>`Error in fused matMul: inner shapes (${c}) and (${f}) of Tensors with shapes ${l.shape} and ${u.shape} and transposeA=${n} and transposeB=${r} must match.`);const x=_e(l.shape.slice(0,-2),u.shape.slice(0,-2)).concat([h,d]),b=n?G(l,[g,c,h]):G(l,[g,h,c]),w=r?G(u,[y,d,f]):G(u,[y,f,d]);let S;i!=null&&(S=L(i,"bias","fused matMul"),[S]=zt(S,l),_e(x,S.shape));let C;o!=null&&(C=L(o,"prelu weights","fused matMul"));const $=(T,A)=>{const[_,D,P,R]=A,F=Z2(G(T,P.shape),P,s);let O,M;if(!n&&!r?(O=Ye(F,D,!1,!0),M=Ye(_,F,!0,!1)):!n&&r?(O=Ye(F,D,!1,!1),M=Ye(F,_,!0,!1)):n&&!r?(O=Ye(D,F,!1,!0),M=Ye(_,F,!1,!1)):(O=Ye(D,F,!0,!0),M=Ye(F,_,!0,!0)),i!=null){const V=Q2(R,F);return[O,M,V]}else return[O,M]},k={a:b,b:w,bias:S,preluActivationWeights:C},I={transposeA:n,transposeB:r,activation:s,leakyreluAlpha:a};return i==null?Mc((A,_,D)=>{const P=W.runKernel(Pv,k,I);return D([A,_,P]),{value:G(P,x),gradFunc:$}})(b,w):Mc((A,_,D,P)=>{const R=W.runKernel(Pv,k,I);return P([A,_,R,D]),{value:G(R,x),gradFunc:$}})(b,w,S)}const oM=H({fusedMatMul_:DNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RNe(t,e,n,r,i="bilinear",s=0){const o=L(t,"image","cropAndResize"),a=L(e,"boxes","cropAndResize","float32"),l=L(n,"boxInd","cropAndResize","int32"),u=a.shape[0];E(o.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`),E(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${a.shape}.`),E(l.rank===1&&l.shape[0]===u,()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${a.shape}.`),E(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),E(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),E(i==="bilinear"||i==="nearest",()=>`method must be bilinear or nearest, but was ${i}`);const c={image:o,boxes:a,boxInd:l},f={method:i,extrapolationValue:s,cropSize:r};return W.runKernel(HT,c,f)}const MNe=H({cropAndResize_:RNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FNe(t){const e=L(t,"image","flipLeftRight","float32");E(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return W.runKernel(t2,n,{})}const LNe=H({flipLeftRight_:FNe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BNe(t){const e=L(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];E(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),E(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const i=new Array(e.rank);return i.fill(1,0,n),i[n]=3,Ki(e,i)}const jNe=H({grayscaleToRGB_:BNe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zNe(t){const e=L(t,"image","RGBToGrayscale"),n=e.rank-1,r=e.shape[n];E(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),E(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const i=e.dtype,s=me(e,"float32"),o=Cr([.2989,.587,.114]);let a;switch(e.rank){case 2:a=Zf("ij,j->i",s,o);break;case 3:a=Zf("ijk,k->ij",s,o);break;case 4:a=Zf("ijkl,l->ijk",s,o);break;case 5:a=Zf("ijklm,m->ijkl",s,o);break;case 6:a=Zf("ijklmn,n->ijklm",s,o);break;default:throw new Error("Not a valid tensor rank.")}return a=or(a,-1),me(a,i)}const VNe=H({rgbToGrayscale_:zNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WNe(t,e,n=0,r=.5){const i=L(t,"image","rotateWithOffset","float32");E(i.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${i.rank}.`);const s={image:i},o={radians:e,fillValue:n,center:r};return W.runKernel(b2,s,o)}const UNe=H({rotateWithOffset_:WNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yf(t,e,n,r,i,s){r==null&&(r=.5),i==null&&(i=Number.NEGATIVE_INFINITY),s==null&&(s=0);const o=t.shape[0];return n=Math.min(n,o),E(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),E(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),E(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),E(e.rank===1,()=>"scores must be a 1D tensor"),E(e.shape[0]===o,()=>`scores has incompatible shape with boxes. Expected ${o}, but was ${e.shape[0]}`),E(0<=s&&s<=1,()=>`softNmsSigma must be in [0, 1], but was '${s}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GNe(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY){const s=L(t,"boxes","nonMaxSuppression","float32"),o=L(e,"scores","nonMaxSuppression","float32"),a=yf(s,o,n,r,i);n=a.maxOutputSize,r=a.iouThreshold,i=a.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:i};return W.runKernel(a2,{boxes:s,scores:o},l)}const HNe=H({nonMaxSuppression_:GNe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KNe(t,e,n){const r=qNe(t,e,n),i=r<0?-(r+1):r;t.splice(i,0,e)}function qNe(t,e,n){return YNe(t,e,n||XNe)}function XNe(t,e){return t>e?1:t<e?-1:0}function YNe(t,e,n){let r=0,i=t.length,s=0,o=!1;for(;r<i;){s=r+(i-r>>>1);const a=n(e,t[s]);a>0?r=s+1:(i=s,o=!a)}return o?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tE(t,e,n,r,i){return iE(t,e,n,r,i,0)}function nE(t,e,n,r,i,s){return iE(t,e,n,r,i,0,!1,s,!0)}function rE(t,e,n,r,i,s){return iE(t,e,n,r,i,s,!0)}function iE(t,e,n,r,i,s,o=!1,a=!1,l=!1){const u=[];for(let g=0;g<e.length;g++)e[g]>i&&u.push({score:e[g],boxIndex:g,suppressBeginIndex:0});u.sort(aM);const c=s>0?-.5/s:0,f=[],h=[];for(;f.length<n&&u.length>0;){const g=u.pop(),{score:y,boxIndex:v,suppressBeginIndex:x}=g;if(y<i)break;let b=!1;for(let w=f.length-1;w>=x;--w){const S=ZNe(t,v,f[w]);if(S>=r){b=!0;break}if(g.score=g.score*QNe(r,c,S),g.score<=i)break}g.suppressBeginIndex=f.length,b||(g.score===y?(f.push(v),h.push(g.score)):g.score>i&&KNe(u,g,aM))}const d=f.length,p=n-d;a&&p>0&&(f.push(...new Array(p).fill(0)),h.push(...new Array(p).fill(0)));const m={selectedIndices:f};return o&&(m.selectedScores=h),l&&(m.validOutputs=d),m}function ZNe(t,e,n){const r=t.subarray(e*4,e*4+4),i=t.subarray(n*4,n*4+4),s=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),u=Math.min(i[0],i[2]),c=Math.min(i[1],i[3]),f=Math.max(i[0],i[2]),h=Math.max(i[1],i[3]),d=(a-s)*(l-o),p=(f-u)*(h-c);if(d<=0||p<=0)return 0;const m=Math.max(s,u),g=Math.max(o,c),y=Math.min(a,f),v=Math.min(l,h),x=Math.max(y-m,0)*Math.max(v-g,0);return x/(d+p-x)}function QNe(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function aM(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function JNe(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY){const s=L(t,"boxes","nonMaxSuppressionAsync"),o=L(e,"scores","nonMaxSuppressionAsync"),a=yf(s,o,n,r,i);n=a.maxOutputSize,r=a.iouThreshold,i=a.scoreThreshold;const l=await Promise.all([s.data(),o.data()]),u=l[0],c=l[1],{selectedIndices:f}=tE(u,c,n,r,i);return s!==t&&s.dispose(),o!==e&&o.dispose(),Cr(f,"int32")}const eAe=JNe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tAe(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=0){const o=L(t,"boxes","nonMaxSuppression"),a=L(e,"scores","nonMaxSuppression"),l=yf(o,a,n,r,i,s);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,s=l.softNmsSigma;const u={boxes:o,scores:a},c={maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:s},f=W.runKernel(u2,u,c);return{selectedIndices:f[0],selectedScores:f[1]}}const nAe=H({nonMaxSuppressionWithScore_:tAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function rAe(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=0){const o=L(t,"boxes","nonMaxSuppressionAsync"),a=L(e,"scores","nonMaxSuppressionAsync"),l=yf(o,a,n,r,i,s);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,s=l.softNmsSigma;const u=await Promise.all([o.data(),a.data()]),c=u[0],f=u[1],{selectedIndices:h,selectedScores:d}=rE(c,f,n,r,i,s);return o!==t&&o.dispose(),a!==e&&a.dispose(),{selectedIndices:Cr(h,"int32"),selectedScores:Cr(d)}}const iAe=rAe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sAe(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=!1){const o=L(t,"boxes","nonMaxSuppression"),a=L(e,"scores","nonMaxSuppression"),l=yf(o,a,n,r,i,null),u=l.maxOutputSize,c=l.iouThreshold,f=l.scoreThreshold,h={boxes:o,scores:a},d={maxOutputSize:u,iouThreshold:c,scoreThreshold:f,padToMaxOutputSize:s},p=W.runKernel(l2,h,d);return{selectedIndices:p[0],validOutputs:p[1]}}const oAe=H({nonMaxSuppressionPadded_:sAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function aAe(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=!1){const o=L(t,"boxes","nonMaxSuppressionAsync"),a=L(e,"scores","nonMaxSuppressionAsync"),l=yf(o,a,n,r,i,null),u=l.maxOutputSize,c=l.iouThreshold,f=l.scoreThreshold,[h,d]=await Promise.all([o.data(),a.data()]),{selectedIndices:p,validOutputs:m}=nE(h,d,u,c,f,s);return o!==t&&o.dispose(),a!==e&&a.dispose(),{selectedIndices:Cr(p,"int32"),validOutputs:Ze(m,"int32")}}const lAe=aAe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uAe(t,e,n=!1,r=!1){const i=L(t,"images","resizeBilinear");E(i.rank===3||i.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${i.rank}.`),E(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),E(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let s=i,o=!1;i.rank===3&&(o=!0,s=G(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const a={images:s},l={alignCorners:n,halfPixelCenters:r,size:e},u=W.runKernel(ob,a,l);return o?G(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const LU=H({resizeBilinear_:uAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cAe(t,e,n=!1,r=!1){const i=L(t,"images","resizeNearestNeighbor");E(i.rank===3||i.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${i.rank}.`),E(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),E(i.dtype==="float32"||i.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),E(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let s=i,o=!1;i.rank===3&&(o=!0,s=G(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const a={images:s},l={alignCorners:n,halfPixelCenters:r,size:e},u=W.runKernel(sb,a,l);return o?G(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const BU=H({resizeNearestNeighbor_:cAe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fAe(t,e="binary",n=!1,r=.5){const i=L(t,"image","threshold"),s=.2989,o=.587,a=.114,l=i.shape[0]*i.shape[1];let u=z(Cr([r]),255),c,f,h,d;if(E(i.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${i.rank}.`),E(i.shape[2]===3||i.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${i.shape[2]}.`),E(i.dtype==="int32"||i.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${i.dtype}.`),E(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),i.shape[2]===3){[c,f,h]=Vr(i,[1,1,1],-1);const g=z(c,s),y=z(f,o),v=z(h,a);d=oe(oe(g,y),v)}else d=t;if(e==="otsu"){const g=cTe(me(IU(d),"int32"),QW([]),256);u=hAe(g,l)}const p=n?gf(d,u):Xr(d,u);return me(z(p,255),"int32")}function hAe(t,e){let n=Cr([-1]),r=Cr([0]),i=Cr([0]),s,o,a,l,u,c;for(let f=0;f<t.size-1;f++){s=ft(t,0,f+1),o=ft(t,f+1),u=ke($e(s),e),c=ke($e(o),e);const h=$e(z(s,Wd(0,s.size)));a=ke(h,$e(s));const d=Sb(o.shape,s.size),p=oe(Wd(0,o.size),d),m=z(o,p);l=ke($e(m),$e(o));const g=Ie(a,l),y=Ie(a,l),v=z(u,c);i=z(z(v,g),y);const x=Xr(i,r);r=Jn(x,i,r),n=Jn(x,Cr([f]),n)}return n}const dAe=H({threshold_:fAe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pAe(t,e,n="nearest",r="constant",i=0,s){const o=L(t,"image","transform","float32"),a=L(e,"transforms","transform","float32");E(o.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${o.rank}.`),E(a.rank===2&&(a.shape[0]===o.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),E(s==null||s.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${s}.`);const l={image:o,transforms:a},u={interpolation:n,fillMode:r,fillValue:i,outputShape:s};return W.runKernel(v2,l,u)}const mAe=H({transform_:pAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gAe(t,e,n){const r=L(t,"a","bandPart");E(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const i=r.shape,[s,o]=r.shape.slice(-2);let a,l;typeof e=="number"?(E(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),E(e<=s,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${s}).`),a=L(e<0?s:e,"numLower","bandPart")):(E(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),a=Jn(Lv(e,0),s,Vd(e,s))),typeof n=="number"?(E(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),E(n<=o,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${o}).`),l=L(n<0?o:n,"numUpper","bandPart")):(E(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=Jn(Lv(n,0),o,Vd(n,o)));const u=G(Wd(0,s,1,"int32"),[-1,1]),c=Wd(0,o,1,"int32"),f=Ie(u,c),h=co(gf(f,a),ql(f,jt(l))),d=hn([s,o],r.dtype);return G(fo(_l(G(r,[-1,s,o])).map(p=>Jn(h,p,d))),i)}const yAe=H({bandPart_:gAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vAe(t){let e;if(Array.isArray(t)){e=!1,E(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const i=t[0].shape[0];for(let s=1;s<t.length;++s)E(t[s].shape[0]===i,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[s].shape[0]} vs. ${i})`)}else e=!0,t=Vr(t,t.shape[0],0).map(i=>ym(i,[0]));E(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let i=0;i<t.length;++i)n.push(W.tidy(()=>{let s=r[i];if(i>0)for(let o=0;o<i;++o){const a=z($e(z(n[o],s)),n[o]);s=Ie(s,a)}return ke(s,$b(s,"euclidean"))}));return e?fo(n,0):n}const xAe=H({gramSchmidt_:vAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bAe(t,e=!1){if(E(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return lM(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((l,u)=>l*u),r=_l(G(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),i=[],s=[];r.forEach(l=>{const[u,c]=lM(l,e);i.push(u),s.push(c)});const o=G(fo(i,0),t.shape),a=G(fo(s,0),t.shape);return[o,a]}}function lM(t,e=!1){return W.tidy(()=>{E(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let i=yU(n),s=fl(t);const o=Kg([[1]],[1,1]);let a=fl(o);const l=n>=r?r:n;for(let u=0;u<l;++u){const c=s,f=a,h=i;[a,s,i]=W.tidy(()=>{const d=ft(s,[u,u],[n-u,1]),p=$b(d),m=ft(s,[u,u],[1,1]),g=Jn(Xr(m,0),Kg([[-1]]),Kg([[1]])),y=Ie(m,z(g,p)),v=ke(d,y);v.shape[0]===1?a=fl(o):a=cr([o,ft(v,[1,0],[v.shape[0]-1,v.shape[1]])],0);const x=jt(ke(Ye(g,y),p)),b=ft(s,[u,0],[n-u,r]),w=z(x,a),S=Ue(a);if(u===0)s=Ie(b,Ye(w,Ye(S,b)));else{const k=Ie(b,Ye(w,Ye(S,b)));s=cr([ft(s,[0,0],[u,r]),k],0)}const C=Ue(w),$=ft(i,[0,u],[n,i.shape[1]-u]);if(u===0)i=Ie($,Ye(Ye($,a),C));else{const k=Ie($,Ye(Ye($,a),C));i=cr([ft(i,[0,0],[n,u]),k],1)}return[a,s,i]}),je([c,f,h])}return!e&&n>r&&(i=ft(i,[0,0],[n,r]),s=ft(s,[0,0],[r,r])),[i,s]})}const wAe=H({qr_:bAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gs={flipLeftRight:LNe,grayscaleToRGB:jNe,resizeNearestNeighbor:BU,resizeBilinear:LU,rgbToGrayscale:VNe,rotateWithOffset:UNe,cropAndResize:MNe,nonMaxSuppression:HNe,nonMaxSuppressionAsync:eAe,nonMaxSuppressionWithScore:nAe,nonMaxSuppressionWithScoreAsync:iAe,nonMaxSuppressionPadded:oAe,nonMaxSuppressionPaddedAsync:lAe,threshold:dAe,transform:mAe},SAe={bandPart:yAe,gramSchmidt:xAe,qr:wAe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CAe=new Map,$Ae=new Map;class vf{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class li{constructor(){this.classNameMap={}}static getMap(){return li.instance==null&&(li.instance=new li),li.instance}static register(e){li.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function se(t,e,n){E(t.className!=null,()=>"Class being registered does not have the static className property defined."),E(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),E(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const r=n,i=e+">"+r;return li.register(t),CAe.set(i,t),$Ae.set(t,i),t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Na extends vf{minimize(e,n=!1,r){const{value:i,grads:s}=this.computeGradients(e,r);if(r!=null){const o=r.map(a=>({name:a.name,tensor:s[a.name]}));this.applyGradients(o)}else this.applyGradients(s);return je(s),n?i:(i.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return O2e(e,n)}dispose(){this.iterations_!=null&&je(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Ze(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(Na,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jU extends Na{static get className(){return"Adadelta"}constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=W.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=W.registeredVariables[r],o=!1;this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${r}/accum_grad`,variable:X(()=>Ge(s).variable(o))}),this.accumulatedUpdates[i]==null&&(this.accumulatedUpdates[i]={originalName:`${r}/accum_var`,variable:X(()=>Ge(s).variable(o))});const a=Array.isArray(e)?e[i].tensor:e[r];if(a==null)return;const l=this.accumulatedGrads[i].variable,u=this.accumulatedUpdates[i].variable;X(()=>{const c=oe(z(l,this.rho),z(gt(a),1-this.rho)),f=z(ke(Rn(oe(u,this.epsilon)),Rn(oe(l,this.epsilon))),a),h=oe(z(u,this.rho),z(gt(f),1-this.rho));l.assign(c),u.assign(h);const d=oe(z(f,-this.learningRate),s);s.assign(d)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(je(this.accumulatedGrads.map(e=>e.variable)),je(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zU extends Na{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=W.registeredVariables[r];this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${r}/accumulator`,variable:X(()=>Sb(s.shape,this.initialAccumulatorValue).variable(!1))});const o=Array.isArray(e)?e[i].tensor:e[r];if(o==null)return;const a=this.accumulatedGrads[i].variable;X(()=>{const l=oe(a,gt(o));a.assign(l);const u=oe(z(ke(o,Rn(oe(l,W.backend.epsilon()))),-this.learningRate),s);s.assign(u)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&je(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VU extends Na{static get className(){return"Adam"}constructor(e,n,r,i=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=i,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],X(()=>{this.accBeta1=Ze(n).variable(),this.accBeta2=Ze(r).variable()}),i==null&&(this.epsilon=W.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);X(()=>{const r=Ie(1,this.accBeta1),i=Ie(1,this.accBeta2);n.forEach((s,o)=>{const a=W.registeredVariables[s],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${s}/m`,variable:X(()=>Ge(a).variable(l))}),this.accumulatedSecondMoment[o]==null&&(this.accumulatedSecondMoment[o]={originalName:`${s}/v`,variable:X(()=>Ge(a).variable(l))});const u=Array.isArray(e)?e[o].tensor:e[s];if(u==null)return;const c=this.accumulatedFirstMoment[o].variable,f=this.accumulatedSecondMoment[o].variable,h=oe(z(c,this.beta1),z(u,1-this.beta1)),d=oe(z(f,this.beta2),z(gt(u),1-this.beta2)),p=ke(h,r),m=ke(d,i);c.assign(h),f.assign(d);const g=oe(z(ke(p,oe(Rn(m),this.epsilon)),-this.learningRate),a);a.assign(g)}),this.accBeta1.assign(z(this.accBeta1,this.beta1)),this.accBeta2.assign(z(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&je(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&je(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),X(()=>{this.accBeta1.assign(Ol(this.beta1,this.iterations_+1)),this.accBeta2.assign(Ol(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class WU extends Na{static get className(){return"Adamax"}constructor(e,n,r,i=null,s=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=i,this.decay=s,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],X(()=>{this.iteration=Ze(0).variable(),this.accBeta1=Ze(n).variable()}),i==null&&(this.epsilon=W.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);X(()=>{const r=Ie(1,this.accBeta1),i=ke(-this.learningRate,oe(z(this.iteration,this.decay),1));n.forEach((s,o)=>{const a=W.registeredVariables[s],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${s}/m`,variable:Ge(a).variable(l)}),this.accumulatedWeightedInfNorm[o]==null&&(this.accumulatedWeightedInfNorm[o]={originalName:`${s}/v`,variable:Ge(a).variable(l)});const u=Array.isArray(e)?e[o].tensor:e[s];if(u==null)return;const c=this.accumulatedFirstMoment[o].variable,f=this.accumulatedWeightedInfNorm[o].variable,h=oe(z(c,this.beta1),z(u,1-this.beta1)),d=z(f,this.beta2),p=Hn(u),m=Ta(d,p);c.assign(h),f.assign(m);const g=oe(z(ke(i,r),ke(h,oe(m,this.epsilon))),a);a.assign(g)}),this.iteration.assign(oe(this.iteration,1)),this.accBeta1.assign(z(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&je(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&je(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sE extends Na{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=Array.isArray(e)?e[i].tensor:e[r];if(s==null)return;const o=W.registeredVariables[r];X(()=>{const a=oe(z(this.c,s),o);o.assign(a)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=Cs(Ze(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UU extends sE{static get className(){return"Momentum"}constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=Ze(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=W.registeredVariables[r];this.accumulations[i]==null&&(this.accumulations[i]={originalName:`${r}/momentum`,variable:X(()=>Ge(s).variable(!1))});const o=this.accumulations[i].variable,a=Array.isArray(e)?e[i].tensor:e[r];a!=null&&X(()=>{let l;const u=oe(z(this.m,o),a);this.useNesterov?l=oe(z(this.c,oe(a,z(u,this.m))),s):l=oe(z(this.c,u),s),o.assign(u),s.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&je(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GU extends Na{static get className(){return"RMSProp"}constructor(e,n=.9,r=0,i=null,s=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=i,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=s,i==null&&(this.epsilon=W.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=W.registeredVariables[r],o=!1;this.accumulatedMeanSquares[i]==null&&(this.accumulatedMeanSquares[i]={originalName:`${r}/rms`,variable:X(()=>Ge(s).variable(o))}),this.accumulatedMoments[i]==null&&(this.accumulatedMoments[i]={originalName:`${r}/momentum`,variable:X(()=>Ge(s).variable(o))}),this.accumulatedMeanGrads[i]==null&&this.centered&&(this.accumulatedMeanGrads[i]={originalName:`${r}/mg`,variable:X(()=>Ge(s).variable(o))});const a=Array.isArray(e)?e[i].tensor:e[r];if(a==null)return;const l=this.accumulatedMeanSquares[i].variable,u=this.accumulatedMoments[i].variable;X(()=>{const c=oe(z(l,this.decay),z(gt(a),1-this.decay));if(this.centered){const f=this.accumulatedMeanGrads[i].variable,h=oe(z(f,this.decay),z(a,1-this.decay)),d=ke(z(a,this.learningRate),Rn(Ie(c,oe(gt(h),this.epsilon)))),p=oe(z(u,this.momentum),d);l.assign(c),f.assign(h),u.assign(p);const m=Ie(s,p);s.assign(m)}else{const f=oe(z(l,this.decay),z(gt(a),1-this.decay)),h=oe(z(u,this.momentum),ke(z(a,this.learningRate),Rn(oe(f,this.epsilon))));l.assign(f),u.assign(h);const d=Ie(s,h);s.assign(d)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&je(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&je(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&je(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kAe=[jU,zU,VU,WU,UU,GU,sE];function IAe(){for(const t of kAe)se(t)}function oE(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(J(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const i=e.shape,s=i[i.length-1];let o=1;for(let f=0;f<i.length-1;++f)o*=i[f];const a=t.shape,l=i.slice();l.pop();let u=1;for(let f=s;f<n;++f)u*=a[f],l.push(a[f]);const c=[...Se(t.shape).map(f=>f/u),1].slice(0,s);return[l,o,u,c]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A$=-2,TAe=-1;function aE(t,e,n){const r=t.shape.length;E(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),E(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let i=0;i<r;++i)E(e[i]+n[i]<=t.shape[i],()=>`Error in slice${r}D: begin[${i}] + size[${i}] (${e[i]+n[i]}) would overflow input.shape[${i}] (${t.shape[i]})`)}function EAe(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function lE(t,e,n){const r=[];for(let i=0;i<t.length;i++)r[i]=Math.ceil((e[i]-t[i])/n[i]);return r}function HU(t,e,n,r){const i=[...t];for(let s=i.length;s<r.length;s++)i.push(1);for(let s=0;s<n;s++)s===0?i[e]=1:(i.splice(e,0,1),i.pop());return i}function KU(t,e,n){return n<=t?n:n-(e-1)}function qU(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function NAe(t,e,n,r,i,s,o,a,l){const u=t.length;let c=new Array(u),f=new Array(u),h=new Array(u);if(e.length&&n>0){const d=e[0],p=n+1;c=XU(o,d,p,r,t),f=YU(a,d,p,i,t),h=HU(s,d,p,t)}else for(let d=0;d<u;d++)c[d]=QU(o,r,s,t,d,l),f[d]=JU(a,i,s,t,d,l),h[d]=ZU(s,d,l);return{begin:c,end:f,strides:h}}function XU(t,e,n,r,i){const s=[...i],o=qU(n,e);for(let a=0;a<s.length;a++)if(o.indexOf(a)>-1)s[a]=0;else{const l=KU(e,n,a);let u=r[l];t&1<<l&&(u=0),s[a]=u}return s}function YU(t,e,n,r,i){const s=[...i],o=qU(n,e);for(let a=0;a<s.length;a++)if(o.indexOf(a)>-1)s[a]=Number.MAX_SAFE_INTEGER;else{const l=KU(e,n,a);let u=r[l];t&1<<l&&(u=Number.MAX_SAFE_INTEGER),s[a]=u}for(let a=0;a<s.length;a++){const l=i[a];s[a]<0&&(s[a]+=l),s[a]=$l(0,s[a],i[a])}return s}function ZU(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function QU(t,e,n,r,i,s){let o=e[i];const a=n[i]||1;(t&1<<i||s&1<<i||o==null)&&(a>0?o=Number.MIN_SAFE_INTEGER:o=Number.MAX_SAFE_INTEGER);const l=r[i];return o<0&&(o+=l),o=$l(0,o,l-1),o}function JU(t,e,n,r,i,s){let o=e[i];const a=n[i]||1;(t&1<<i||s&1<<i||o==null)&&(a>0?o=Number.MAX_SAFE_INTEGER:o=Number.MIN_SAFE_INTEGER);const l=r[i];return o<0&&(o+=l),a>0?o=$l(0,o,l):o=$l(-1,o,l-1),o}function uE(t,e,n){let r=n.length;for(let i=0;i<n.length;i++)if(n[i]>1){r=i;break}for(let i=r+1;i<n.length;i++)if(e[i]>0||n[i]!==t[i])return!1;return!0}function cE(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function Ib(t,e,n){let r;const i=t.shape.length;typeof e=="number"?r=[e,...new Array(i-1).fill(0)]:e.length<i?r=e.concat(new Array(i-e.length).fill(0)):r=e.slice(),r.forEach(o=>{E(o!==-1,()=>"slice() does not support negative begin indexing.")});let s;return n==null?s=new Array(i).fill(-1):typeof n=="number"?s=[n,...new Array(i-1).fill(-1)]:n.length<i?s=n.concat(new Array(i-n.length).fill(-1)):s=n,s=s.map((o,a)=>o>=0?o:(E(o===-1,()=>`Negative size values should be exactly -1 but got ${o} for the slice() size at index ${a}.`),t.shape[a]-r[a])),[r,s]}function fE(t,e,n,r,i,s,o,a,l){let u;if(r==null?(u=new Array(e.length),u.fill(1)):u=r,o!=null&&o&o-1)throw new Error("Multiple ellipses in slice is not allowed.");let c=!1;const f={dims:u.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:u.slice(),beginMask:i,endMask:s,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:l};for(let x=0;x<f.dims;x++)c&&1<<x&a&&f.numAddAxisAfterEllipsis++,1<<x&o&&(c=!0);c||(f.ellipsisMask|=1<<f.dims,f.dims++);const h={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};AAe(f,h);let d=!0,p=!0,m=!0;const g=[],y=[];for(let x=0;x<t.length;++x){if(h.strides[x]===0)throw Error(`strides[${x}] must be non-zero`);const b=!!(h.shrinkAxisMask&1<<x),w=t[x];if(w===-1){g.push(b?1:-1);continue}const S=[h.beginMask&1<<x,h.endMask&1<<x],C=[h.strides[x]>0?0:-1,h.strides[x]>0?w:w-1];if(b&&h.strides[x]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&h.strides[x]===1;const $=!!(h.beginMask&1<<x&&h.endMask&1<<x);if(h.beginValid&&h.endValid){if(b){const A=h.begin[x]<0?w+h.begin[x]:h.begin[x];if(h.begin[x]=A,h.end[x]=h.begin[x]+1,A<0||A>=w)throw Error(`slice index ${h.begin[x]} of dimension ${x} out of bounds.`)}else h.begin[x]=uM(h.begin[x],0,h.strides[x],w,S,C),h.end[x]=uM(h.end[x],1,h.strides[x],w,S,C);const T=h.strides[x]===1&&h.begin[x]===0&&h.end[x]===w;d=d&&T,p=p&&(x===0&&h.strides[x]===1||T)}else d=d&&h.strides[x]===1&&$,p=p&&(x===0&&h.strides[x]===1||$);let k,I=!1;if(h.beginValid&&h.endValid?(k=h.end[x]-h.begin[x],I=!0):b?(k=1,I=!0):$&&w>=0&&(h.strides[x]<0?k=-w:k=w,I=!0),I){let T;k===0||k<0!=h.strides[x]<0?T=0:T=Math.trunc(k/h.strides[x])+(k%h.strides[x]!==0?1:0),g.push(T)}else g.push(-1)}for(let x=0;x<h.finalShapeGatherIndices.length;++x){const b=h.finalShapeGatherIndices[x];b>=0?y.push(g[b]):b===A$&&y.push(1)}return{finalShapeSparse:y.filter((x,b)=>h.finalShapeGatherIndices[b]!==A$),finalShape:y,isIdentity:d,sliceDim0:p,isSimpleSlice:m,begin:h.begin,end:h.end,strides:h.strides}}function AAe(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const i=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<i;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(A$),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(TAe),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function uM(t,e,n,r,i,s){if(i[e])return n>0?s[e]:s[e+1&1];{const o=t<0?r+t:t;return o<s[0]?s[0]:o>s[1]?s[1]:o}}const OAe=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:aE,computeFlatOffset:cE,computeOutShape:lE,getNormalizedAxes:NAe,isSliceContinous:uE,maskToAxes:EAe,parseSliceParams:Ib,sliceInfo:fE,startForAxis:QU,startIndicesWithElidedDims:XU,stopForAxis:JU,stopIndicesWithElidedDims:YU,stridesForAxis:ZU,stridesWithElidedDims:HU},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PAe{static sgd(e){return new sE(e)}static momentum(e,n,r=!1){return new UU(e,n,r)}static rmsprop(e,n=.9,r=0,i=null,s=!1){return new GU(e,n,r,i,s)}static adam(e=.001,n=.9,r=.999,i=null){return new VU(e,n,r,i)}static adadelta(e=.001,n=.95,r=null){return new jU(e,n,r)}static adamax(e=.002,n=.9,r=.999,i=null,s=0){return new WU(e,n,r,i,s)}static adagrad(e,n=.1){return new zU(e,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uu=PAe;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Ae=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function eG(){return new Promise(t=>_Ae(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hE(t,e){const n=t[0].length;t.forEach((i,s)=>{E(i.length===n,()=>`Error in concat${n}D: rank of tensors[${s}] must be the same as the rank of the rest (${n})`)}),E(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((i,s)=>{for(let o=0;o<n;o++)E(o===e||i[o]===r[o],()=>`Error in concat${n}D: Shape of tensors[${s}] (${i}) does not match the shape of the rest (${r}) along the non-concatenated axis ${s}.`)})}function $s(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Wi;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(Wi||(Wi={}));function tG(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let i=1;i<n.length;++i){const s=n[i],o=r[r.length-n.length+i],a=r[o];if(s>=0)if(a>=0){if(a!==s)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${i+t}] = ${s} but shape[${i+t}] = ${a}`)}else r[o]=s}return r}function nG(t){const e={FIRST_DIM_SIZE:Wi.FIRST_DIM_SIZE,VALUE_ROWIDS:Wi.VALUE_ROWIDS,ROW_LENGTHS:Wi.ROW_LENGTHS,ROW_SPLITS:Wi.ROW_SPLITS,ROW_LIMITS:Wi.ROW_LIMITS,ROW_STARTS:Wi.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function rG(t){return t.length===0?0:t[0]===Wi.FIRST_DIM_SIZE?t.length-1:t.length}function iG(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let i=0;i<Math.min(n,r-1);++i){const s=t[i],o=e[i+1];if(s>=0&&o>=0&&s!==1&&s!==o)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${i-t.length}] = ${s} but ragged tensor input.flatValues.shape[${i-t.length}] = ${o}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dE=30;function Tb(t){return t<=dE?t:d$(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pE(t,e,n){const r=n*(typeof t=="number"?t:t[0]),i=e*(typeof t=="number"?t:t[1]);return[r,i]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xm(t,e,n,r=!0){let i=[];if(r)i=i.concat(e.slice(0)),i.push(t[0]/n),i=i.concat(t.slice(1));else{i=i.concat(t[0]);const s=e.length;for(let o=0;o<s;++o)i=i.concat([t[o+1]/e[o],e[o]]);i=i.concat(t.slice(s+1))}return i}function bm(t,e,n=!0){const r=[];if(n){r.push(e);for(let i=e+1;i<t;++i)i<=2*e?(r.push(i),r.push(i-(e+1))):r.push(i)}else{const i=[],s=[];for(let o=1;o<t;++o)o>=e*2+1||o%2===1?s.push(o):i.push(o);r.push(...i),r.push(0),r.push(...s)}return r}function wm(t,e,n,r=!0){const i=[];r?i.push(t[0]/n):i.push(t[0]*n);for(let s=1;s<t.length;++s)s<=e.length?r?i.push(e[s-1]*t[s]):i.push(t[s]/e[s-1]):i.push(t[s]);return i}function mE(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function gE(t,e,n){const r=t.slice(0,1);for(let i=0;i<n;++i)r.push(t[i+1]-e[i][0]-e[i][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Eb=1.7580993408473768,Nb=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yE=.3275911,vE=.254829592,xE=-.284496736,bE=1.421413741,wE=-1.453152027,SE=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ho(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function sG(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function oG(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let i=0;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}function aG(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let i=2;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}function CE(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function lG(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function uG(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let i=0;i<Math.ceil(t/2);i++){const s=(e?2:-2)*Math.PI*(i/t);n[i]=Math.cos(s),r[i]=Math.sin(s)}return{real:n,imag:r}}function cG(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),i=Math.cos(r),s=Math.sin(r);return{real:i,imag:s}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dw="->",DAe=/->/g,cM=",",fM="...";function $E(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(DAe,"").length)/dw.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${dw}").`);const[r,i]=t.split(dw);E(r.indexOf(fM)===-1,()=>`The ellipsis notation ("${fM}") is not supported yet.`);const s=r.split(cM),o=s.length;if(e!==o)throw new Error(`Expected ${o} input tensors, received ${e}`);if(o>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const a=[];for(let h=0;h<i.length;++h){const d=i[h];if(!s.some(p=>p.indexOf(d)!==-1))throw new Error(`Output subscripts contain the label ${d} not present in the input subscripts.`);a.indexOf(d)===-1&&a.push(d)}for(let h=0;h<r.length;++h){const d=r[h];a.indexOf(d)===-1&&d!==cM&&a.push(d)}const l=new Array(s.length);for(let h=0;h<o;++h){if(new Set(s[h].split("")).size!==s[h].length)throw new Error(`Found duplicate axes in input component ${s[h]}. Support for duplicate axes in input is not implemented yet.`);l[h]=[];for(let d=0;d<s[h].length;++d)l[h].push(a.indexOf(s[h][d]))}const u=a.length,c=i.length,f=[];for(let h=c;h<u;++h)f.push(h);return{allDims:a,summedDims:f,idDims:l}}function kE(t,e){let n=new Array(t);n.fill(-1);for(let i=0;i<e.length;++i)n[e[i]]=i;const r=[];for(let i=0;i<t;++i)n[i]===-1&&r.push(i);return n=n.filter(i=>i!==-1),{permutationIndices:n,expandDims:r}}function IE(t,e,n){const r=new Array(t);for(let i=0;i<n.length;++i){const s=n[i].shape;for(let o=0;o<e[i].length;++o)r[e[i][o]]===void 0?r[e[i][o]]=s[o]:E(r[e[i][o]]===s[o],()=>`Expected dimension ${r[e[i][o]]} at axis ${o} of input shaped ${JSON.stringify(s)}, but got dimension ${s[o]}`)}}function TE(t,e){const n=t,r=[];let i=0;t.length===0&&n.push(-1),i=t.length+1;for(let o=0;o<i;++o)r.push([]);const s=[];for(let o=0;o<n.length;++o){const a=n[o],l=RAe(e,a);for(const u of l)s.indexOf(u)===-1&&(r[o].push(u),s.push(u))}return{path:n,steps:r}}function EE(t){return t.every((e,n)=>e===n)}function RAe(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function NE(t,e,n=0){let r=[];if(typeof e=="number")E(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const i=e.reduce((o,a)=>(a===-1&&(o+=1),o),0);E(i<=1,()=>"There should be only one negative value in split array.");const s=e.indexOf(-1);if(s!==-1){const o=e.reduce((a,l)=>l>0?a+l:a);e[s]=t.shape[n]-o}E(t.shape[n]===e.reduce((o,a)=>o+a),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fG(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function hG(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function dG(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pG(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function mG(t,e){return`size ${t} must be non-negative, not ${e}`}function gG(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function yG(t,e){const n=J(t),r=J(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function vG(t,e){const n=J(t),r=J(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O$(){return"segment ids must be >= 0"}function xG(){return"segment ids are not increasing"}function bG(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function wG(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SG(t,e){let n=!1,r;for(t<=dE?(r=t,n=!0):r=d$(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=d$(t,r+1);return r}function CG(t,e,n){const r=[],i=t.length;for(let s=0;s<i;s++)s!==e?r.push(t[s]):r.push(n);return r}function AE(t,e,n,r){const i=e.shape.length,s=t.shape.length;if(r!==0&&(r<-i||r>i))throw new Error(`Expect batchDims in the range of [-${i}, ${i}], but got ${r}`);if(r<0&&(r+=i),r>s)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${s}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let f=0;f<r;++f)if(t.shape[f]!==e.shape[f])throw new Error(`x.shape[${f}]: ${t.shape[f]} should be equal to indices.shape[${f}]: ${e.shape[f]}.`);const o=t.shape[n],a=[];let l=1,u=1,c=1;for(let f=0;f<r;++f)a.push(t.shape[f]),l*=t.shape[f];for(let f=r;f<n;f++)a.push(t.shape[f]),u*=t.shape[f];for(let f=r;f<i;f++)a.push(e.shape[f]);for(let f=n+1;f<s;f++)a.push(t.shape[f]),c*=t.shape[f];return{batchSize:l,sliceSize:c,outerSize:u,dimSize:o,outputShape:a}}const MAe=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:AE,computeOutShape:CG,segOpComputeOptimalWindowSize:SG},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function po(t){try{return t.map(e=>aa(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function $G(t){return t.map(e=>ea(e))}const FAe=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:vE,ERF_A2:xE,ERF_A3:bE,ERF_A4:wE,ERF_A5:SE,ERF_P:yE,PARALLELIZE_THRESHOLD:dE,get RowPartitionType(){return Wi},SELU_SCALE:Nb,SELU_SCALEALPHA:Eb,applyActivation:J2,assertAndGetBroadcastShape:_e,assertAxesAreInnerMostDims:kn,assertParamsConsistent:hE,assignToTypedArray:lG,axesAreInnerMostDims:A2,calculateShapes:Zl,checkEinsumDimSizes:IE,checkPadOnDimRoundingMode:mr,combineLocations:mU,combineRaggedTensorToTensorShapes:tG,complexWithEvenIndex:oG,complexWithOddIndex:aG,computeConv2DInfo:$n,computeConv3DInfo:ka,computeDefaultPad:$2,computeDilation2DInfo:pm,computeOptimalWindowSize:Tb,computeOutAndReduceShapes:yn,computeOutShape:$s,computePool2DInfo:Ii,computePool3DInfo:bo,convertConv2DDataFormat:wo,decodeEinsumEquation:$E,eitherStridesOrDilationsAreOne:Mn,expandShapeToKeepDim:Yt,exponent:cG,exponents:uG,fromStringArrayToUint8:$G,fromUint8ToStringArray:po,getAxesPermutation:Nt,getBroadcastDims:Rc,getComplexWithIndex:CE,getEinsumComputePath:TE,getEinsumPermutation:kE,getFusedBiasGradient:Q2,getFusedDyActivation:Z2,getImageCenter:pE,getInnerMostAxes:Vt,getPermuted:bm,getRaggedRank:rG,getReductionAxes:on,getReshaped:xm,getReshapedPermuted:wm,getRowPartitionTypesHelper:nG,getSliceBeginCoords:mE,getSliceSize:gE,getSparseFillEmptyRowsIndicesDenseShapeMismatch:fG,getSparseFillEmptyRowsNegativeIndexErrorMessage:hG,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:dG,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:gG,getSparseReshapeInputOutputMismatchErrorMessage:vG,getSparseReshapeInputOutputMultipleErrorMessage:yG,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:pG,getSparseReshapeNegativeOutputDimErrorMessage:mG,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:wG,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:O$,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:xG,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:bG,getUndoAxesPermutation:Ia,isIdentityPermutation:EE,log:bke,mergeRealAndImagArrays:ho,prepareAndValidate:oE,prepareSplitSize:NE,segment_util:MAe,shouldFuse:eE,slice_util:OAe,splitRealAndImagArrays:sG,stridesOrDilationsArePositive:Nl,tupleValuesAreOne:El,upcastType:Tr,validateDefaultValueShape:iG,validateInput:pNe,validateUpdateShape:DU,warn:Fr},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */IAe();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kG={kernelName:yx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>z(t,vm(me(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LAe={kernelName:xp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=gt(me(n,"float32")),i=Rn(Ie(Ze(1),r));return jt(ke(t,i))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BAe={kernelName:bp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Rn(Ie(gt(me(n,"float32")),1));return ke(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jAe={kernelName:df,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=_e(n.shape,r.shape);return{a:()=>{let a=t;const l=on(n.shape,i);return l.length>0&&(a=$e(a,l)),G(a,n.shape)},b:()=>{let a=t;const l=on(r.shape,i);return l.length>0&&(a=$e(a,l)),G(a,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zAe={kernelName:DT,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((r,i)=>{n[i]=()=>t.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VAe={kernelName:vx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ge(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WAe={kernelName:xx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ge(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UAe={kernelName:wp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ke(t,Rn(Ie(Ze(1),gt(me(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GAe={kernelName:Sp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Rn(oe(Ze(1),gt(me(n,"float32"))));return ke(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HAe={kernelName:kp,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=_e(n.shape,r.shape);return{a:()=>{const a=oe(gt(n),gt(r));let l=z(t,ke(r,a));const u=on(n.shape,i);return u.length>0&&(l=$e(l,u)),G(l,n.shape)},b:()=>{const a=oe(gt(n),gt(r));let l=jt(z(t,ke(n,a)));const u=on(r.shape,i);return u.length>0&&(l=$e(l,u)),G(l,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KAe={kernelName:Cp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ke(t,oe(gt(me(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qAe={kernelName:$p,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ke(t,Ie(Ze(1),gt(me(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XAe(t,e,n,r,i,s){const o=L(t,"dy","avgPool3dGrad"),a=L(e,"input","avgPool3dGrad");let l=o,u=a,c=!1;a.rank===4&&(c=!0,l=G(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),u=G(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),E(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),E(u.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${u.rank}.`),mr("avgPool3dGrad",i,s);const f={dy:l,input:u},h={filterSize:n,strides:r,pad:i,dimRoundingMode:s},d=W.runKernel(LT,f,h);return c?G(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const YAe=H({avgPool3dGrad_:XAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZAe={kernelName:wx,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:i,strides:s,pad:o,dimRoundingMode:a}=n;return{x:()=>YAe(t,r,i,s,o,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QAe(t,e,n,r,i){const s=L(t,"dy","avgPoolGrad"),o=L(e,"input","avgPoolGrad");E(o.rank===s.rank,()=>`Rank of input (${o.rank}) does not match rank of dy (${s.rank})`);let a=o,l=s,u=!1;o.rank===3&&(u=!0,a=G(o,[1,o.shape[0],o.shape[1],o.shape[2]]),l=G(s,[1,s.shape[0],s.shape[1],s.shape[2]])),E(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),E(a.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${a.rank}.`);const c={dy:l,input:a},f={filterSize:n,strides:r,pad:i},h=W.runKernel(FT,c,f);return u?G(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const JAe=H({avgPoolGrad_:QAe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eOe={kernelName:bx,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:i,strides:s,pad:o}=n;return{x:()=>JAe(t,r,i,s,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tOe={kernelName:Sx,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[r,i]=e,{transposeA:s,transposeB:o}=n;return!s&&!o?{a:()=>Ye(t,i,!1,!0),b:()=>Ye(r,t,!0,!1)}:!s&&o?{a:()=>Ye(t,i,!1,!1),b:()=>Ye(t,r,!0,!1)}:s&&!o?{a:()=>Ye(i,t,!1,!0),b:()=>Ye(r,t,!1,!1)}:{a:()=>Ye(i,t,!0,!0),b:()=>Ye(t,r,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nOe={kernelName:Cx,gradFunc:(t,e,n)=>{const{blockShape:r,crops:i}=n;return{x:()=>L2(t,r,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rOe={kernelName:gke,gradFunc:(t,e,n)=>{const r=n,i=r.inputShape,s=r.shape,o=Array.from(s);for(let l=i.length-1;l>=0;l--)if(i[l]===s[l])o[l]=1;else if(i[l]!==1)throw new Error(`broadcastTo(): [${i}] cannot be broadcast to [${s}].`);const a=[];for(let l=0;l<o.length;l++)o[l]>1&&a.push(l);return{x:()=>$e(t,a,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iOe={kernelName:Ip,gradFunc:t=>({x:()=>t.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sOe={kernelName:Tp,gradFunc:t=>({x:()=>Ge(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oOe={kernelName:Ep,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{clipValueMin:i,clipValueMax:s}=n;return{x:()=>Jn(co(ql(r,i),gf(r,s)),t,Ge(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aOe={kernelName:$x,inputsToSave:["x"],gradFunc:kG.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lOe={kernelName:kx,saveAllInputs:!0,gradFunc:(t,e,n)=>{const r=e.map(l=>l.shape),{axis:i}=n,s=Me(i,e[0].shape)[0],o=r.map(l=>l[s]);return Vr(t,o,s).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uOe={kernelName:Ix,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,{dilations:s,strides:o,pad:a,dataFormat:l}=n;return E(El(s),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`),{x:()=>T2(r.shape,t,i,o,a,l),filter:()=>Y2(r,t,i.shape,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cOe={kernelName:Tx,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,{strides:s,pad:o,dataFormat:a,dimRoundingMode:l}=n;return{dy:()=>Al(t,i,s,o,a,1,l),filter:()=>Y2(t,r,i.shape,s,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fOe(t,e,n,r,i){let s=t;t.rank===4&&(s=G(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let o=e;o.rank===4&&(o=G(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),E(s.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${s.shape}.`),E(o.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${o.shape}.`),E(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),E(s.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${s.shape[4]}) must match input depth in filter (${n[3]}.`),E(o.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${o.shape[4]}) must match output depth for filter (${n[4]}).`);const a={x:s,dy:o},l={strides:r,pad:i,filterShape:n};return W.runKernel(WT,a,l)}const hOe=H({conv3DBackpropFilter_:fOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dOe={kernelName:Ex,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:i,pad:s}=n;E(El(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[o,a]=e;return{x:()=>fU(o.shape,t,a,i,s),filter:()=>hOe(o,t,a.shape,i,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pOe={kernelName:Np,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>z(jt(AU(me(n,"float32"))),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mOe={kernelName:Ap,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>z(OU(me(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gOe={kernelName:Nx,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i,exclusive:s,reverse:o}=n;return{x:()=>{const a=Nt([i],r.rank);let l=dU(t,i,s,!o);return a!=null&&(l=Ue(l,a)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yOe={kernelName:Ax,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:i,pad:s,dimRoundingMode:o}=n,a=r??[1,1];E(El(a),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[l,u]=e;return E(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),E(u.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${u.rank}.`),E(l.shape[3]===u.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${u.shape[2]}.`),E(Mn(i,a),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${i} and dilations '${a}'.`),mr("depthwiseConv2d",s,o),{x:()=>_Ne(l.shape,t,u,i,s,a,o),filter:()=>ONe(l,t,u.shape,i,s,a,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vOe={kernelName:Ox,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,s={x:r,filter:i,dy:t},o={x:r,filter:i,dy:t};return{x:()=>W.runKernel(p$,s,n),filter:()=>W.runKernel(m$,o,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xOe={kernelName:Pp,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,r={dy:t,y:n};return{x:()=>W.runKernel(QT,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bOe={kernelName:_p,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=z(Ns(jt(gt(n))),2/Math.sqrt(Math.PI));return{x:()=>z(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wOe={kernelName:Dp,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>z(t,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SOe={kernelName:_x,inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>G(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const COe={kernelName:Rp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>z(t,Ns(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Oe={kernelName:Mp,gradFunc:t=>({x:()=>Ge(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kOe={kernelName:Fp,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=_e(n.shape,r.shape);return{a:()=>{const a=ke(t,me(r,"float32")),l=on(n.shape,i);return l.length>0?G($e(a,l),n.shape):a},b:()=>{let a=z(t,me(n,"float32"));const l=on(r.shape,i);l.length>0&&(a=G($e(a,l),r.shape));const u=gt(r);return jt(ke(a,me(u,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IOe={kernelName:Dx,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:r}=n,[i,s,o,a]=e,l=a??Ze(1),u=on(s.shape,i.shape),c=[];if(s.rank===1){for(let b=0;b<i.shape.length-1;++b)c.push(i.shape[b]);c.push(1)}const f=Ie(i,s),h=z(t,l),d=TU(oe(o,Ze(r))),p=z(z(z(d,d),d),Ze(-.5));return{x:()=>s.rank===1?G(z(z(t,Ki(G(d,[1,1,1,s.shape[0]]),c)),l),i.shape):G(z(z(t,d),l),i.shape),mean:()=>{let b=z(z(d,Ze(-1)),h);return s.rank===1&&(b=$e(b,u)),G(b,s.shape)},variance:()=>{let b=z(z(p,f),h);return s.rank===1&&(b=$e(b,u)),G(b,s.shape)},scale:()=>{const b=z(f,d);let w=z(t,b);return s.rank===1&&(w=$e(w,u)),G(w,s.shape)},offset:()=>{let b=t;return s.rank===1&&(b=$e(b,u)),G(b,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TOe={kernelName:Rx,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[r,i]=e,{axis:s,batchDims:o}=n,a=Me(s,r.shape)[0],l=(u,c,f)=>()=>{const h=u.shape,d=c.size,p=h.slice(0,a),m=p.length,g=h.slice(s,h.length).slice(1),y=g.length,v=hM(0,m),x=hM(m+1,m+1+y),b=dM([p,[d],g]),w=G(f,b),S=G(c,[d]),C=dM([[m],v,x]),$=Ue(w,C);let k=MU($,S,u.shape[a]);const I=Ia(C);return k=Ue(k,I),k};if(o===1){const u=r.shape[0],c=r.split(u,0);return{x:()=>fo(c.map((d,p)=>l(d,i.slice(p,1),t.slice(p,1))())).reshape(r.shape),indices:()=>i}}else return{x:l(r,i,t),indices:()=>i}}};function hM(t,e){const n=[];for(let r=t;r<e;++r)n.push(r);return n}function dM(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t[n].length;++r)e.push(t[n][r]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EOe={kernelName:Lp,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>Ge(n),b:()=>Ge(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NOe={kernelName:Bp,gradFunc:t=>({x:()=>me(t,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AOe={kernelName:jp,gradFunc:t=>({x:()=>Ge(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OOe={kernelName:zp,gradFunc:t=>({x:()=>Ge(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const POe={kernelName:Vp,gradFunc:t=>({x:()=>Ge(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Oe={kernelName:Fx,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{alpha:i}=n,s=Xr(r,0);return{x:()=>Jn(s,t,z(t,i))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DOe={kernelName:Up,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ke(t,oe(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ROe={kernelName:Wp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ke(t,me(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MOe={kernelName:vke,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n;return{logits:()=>{const o=Ns(r);return Ie(t,z($e(t,i,!0),o))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FOe(t,e,n,r=5,i=1,s=1,o=.5){const a={x:t,y:e,dy:n},l={depthRadius:r,bias:i,alpha:s,beta:o};return W.runKernel(i2,a,l)}const LOe=H({localResponseNormalizationBackprop_:FOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BOe={kernelName:Wx,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{depthRadius:s,bias:o,alpha:a,beta:l}=n;return{x:()=>LOe(r,i,t,s,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IG(t,e,n,r){return e.rank<n.rank&&(e=G(e,Yt(e.shape,r))),t.rank<n.rank&&(t=G(t,Yt(t.shape,r))),{x:()=>z(t,me(Es(n,e),t.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pM={kernelName:Ux,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{reductionIndices:i}=r,s=e[0],o=e[1],a=Me(i,s.shape),l=IG(t,o,s,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jOe={kernelName:Gp,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>z(t,me(ql(n,r),"float32")),b:()=>z(t,me(Lv(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zOe(t,e,n,r,i,s,o){const a=L(t,"dy","maxPool3dGrad"),l=L(e,"input","maxPool3dGrad"),u=L(n,"output","maxPool3dGrad");let c=a,f=l,h=u,d=!1;l.rank===4&&(d=!0,c=G(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),f=G(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),h=G(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),E(c.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${c.rank}.`),E(f.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${f.rank}.`),E(h.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${h.rank}.`),mr("maxPool3dGrad",s,o);const p={dy:c,input:f,output:h},m={filterSize:r,strides:i,pad:s,dimRoundingMode:o},g=W.runKernel(o2,p,m);return d?G(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}const VOe=H({maxPool3dGrad_:zOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WOe={kernelName:Hx,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{filterSize:s,strides:o,pad:a,dimRoundingMode:l}=n;return{x:()=>VOe(t,r,i,s,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UOe(t,e,n,r,i,s,o){const a=L(t,"dy","maxPoolGrad"),l=L(e,"input","maxPoolGrad"),u=L(n,"output","maxPoolGrad");E(l.rank===a.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${a.rank})`),E(a.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${a.rank}.`),E(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),mr("maxPoolGrad",s,o);const c={dy:a,input:l,output:u},f={filterSize:r,strides:i,pad:s,dimRoundingMode:o};return W.runKernel(s2,c,f)}const GOe=H({maxPoolGrad_:UOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HOe={kernelName:Gx,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{filterSize:s,strides:o,pad:a}=n;return{x:()=>GOe(t,r,i,s,o,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KOe={kernelName:Kx,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n,s=Me(i,r.shape),a=yn(r.shape,s)[1],l=J(a);return{x:()=>{const c=r.shape.slice();s.forEach(d=>{c[d]=1});const f=G(t,c);return ke(z(f,Ea(r.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qOe={kernelName:qx,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{axis:i}=r,[s,o]=e,a=Me(i,s.shape),l=IG(t,o,s,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XOe={kernelName:Hp,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>z(t,me(gf(n,r),"float32")),b:()=>z(t,me(Xr(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YOe={kernelName:Xx,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:i}=n,s=i.map(o=>o[0]);return{x:()=>ft(t,s,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZOe={kernelName:Kp,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=_e(n.shape,r.shape);return{a:()=>{const a=on(n.shape,i);return a.length>0?G($e(t,a),n.shape):t},b:()=>{const a=z(t,jt(kb(ke(n,r)))),l=on(r.shape,i);return l.length>0?G($e(a,l),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QOe={kernelName:qp,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=_e(n.shape,r.shape);return{a:()=>{const a=z(t,me(r,"float32")),l=on(n.shape,i);return l.length>0?G($e(a,l),n.shape):a},b:()=>{const a=z(t,me(n,"float32")),l=on(r.shape,i);return l.length>0?G($e(a,l),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JOe={kernelName:Yx,gradFunc:t=>({x:()=>jt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ePe={kernelName:Jx,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>hn(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tPe={kernelName:Qx,gradFunc:t=>({x:()=>Ge(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nPe={kernelName:eb,saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:r}=n;return _l(t,r).map(s=>()=>s)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mM={kernelName:tb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:i}=n,s=i.map(o=>o[0]);return{x:()=>ft(t,s,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rPe={kernelName:Xp,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,r,i]=e,s=n,o=r,a=_e(s.shape,o.shape);return{a:()=>{const c=me(o,"float32");let f=z(t,z(c,Ol(s,Ie(c,Ze(1)))));const h=on(s.shape,a);return h.length>0&&(f=$e(f,h)),G(f,s.shape)},b:()=>{const c=Xr(s,0),f=Jn(c,As(s),Ge(s));let h=z(t,z(i,f));const d=on(o.shape,a);return d.length>0&&(h=$e(h,d)),G(h,o.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iPe={kernelName:nb,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,r]=e,i=Xr(n,0);return{x:()=>Jn(i,t,z(t,r)),alpha:()=>{let s=Jn(i,Ge(t),z(t,n));const o=on(r.shape,t.shape);return o.length>0&&(s=$e(s,o)),G(s,r.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sPe(t,e,n){const r=t.shape.slice();r[n]=1;const i=G(e,r),s=E$(t,n,!0,!1),o=E$(t,n,!0,!0),a=z(s,o);return z(i,a)}function oPe(t,e,n){const r=t.shape.length,i=r-n.length,s=Nt(n,r);let o=t;s!=null&&(o=Ue(t,s));const a=o.shape.slice(),u=a.splice(r-n.length,n.length).reduce((h,d)=>h*d,1);a.push(u);const c=o.reshape(a);let f=sPe(c,e,i);if(f=f.reshape(o.shape),s!=null){const h=Ia(s);f=Ue(f,h)}return f}const aPe={kernelName:rb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n;let s=[];return i==null?s=r.shape.map((o,a)=>a):typeof i=="number"?s=[i]:s=i,{x:()=>oPe(r,t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lPe={kernelName:Op,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=_e(n.shape,r.shape);return{a:()=>{const a=ke(t,me(r,"float32")),l=on(n.shape,i);return l.length>0?G($e(a,l),n.shape):a},b:()=>{let a=z(t,me(n,"float32"));const l=on(r.shape,i);l.length>0&&(a=G($e(a,l),r.shape));const u=gt(r);return jt(ke(a,me(u,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uPe={kernelName:Yp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ke(t,jt(gt(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cPe={kernelName:Qp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=z(gf(n,6),vm(n));return{x:()=>z(t,me(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fPe={kernelName:Zp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>z(t,me(vm(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hPe={kernelName:ib,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>G(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dPe={kernelName:ob,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,i={dy:t,images:r};return{images:()=>W.runKernel(d2,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pPe={kernelName:sb,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,i={dy:t,images:r};return{images:()=>W.runKernel(h2,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mPe={kernelName:ab,gradFunc:(t,e,n)=>{const{dims:r}=n,i=Me(r,t.shape);return{x:()=>Pl(t,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gPe={kernelName:Jp,gradFunc:t=>({x:()=>Ge(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yPe={kernelName:em,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>jt(ke(t,z(Ol(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vPe={kernelName:lb,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>me(Ge(n),"float32"),t:()=>z(t,me(n,t.dtype)),e:()=>z(t,me(D2(n),t.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xPe={kernelName:tm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Xr(n,Ze(0)),i=Ze(Eb),s=Ze(Nb),o=z(t,s),a=z(z(t,i),Ns(me(n,"float32")));return Jn(r,o,a)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bPe={kernelName:sm,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>z(t,z(n,Ie(Ze(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wPe={kernelName:im,gradFunc:t=>({x:()=>Ge(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SPe={kernelName:nm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>z(E2(me(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CPe={kernelName:rm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>z(hU(me(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Pe={kernelName:ub,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{begin:i,size:s}=n,o=r.shape,[a,l]=Ib(r,i,s),u=[];for(let c=0;c<t.rank;c++)u.push([a[c],o[c]-a[c]-l[c]]);return{x:()=>F2(t,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kPe={kernelName:db,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{dim:i}=n,s=!0,o=z(t,r);return{logits:()=>Ie(o,z($e(o,[i],s),r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IPe={kernelName:om,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>z(t,mf(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gM={kernelName:fb,gradFunc:(t,e,n)=>{const{blockShape:r,paddings:i}=n;return{x:()=>I2(t,r,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yM={kernelName:hb,gradFunc:(t,e,n)=>{const{axis:r}=n;return{x:()=>cr(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TPe={kernelName:am,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ke(t,z(Rn(me(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EPe={kernelName:p2,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>z(t,z(me(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NPe={kernelName:lm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Ze(2);return{a:()=>z(t,z(i,Ie(n,r))),b:()=>z(t,z(i,Ie(r,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const APe={kernelName:dm,gradFunc:t=>({x:()=>Ge(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OPe={kernelName:um,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=_e(n.shape,r.shape);return{a:()=>{let a=t;const l=on(n.shape,i);return l.length>0&&(a=$e(a,l)),G(a,n.shape)},b:()=>{let a=t;const l=on(r.shape,i);return l.length>0&&(a=$e(a,l)),G(jt(a),r.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PPe={kernelName:cb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,i=r.shape.slice(),{axis:s}=n;Me(s,r.shape).forEach(u=>{i[u]=1});const a=G(t,i),l=z(a,Ea(r.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Pe={kernelName:cm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ke(t,gt(E2(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DPe={kernelName:fm,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>z(Ie(Ze(1),gt(n)),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RPe={kernelName:hm,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{reps:i}=n;return{x:()=>{let o=Ge(r);if(r.rank===1)for(let a=0;a<i[0];++a)o=oe(o,ft(t,[a*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let a=0;a<i[0];++a)for(let l=0;l<i[1];++l)o=oe(o,ft(t,[a*r.shape[0],l*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let a=0;a<i[0];++a)for(let l=0;l<i[1];++l)for(let u=0;u<i[2];++u)o=oe(o,ft(t,[a*r.shape[0],l*r.shape[1],u*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let a=0;a<i[0];++a)for(let l=0;l<i[1];++l)for(let u=0;u<i[2];++u)for(let c=0;c<i[3];++c)o=oe(o,ft(t,[a*r.shape[0],l*r.shape[1],u*r.shape[2],c*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MPe={kernelName:qu,gradFunc:(t,e,n)=>{const r=n,{perm:i}=r,s=Ia(i);return{x:()=>Ue(t,s)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FPe={kernelName:pb,gradFunc:(t,e,n)=>{const r=n,{axis:i}=r;return{value:()=>fo(t,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LPe={kernelName:mb,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>BPe(t,n)}}};function BPe(t,e){const n=Ta(e,Ge(e)),r=O2(t,n);let i=ql(e,Ze(0,"int32"));const s=r.rank-i.rank;for(let a=0;a<s;++a)i=or(i,a+1);i=co(i,Ea(r.shape,"bool"));const o=Ge(r);return Jn(i,r,o)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jPe={kernelName:gb,gradFunc:t=>({x:()=>Ge(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zPe=[kG,LAe,BAe,jAe,zAe,VAe,WAe,UAe,GAe,HAe,KAe,qAe,ZAe,eOe,tOe,nOe,rOe,iOe,sOe,oOe,aOe,lOe,cOe,uOe,dOe,pOe,mOe,gOe,yOe,vOe,lPe,xOe,bOe,wOe,SOe,COe,kOe,$Oe,IOe,TOe,EOe,NOe,AOe,OOe,POe,_Oe,DOe,ROe,MOe,BOe,pM,pM,jOe,WOe,HOe,KOe,qOe,XOe,YOe,ZOe,QOe,JOe,ePe,tPe,nPe,mM,mM,rPe,iPe,aPe,uPe,cPe,fPe,hPe,dPe,pPe,mPe,gPe,yPe,vPe,xPe,bPe,wPe,SPe,CPe,$Pe,kPe,IPe,gM,gM,yM,yM,TPe,NPe,EPe,APe,OPe,PPe,_Pe,DPe,RPe,MPe,FPe,LPe,jPe];for(const t of zPe)wke(t);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.abs=function(){return this.throwIfDisposed(),Hn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.acos=function(){return this.throwIfDisposed(),CIe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.acosh=function(){return this.throwIfDisposed(),kIe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.add=function(t){return this.throwIfDisposed(),oe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.all=function(t,e){return this.throwIfDisposed(),lU(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.any=function(t,e){return this.throwIfDisposed(),I$(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.argMax=function(t){return this.throwIfDisposed(),Bd(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.argMin=function(t){return this.throwIfDisposed(),AIe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.asScalar=function(){return this.throwIfDisposed(),E(this.size===1,()=>"The array must have only 1 element."),G(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.asType=function(t){return this.throwIfDisposed(),me(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.as1D=function(){return this.throwIfDisposed(),G(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.as2D=function(t,e){return this.throwIfDisposed(),G(this,[t,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),G(this,[t,e,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),G(this,[t,e,n,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.as5D=function(t,e,n,r,i){return this.throwIfDisposed(),G(this,[t,e,n,r,i])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.asin=function(){return this.throwIfDisposed(),PIe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.asinh=function(){return this.throwIfDisposed(),DIe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.atan=function(){return this.throwIfDisposed(),MIe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.atan2=function(t){return this.throwIfDisposed(),LIe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.atanh=function(){return this.throwIfDisposed(),jIe(this)};Q().prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),k2(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),I2(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.batchNorm=function(t,e,n,r,i){return this.throwIfDisposed(),wb(this,t,e,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.broadcastTo=function(t){return this.throwIfDisposed(),Ph(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.cast=function(t){return this.throwIfDisposed(),me(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.ceil=function(){return this.throwIfDisposed(),dTe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),Hr(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof Qt&&(t=[t]),cr([this,...t],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.conv1d=function(t,e,n,r,i,s){return this.throwIfDisposed(),uU(this,t,e,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.conv2dTranspose=function(t,e,n,r,i){return this.throwIfDisposed(),cU(this,t,e,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.conv2d=function(t,e,n,r,i,s){return this.throwIfDisposed(),Al(this,t,e,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.cos=function(){return this.throwIfDisposed(),E2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.cosh=function(){return this.throwIfDisposed(),hU(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.cumprod=function(t,e,n){return this.throwIfDisposed(),E$(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),dU(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),LTe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.depthwiseConv2d=function(t,e,n,r,i,s){return this.throwIfDisposed(),N2(this,t,e,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.dilation2d=function(t,e,n,r,i){return this.throwIfDisposed(),zTe(this,t,e,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.divNoNan=function(t){return this.throwIfDisposed(),HTe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.div=function(t){return this.throwIfDisposed(),ke(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.dot=function(t){return this.throwIfDisposed(),qTe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.elu=function(){return this.throwIfDisposed(),Cb(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.equal=function(t){return this.throwIfDisposed(),Es(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.erf=function(){return this.throwIfDisposed(),pU(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.euclideanNorm=function(t,e){return this.throwIfDisposed(),o2e(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.exp=function(){return this.throwIfDisposed(),Ns(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.expandDims=function(t){return this.throwIfDisposed(),or(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.expm1=function(){return this.throwIfDisposed(),c2e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.fft=function(){return this.throwIfDisposed(),_U(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.flatten=function(){return this.throwIfDisposed(),G(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.floor=function(){return this.throwIfDisposed(),kb(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.floorDiv=function(t){return this.throwIfDisposed(),aU(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.gather=function(t,e,n){return this.throwIfDisposed(),O2(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.greaterEqual=function(t){return this.throwIfDisposed(),ql(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.greater=function(t){return this.throwIfDisposed(),Xr(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.ifft=function(){return this.throwIfDisposed(),N$(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.irfft=function(){return this.throwIfDisposed(),tNe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.isFinite=function(){return this.throwIfDisposed(),x2e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.isInf=function(){return this.throwIfDisposed(),w2e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.isNaN=function(){return this.throwIfDisposed(),C2e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.leakyRelu=function(t){return this.throwIfDisposed(),_2(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.lessEqual=function(t){return this.throwIfDisposed(),gf(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.less=function(t){return this.throwIfDisposed(),Lv(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.localResponseNormalization=function(t,e,n,r){return this.throwIfDisposed(),E2e(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.logSigmoid=function(){return this.throwIfDisposed(),R2e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.logSoftmax=function(t){return this.throwIfDisposed(),xU(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),bU(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.log=function(){return this.throwIfDisposed(),As(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.log1p=function(){return this.throwIfDisposed(),vU(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.logicalAnd=function(t){return this.throwIfDisposed(),co(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.logicalNot=function(){return this.throwIfDisposed(),D2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.logicalOr=function(t){return this.throwIfDisposed(),wU(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.logicalXor=function(t){return this.throwIfDisposed(),W2e(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),Ye(this,t,e,n)};Q().prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),R2(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.max=function(t,e){return this.throwIfDisposed(),Zi(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.maximum=function(t){return this.throwIfDisposed(),Ta(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.mean=function(t,e){return this.throwIfDisposed(),Xt(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.min=function(t,e){return this.throwIfDisposed(),Fv(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.minimum=function(t){return this.throwIfDisposed(),Vd(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),Z2e(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.mod=function(t){return this.throwIfDisposed(),J2e(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.mul=function(t){return this.throwIfDisposed(),z(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.neg=function(){return this.throwIfDisposed(),jt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.norm=function(t,e,n){return this.throwIfDisposed(),$b(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.notEqual=function(t){return this.throwIfDisposed(),Bv(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),SU(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.onesLike=function(){return this.throwIfDisposed(),Ci(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.pad=function(t,e){return this.throwIfDisposed(),F2(this,t,e)};Q().prototype.pool=function(t,e,n,r,i,s){return this.throwIfDisposed(),uEe(this,t,e,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.pow=function(t){return this.throwIfDisposed(),Ol(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.prelu=function(t){return this.throwIfDisposed(),B2(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.prod=function(t,e){return this.throwIfDisposed(),hEe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.reciprocal=function(){return this.throwIfDisposed(),REe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.relu=function(){return this.throwIfDisposed(),Yl(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.relu6=function(){return this.throwIfDisposed(),kU(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.reshapeAs=function(t){return this.throwIfDisposed(),G(this,t.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.reshape=function(t){return this.throwIfDisposed(),G(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),LU(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),BU(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.reverse=function(t){return this.throwIfDisposed(),Pl(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.rfft=function(){return this.throwIfDisposed(),iNe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.round=function(){return this.throwIfDisposed(),IU(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.rsqrt=function(){return this.throwIfDisposed(),TU(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.selu=function(){return this.throwIfDisposed(),EU(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.separableConv2d=function(t,e,n,r,i,s){return this.throwIfDisposed(),NU(this,t,e,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.sigmoid=function(){return this.throwIfDisposed(),mf(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.sign=function(){return this.throwIfDisposed(),UEe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.sin=function(){return this.throwIfDisposed(),AU(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.sinh=function(){return this.throwIfDisposed(),OU(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.slice=function(t,e){return this.throwIfDisposed(),ft(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.softmax=function(t){return this.throwIfDisposed(),X2(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.softplus=function(){return this.throwIfDisposed(),mm(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),L2(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.split=function(t,e){return this.throwIfDisposed(),Vr(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.sqrt=function(){return this.throwIfDisposed(),Rn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.square=function(){return this.throwIfDisposed(),gt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.squaredDifference=function(t){return this.throwIfDisposed(),oNe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.squeeze=function(t){return this.throwIfDisposed(),ym(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof Qt?[this,t]:[this,...t];return fo(n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.step=function(t){return this.throwIfDisposed(),vm(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.stridedSlice=function(t,e,n,r,i,s,o,a){return this.throwIfDisposed(),fNe(this,t,e,n,r,i,s,o,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.sub=function(t){return this.throwIfDisposed(),Ie(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.sum=function(t,e){return this.throwIfDisposed(),$e(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.tan=function(){return this.throwIfDisposed(),dNe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.tanh=function(){return this.throwIfDisposed(),bb(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.tile=function(t){return this.throwIfDisposed(),Ki(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.toBool=function(){return this.throwIfDisposed(),me(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.toFloat=function(){return this.throwIfDisposed(),me(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.toInt=function(){return this.throwIfDisposed(),me(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.topk=function(t,e){return this.throwIfDisposed(),gNe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.transpose=function(t){return this.throwIfDisposed(),Ue(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.unique=function(t){return this.throwIfDisposed(),xNe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),MU(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.unstack=function(t){return this.throwIfDisposed(),_l(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.where=function(t,e){return this.throwIfDisposed(),Jn(t,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Q().prototype.zerosLike=function(){return this.throwIfDisposed(),Ge(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class cs extends Error{constructor(e){super(e),Object.setPrototypeOf(this,cs.prototype)}}class pi extends Error{constructor(e){super(e),Object.setPrototypeOf(this,pi.prototype)}}class B extends Error{constructor(e){super(e),Object.setPrototypeOf(this,B.prototype)}}class De extends Error{constructor(e){super(e),Object.setPrototypeOf(this,De.prototype)}}class OE extends Error{constructor(e){super(e),Object.setPrototypeOf(this,OE.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class TG{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let n;return this.cache.has(e)&&(n=this.cache.get(e),this.cache.delete(e),this.cache.set(e,n)),n}put(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let n=0;n<this.maxEntries-e;n++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Dl(t,e){if(Array.isArray(t)){let n=[];for(let r=0;r<e;r++)n=n.concat(t);return n}else{const n=new Array(e);return n.fill(t),n}}function fs(t,e){if(!t)throw new OE(e)}function vM(t,e){let n=0;for(const r of t)r===e&&n++;return n}function ar(t){return t.length===1?t[0]:t}function nt(t){return Array.isArray(t)?t:[t]}function Ls(t){const n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function Ha(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(e,n)=>n.toUpperCase())}let ni={};function PE(t){if(t==null)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function P$(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(e=>P$(e));else{const e=Object.keys(t);for(const n of e){const r=t[n];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?t[n]=r.value:P$(r))}}}function Sm(t,e={},n={},r="object",i=!1){if(typeof t=="string"){const s=t;let o;if(s in n)o=n[s];else if(s in ni)o=ni[s];else if(o=e[s],o==null)throw new B(`Unknown ${r}: ${t}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return o}else{const s=t;if(s.className==null||s.config==null)throw new B(`${r}: Improper config format: ${JSON.stringify(s)}.
'className' and 'config' must set.`);const o=s.className;let a,l;if(o in n?[a,l]=n[o]:o in ni?[a,l]=ni.className:o in e&&([a,l]=e[o]),a==null)throw new B(`Unknown ${r}: ${o}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const u={};for(const d of Object.keys(ni))u[d]=ni[d];for(const d of Object.keys(n))u[d]=n[d];const c=s.config;c.customObjects=u;const f=Object.assign({},ni);for(const d of Object.keys(n))ni[d]=n[d];P$(s.config);const h=l(a,s.config,n,i);return ni=Object.assign({},f),h}else{const u=Object.assign({},ni);for(const f of Object.keys(n))ni[f]=n[f];const c=new a(s.config);return ni=Object.assign({},u),c}}}function VPe(t,e){return t<e?-1:t>e?1:0}function xg(t,e){return-1*VPe(t,e)}function ta(t){if(t==null)return t;const e=[];for(const n of t)e.indexOf(n)===-1&&e.push(n);return e}function WPe(t){if(t==null)throw new B(`Invalid value in obj: ${JSON.stringify(t)}`);for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function Ql(t,e,n){if(n!=null&&t.indexOf(n)<0)throw new B(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function _E(t,e,n=0,r=1/0){return fs(n>=0),fs(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(i=>typeof i===e)}function mn(t,e){Array.isArray(t)?(E(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((n,r)=>mn(n,`element ${r+1} of ${e}`))):E(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got ${EG(t)}.`)}function EG(t){return t===null?"null":Array.isArray(t)?"["+t.map(e=>EG(e)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function UPe(t,e,n){let r=n!=null?n():sr(),i;return(...o)=>{const a=n!=null?n():sr();return a-r<e||(r=a,i=t(...o)),i}}function NG(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let GPe=0;function AG(){return GPe++}const bg={};function Ab(t=""){return t in bg||(bg[t]=0),bg[t]+=1,t+bg[t].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const HPe=["channelsFirst","channelsLast"],KPe=["nearest","bilinear"],qPe=["valid","same","causal"],XPe=["max","avg"],YPe=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const cu=new Map;function Wt(t){Ql(HPe,"DataFormat",t)}function ZPe(t){Ql(KPe,"InterpolationFormat",t)}function Yr(t){Ql(qPe,"PaddingMode",t)}function OG(t){Ql(XPe,"PoolMode",t)}const _h=[],xM="/";function hl(t,e){_h.push(t);try{const n=e();return _h.pop(),n}catch(n){throw _h.pop(),n}}function QPe(){return _h.length===0?"":_h.join(xM)+xM}function PG(t){if(!DG(t))throw new Error("Not a valid tensor name: '"+t+"'");return QPe()+t}function _G(t){if(!DG(t))throw new Error("Not a valid tensor name: '"+t+"'");cu.has(t)||cu.set(t,0);const e=cu.get(t);if(cu.set(t,cu.get(t)+1),e>0){const n=`${t}_${e}`;return cu.set(n,1),n}else return t}const JPe=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function DG(t){return!!t.match(JPe)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function e_e(t){return t===parseInt(t.toString(),10)}function na(t,e,n){e==null&&(e=0),n==null&&(n=t.length);let r=1;for(let i=e;i<n;++i)r*=t[i];return r}function Fc(t){if(t.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r<e&&(e=r)}return e}function la(t){if(t.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r>e&&(e=r)}return e}function es(t,e){if(e<t)throw new B(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let r=t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let pw;function en(){return pw==null&&(pw=Kke().epsilon()),pw}function ts(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ks(t,e){return me(t,e)}function Cm(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),G(t,n)}function t_e(t,e){return X(()=>{if(t.shape.length!==2)throw new B(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=Cm(t,1);return _$(n,[1,e,1])})}function n_e(t){const e=[na(t.shape)];return G(t,e)}function r_e(t){if(t.rank<=1)throw new B(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],na(t.shape,1)];return G(t,e)}function dl(t,e,n){return X(()=>{switch(t.rank){case 1:return K2(t,e,n);case 2:return PU(t,[e,0],[n,t.shape[1]]);case 3:return q2(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return zv(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return ft(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return ft(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new B(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function mw(t,e,n){return X(()=>{switch(t.rank){case 1:return K2(t,e,n);case 2:return PU(t,[0,e],[t.shape[0],n]);case 3:return q2(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return zv(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new B(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function wg(t,e,n,r){return X(()=>{switch(t.rank){case 1:return K2(t,e,n);case 2:switch(r){case 1:return dl(t,e,n);case 2:return mw(t,e,n);default:throw new B(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return dl(t,e,n);case 2:return q2(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return mw(t,e,n);default:throw new B(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return dl(t,e,n);case 2:return zv(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return zv(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return mw(t,e,n);default:throw new B(`The axis is not within the rank of the tensor ${r}`)}default:throw new B(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function DE(t,e=-1){let n;return e<0&&(n=t[0].rank,n!==0?e=n:e=0),e===t[0].rank&&(e=-1),cr(t,e)}function bM(t,e){switch(t.rank){case 1:return gTe([t,e]);case 2:return vTe([t,e],0);case 3:return bTe([t,e],0);case 4:return STe([t,e],0);default:throw new B(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function _$(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new B(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return Ki(t,e)}function Ob(t,e=0,n=1,r,i){return OEe(t,e,n,r,i)}function Is(t,e,n,r){if(t.rank<2||e.rank<2)throw new De(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const i=t.shape.slice(-1)[0],s=e.shape.slice(-2)[0];if(i!==s)throw new De(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${e.shape}`)}if(t.rank===2&&e.rank===2)return oM({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?D$(t.rank,r,ts()):null,activation:n});{const i=t.shape.slice(),s=i.pop();t=G(t,[-1,s]);const o=e.shape.slice(),a=o.pop(),l=o.pop(),u=[...o,a],c=Array.from({length:e.rank},(p,m)=>m===0?e.rank-2:m<=e.rank-2?m-1:m);e=G(Ue(e,c),[l,-1]);const f=[...i,...u];return G(oM({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?D$(t.rank,r,ts()):null,activation:n}),f)}}function RG(t,e,n){return X(()=>(Array.isArray(e)?e=Cr(e,"int32"):e=me(e,"int32"),O2(t,e,n)))}function $m(t){return z(t,t)}function D$(t,e,n){const r=e.shape;if(e.rank!==1&&e.rank!==t)throw new B(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return r.length===1?G(e,[1,r[0],1,1,1]):G(e,[1,r[3],r[0],r[1],r[2]]);if(n==="channelsLast")return r.length===1?G(e,[1,1,1,1,r[0]]):G(e,[1].concat(r))}else if(t===4){if(n==="channelsFirst")return r.length===1?G(e,[1,r[0],1,1]):G(e,[1,r[2],r[0],r[1]]);if(n==="channelsLast")return r.length===1?G(e,[1,1,1,r[0]]):G(e,[1].concat(r))}else if(t===3){if(n==="channelsFirst")return r.length===1?G(e,[1,r[0],1]):G(e,[1,r[1],r[0]]);if(n==="channelsLast")return r.length===1?G(e,[1,1,r[0]]):G(e,[1].concat(r))}else if(t<3)return e;throw new B(`Unsupported input rank by biasAdd: ${e.rank}`)}function ss(t,e,n){return X(()=>(n==null&&(n=ts()),Wt(n),oe(t,D$(t.rank,e,n))))}function i_e(t,e=1){if(e!==1)throw new De(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return Cb(t)}function s_e(t){return X(()=>ke(t,oe(Hn(t),1)))}function MG(t,e,n,r){return X(()=>INe(t,e,n,r))}function o_e(t){return X(()=>{const e=oe(.5,z(.2,t));return Hr(e,0,1)})}function km(t,e,n=!1){return n?t():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const a_e=["fanIn","fanOut","fanAvg"],l_e=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function u_e(t){Ql(a_e,"FanMode",t)}function c_e(t){Ql(l_e,"Distribution",t)}class Ti extends vf{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class FG extends Ti{apply(e,n){return hn(e,n)}}FG.className="Zeros";se(FG);class RE extends Ti{apply(e,n){return Ea(e,n)}}RE.className="Ones";se(RE);class LG extends Ti{constructor(e){if(super(),typeof e!="object")throw new B(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new B(`config must have value set but got ${e}`);this.value=e.value}apply(e,n){return X(()=>z(Ze(this.value),Ea(e,n)))}getConfig(){return{value:this.value}}}LG.className="Constant";se(LG);class BG extends Ti{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,n){return gm(e,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}BG.className="RandomUniform";se(BG);class jG extends Ti{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new De(`randomNormal does not support dType ${n}.`);return Ob(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}jG.className="RandomNormal";se(jG);class zG extends Ti{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new De(`truncatedNormal does not support dType ${n}.`);return RU(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}zG.className="TruncatedNormal";se(zG);class VG extends Ti{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,n){return X(()=>{if(e.length!==2||e[0]!==e[1])throw new B("Identity matrix initializer can only be used for 2D square matrices.");return z(this.gain,yU(e[0]))})}getConfig(){return{gain:this.gain}}}VG.className="Identity";se(VG);function f_e(t,e="channelsLast"){let n,r;if(Wt(e),t.length===2)n=t[0],r=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(e==="channelsFirst"){const i=na(t,2);n=t[1]*i,r=t[0]*i}else if(e==="channelsLast"){const i=na(t,0,t.length-2);n=t[t.length-2]*i,r=t[t.length-1]*i}}else{const i=na(t);n=Math.sqrt(i),r=Math.sqrt(i)}return[n,r]}class Er extends Ti{constructor(e){if(super(),e.scale<0)throw new B(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,u_e(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,c_e(this.distribution),this.seed=e.seed}apply(e,n){const r=f_e(e),i=r[0],s=r[1];let o=this.scale;if(this.mode==="fanIn"?o/=Math.max(1,i):this.mode==="fanOut"?o/=Math.max(1,s):o/=Math.max(1,(i+s)/2),this.distribution==="normal"){const a=Math.sqrt(o);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new De(`${this.getClassName()} does not support dType ${n}.`);return RU(e,0,a,n,this.seed)}else{const a=Math.sqrt(3*o);return gm(e,-a,a,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}Er.className="VarianceScaling";se(Er);class ME extends Er{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Er.className}}ME.className="GlorotUniform";se(ME);class FE extends Er{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Er.className}}FE.className="GlorotNormal";se(FE);class LE extends Er{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Er.className}}LE.className="HeNormal";se(LE);class BE extends Er{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Er.className}}BE.className="HeUniform";se(BE);class jE extends Er{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Er.className}}jE.className="LeCunNormal";se(jE);class zE extends Er{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Er.className}}zE.className="LeCunUniform";se(zE);class WG extends Ti{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,n){return X(()=>{if(e.length<2)throw new De("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError(`Unsupported data type ${n}.`);n=n;const r=J(e.slice(0,-1)),i=e[e.length-1],s=r*i;s>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${s}) elements: Slowness may result.`);const o=[Math.max(i,r),Math.min(i,r)],a=Ob(o,0,1,n,this.seed),l=SAe.qr(a,!1);let u=l[0];const f=l[1].flatten().stridedSlice([0],[Math.min(i,r)*Math.min(i,r)],[Math.min(i,r)+1]);return u=z(u,f.sign()),r<i&&(u=u.transpose()),z(Ze(this.gain),u.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}WG.className="Orthogonal";se(WG);const wM={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function SM(t,e={}){return Sm(t,li.getMap().classNameMap,e,"initializer")}function Et(t){return PE(t)}function Ct(t){if(typeof t=="string"){const e=t in wM?wM[t]:t;if(e==="GlorotNormal")return new FE;if(e==="GlorotUniform")return new ME;if(e==="HeNormal")return new LE;if(e==="HeUniform")return new BE;if(e==="LeCunNormal")return new jE;if(e==="LeCunUniform")return new zE;{const n={};return n.className=e,n.config={},SM(n)}}else return t instanceof Ti?t:SM(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function R$(t){return Array.isArray(t)&&Array.isArray(t[0])}function Vv(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function Ae(t){let e;if(Array.isArray(t)){if(t.length!==1)throw new B(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function qe(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new B(`Expected exactly 1 Shape; got ${t.length}`)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Wv(t){let e=0;for(const n of t)n.shape.length===0?e+=1:e+=n.shape.reduce((r,i)=>r*i);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const CM="Variable";class h_e{constructor(e,n="float32",r=CM,i=!0,s=null){this.dtype=n??"float32",this.shape=e.shape,this.id=AG(),r=r??CM,this.originalName=PG(r),this.name=_G(this.originalName),this.trainable_=i,this.constraint=s,this.val=SNe(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),d_e(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function d_e(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function M$(t){return t.map(e=>e.read())}function VE(t){t.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class tn{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class Os{constructor(e,n,r,i,s,o,a){this.dtype=e,this.shape=n,this.sourceLayer=r,this.inputs=i,this.callArgs=s,this.outputTensorIndex=a,this.id=AG(),o!=null&&(this.originalName=PG(o),this.name=_G(this.originalName)),this.rank=n.length}}let p_e=0;class Pb{constructor(e,n){this.callArgs=n,this.id=p_e++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const r of e.inboundLayers)r!=null&&r.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const n of this.inboundLayers)n!=null?e.push(n.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let m_e=0;class Fe extends vf{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=m_e++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=e.name;if(!n){const r=this.getClassName();n=Ls(r)+"_"+Ab(r)}if(this.name=n,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let r;if(e.batchInputShape!=null)r=e.batchInputShape;else if(e.inputShape!=null){let s=null;e.batchSize!=null&&(s=e.batchSize),r=[s].concat(e.inputShape)}this.batchInputShape=r;let i=e.dtype;i==null&&(i=e.inputDType),i==null&&(i="float32"),this.dtype=i}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,n){return e.name+"_ib-"+n.toString()}getNodeAtIndex(e,n){if(this.inboundNodes.length===0)throw new pi(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=e)throw new B(`Asked to get ${n} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return ar(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return ar(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new cs(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new cs(`Layer ${this.name} is not connected, no input to return.`);return ar(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new cs(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new cs(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return ar(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(n=>n.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const n=nt(e);if(this.inputSpec==null||this.inputSpec.length===0)return;const r=nt(this.inputSpec);if(n.length!==r.length)throw new B(`Layer ${this.name} expects ${r.length} inputs, but it received ${n.length} input tensors. Input received: ${e}`);for(let i=0;i<n.length;i++){const s=n[i],o=r[i];if(o==null)continue;const a=s.rank;if(o.ndim!=null&&a!==o.ndim)throw new B(`Input ${i} is incompatible with layer ${this.name}: expected ndim=${o.ndim}, found ndim=${a}`);if(o.maxNDim!=null&&a>o.maxNDim)throw new B(`Input ${i} is incompatible with layer ${this.name}: expected max_ndim=${o.maxNDim}, found ndim=${a}`);if(o.minNDim!=null&&a<o.minNDim)throw new B(`Input ${i} is incompatible with layer ${this.name}: expected min_ndim=${o.minNDim}, found ndim=${a}.`);if(o.dtype!=null&&s.dtype!==o.dtype)throw new B(`Input ${i} is incompatible with layer ${this.name} : expected dtype=${o.dtype}, found dtype=${s.dtype}.`);if(o.axes){const l=s.shape;for(const u in o.axes){const c=Number(u),f=o.axes[u],h=c>=0?l[c]:l[l.length+c];if(f!=null&&[f,null].indexOf(h)===-1)throw new B(`Input ${i} is incompatible with layer ${this.name}: expected axis ${c} of input shape to have value ${f} but got shape ${l}.`)}}if(o.shape!=null)for(let l=0;l<o.shape.length;++l){const u=o.shape[l],c=s.shape[l];if(u!=null&&c!=null&&u!==c)throw new B(`Input ${i} is incompatible with layer ${this.name}: expected shape=${o.shape}, found shape=${s.shape}.`)}}}call(e,n){return e}invokeCallHook(e,n){this._callHook!=null&&this._callHook(e,n)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,n){n=n||{},this.assertNotDisposed();const r=nt(e),i=v_e(e),s=x_e(e);if(i===s)throw new B("Arguments to apply() must be all SymbolicTensors or all Tensors");return hl(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const o=[];for(const a of nt(e))o.push(a.shape);this.build(ar(o)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&s&&(this._refCount=1)}if(this.assertInputCompatibility(e),s){let o=this.call(e,n);this.supportsMasking&&this.setMaskMetadata(e,o);const a=nt(o),l=[];for(let u of a)r.indexOf(u)!==-1&&(u=u.clone()),l.push(u);if(o=ar(l),this.activityRegularizer!=null)throw new De("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return o}else{const o=g_e(e),a=this.computeOutputShape(o);let l;const u=y_e(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?o[0]:o),a!=null&&a.length>0&&Array.isArray(a[0])?l=a.map((c,f)=>new Os(u,c,this,nt(e),n,this.name,f)):l=new Os(u,a,this,nt(e),n,this.name),this.addInboundNode(e,l,null,null,o,a,n),this._refCount++,this.activityRegularizer!=null)throw new De("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((r,i)=>{r!=null&&e[i]!=null&&e[i]!==r&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new cs(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const n of this.inboundNodes){const r=JSON.stringify(n.outputShapes);e.indexOf(r)===-1&&e.push(r)}if(e.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new cs(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new pi(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return Wv(this.weights)}build(e){this.built=!0}getWeights(e=!1){return M$(e?this.trainableWeights:this.weights)}setWeights(e){X(()=>{const n=this.weights;if(n.length!==e.length)throw new B(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${n.length} weights. Provided weights: ${e}...`);if(n.length===0)return;const r=[],i=M$(n);for(let s=0;s<i.length;++s){const o=i[s],a=n[s],l=e[s];if(!et(o.shape,l.shape))throw new B(`Layer weight shape ${o.shape} not compatible with provided weight shape ${l.shape}`);r.push([a,l])}VE(r)})}addWeight(e,n,r,i,s,o,a,l){if(this._addedWeightNames.indexOf(e)!==-1)throw new B(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(i=l!=null?l():Ct("zeros"));const u=i.apply(n,r),c=new h_e(u,r,e,o,a);return u.dispose(),s!=null&&this.addLoss(()=>s.apply(c.read())),o==null&&(o=!0),o?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=nt(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(e,n,r){if(!this.supportsMasking)return;const i=this.computeMask(e,r),s=nt(n),o=nt(i);if(s.length!==o.length)throw new Error(`${this.name} outputs ${s.length} tensors but ${s.length} masks for those tensors`);for(let a=0;a<s.length;a++)s[a].kerasMask=o[a]}addInboundNode(e,n,r,i,s,o,a=null){const l=nt(e);n=nt(n),r=nt(r),i=nt(i),s=Vv(s),o=Vv(o);const u=[],c=[],f=[];for(const h of l)u.push(h.sourceLayer),c.push(h.nodeIndex),f.push(h.tensorIndex);new Pb({outboundLayer:this,inboundLayers:u,nodeIndices:c,tensorIndices:f,inputTensors:l,outputTensors:n,inputMasks:r,outputMasks:i,inputShapes:s,outputShapes:o},a);for(let h=0;h<n.length;h++)n[h].sourceLayer=this,n[h].nodeIndex=this.inboundNodes.length-1,n[h].tensorIndex=h}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function g_e(t){t=nt(t);const e=[];for(const n of t)e.push(n.shape);return ar(e)}function y_e(t){return"float32"}function UG(t,e,n){if((e==null||n!=null&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),e.inboundNodes.length===0)return[t];{const r=e.inboundNodes[n];if(r.inboundLayers.length===0)return r.inputTensors;{const i=[];for(let s=0;s<r.inboundLayers.length;s++){const o=r.inputTensors[s],a=r.inboundLayers[s],l=r.nodeIndices[s],u=UG(o,a,l);for(const c of u)i.indexOf(c)===-1&&i.push(c)}return i}}}function v_e(t){let e=!0;for(const n of nt(t))if(!(n instanceof Os)){e=!1;break}return e}function x_e(t){let e=!0;for(const n of nt(t))if(n instanceof Os){e=!1;break}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Im extends Fe{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:Ab("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new B("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=e.batchInputShape;if(n==null){if(e.inputShape==null)throw new B("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new B("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=e.dtype||"float32";this.batchInputShape=n,this.dtype=r,this.inputSpec=[{shape:n}];const i=new Os(this.dtype,this.batchInputShape,this,[],{},this.name);i.nodeIndex=0,i.tensorIndex=0,new Pb({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[i],outputTensors:[i],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(e,n){throw new B(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}Im.className="InputLayer";se(Im);function b_e(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new B("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;t.shape!=null&&e==null&&(e=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new Im({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function w_e(t,e){if(t.dtype==null||t.dtype===e.dtype)return e;try{return me(e,t.dtype)}catch{throw new B(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}class jo{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof jo)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(e==null)return;for(const n of e)this.add(n.key,n.value)}}add(e,n,r){if(this.id2Value[e.id]==null)this.id2Value[e.id]=w_e(e,n),this.name2Id[e.name]=e.id,r!=null&&(this.id2Mask[e.id]=r);else throw new B(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof Os){if(this.id2Value[e.id]==null)throw new B(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const n=this.name2Id[e];if(n==null)throw new B(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[n]}}getMask(e){if(e instanceof Os){if(this.id2Value[e.id]==null)throw new B(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const n=this.name2Id[e];if(n==null)throw new B(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&je(this.id2Mask)}}const Uv=new TG,Gv=new TG;function S_e(t){Uv!=null&&Uv.setMaxEntries(t),Gv!=null&&Gv.setMaxEntries(t)}function ch(t,e,n,r){const i=n==null?!1:n.training,s=Array.isArray(t),o=s?t:[t],a=o.map(p=>p.name),l=[],u=e.names();for(const p of a)u.indexOf(p)!==-1?l.push(e.getValue(p)):l.push(null);const c=a.join(",")+"|"+e.names().sort().join(",");let f=Uv.get(c),h;if(f==null){const p=C_e(o,e);f=p.sorted,h=p.recipientCounts,Uv.put(c,f),Gv.put(c,h)}h={},i||Object.assign(h,Gv.get(c));const d=new jo(e);for(let p=0;p<f.length;++p){const m=f[p],g=m.sourceLayer;if(g instanceof Im)continue;const y=[],v=[],x=[];let b=!1;for(const k of m.inputs){const I=d.getValue(k),T=d.getMask(k);y.push(I),v.push(T),T!=null&&(b=!0),i||(h[k.name]--,h[k.name]===0&&!e.hasKey(k)&&a.indexOf(k.name)===-1&&!I.isDisposed&&k.sourceLayer.stateful!==!0&&x.push(I))}b&&(n=n||{},n.mask=v[0]);const w=nt(g.apply(y,n));let S=null;g.supportsMasking&&(S=g.computeMask(y,v));const C=k_e(m),$=Array.isArray(C)?C:[C];for(let k=0;k<$.length;++k){d.hasKey($[k])||d.add($[k],w[k],Array.isArray(S)?S[0]:S);const I=a.indexOf($[k].name);I!==-1&&(l[I]=w[k])}i||je(x)}return d.disposeMasks(),s?l:l[0]}function C_e(t,e){E(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(t.length===1){const i=$M(t[0],e);n=i.sorted,r=i.recipientMap}else{const i=new Set;for(const s of t){const{sorted:o,recipientMap:a}=$M(s,e);for(const l of o)i.has(l.name)||(n.push(l),i.add(l.name));for(const l in a)r[l]==null&&(r[l]=new Set),a[l].forEach(u=>r[l].add(u))}}return{sorted:n,recipientCounts:$_e(r)}}function $_e(t){const e={};for(const n in t)e[n]=t[n].size;return e}function $M(t,e){const n=new Set,r=[],i={};for(const a of e.names())n.add(a);const s=[],o=[];for(s.push(t);s.length>0;){const a=s[s.length-1];if(n.has(a.name)){s.pop();continue}const l=o[o.length-1]===s.length-1;if(a.inputs.length===0||l)s.pop(),r.push(a),n.add(a.name),l&&o.pop();else{o.push(s.length-1);for(const u of a.inputs)i[u.name]==null&&(i[u.name]=new Set),i[u.name].add(a.name),!n.has(u.name)&&s.push(u)}}return{sorted:r,recipientMap:i}}function k_e(t){let e;if(t.sourceLayer.inboundNodes.length===1)e=t.sourceLayer.output;else{let n=null;for(let r=0;r<t.sourceLayer.inboundNodes.length;++r)for(const i of t.sourceLayer.inboundNodes[r].outputTensors)if(i.id===t.id){n=r;break}e=t.sourceLayer.getOutputAt(n)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I_e=Y();I_e.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,S_e);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function WE(t,e){return X(()=>Rn($e(z(t,t),e,!0)))}class Tm extends vf{getConfig(){return{}}}class GG extends Tm{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return X(()=>{const n=WE(e,this.axis),r=Hr(n,0,this.maxValue);return z(e,ke(r,oe(en(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}GG.className="MaxNorm";se(GG);class HG extends Tm{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return X(()=>ke(e,oe(en(),WE(e,this.axis))))}getConfig(){return{axis:this.axis}}}HG.className="UnitNorm";se(HG);class KG extends Tm{apply(e){return Yl(e)}}KG.className="NonNeg";se(KG);class qG extends Tm{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return X(()=>{const n=WE(e,this.axis),r=oe(z(this.rate,Hr(n,this.minValue,this.maxValue)),z(1-this.rate,n));return z(e,ke(r,oe(en(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}qG.className="MinMaxNorm";se(qG);const kM={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function rn(t){return PE(t)}function IM(t,e={}){return Sm(t,li.getMap().classNameMap,e,"constraint")}function sn(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in kM?kM[t]:t,config:{}};return IM(n)}else return t instanceof Tm?t:IM(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function Ra(t){if(t==null)return;const e=[],n=[],r=[];for(const i in t){const s=t[i];if(typeof s!="number"){const o=s;e.push(o.data()),n.push(i),r.push(o)}}if(e.length>0){const i=await Promise.all(e);for(let s=0;s<i.length;++s)t[n[s]]=i[s][0];je(r)}}function XG(t){if(t!=null)for(const e in t){const n=t[e];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var TM;(function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"})(TM||(TM={}));const T_e=125;class Ud{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,n){}async onEpochEnd(e,n){}async onBatchBegin(e,n){}async onBatchEnd(e,n){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class E_e{constructor(e,n=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=n}append(e){this.callbacks.push(e)}setParams(e){for(const n of this.callbacks)n.setParams(e)}setModel(e){for(const n of this.callbacks)n.setModel(e)}async onEpochBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochBegin(e,n)}async onEpochEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochEnd(e,n)}async onBatchBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchBegin(e,n)}async onBatchEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchEnd(e,n)}async onTrainBegin(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainEnd(e)}}class N_e extends Ud{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,n){n==null&&(n={});const r=n.size==null?0:n.size;this.seen+=r;for(const i in n){const s=n[i];if(typeof s=="number")this.totals.hasOwnProperty(i)||(this.totals[i]=0),this.totals[i]=this.totals[i]+s*r;else{let o;i in this.totals?o=this.totals[i]:this.totals[i]=0;const a=X(()=>oe(this.totals[i],z(s,r)));this.totals[i]=a,o!=null&&o.dispose()}}}async onEpochEnd(e,n){if(n!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?n[r]=this.totals[r]/this.seen:X(()=>{const i=z(ke(1,this.seen),this.totals[r]);n[r]=i,this.totals[r].dispose(),Cs(n[r])}))}}class A_e extends Ud{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,n){n==null&&(n={}),this.epoch.push(e);for(const r in n)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(n[r])}async syncData(){const e=[],n=[],r=[];for(const s in this.history){const o=this.history[s];for(let a=0;a<o.length;++a)if(typeof o[a]!="number"){const l=o[a];e.push(l.data()),n.push(s),r.push(a)}}const i=await Promise.all(e);for(let s=0;s<i.length;++s)this.history[n[s]][r[s]].dispose(),this.history[n[s]][r[s]]=i[s][0]}}class O_e extends Ud{constructor(e,n){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||eG,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=T_e),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");f$(this.yieldEvery)&&(this.maybeWait=UPe(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,n,r){const i=[];this.yield!=null&&(await Ra(r),i.push(this.yield(e,n,r))),i.push(this.nextFrameFunc()),await Promise.all(i)}async onEpochBegin(e,n){this.currentEpoch=e,this.epochBegin!=null&&(await Ra(n),await this.epochBegin(e,n))}async onEpochEnd(e,n){const r=[];this.epochEnd!=null&&(await Ra(n),r.push(this.epochEnd(e,n))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(e,n){this.batchBegin!=null&&(await Ra(n),await this.batchBegin(e,n))}async onBatchEnd(e,n){const r=[];this.batchEnd!=null&&(await Ra(n),r.push(this.batchEnd(e,n))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):f$(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,n)),await Promise.all(r)}async onTrainBegin(e){this.trainBegin!=null&&(await Ra(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await Ra(e),await this.trainEnd(e))}}function YG(t,e){return t==null&&(t={}),t instanceof Ud?[t]:Array.isArray(t)&&t[0]instanceof Ud?t:nt(t).map(r=>new O_e(r,e))}class si{constructor(){}static registerCallbackConstructor(e,n){E(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),si.checkForDuplicate(n),si.constructors[e]==null&&(si.constructors[e]=[]),si.constructors[e].push(n)}static checkForDuplicate(e){for(const n in si.constructors)si.constructors[+n].forEach(i=>{if(i===e)throw new B("Duplicate callback constructor.")})}static clear(){si.constructors={}}static createCallbacks(e){const n=[];for(const r in si.constructors){const i=+r;e>=i&&n.push(...si.constructors[i])}return n.map(r=>new r)}}si.constructors={};function ZG(t,e,n,r,i,s,o,a,l){const u=new A_e,c=[new N_e,...si.createCallbacks(e)];t!=null&&c.push(...t),c.push(u);const f=new E_e(c);return f.setParams({epochs:n,initialEpoch:r,samples:i,steps:s,batchSize:o,verbose:e,doValidation:a,metrics:l}),{callbackList:f,history:u}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function eo(t,e={},n=!1){return Sm(t,li.getMap().classNameMap,e,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Hv(t,e){return X(()=>{t.dtype!=="float32"&&(t=me(t,"float32"));const n=$e($m(t),e,!0),r=Sb(n.shape,en()),i=Rn(Ta(n,r));return ke(t,i)})}function _b(t,e){return X(()=>Xt($m(Ie(e,t)),-1))}function UE(t,e){return X(()=>Xt(Hn(Ie(e,t)),-1))}function GE(t,e){return X(()=>{const n=Ie(t,e),r=Hr(Hn(t),en(),Number.MAX_VALUE),i=Hn(ke(n,r));return z(100,Xt(i,-1))})}function P_e(t,e){return X(()=>{const n=Hr(e,en(),Number.MAX_VALUE),r=As(oe(1,n)),i=Hr(t,en(),Number.MAX_VALUE),s=As(oe(1,i));return Xt($m(Ie(r,s)),-1)})}function __e(t,e){return X(()=>{const n=Ta(0,Ie(1,z(t,e)));return Xt($m(n),-1)})}function D_e(t,e){return X(()=>{const n=Ta(0,Ie(1,z(t,e)));return Xt(n,-1)})}function R_e(t,e){return X(()=>{const n=$e(z(t,e),-1),r=Zi(z(Ie(1,t),e),-1);return Ta(0,oe(1,Ie(r,n)))})}function M_e(t,e){return X(()=>{const n=Math.log(2),r=Ie(e,t),i=Ie(oe(r,mm(z(-2,r))),n);return Xt(i,-1)})}function Gd(t,e,n=!1){return X(()=>{if(n)e=X2(e);else{const r=$e(e,e.shape.length-1,!0);e=ke(e,r)}return e=Hr(e,en(),1-en()),jt($e(z(me(t,"float32"),As(e)),e.shape.length-1))})}function Kv(t,e,n=!1){return X(()=>{const r=me(kb(n_e(t)),"int32");e=Hr(e,en(),1-en());const i=e.shape,s=G(SU(r,i[i.length-1]),i);return Gd(s,e,n)})}function F_e(t,e){if(!et(t.shape,e.shape))throw new B(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return X(()=>{const n=Yl(e),r=jt(Hn(e));return oe(Ie(n,z(e,t)),vU(Ns(r)))})}function Db(t,e){return X(()=>{let n;return n=Hr(e,en(),1-en()),n=As(ke(n,Ie(1,n))),Xt(F_e(t,n),-1)})}function L_e(t,e){return X(()=>{const n=Hr(t,en(),1),r=Hr(e,en(),1);return $e(z(t,As(ke(n,r))),-1)})}function B_e(t,e){return X(()=>{const n=As(oe(en(),e));return Xt(Ie(e,z(t,n)),-1)})}function QG(t,e){return X(()=>{const n=Hv(t,-1),r=Hv(e,-1),i=z(n,r);return jt($e(i,-1))})}const qv={meanSquaredError:_b,meanAbsoluteError:UE,meanAbsolutePercentageError:GE,meanSquaredLogarithmicError:P_e,squaredHinge:__e,hinge:D_e,categoricalHinge:R_e,logcosh:M_e,categoricalCrossentropy:Gd,sparseCategoricalCrossentropy:Kv,binaryCrossentropy:Db,kullbackLeiblerDivergence:L_e,poisson:B_e,cosineProximity:QG};function gw(t){if(typeof t=="string"){if(t in qv)return qv[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new B(e)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function JG(t,e){return X(()=>{const n=z(.5,Ci(e)),r=ks(Xr(e,n),t.dtype);return Xt(Es(t,r),-1)})}function e6(t,e){return X(()=>ks(Es(Bd(t,-1),Bd(e,-1)),"float32"))}function j_e(t,e){return X(()=>me($e(co(Es(t,1),Es(e,1))),"float32"))}function z_e(t,e){return X(()=>me($e(co(Es(t,0),Es(e,1))),"float32"))}function V_e(t,e){return X(()=>{const n=j_e(t,e),r=z_e(t,e),i=oe(n,r);return me(Jn(Xr(i,0),ke(n,i),0),"float32")})}function W_e(t,e){return Db(t,e)}function U_e(t,e){return t.rank===e.rank&&(t=ym(t,[t.rank-1])),e=Bd(e,-1),e.dtype!==t.dtype&&(e=me(e,t.dtype)),me(Es(t,e),"float32")}const G_e=_b,H_e=_b,K_e=UE,q_e=UE,X_e=GE,Y_e=GE,t6=Gd,Z_e=QG,n6=Kv,Xv={binaryAccuracy:JG,categoricalAccuracy:e6,precision:V_e,categoricalCrossentropy:t6,sparseCategoricalCrossentropy:n6,mse:G_e,MSE:H_e,mae:K_e,MAE:q_e,mape:X_e,MAPE:Y_e,cosine:Z_e};function Q_e(t){if(typeof t=="string"&&t in Xv)return Xv[t];if(typeof t!="string"&&t!=null)return t;throw new B(`Unknown metric ${t}`)}function Sg(t){if(fs(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let e;for(const n of Object.keys(qv))if(qv[n]===t){e=n;break}if(e!==void 0)return e;for(const n of Object.keys(Xv))if(Xv[n]===t){e=n;break}return e!==void 0?e:t.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function J_e(t){const e={Adagrad:()=>uu.adagrad(.01),Adadelta:()=>uu.adadelta(1,.95,en()),Adam:()=>uu.adam(.001,.9,.999,en()),Adamax:()=>uu.adamax(.002,.9,.999,en(),0),RMSProp:()=>uu.rmsprop(.001,.9,0,en()),SGD:()=>uu.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new B(`Unknown Optimizer ${t}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const EM=1*1024*1024;function NM(t,e,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!F$(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const r=JSON.stringify(t);r.length>EM&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${EM}.`)}}function F$(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e)if(typeof n!="string"||!F$(t[n]))return!1;return!0}else if(Array.isArray(t)){for(const e of t)if(!F$(e))return!1;return!0}else return!1;else{const e=typeof t;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function eDe(t,e,n,r=console.log){const i=nDe(t),s=["Layer (type)","Input Shape","Output shape","Param #"];i?(e=e||90,n=n||[.32,.61,.89,1]):(e=e||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(c=>Math.floor(e*c)));let o;if(!i){s.push("Receives inputs"),o=[];for(const c in t.nodesByDepth)o.push(...t.nodesByDepth[c])}r("_".repeat(e)),Yv(s,n,r),r("=".repeat(e));const a=t.layers;for(let c=0;c<a.length;++c)i?rDe(a[c],n,r):iDe(a[c],n,o,r),r((c===a.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const l=tDe(t),u=Wv(t.nonTrainableWeights);r(`Total params: ${l+u}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${u}`),r("_".repeat(e))}function tDe(t){let e;return t.collectedTrainableWeights!=null?e=Wv(t.collectedTrainableWeights):e=Wv(t.trainableWeights),e}function nDe(t){let e=!0;const n=[],r=[];for(const i in t.nodesByDepth)n.push(t.nodesByDepth[i]);for(const i of n){if(i.length>1||i.length===1&&i[0].inboundLayers.length>1){e=!1;break}r.push(...i)}if(e)for(const i of t.layers){let s=!1;for(const o of i.inboundNodes)if(r.indexOf(o)!==-1)if(s){e=!1;break}else s=!0;if(!e)break}return e}function Yv(t,e,n=console.log){let r="";for(let i=0;i<t.length;++i)i>0&&(r=r.slice(0,r.length-1)+" "),r+=t[i],r=r.slice(0,e[i]),r+=" ".repeat(e[i]-r.length);n(r)}function rDe(t,e,n){let r,i;try{i=t.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{i="multiple"}try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}const s=t.name,o=t.getClassName(),a=[`${s} (${o})`,i,r,t.countParams().toString()];Yv(a,e,n)}function iDe(t,e,n,r){let i,s;try{s=t.inboundNodes.map(f=>JSON.stringify(f.inputShapes)).join(",")}catch{s="multiple"}try{i=JSON.stringify(t.outputShape)}catch{i="multiple"}const o=[];for(const f of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(f)===-1))for(let h=0;h<f.inboundLayers.length;++h){const d=f.inboundLayers[h].name,p=f.nodeIndices[h],m=f.tensorIndices[h];o.push(`${d}[${p}][${m}]`)}const a=t.name,l=t.getClassName(),u=o.length===0?"":o[0],c=[`${a} (${l})`,s,i,t.countParams().toString(),u];Yv(c,e,r);for(let f=1;f<o.length;++f)Yv(["","","","",o[f]],e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function r6(t,e,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&e===0&&typeof n=="string"}function L$(t,e){if(t===null)return null;if(typeof t=="string")return Ha(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let i=0;i<r;++i){const s=t[i];r6(e,i,s)?n.push(s):n.push(L$(s,e))}return n}else{const n={};for(const r of Object.keys(t)){const i=t[r];if(r==="name"&&typeof i=="string")n[r]=i;else{const s=Ha(r);n[s]=L$(i,s)}}return n}}function B$(t,e){if(t==null)return null;if(typeof t=="string")return Ls(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let i=0;i<r;++i){const s=t[i];r6(e,i,s)?n.push(s):n.push(B$(s,e))}return n}else{const n={};for(const r of Object.keys(t)){const i=t[r],s=Ls(r);(r==="name"||r==="className")&&typeof i=="string"?n[s]=i:n[s]=B$(i,r)}return n}}/** @license See the LICENSE file. */const i6="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const sDe=t=>{const e=Object.keys(t);if(e.length===0)return!1;const n=e[0].split("/");return!isNaN(parseInt(n[n.length-1],10))};class Di extends Fe{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const v=this.getClassName().toLowerCase();this.name=Ab(v)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],ta(this.inputs).length!==this.inputs.length)throw new B(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(v=>v.name)}`);ta(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(v=>v.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const v of this.outputs){const x=v.sourceLayer,b=v.nodeIndex,w=v.tensorIndex;this.outputLayers.push(x),this.outputLayersNodeIndices.push(b),this.outputLayersTensorIndices.push(w)}for(const v of this.inputs){const x=v.sourceLayer,b=v.nodeIndex,w=v.tensorIndex;fs(b===0,"input layer has >1 nodes"),fs(w===0,"input layer has >1 tensors"),this.inputLayers.push(x),this.inputLayersNodeIndices.push(b),this.inputLayersTensorIndices.push(w)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let v=0;v<this.inputLayers.length;v++){const x=this.inputLayers[v];if(!(x instanceof Im))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${v} (0-based) originates from layer type ${x.getClassName()}.`);this.inputNames.push(x.name),this.feedInputShapes.push(x.batchInputShape),this.feedInputNames.push(x.name)}for(const v of this.outputLayers)this.outputNames.push(v.name);this.internalInputShapes=this.inputs.map(v=>v.shape),this.internalOutputShapes=this.outputs.map(v=>v.shape);const n={},r={},i={},s={},o={},a=[],l=(v,x,b,w,S,C)=>{(w==null||S==null||C==null)&&(w=v.sourceLayer,S=v.nodeIndex,C=v.tensorIndex);const $=w.inboundNodes[S];if(b.indexOf($)!==-1)throw new pi(`The tensor ${v.name} at layer "${w.name}" is part of a cycle.`);if(x.indexOf($)!==-1)return;this.containerNodes.add(Di.nodeKey(w,S)),w.id in o||(o[w.id]=Object.keys(o).length),b.indexOf($)===-1&&b.push($);const k=$.inboundLayers.length;for(let I=0;I<k;I++){const T=$.inputTensors[I],A=$.inboundLayers[I],_=$.nodeIndices[I],D=$.tensorIndices[I];l(T,x,b,A,_,D)}for(x.push($);b.indexOf($)>=0;)b.splice(b.indexOf($),1);a.push($)},u=[],c=[];for(const v of this.outputs)l(v,u,c);const f=a.slice().reverse();for(const v of f){r[v.id]=v,v.id in n||(n[v.id]=0);let x=n[v.id];const b=i[v.outboundLayer.id]==null?0:i[v.outboundLayer.id];x=Math.max(x,b),i[v.outboundLayer.id]=x,s[v.outboundLayer.id]=v.outboundLayer,n[v.id]=x;for(let w=0;w<v.inboundLayers.length;w++){const S=v.inboundLayers[w],C=v.nodeIndices[w],$=S.inboundNodes[C],k=n[$.id]==null?0:n[$.id];n[$.id]=Math.max(x+1,k),r[$.id]=$}}const h={};for(const v in n){const x=n[v];x in h||(h[x]=[]),h[x].push(r[v])}const d={};for(const v in i){const x=i[v];x in d||(d[x]=[]),d[x].push(s[v])}let p=Object.keys(d).map(v=>parseInt(v,10)).sort(xg);this.layers=[];for(const v of p){const x=d[v];x.sort((b,w)=>{const S=o[b.id],C=o[w.id];return S<C?-1:S>C?1:0});for(const b of x)b instanceof Di&&this.internalContainerRefs.push(b),this.layers.push(b)}this.layersByDepth=d,p=Object.keys(h).map(v=>parseInt(v,10)).sort(xg);const m=this.inputs.slice(),g=[];for(const v of p)for(const x of h[v]){const b=x.outboundLayer;if(b!=null){for(const w of x.inputTensors)if(m.indexOf(w)===-1)throw new pi(`Graph disconnected: cannot obtain value for tensor ${w} at layer "${b.name}". The following previous layers were accessed without issue: ${g}`);for(const w of x.outputTensors)m.push(w);g.push(b.name)}}this.nodesByDepth=h;const y=this.layers.map(v=>v.name);for(const v of y){const x=y.filter(b=>b===v).length;if(x!==1)throw new pi(`The name "${v}" is used ${x} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(y))}this.outboundNodes=[],this.inboundNodes=[],new Pb({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(v=>null),outputMasks:this.outputs.map(v=>null),inputShapes:this.inputs.map(v=>v.shape),outputShapes:this.outputs.map(v=>v.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)e.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)e.numDisposedVariables+=n.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(n=>{n._trainableWeights.forEach(r=>r.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new B("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const n of this.layers)e=e.concat(n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.layers)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.layers)n.push(...r.trainableWeights);return n.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,n=!0){const r={};let i=0;const s=sDe(e);s&&this.parseWeights(e);for(const a of this.layers)for(const[l,u]of a.weights.entries()){const c=s?`${u.name.split("/").slice(0,-1).join("/")+"/"}${l}`:u.originalName;if(r[c]!=null)throw new B(`Duplicate weight name: ${c}`);r[c]=u,i++}const o=[];for(const a in e){let l=a;if(r[a]==null){const u=a.split("/");l=u.slice(0,-2).concat([u[u.length-1]]).join("/")}if(r[l]!=null)o.push([r[l],e[a]]);else if(n)throw new B(`Provided weight data has no target variable: ${a}`);delete r[l]}if(n){const a=[];for(const l in r)a.push(l);if(a.length>0)throw new B(`${a.length} of ${i} weights are not set: ${a}`)}VE(o)}parseWeights(e){for(const n in Object.keys(e)){const r=n.split("/"),i=["vars","layer_checkpoint_dependencies"],s=r.map(o=>o.startsWith("_")?o.slice(1):o).filter(o=>!i.includes(o)).join("/");s!==n&&(e[s]=e[n],delete e[n])}}updatedConfig(){const e=this.getConfig(),n={};return n.className=this.getClassName(),n.config=e,n.kerasVersion=`tfjs-layers ${i6}`,n.backend="TensorFlow.js",n}toJSON(e,n=!0){const r=B$(this.updatedConfig());return n?JSON.stringify(r):r}call(e,n){return X(()=>{e=nt(e);const r=new jo;for(let i=0;i<this.inputs.length;++i)r.add(this.inputs[i],e[i]);return ch(this.outputs,r,n)})}computeMask(e,n){return X(()=>{e=nt(e);let r;return n==null?r=Dl(null,e.length):r=nt(n),this.runInternalGraph(e,r)[1]})}computeOutputShape(e){const n=Vv(e);if(n.length!==this.inputLayers.length)throw new B(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let a=0;a<n.length;a++){const l=this.inputLayers[a],u=n[a],c=l.name+"_0_0";r[c]=u}const i=Object.keys(this.nodesByDepth).map(a=>parseInt(a,10)).sort(xg);if(i.length>1)for(const a of i){const l=this.nodesByDepth[a];for(const u of l){const c=u.outboundLayer;if(this.inputLayers.map(m=>m.id).indexOf(c.id)!==-1)continue;const f=[];for(let m=0;m<u.inboundLayers.length;m++){const g=u.inboundLayers[m],y=u.nodeIndices[m],v=u.tensorIndices[m],x=`${g.name}_${y}_${v}`,b=r[x];f.push(b)}const h=c.computeOutputShape(ar(f)),d=Vv(h),p=c.inboundNodes.indexOf(u);for(let m=0;m<d.length;m++){const g=`${c.name}_${p}_${m}`;r[g]=d[m]}}}const s=[],o=[];for(let a=0;a<this.outputLayers.length;a++){const l=this.outputLayers[a],u=this.outputLayersNodeIndices[a],c=this.outputLayersTensorIndices[a],f=`${l.name}_${u}_${c}`;o.push(f)}for(let a=0;a<o.length;a++){const l=o[a];fs(l in r),s.push(r[l])}return ar(s)}runInternalGraph(e,n){n==null&&(n=Dl(null,e.length));const r={};for(let l=0;l<this.inputs.length;++l){const u=this.inputs[l],c=e[l],f=n[l];r[u.id]=[c,f]}const i=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(xg);for(const l of i){const u=this.nodesByDepth[l];for(const c of u){const f=c.outboundLayer,h=c.inputTensors,d=c.outputTensors,p=new Array;for(const m of h)m.id in r&&p.push(r[m.id]);if(p.length===h.length){let m={},g,y,v,x;if(c.callArgs!=null&&(m=c.callArgs),p.length===1){const[b,w]=p[0];m.mask==null&&(m.mask=w),v=nt(f.call(b,m)),x=nt(f.computeMask(b,w)),g=[b],y=[w]}else g=p.map(b=>b[0]),y=p.map(b=>b[1]),m.mask==null&&(m.mask=y),v=nt(f.call(g,m)),x=nt(f.computeMask(g,y));if(f.activityRegularizer)throw new De("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let b=0;b<d.length;++b){const w=d[b],S=v[b],C=x[b];r[w.id]=[S,C]}}}}const s=[],o=[],a=[];for(const l of this.outputs){fs(l.id in r,`Could not compute output ${l.name} : ${l.id}`);const[u,c]=r[l.id];a.push(u.shape),s.push(u),o.push(c)}return[s,o,a]}buildNodeConversionMap(e){const n={};let r;for(const i of this.layers){r=i instanceof Di?1:0;for(let s=0;s<i.inboundNodes.length;s++){const o=Di.nodeKey(i,s);this.containerNodes.has(o)&&(n[o]=r,r+=1)}}return n}getLayer(e,n){if(n!=null)return this.findLayer(n);if(e==null)throw new B("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const r of this.layers)if(r.name===e)return r;throw new B(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new B(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return X(()=>{const e=[];for(const n of this.layers)for(let r=0;r<n.inboundNodes.length;++r){const i=Di.nodeKey(n,r);this.containerNodes.has(i)&&e.push(...n.calculateLosses())}return e})}getConfig(){const e={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[];for(const o of this.layers){const a=o.getClassName(),l=o.getConfig(),u=[];for(let f=0;f<o.inboundNodes.length;f++){const h=o.inboundNodes[f],d=Di.nodeKey(o,f);let p={};if(this.containerNodes.has(d)){if(h.callArgs)try{JSON.stringify(h.callArgs),p=h.callArgs}catch{console.warn(`Layer ${o.name} was passed non-serializable keyword arguments: ${h.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),p={}}if(h.inboundLayers.length>0){const m=[];for(let g=0;g<h.inboundLayers.length;g++){const y=h.inboundLayers[g],v=h.nodeIndices[g],x=h.tensorIndices[g],b=Di.nodeKey(y,v);let w=n[b];w==null&&(w=0),m.push([y.name,w,x,p])}u.push(m)}}}const c={};c.name=o.name,c.className=a,c.config=l,c.inboundNodes=u,r.push(c)}e.layers=r;const i=[];for(let o=0;o<this.inputLayers.length;o++){const a=this.inputLayers[o],l=this.inputLayersNodeIndices[o],u=Di.nodeKey(a,l);if(!this.containerNodes.has(u))continue;let c=n[u];c==null&&(c=0);const f=this.inputLayersTensorIndices[o];i.push([a.name,c,f])}e.inputLayers=i;const s=[];for(let o=0;o<this.outputLayers.length;o++){const a=this.outputLayers[o],l=this.outputLayersNodeIndices[o],u=Di.nodeKey(a,l);if(!this.containerNodes.has(u))continue;let c=n[u];c==null&&(c=0);const f=this.outputLayersTensorIndices[o];s.push([a.name,c,f])}return e.outputLayers=s,e}static fromConfig(e,n,r={},i=!1){const s={},o={};function a(g,y){g.name in o?o[g.name].push(y):o[g.name]=[y]}function l(g,y){const v=[];let x;for(const b of y){const w=b[0],S=b[1],C=b[2];if(x=b[3]==null?{}:b[3],!(w in s)){a(g,y);return}const $=s[w];if($.inboundNodes.length<=S){a(g,y);return}const k=$.inboundNodes[S];v.push(k.outputTensors[C])}v.length>0&&g.apply(ar(v),x)}function u(g){const y=g.name,v=eo(g,n.customObjects!=null?n.customObjects:{});v.setFastWeightInitDuringBuild(i),s[y]=v,g.inboundNodes.forEach(b=>{if(!(b instanceof Array))throw new B(`Corrupted configuration, expected array for nodeData: ${b}`);a(v,b)})}const c=n.name,f=n.layers;for(const g of f)u(g);for(;!WPe(o);)for(const g of f){const y=s[g.name];if(y.name in o){const v=o[y.name];delete o[y.name];for(const x of v)l(y,x)}}const h=[],d=[],p=n.inputLayers;for(const g of p){const y=g[0],v=g[1],x=g[2];fs(y in s);const w=s[y].inboundNodes[v].outputTensors;h.push(w[x])}const m=n.outputLayers;for(const g of m){const y=g[0],v=g[1],x=g[2];fs(y in s);const w=s[y].inboundNodes[v].outputTensors;d.push(w[x])}return new e({inputs:h,outputs:d,name:c})}get stateful(){if(this._stateful)throw new B("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){X(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function oDe(t,e,n){const r=e.length;if(t==null||Array.isArray(t)&&t.length===0)return e.map(i=>null);if(r===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){const i=[];return e.forEach(s=>{s in t?i.push(t[s]):i.push(null)}),i}else throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function s6(t,e){return oDe(t,e,"classWeight")}async function o6(t,e,n,r){if(n!=null){const i=X(()=>{if(t.shape.length===1)return fl(t);if(t.shape.length===2){if(t.shape[1]>1)return Bd(t,1);if(t.shape[1]===1)return G(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),s=Array.from(await i.data());je(i);const o=[];return s.forEach(a=>{if(n[a]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${a} exists in the data but not in classWeight`);o.push(n[a])}),Cr(o,"float32")}else return null}function aDe(t,e){return z(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const lDe=32;function a6(t,e){let n,r;const i=e;n=i.xs,r=i.ys,E(n!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const s=AM("input",t.inputNames,n),o=AM("output",t.outputNames,r),a=s[0].shape[0];E(s.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${s.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),E(o.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${o.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let l=0;l<s.length;l++)E(s[l].shape[0]===a,()=>`Batch size mismatch: input ${t.inputNames[l]} has ${s[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);for(let l=0;l<o.length;l++)E(o[l].shape[0]===a,()=>`Batch size mismatch: output ${t.outputNames[l]} has ${o[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);return{xs:s,ys:o}}function AM(t,e,n){if(n instanceof Qt)return[n];if(Array.isArray(n))return E(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const r=[];for(const i of e){if(n[i]==null)throw new B(`The feature data generated by the dataset lacks the required ${t} key '${i}'.`);r.push(n[i])}return r}}function uDe(t){if(t.length===3)throw new De("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function cDe(t,e,n){const r=n.batchesPerEpoch!=null;if(E(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),E(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),E(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),E(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),E(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const i=n.validationData!=null;let s,o;if(i)if(OM(n.validationData))E(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const g=uDe(n.validationData);s=g.xs,o=g.ys}const a=t.makeTrainFunction(),l=t.getDedupedMetricsNames();let u;i?u=l.slice().concat(l.map(g=>"val_"+g)):u=l.slice();const c=YG(n.callbacks,n.yieldEvery),f=n.verbose==null?1:n.verbose,{callbackList:h,history:d}=ZG(c,f,n.epochs,null,null,fDe(e,n),null,i,u);h.setModel(t),t.history=d,await h.onTrainBegin(),t.stopTraining_=!1;let p=n.initialEpoch==null?0:n.initialEpoch,m=await e.iterator();for(;p<n.epochs;){const g={};await h.onEpochBegin(p);let y=0,v=0;for(r||(m=await e.iterator());!r||y<n.batchesPerEpoch;){const x=await m.next();if(r&&x.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${y} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(x.value!=null){const{xs:b,ys:w}=a6(t,x.value),S={};S.batch=v,S.size=b[0].shape[0],await h.onBatchBegin(v,S);const C=[];if(n.classWeight!=null){const I=s6(n.classWeight,t.outputNames);for(let T=0;T<I.length;++T)C.push(await o6(w[T],null,I[T]))}const $=b.concat(w).concat(C),k=a($);je($);for(let I=0;I<l.length;++I){const T=l[I],A=k[I];S[T]=A,Cs(A)}await h.onBatchEnd(v,S),XG(S),v++,y++}if(r?y>=n.batchesPerEpoch:x.done){if(i){let b;OM(n.validationData)?b=nt(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):b=nt(t.evaluate(s,o,{batchSize:n.validationBatchSize==null?lDe:n.validationBatchSize,verbose:0}));for(let w=0;w<t.metricsNames.length;++w)g[`val_${t.metricsNames[w]}`]=b[w]}break}if(t.stopTraining_)break}if(await h.onEpochEnd(p,g),p++,t.stopTraining_)break}return await h.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function fDe(t,e){let n=null;return e.batchesPerEpoch!=null?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function OM(t){return typeof t.iterator=="function"}function hDe(t){return typeof t.next=="function"}async function dDe(t,e,n){n=n||{};const r=n.batches!=null,i=t.testFunction;let s=[];if(n.verbose>0)throw new De("Verbose mode is not implemented yet.");E(!r||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const o=hDe(e)?e:await e.iterator();let a=0,l=0;for(;!r||l<n.batches;){const u=await o.next();if(s=X(()=>{if(u.value){const{xs:c,ys:f}=a6(t,u.value),h=c.concat(f),d=X(()=>i(h));if(je(h),l===0)for(let m=0;m<d.length;++m)s.push(Ze(0));const p=h[0].shape[0];for(let m=0;m<d.length;++m){const g=d[m],y=s[m];s[m]=X(()=>oe(s[m],z(p,g))),l>0&&je(y)}je(d),a+=p,++l}return s}),u.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let u=0;u<s.length;++u){const c=s[u];s[u]=ke(s[u],a),je(c)}return ar(s)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function yw(t){E(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function Qf(t,e,n){return t==null?[null]:Array.isArray(t)?t.map(r=>dl(r,e,n-e)):dl(t,e,n-e)}function j$(t,e){return X(()=>t==null?null:Array.isArray(t)?t.map(n=>j$(n,e)):RG(t,e.dtype==="int32"?e:me(e,"int32")))}function vw(t,e){const n=[];let r=0,i=null;for(;r<t;)i=r+e,i>=t&&(i=t),n.push([r,i]),r=i;return n}function l6(t){const e=[];t instanceof Qt&&(t=[t]);for(let n=0;n<t.length;++n){const r=t[n];if(r.rank===1)e.push(Cm(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function Pi(t,e){if(t==null)return;const n=[];if(e instanceof Qt)n.push(e.id);else if(Array.isArray(e))e.forEach(i=>n.push(i.id));else if(e!=null)for(const i in e){const s=e[i];n.push(s.id)}const r=[];if(t instanceof Qt)n.indexOf(t.id)===-1&&r.push(t);else if(Array.isArray(t))t.forEach(i=>{n.indexOf(i.id)===-1&&r.push(i)});else if(t!=null)for(const i in t){const s=t[i];n.indexOf(s.id)===-1&&r.push(s)}r.forEach(i=>{i.isDisposed||i.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function pDe(t){return t instanceof Qt}function z$(t){return Array.isArray(t)}function PM(t){return!pDe(t)&&!z$(t)}function _M(t,e,n,r=!0,i=""){if(e==null||e.length===0){if(t!=null){let o=!1;if(z$(t)&&t.length>0)o=!0;else if(PM(t)){for(const a in t)if(t.hasOwnProperty(a)){o=!0;break}}else o=!0;if(o)throw new B(`Error when checking model ${i} expected no data, but got ${t}`)}return[]}if(t==null)return e.map(o=>null);let s;if(PM(t)){t=t,s=[];for(const o of e){if(t[o]==null)throw new B(`No data provided for "${o}". Need data for each key in: ${e}`);s.push(t[o])}}else if(z$(t)){if(t=t,t.length!==e.length)throw new B(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);s=t}else{if(t=t,e.length>1)throw new B(`The model ${i} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);s=[t]}if(s=l6(s),n!=null)for(let o=0;o<e.length;++o){if(n[o]==null)continue;const a=s[o];if(a.shape.length!==n[o].length)throw new B(`Error when checking ${i}: expected ${e[o]} to have ${n[o].length} dimension(s). but got array with shape ${a.shape}`);for(let l=0;l<n[o].length;++l){if(l===0&&!r)continue;const u=a.shape[l],c=n[o][l];if(c!=null&&c>=0&&u!==c)throw new B(`${i} expected a batch of elements where each example has shape [${n[o].slice(1,n[o].length)}] (i.e.,tensor shape [*,${n[o].slice(1,n[o].length)}]) but the ${i} received an input with ${a.shape[0]} examples, each with shape [${a.shape.slice(1,a.shape.length)}] (tensor shape [${a.shape}])`)}}return s}function mDe(t,e,n){const r=ta(t.map(s=>s.shape[0]));r.sort();const i=ta(e.map(s=>s.shape[0]));if(i.sort(),r.length>1)throw new B(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(s=>s.shape))}`);if(i.length>1)throw new B(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(s=>s.shape))}`);if(r.length>0&&i.length>0&&!et(r,i))throw new B(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${i[0]} target sample(s).`)}function gDe(t,e,n){const r=[_b,Db,Gd];for(let i=0;i<t.length;++i){const s=t[i],o=e[i],a=n[i];if(o!=null){if(o===Gd&&s.shape[s.shape.length-1]===1)throw new B(`You are passing a target array of shape ${s.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(o)!==-1){const l=s.shape.slice(1),u=a.slice(1);for(let c=0;c<l.length;++c){const f=l[c],h=u[c];if(h!=null&&f!==h)throw new B(`A target Tensor with shape ${s.shape} was passed for an output of shape ${a}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function DM(t,e,n,r=!0,i=""){let s;if(Array.isArray(t)){if(t.length!==e.length)throw new B(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);s=t}else{if(e.length>1)throw new B(`The model expects ${e.length} ${i} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);s=[t]}if(n!=null)for(let o=0;o<e.length;++o){if(n[o]==null)continue;const a=s[o];if(a.shape.length!==n[o].length)throw new B(`Error when checking ${i}: expected ${e[o]} to have ${n[o].length} dimension(s), but got array with shape ${JSON.stringify(a.shape)}`);for(let l=0;l<n[o].length;++l){if(l===0&&!r)continue;const u=a.shape[l],c=n[o][l];if(c!=null&&c!==u)throw new B(`Error when checking ${i}: expected ${e[o]} to have shape ${JSON.stringify(n[o])} but got array with shape ${JSON.stringify(a.shape)}.`)}}}function yDe(t,e){if(t==null||Array.isArray(t)&&t.length===0)return e.map(r=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return e.map(r=>n);{const r=[];for(const i of e){let s=n.hasOwnProperty(i)?n[i]:[];Array.isArray(s)||(s=[s]),r.push(s)}return r}}const vDe="layers-model";class Yu extends Di{constructor(e){super(e),this.isTraining=!1}summary(e,n,r=console.log){if(!this.built)throw new B("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");eDe(this,e,n,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=J_e(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof Na))throw new B("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const o in e.loss)if(this.outputNames.indexOf(o)===-1)throw new B(`Unknown entry in loss dictionary: "${o}". Only expected the following keys: ${this.outputNames}`);for(const o of this.outputNames)e.loss[o]==null&&console.warn(`Output "${o}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${o} during training`),n.push(gw(e.loss[o]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new B(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);n=e.loss.map(a=>gw(a))}else{const o=gw(e.loss);this.outputs.forEach(a=>{n.push(o)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let o=0;o<this.outputs.length;++o){const a=this.internalOutputShapes[o],l=this.outputNames[o];this.feedOutputNames.push(l),this.feedOutputShapes.push(a),this.feedLossFns.push(this.lossFunctions[o])}const r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],hl("loss",()=>{for(let o=0;o<this.outputs.length;++o){if(r.indexOf(o)!==-1)continue;const a=this.lossFunctions[o];this.outputs.length>1&&(this.metricsTensors.push([a,o]),this.metricsNames.push(this.outputNames[o]+"_loss"))}});const i=yDe(e.metrics,this.outputNames),s=(o,a,l)=>{this.outputNames.length>1&&(a=this.outputNames[o]+"_"+a),this.metricsNames.push(a),this.metricsTensors.push([l,o])};hl("metric",()=>{for(let o=0;o<this.outputs.length;++o){if(r.indexOf(o)!==-1)continue;const a=i[o];(u=>{const c="";let f,h,d;for(const p of u){if(typeof p=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(p)!==-1){const g=this.internalOutputShapes[o];g[g.length-1]===1||this.lossFunctions[o]===Db?["accuracy","acc"].indexOf(p)!==-1?h=JG:["crossentropy","ce"].indexOf(p)!==-1&&(h=W_e):this.lossFunctions[o]===Kv?["accuracy","acc"].indexOf(p)!==-1?h=U_e:["crossentropy","ce"].indexOf(p)!==-1&&(h=n6):["accuracy","acc"].indexOf(p)!==-1?h=e6:["crossentropy","ce"].indexOf(p)!==-1&&(h=t6);let y;["accuracy","acc"].indexOf(p)!==-1?y="acc":["crossentropy","ce"].indexOf(p)!==-1&&(y="ce"),d=h,f=c+y}else d=Q_e(p),f=c+Sg(p);let m;hl(f,()=>{m=d}),s(o,f,m)}})(a)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,n,r={}){const i=r.batchSize==null?32:r.batchSize;yw(i);const o=this.standardizeUserDataXY(e,n,!0,i);try{const a=o[0].concat(o[1]);this.makeTestFunction();const l=this.testFunction,u=this.testLoop(l,a,i,r.verbose,r.steps);return ar(u)}finally{Pi(o[0],e),Pi(o[1],n)}}async evaluateDataset(e,n){return this.makeTestFunction(),dDe(this,e,n)}checkNumSamples(e,n,r,i="steps"){let s;if(r!=null){if(s=null,n!=null)throw new B(`If ${i} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(e!=null)Array.isArray(e)?s=e[0].shape[0]:s=e.shape[0];else throw new B(`Either the input data should have a defined shape, or ${i} shoud be specified.`);return s}execute(e,n){if(Array.isArray(n)&&n.length===0)throw new B("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(n),i=r?n:[n],s=this.retrieveSymbolicTensors(i),o=new jo;if(e instanceof Qt&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new B(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)o.add(this.inputs[l],e[l])}else for(const l of this.inputs){const u=e[l.name];if(u==null)throw new B(`No value is provided for the model's input ${l.name}`);o.add(l,u)}const a=ch(s,o);return r?a:a[0]}retrieveSymbolicTensors(e){const n=Dl(null,e.length);let r=e.length;for(const i of this.layers){const s=Array.isArray(i.output)?i.output:[i.output],o=s.map(a=>a.name);for(let a=0;a<e.length;++a){const l=o.indexOf(e[a]);if(l!==-1&&(n[a]=s[l],r--),r===0)break}if(r===0)break}if(r>0){const i=[];throw n.forEach((s,o)=>{s==null&&i.push(e[o])}),new B(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(i)}`)}return n}predictLoop(e,n=32,r=!1){return X(()=>{const i=this.checkNumSamples(e);if(r)throw new De("Verbose predictLoop() is not implemented yet.");const s=vw(i,n),o=this.outputs.map(a=>[]);for(let a=0;a<s.length;++a)X(()=>{const u=s[a][0],c=s[a][1],f=Qf(e,u,c),h=[];if(Array.isArray(f))for(let p=0;p<f.length;++p)h.push({key:this.inputs[p],value:f[p]});else h.push({key:this.inputs[0],value:f});const d=new jo(h);return ch(this.outputs,d)}).forEach((u,c)=>o[c].push(u));return ar(o.map(a=>cr(a,0)))})}predict(e,n={}){const r=l6(e);DM(r,this.inputNames,this.feedInputShapes,!1);try{const i=n.batchSize==null?32:n.batchSize;return yw(i),this.predictLoop(r,i)}finally{Pi(r,e)}}predictOnBatch(e){DM(e,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,n)}standardizeUserDataXY(e,n,r=!0,i){if(this.optimizer_==null)throw new pi("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const s=[];for(let o=0;o<this.feedOutputShapes.length;++o){const a=this.feedOutputShapes[o];this.feedLossFns[o]===Kv?s.push(a.slice(0,a.length-1).concat([1])):s.push(a)}if(e=_M(e,this.feedInputNames,this.feedInputShapes,!1,"input"),n=_M(n,this.feedOutputNames,s,!1,"target"),mDe(e,n),gDe(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&i!=null&&i>0&&e[0].shape[0]%i!==0)throw new B(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${i}. Found: ${e[0].shape[0]} sample(s).`);return[e,n]}async standardizeUserData(e,n,r,i,s=!0,o){const[a,l]=this.standardizeUserDataXY(e,n,s,o);if(r!=null)throw new Error("sample weight is not supported yet.");let u=null;if(i!=null){const c=s6(i,this.outputNames);u=[];for(let f=0;f<c.length;++f)u.push(await o6(l[f],null,c[f]))}return[a,l,u]}testLoop(e,n,r,i=0,s){return X(()=>{const o=this.checkNumSamples(n,r,s,"steps"),a=[];if(i>0)throw new De("Verbose mode is not implemented yet.");if(s!=null)throw new De("steps mode in testLoop() is not implemented yet");{const l=vw(o,r),u=Cr(es(0,o));for(let c=0;c<l.length;++c){const f=l[c][0],h=l[c][1],d=dl(u,f,h-f),p=j$(n,d),m=e(p);if(c===0)for(let g=0;g<m.length;++g)a.push(Ze(0));for(let g=0;g<m.length;++g){const y=m[g];a[g]=oe(a[g],z(h-f,y))}}for(let c=0;c<a.length;++c)a[c]=ke(a[c],o)}return a})}getDedupedMetricsNames(){const e=this.metricsNames,n=[];for(let r=0;r<e.length;++r){const i=e[r];let s=i;if(vM(e,i)>1){const o=vM(e.slice(0,r),i);s+=`_${o}`}n.push(s)}return n}makeTrainFunction(){return e=>{const n=[],r=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),s=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),o=[],a=()=>{const f=[];for(let m=0;m<this.inputs.length;++m)f.push({key:this.inputs[m],value:r[m]});const h=new jo(f),d=ch(this.outputs,h,{training:!0});let p;for(let m=0;m<this.lossFunctions.length;++m){const g=this.lossFunctions[m];let y=g(i[m],d[m]);s[m]!=null&&(y=aDe(y,s[m]));const v=Xt(y);n.push(v),m===0?p=y:p=oe(p,y)}for(let m=0;m<this.metricsTensors.length;++m){let g;if(this.outputs.length>1&&m<this.outputs.length)g=n[m];else{const y=this.metricsTensors[m][0],v=this.metricsTensors[m][1];g=Xt(y(i[v],d[v]))}Cs(g),o.push(g)}return p=Xt(p),this.calculateLosses().forEach(m=>{p=oe(p,m)}),p},l=this.collectedTrainableWeights.map(f=>f.read());return[this.optimizer_.minimize(a,!0,l)].concat(o)}}makeTestFunction(){this.testFunction=e=>X(()=>{const n=[];let r;const i=e.slice(0,this.inputs.length),s=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=[];for(let u=0;u<this.inputs.length;++u)o.push({key:this.inputs[u],value:i[u]});const a=new jo(o),l=ch(this.outputs,a);for(let u=0;u<this.lossFunctions.length;++u){const c=this.lossFunctions[u],f=Xt(c(s[u],l[u]));u===0?r=f:r=oe(r,f),n.push(r)}for(let u=0;u<this.metricsTensors.length;++u){const c=this.metricsTensors[u][0],f=this.metricsTensors[u][1],h=Xt(c(s[f],l[f]));n.push(h)}return n})}async fit(e,n,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let i,s,o,a,l,u,c,f,h;try{const d=r.batchSize==null?32:r.batchSize;yw(d);const m=await this.standardizeUserData(e,n,r.sampleWeight,r.classWeight,!1,d);i=m[0],s=m[1],h=m[2];let g=!1,y;if(r.validationData!=null&&r.validationData.length>0){if(g=!0,r.validationData.length===2)l=r.validationData[0],u=r.validationData[1];else throw r.validationData.length===3?new De("validationData including sample weights is not supported yet."):new B(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const I=await this.standardizeUserData(l,u,null,null,!0,d);c=I[0],f=I[1],y=c.concat(f)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){g=!0;const k=Math.floor(i[0].shape[0]*(1-r.validationSplit)),I=i[0].shape[0];c=Qf(i,k,I),o=i,i=Qf(i,0,k),f=Qf(s,k,I),a=s,s=Qf(s,0,k),y=c.concat(f)}else r.validationSteps!=null&&(g=!0);const v=i.concat(s).concat(h);this.checkTrainableWeightsConsistency();const x=this.makeTrainFunction(),b=this.getDedupedMetricsNames();let w,S;g?(this.makeTestFunction(),w=this.testFunction,S=b.slice().concat(b.map(k=>"val_"+k))):(w=null,y=[],S=b.slice());const C=YG(r.callbacks,r.yieldEvery);return await this.fitLoop(x,v,b,d,r.epochs,r.verbose,C,w,y,r.shuffle,S,r.initialEpoch,null,null)}finally{this.isTraining=!1,Pi(i,e),Pi(s,n),Pi(o,e),Pi(a,n),Pi(c,l),Pi(f,u),h!=null&&je(h)}}async fitLoop(e,n,r,i,s,o,a,l,u,c,f,h,d,p){i==null&&(i=32),s==null&&(s=1),c==null&&(c=!0),h==null&&(h=0);let m=!1;if(l!=null&&u!=null&&(m=!0),p!=null&&(m=!0,d==null))throw new B("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const g=this.checkNumSamples(n,i,d,"steps_per_epoch");let y;g!=null&&(y=es(0,g)),o==null&&(o=1);const{callbackList:v,history:x}=ZG(a,o,s,h,g,d,i,m,f);v.setModel(this),this.history=x,await v.onTrainBegin(),this.stopTraining_=!1;for(let b=h;b<s;++b){await v.onEpochBegin(b);const w={};if(d!=null)throw new De("stepsPerEpoch mode is not implemented yet.");{if(c==="batch")throw new De("batch shuffling is not implemneted yet");c&&rke(y);const S=Cr(y),C=vw(g,i);for(let $=0;$<C.length;++$){const k={};if(await v.onBatchBegin($,k),X(()=>{const I=C[$][0],T=C[$][1],A=dl(S,I,T-I);k.batch=$,k.size=T-I;const _=j$(n,A),D=e(_);for(let P=0;P<r.length;++P){const R=r[P],F=D[P];k[R]=F,Cs(F)}if($===C.length-1&&m){const P=this.testLoop(l,u,i);for(let R=0;R<r.length;++R){const F=r[R],O=P[R];Cs(O),w["val_"+F]=O}}}),await v.onBatchEnd($,k),XG(k),this.stopTraining_)break}S.dispose()}if(await v.onEpochEnd(b,w),this.stopTraining_)break}return await v.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,n){return cDe(this,e,n)}async trainOnBatch(e,n){const r=await this.standardizeUserData(e,n),i=r[0],s=r[1],a=this.makeTrainFunction()(i.concat(s)),l=[];for(const u of a){const c=await u.data();l.push(c[0])}return je(a),Pi(r[0],e),Pi(r[1],n),ar(l)}getNamedWeights(e){const n=[],r=e!=null&&e.trainableOnly,i=r?this.trainableWeights:this.weights,s=this.getWeights(r);for(let o=0;o<i.length;++o)r&&!i[o].trainable||n.push({name:i[o].originalName,tensor:s[o]});return n}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=eM().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-eM().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=Ls(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(n=>Ls(n))}else{const n=Object.keys(this.loss);e={};const r=this.loss;for(const i of n)if(typeof r[i]=="string")e[i]=Ls(r[i]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Ls(Sg(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>Ls(Sg(e)));{const e={};for(const n in this.metrics)e[n]=Ls(Sg(this.metrics[n]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=L$(e.optimizer_config),r=eo(n);let i;if(typeof e.loss=="string")i=Ha(e.loss);else if(Array.isArray(e.loss))i=e.loss.map(o=>Ha(o));else if(e.loss!=null){i={};for(const o in e.loss)i[o]=Ha(e.loss[o])}let s;if(Array.isArray(e.metrics))s=e.metrics.map(o=>Ha(o));else if(e.metrics!=null){s={};for(const o in e.metrics)s[o]=Ha(e.metrics[o])}this.compile({loss:i,metrics:s,optimizer:r})}async save(e,n){if(typeof e=="string"){const u=Qke(e);if(u.length===0)throw new B(`Cannot find any save handlers for URL '${e}'`);if(u.length>1)throw new B(`Found more than one (${u.length}) save handlers for URL '${e}'`);e=u[0]}if(e.save==null)throw new B("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await nM(this.getNamedWeights(n)),a={modelTopology:this.toJSON(null,!1),format:vDe,generatedBy:`TensorFlow.js tfjs-layers v${i6}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){a.trainingConfig=this.getTrainingConfig();const u="optimizer",{data:c,specs:f}=await nM(await this.optimizer.getWeights(),u);r.specs.push(...f),r.data=Zke([r.data,c])}return this.userDefinedMetadata!=null&&(NM(this.userDefinedMetadata,this.name,!0),a.userDefinedMetadata=this.userDefinedMetadata),a.weightData=r.data,a.weightSpecs=r.specs,e.save(a)}setUserDefinedMetadata(e){NM(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}Yu.className="Model";se(Yu);class u6 extends Yu{}u6.className="Functional";se(u6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Lc extends Yu{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:Ab("sequential_"),e.layers!=null)for(const n of e.layers)this.add(n)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new B(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const n=e instanceof Lc||e instanceof Yu;let r;if(n){if(r=e,r.outputs.length!==1)throw new B("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new B("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new B("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const i=b_e({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(i)}if(n)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new B(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new B("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=UG(this.outputs[0])}this.inboundNodes=[],new Pb({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Dl(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(i=>i.shape),outputShapes:this.outputs[0].shape})}else{const i=e.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,n){return this.model==null&&this.build(),this.model.call(e,n)}build(e){if(qe(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new Yu({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,n,r=console.log){this.built||this.build(),super.summary(e,n,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,n,r={}){if(!this.built)throw new pi("The model needs to be compiled before being used.");return this.model.evaluate(e,n,r)}async evaluateDataset(e,n){if(!this.built)throw new pi("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,n)}predict(e,n={}){return this.model==null&&this.build(),this.model.predict(e,n)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,n,r={}){if(!this.built)throw new pi("The model needs to be compiled before being used.");return this.model.fit(e,n,r)}async fitDataset(e,n){if(!this.built)throw new pi("The model needs to be compiled before being used.");return this.model.fitDataset(e,n)}async trainOnBatch(e,n){return this.model.trainOnBatch(e,n)}static fromConfig(e,n,r={},i=!1){let s,o={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new B("Legacy serialization format not supported yet.");s=n}else E(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),s=n.layers,delete n.layers,o=n;const a=new e(o);if(!(a instanceof Lc))throw new De(`Sequential.fromConfig called on non-Sequential input: ${a}`);for(const l of s){const c=eo(l,void 0,i);i&&c.setFastWeightInitDuringBuild(!0),a.add(c)}return a}set stopTraining(e){if(this.model==null)throw new B("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new B("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const n of this.layers){const r={};r.className=n.getClassName(),r.config=n.getConfig(),e.push(r)}return{name:this.name,layers:e}}}Lc.className="Sequential";se(Lc);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function xDe(t){return new Lc(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Fn=class extends vf{getConfig(){return{}}};class c6 extends Fn{apply(e,n=1){return i_e(e,n)}}c6.className="elu";se(c6);class f6 extends Fn{apply(e){return EU(e)}}f6.className="selu";se(f6);class h6 extends Fn{apply(e){return Yl(e)}}h6.className="relu";se(h6);class d6 extends Fn{apply(e){return X(()=>Vd(6,Yl(e)))}}d6.className="relu6";se(d6);class p6 extends Fn{apply(e){return e}}p6.className="linear";se(p6);class m6 extends Fn{apply(e){return mf(e)}}m6.className="sigmoid";se(m6);class g6 extends Fn{apply(e){return o_e(e)}}g6.className="hardSigmoid";se(g6);class y6 extends Fn{apply(e){return mm(e)}}y6.className="softplus";se(y6);class v6 extends Fn{apply(e){return s_e(e)}}v6.className="softsign";se(v6);class x6 extends Fn{apply(e){return bb(e)}}x6.className="tanh";se(x6);let HE=class extends Fn{apply(e,n=-1){return X2(e,n)}};HE.className="softmax";se(HE);class b6 extends Fn{apply(e,n=-1){return xU(e,n)}}b6.className="logSoftmax";se(b6);class w6 extends Fn{apply(e){return X(()=>X(()=>{const n=Math.sqrt(2),r=z(.5,oe(1,pU(ke(e,n))));return z(e,r)}))}}w6.className="gelu";se(w6);class S6 extends Fn{apply(e){return X(()=>z(.5,z(e,oe(1,bb(z(Rn(ke(2,Math.PI)),oe(e,z(.044715,Ol(e,3)))))))))}}S6.className="gelu_new";se(S6);class C6 extends Fn{apply(e){return X(()=>z(e,bb(mm(e))))}}C6.className="mish";se(C6);class $6 extends Fn{apply(e,n=1){return X(()=>z(mf(z(e,n)),e))}}$6.className="swish";se($6);function ua(t){return t.getClassName()}function xw(t,e={}){return Sm(t,li.getMap().classNameMap,e,"activation")}function ca(t){if(t==null){const e={};return e.className="linear",e.config={},xw(e)}if(typeof t=="string"){const e={};return e.className=t,e.config={},xw(e)}else return t instanceof Fn?t:xw(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function bDe(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}class k6 extends vf{}class I6 extends k6{constructor(e){super(),bDe(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return X(()=>{let n=hn([1]);return this.hasL1&&(n=oe(n,$e(z(this.l1,Hn(e))))),this.hasL2&&(n=oe(n,$e(z(this.l2,$m(e))))),G(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,n){return new e({l1:n.l1,l2:n.l2})}}I6.className="L1L2";se(I6);const RM={l1l2:"L1L2"};function lt(t){return PE(t)}function MM(t,e={}){return Sm(t,li.getMap().classNameMap,e,"regularizer")}function kt(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in RM?RM[t]:t,config:{}};return MM(n)}else return t instanceof k6?t:MM(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class T6 extends Fe{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,n){e=Ae(e);let r=Yl(e);return this.maxValue!=null&&(r=Hr(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},n=super.getConfig();return Object.assign(e,n),e}}T6.className="ReLU";se(T6);class E6 extends Fe{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=Ae(e);return _2(r,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}}E6.className="LeakyReLU";se(E6);class N6 extends Fe{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=Ct(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=kt(e.alphaRegularizer),this.alphaConstraint=sn(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new B(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=qe(e);const n=e.slice(1);if(this.sharedAxes!=null)for(const i of this.sharedAxes)n[i-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let i=1;i<e.length;++i)r[i]=e[i];this.inputSpec=[new tn({ndim:e.length,axes:r})],this.built=!0}call(e,n){return e=Ae(e),B2(e,this.alpha.read())}getConfig(){const e={alphaInitializer:Et(this.alphaInitializer),alphaRegularizer:lt(this.alphaRegularizer),alphaConstraint:rn(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(e,n),e}}N6.className="PReLU";se(N6);let A6=class extends Fe{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new De(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=Ae(e);return Cb(r)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}};A6.className="ELU";se(A6);class O6 extends Fe{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,n){const r=Ae(e);return z(r,me(Xr(r,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},n=super.getConfig();return Object.assign(e,n),e}}O6.className="ThresholdedReLU";se(O6);class P6 extends Fe{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new HE().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,n){return X(()=>{let r=Ae(e);const i=n.mask;if(i!=null){const s=z(Ie(Ea(r.shape),me(i,r.dtype)),Ze(-1e9));r=oe(r,s)}return this.axis instanceof Array?this.axis.length>1?Ns(Ie(r,bU(r,this.axis,!0))):this.softmax(r,this.axis[0]):this.softmax(r,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}P6.className="Softmax";se(P6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Zu(t,e,n){if(typeof t=="number")return Dl(t,e);if(t.length!==e)throw new B(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let r=0;r<e;++r){const i=t[r];if(!e_e(i))throw new B(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number ${i}`)}return t}function Qi(t,e,n,r,i=1){if(t==null)return t;const s=e+(e-1)*(i-1);let o;return n==="same"?o=t:o=t-s+1,Math.floor((o+r-1)/r)}function hs(t,e,n,r){if(t==null)return null;if(r==="valid")t=t*e+la([n-e,0]);else if(r==="same")t=t*e;else throw new B(`Unsupport padding mode: ${r}.`);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function KE(t,e){return X(()=>(Wt(e),e==="channelsFirst"?Ue(t,[0,2,3,1]):t))}function _6(t,e){return X(()=>(Wt(e),e==="channelsFirst"?Ue(t,[0,2,3,4,1]):t))}function wDe(t,e,n,r=1,i="valid",s,o=1){return X(()=>{if(s==null&&(s=ts()),Wt(s),t.shape.length!==3)throw new B(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(e.shape.length!==3)throw new B(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new B(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if(s==="channelsFirst"&&(t=Ue(t,[0,2,1])),i==="causal")throw new De("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let a=uU(t,e,r,i==="same"?"same":"valid","NWC",o);return n!=null&&(a=ss(a,n)),a})}function FM(t,e,n,r=[1,1],i="valid",s,o,a=null){return X(()=>{if(s==null&&(s=ts()),Wt(s),t.rank!==3&&t.rank!==4)throw new B(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(e.rank!==3&&e.rank!==4)throw new B(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let l=KE(t,s);if(i==="causal")throw new De("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=NNe({x:l,filter:e,strides:r,pad:i==="same"?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:a}),s==="channelsFirst"&&(l=Ue(l,[0,3,1,2])),l})}function SDe(t,e,n,r=[1,1,1],i="valid",s,o){return X(()=>{if(s==null&&(s=ts()),Wt(s),t.rank!==4&&t.rank!==5)throw new B(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(e.rank!==4&&e.rank!==5)throw new B(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let a=_6(t,s);if(i==="causal")throw new De("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return a=ETe(a,e,r,i==="same"?"same":"valid","NDHWC",o),n!=null&&(a=ss(a,n)),s==="channelsFirst"&&(a=Ue(a,[0,4,1,2,3])),a})}class Rb extends Fe{constructor(e,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",Rb.verifyArgs(n),this.rank=e,mn(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new De(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=Zu(n.kernelSize,e,"kernelSize"),this.strides=Zu(n.strides==null?1:n.strides,e,"strides"),this.padding=n.padding==null?"valid":n.padding,Yr(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,Wt(this.dataFormat),this.activation=ca(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=Ct(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=sn(n.biasConstraint),this.biasRegularizer=kt(n.biasRegularizer),this.activityRegularizer=kt(n.activityRegularizer),this.dilationRate=Zu(n.dilationRate==null?1:n.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new B(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new B(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new B(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(fs("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!_E(e.kernelSize,"number",1,3))throw new B(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:ua(this.activation),useBias:this.useBias,biasInitializer:Et(this.biasInitializer),biasRegularizer:lt(this.biasRegularizer),activityRegularizer:lt(this.activityRegularizer),biasConstraint:rn(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}class xf extends Rb{constructor(e,n){super(e,n),this.kernel=null,xf.verifyArgs(n),this.filters=n.filters,mn(this.filters,"filters"),this.kernelInitializer=Ct(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=sn(n.kernelConstraint),this.kernelRegularizer=kt(n.kernelRegularizer)}build(e){e=qe(e);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new B(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],i=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:r}}],this.built=!0}call(e,n){return X(()=>{e=Ae(e);let r;const i=this.bias==null?null:this.bias.read(),s=NG(this.activation.getClassName());if(s!=null&&this.rank===2)r=FM(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate,s);else{if(this.rank===1)r=wDe(e,this.kernel.read(),i,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=FM(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=SDe(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new De("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(e){e=qe(e);const n=[],r=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let s=0;s<r.length;++s){const o=Qi(r[s],this.kernelSize[s],this.padding,this.strides[s],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[s]);n.push(o)}let i=[e[0]];return this.dataFormat==="channelsLast"?(i=i.concat(n),i.push(this.filters)):(i.push(this.filters),i=i.concat(n)),i}getConfig(){const e={filters:this.filters,kernelInitializer:Et(this.kernelInitializer),kernelRegularizer:lt(this.kernelRegularizer),kernelConstraint:rn(this.kernelConstraint)},n=super.getConfig();return Object.assign(e,n),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new B(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class Em extends xf{constructor(e){super(2,e),Em.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!_E(e.kernelSize,"number",1,2))throw new B(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}Em.className="Conv2D";se(Em);class Nm extends xf{constructor(e){super(3,e),Nm.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new B(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}Nm.className="Conv3D";se(Nm);class D6 extends Em{constructor(e){if(super(e),this.inputSpec=[new tn({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new B(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=qe(e),e.length!==4)throw new B("Input should have rank 4; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new B("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],i=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new tn({ndim:4,axes:{[n]:r}})],this.built=!0}call(e,n){return X(()=>{let r=Ae(e);if(r.shape.length!==4)throw new B(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const i=r.shape,s=i[0];let o,a;this.dataFormat==="channelsFirst"?(o=2,a=3):(o=1,a=2);const l=i[o],u=i[a],c=this.kernelSize[0],f=this.kernelSize[1],h=this.strides[0],d=this.strides[1],p=hs(l,h,c,this.padding),m=hs(u,d,f,this.padding),g=[s,p,m,this.filters];this.dataFormat!=="channelsLast"&&(r=Ue(r,[0,2,3,1]));let y=cU(r,this.kernel.read(),g,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(y=Ue(y,[0,3,1,2])),this.bias!=null&&(y=ss(y,this.bias.read(),this.dataFormat)),this.activation!=null&&(y=this.activation.apply(y)),y})}computeOutputShape(e){e=qe(e);const n=e.slice();let r,i,s;this.dataFormat==="channelsFirst"?(r=1,i=2,s=3):(r=3,i=1,s=2);const o=this.kernelSize[0],a=this.kernelSize[1],l=this.strides[0],u=this.strides[1];return n[r]=this.filters,n[i]=hs(n[i],l,o,this.padding),n[s]=hs(n[s],u,a,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}D6.className="Conv2DTranspose";se(D6);class R6 extends Nm{constructor(e){if(super(e),this.inputSpec=[new tn({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new B(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=qe(e),e.length!==5)throw new B("Input should have rank 5; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new B("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],i=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new tn({ndim:5,axes:{[n]:r}})],this.built=!0}call(e,n){return X(()=>{let r=Ae(e);if(r.shape.length!==5)throw new B(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const i=r.shape,s=i[0];let o,a,l;this.dataFormat==="channelsFirst"?(l=2,o=3,a=4):(l=1,o=2,a=3);const u=i[l],c=i[o],f=i[a],h=this.kernelSize[0],d=this.kernelSize[1],p=this.kernelSize[2],m=this.strides[0],g=this.strides[1],y=this.strides[2],v=hs(u,m,h,this.padding),x=hs(c,g,d,this.padding),b=hs(f,y,p,this.padding),w=[s,v,x,b,this.filters];this.dataFormat!=="channelsLast"&&(r=Ue(r,[0,2,3,4,1]));let S=OTe(r,this.kernel.read(),w,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(S=Ue(S,[0,4,1,2,3])),this.bias!==null&&(S=ss(S,this.bias.read(),this.dataFormat)),this.activation!==null&&(S=this.activation.apply(S)),S})}computeOutputShape(e){e=qe(e);const n=e.slice();let r,i,s,o;this.dataFormat==="channelsFirst"?(r=1,i=2,s=3,o=4):(r=4,i=1,s=2,o=3);const a=this.kernelSize[0],l=this.kernelSize[1],u=this.kernelSize[2],c=this.strides[0],f=this.strides[1],h=this.strides[2];return n[r]=this.filters,n[i]=hs(n[i],c,a,this.padding),n[s]=hs(n[s],f,l,this.padding),n[o]=hs(n[o],h,u,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}R6.className="Conv3DTranspose";se(R6);class M6 extends xf{constructor(e,n){if(super(e,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new B("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new B("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new B(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=Ct(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=kt(n.depthwiseRegularizer),this.depthwiseConstraint=sn(n.depthwiseConstraint),this.pointwiseInitializer=Ct(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=kt(n.pointwiseRegularizer),this.pointwiseConstraint=sn(n.pointwiseConstraint)}build(e){if(e=qe(e),e.length<this.rank+2)throw new B(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null||e[n]<0)throw new B(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[n])}`);const r=e[n],i=this.kernelSize.concat([r,this.depthMultiplier]),s=[];for(let a=0;a<this.rank;++a)s.push(1);s.push(r*this.depthMultiplier,this.filters);const o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",i,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",s,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new tn({ndim:this.rank+2,axes:{[n]:r}})],this.built=!0}call(e,n){return X(()=>{e=Ae(e);let r;if(this.rank===1)throw new De("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=Ue(e,[0,2,3,1])),r=NU(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=ss(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=Ue(r,[0,3,1,2])),r})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=Et(this.depthwiseInitializer),e.pointwiseInitializer=Et(this.pointwiseInitializer),e.depthwiseRegularizer=lt(this.depthwiseRegularizer),e.pointwiseRegularizer=lt(this.pointwiseRegularizer),e.depthwiseConstraint=rn(this.depthwiseConstraint),e.pointwiseConstraint=rn(this.pointwiseConstraint),e}}M6.className="SeparableConv";class F6 extends M6{constructor(e){super(2,e)}}F6.className="SeparableConv2D";se(F6);class Mb extends xf{constructor(e){super(1,e),Mb.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!_E(e.kernelSize,"number",1,1))throw new B(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}Mb.className="Conv1D";se(Mb);class L6 extends Fe{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,n){return X(()=>{if(e=Ae(e),this.dataFormat==="channelsLast"){const r=wg(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return wg(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=wg(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return wg(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}L6.className="Cropping2D";se(L6);class B6 extends Fe{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Wt(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,ZPe(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const n=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],n,r]}else{const n=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],n,r,e[3]]}}call(e,n){return X(()=>{let r=Ae(e);const i=r.shape;if(this.dataFormat==="channelsFirst"){r=Ue(r,[0,2,3,1]);const s=this.size[0]*i[2],o=this.size[1]*i[3],a=this.interpolation==="nearest"?Gs.resizeNearestNeighbor(r,[s,o]):Gs.resizeBilinear(r,[s,o]);return Ue(a,[0,3,1,2])}else{const s=this.size[0]*i[1],o=this.size[1]*i[2];return this.interpolation==="nearest"?Gs.resizeNearestNeighbor(r,[s,o]):Gs.resizeBilinear(r,[s,o])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}}B6.className="UpSampling2D";se(B6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function CDe(t,e,n=[1,1],r="valid",i,s){return X(()=>{i==null&&(i=ts()),Wt(i);let o=KE(t,i);if(t.rank!==4)throw new B(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(e.rank!==4)throw new B(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return o=N2(o,e,n,r==="same"?"same":"valid","NHWC",s),i==="channelsFirst"&&(o=Ue(o,[0,3,1,2])),o})}class j6 extends Rb{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=Ct(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=sn(e.depthwiseConstraint),this.depthwiseRegularizer=kt(e.depthwiseRegularizer)}build(e){if(e=qe(e),e.length<4)throw new B(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(e[n]==null||e[n]<0)throw new B(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[n]}).`);const r=e[n],i=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",i,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return X(()=>{e=Ae(e);let r=CDe(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=ss(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=qe(e);const n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],i=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,s=Qi(n,this.kernelSize[0],this.padding,this.strides[0]),o=Qi(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],i,s,o]:[e[0],s,o,i]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=Et(this.depthwiseInitializer),e.depthwiseRegularizer=lt(this.depthwiseRegularizer),e.depthwiseConstraint=rn(this.depthwiseRegularizer),e}}j6.className="DepthwiseConv2D";se(j6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function z6(t,e,n,r){if(Array.isArray(t)){if(e!=null||n!=null)throw new B("When inputs is an array, neither initialState or constants should be provided");r!=null&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function i(s){return s==null||Array.isArray(s)?s:[s]}return e=i(e),n=i(n),{inputs:t,initialState:e,constants:n}}function V6(t,e,n,r=!1,i,s,o=!1,a=!1){return X(()=>{const l=e.shape.length;if(l<3)throw new B(`Input should be at least 3D, but is ${l}D.`);const u=[1,0].concat(es(2,l));e=Ue(e,u),o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),i!=null&&(i=me(me(i,"bool"),"float32"),i.rank===l-1&&(i=or(i,-1)),i=Ue(i,u)),r&&(e=Pl(e,0),i!=null&&(i=Pl(i,0)));const c=[];let f,h=n;const d=e.shape[0],p=_l(e);let m;i!=null&&(m=_l(i));for(let y=0;y<d;++y){const v=p[y],x=X(()=>t(v,h));if(i==null)f=x[0],h=x[1];else{const b=X(()=>{const w=m[y],S=Ie(Ci(w),w),C=oe(z(x[0],w),z(h[0],S)),$=h.map((k,I)=>oe(z(x[1][I],w),z(k,S)));return{output:C,newStates:$}});f=b.output,h=b.newStates}a&&c.push(f)}let g;return a&&(g=fo(c,1)),[f,g,h]})}class Aa extends Fe{constructor(e){super(e);let n;if(e.cell==null)throw new B("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?n=new YE({cells:e.cell}):n=e.cell,n.stateSize==null)throw new B("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new tn({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return es(0,e).map(n=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){R$(e)&&(e=e[0]),e=e;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const r=n[0];let i;if(this.returnSequences?i=[e[0],e[1],r]:i=[e[0],r],this.returnState){const s=[];for(const o of n)s.push([e[0],o]);return[i].concat(s)}else return i}computeMask(e,n){return X(()=>{Array.isArray(n)&&(n=n[0]);const r=this.returnSequences?n:null;if(this.returnState){const i=this.states.map(s=>null);return[r].concat(i)}else return r})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let r=0;r<e;++r)n.push(null);return n}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new De("Constants support is not implemented in RNN yet.");R$(e)&&(e=e[0]),e=e;const n=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new tn({shape:[n,null,...r]});const i=[e[0]].concat(e.slice(2));this.cell.build(i);let s;if(Array.isArray(this.cell.stateSize)?s=this.cell.stateSize:s=[this.cell.stateSize],this.stateSpec!=null){if(!et(this.stateSpec.map(o=>o.shape[o.shape.length-1]),s))throw new B(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=s.map(o=>new tn({shape:[null,o]}));this.stateful&&this.resetStates()}resetStates(e,n=!1){X(()=>{if(!this.stateful)throw new cs("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new B("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>hn([r,i])):this.states_=[hn([r,this.cell.stateSize])];else if(e==null)je(this.states_),this.keptStates!=null&&(je(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>hn([r,i])):this.states_[0]=hn([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new B(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n===!0?this.keptStates.push(this.states_.slice()):je(this.states_);for(let i=0;i<this.states_.length;++i){const s=e[i],o=Array.isArray(this.cell.stateSize)?this.cell.stateSize[i]:this.cell.stateSize,a=[r,o];if(!et(s.shape,a))throw new B(`State ${i} is incompatible with layer ${this.name}: expected shape=${a}, received shape=${s.shape}`);this.states_[i]=s}}this.states_=this.states_.map(i=>Cs(i.clone()))})}apply(e,n){let r=n==null?null:n.initialState,i=n==null?null:n.constants;n==null&&(n={});const s=z6(e,r,i,this.numConstants);e=s.inputs,r=s.initialState,i=s.constants;let o=[],a=[];if(r!=null){n.initialState=r,o=o.concat(r),this.stateSpec=[];for(const u of r)this.stateSpec.push(new tn({shape:u.shape}));a=a.concat(this.stateSpec)}if(i!=null&&(n.constants=i,o=o.concat(i),this.numConstants=i.length),o[0]instanceof Os){const u=[e].concat(o),c=this.inputSpec.concat(a),f=this.inputSpec;this.inputSpec=c;const h=super.apply(u,n);return this.inputSpec=f,h}else return super.apply(e,n)}call(e,n){return X(()=>{const r=n==null?null:n.mask,i=n==null?null:n.training;let s=n==null?null:n.initialState;e=Ae(e),s==null&&(this.stateful?s=this.states_:s=this.getInitialState(e));const o=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(s.length!==o)throw new B(`RNN Layer has ${o} state(s) but was passed ${s.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const a={training:i},u=V6((p,m)=>{const g=this.cell.call([p].concat(m),a);return[g[0],g.slice(1)]},e,s,this.goBackwards,r,null,this.unroll,this.returnSequences),c=u[0],f=u[1],h=u[2];this.stateful&&this.resetStates(h,i);const d=this.returnSequences?f:c;return this.returnState?[d].concat(h):d})}getInitialState(e){return X(()=>{let n=hn(e.shape);return n=$e(n,[1,2]),n=Cm(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?_$(n,[1,r]):n):this.cell.stateSize>1?[_$(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===Aa.className&&(n.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),n)}static fromConfig(e,n,r={}){const i=n.cell,s=eo(i,r);return new e(Object.assign(n,{cell:s}))}}Aa.className="RNN";se(Aa);class Fb extends Fe{}class qE extends Fb{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,mn(this.units,"units"),this.activation=ca(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Ct(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Ct(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Ct(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=kt(e.kernelRegularizer),this.recurrentRegularizer=kt(e.recurrentRegularizer),this.biasRegularizer=kt(e.biasRegularizer),this.kernelConstraint=sn(e.kernelConstraint),this.recurrentConstraint=sn(e.recurrentConstraint),this.biasConstraint=sn(e.biasConstraint),this.dropout=Fc([1,la([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Fc([1,la([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=qe(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return X(()=>{if(e=e,e.length!==2)throw new B(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];const i=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=fa({ones:()=>Ci(e),rate:this.dropout,training:i,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=fa({ones:()=>Ci(r),rate:this.recurrentDropout,training:i,dropoutFunc:this.dropoutFunc}));let s;const o=this.dropoutMask,a=this.recurrentDropoutMask;o!=null?s=Is(z(e,o),this.kernel.read()):s=Is(e,this.kernel.read()),this.bias!=null&&(s=ss(s,this.bias.read())),a!=null&&(r=z(r,a));let l=oe(s,Is(r,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:ua(this.activation),useBias:this.useBias,kernelInitializer:Et(this.kernelInitializer),recurrentInitializer:Et(this.recurrentInitializer),biasInitializer:Et(this.biasInitializer),kernelRegularizer:lt(this.kernelRegularizer),recurrentRegularizer:lt(this.recurrentRegularizer),biasRegularizer:lt(this.biasRegularizer),activityRegularizer:lt(this.activityRegularizer),kernelConstraint:rn(this.kernelConstraint),recurrentConstraint:rn(this.recurrentConstraint),biasConstraint:rn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),n)}}qE.className="SimpleRNNCell";se(qE);class W6 extends Aa{constructor(e){e.cell=new qE(e),super(e)}call(e,n){return X(()=>{this.cell.dropoutMask!=null&&(je(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(je(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:s})})}static fromConfig(e,n){return new e(n)}}W6.className="SimpleRNN";se(W6);class XE extends Fb{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new B("GRUCell does not support reset_after parameter set to true.");this.units=e.units,mn(this.units,"units"),this.activation=ca(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=ca(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Ct(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Ct(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Ct(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=kt(e.kernelRegularizer),this.recurrentRegularizer=kt(e.recurrentRegularizer),this.biasRegularizer=kt(e.biasRegularizer),this.kernelConstraint=sn(e.kernelConstraint),this.recurrentConstraint=sn(e.recurrentConstraint),this.biasConstraint=sn(e.biasConstraint),this.dropout=Fc([1,la([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Fc([1,la([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=qe(e);const n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return X(()=>{if(e=e,e.length!==2)throw new B(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training==null?!1:n.training;let i=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=fa({ones:()=>Ci(e),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=fa({ones:()=>Ci(i),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const s=this.dropoutMask,o=this.recurrentDropoutMask;let a,l,u;0<this.dropout&&this.dropout<1&&(e=z(e,s[0]));let c=Is(e,this.kernel.read());this.useBias&&(c=ss(c,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(i=z(i,o[0]));const f=this.recurrentKernel.read(),[h,d]=Vr(f,[2*this.units,this.units],f.rank-1),p=Is(i,h),[m,g,y]=Vr(c,3,c.rank-1),[v,x]=Vr(p,2,p.rank-1);a=this.recurrentActivation.apply(oe(m,v)),l=this.recurrentActivation.apply(oe(g,x));const b=Is(z(l,i),d);u=this.activation.apply(oe(y,b));const w=oe(z(a,i),z(oe(1,jt(a)),u));return[w,w]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:ua(this.activation),recurrentActivation:ua(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Et(this.kernelInitializer),recurrentInitializer:Et(this.recurrentInitializer),biasInitializer:Et(this.biasInitializer),kernelRegularizer:lt(this.kernelRegularizer),recurrentRegularizer:lt(this.recurrentRegularizer),biasRegularizer:lt(this.biasRegularizer),activityRegularizer:lt(this.activityRegularizer),kernelConstraint:rn(this.kernelConstraint),recurrentConstraint:rn(this.recurrentConstraint),biasConstraint:rn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),n)}}XE.className="GRUCell";se(XE);class U6 extends Aa{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new XE(e),super(e)}call(e,n){return X(()=>{this.cell.dropoutMask!=null&&(je(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(je(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:s})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}U6.className="GRU";se(U6);class Lb extends Fb{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,mn(this.units,"units"),this.activation=ca(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=ca(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Ct(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Ct(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Ct(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=kt(e.kernelRegularizer),this.recurrentRegularizer=kt(e.recurrentRegularizer),this.biasRegularizer=kt(e.biasRegularizer),this.kernelConstraint=sn(e.kernelConstraint),this.recurrentConstraint=sn(e.recurrentConstraint),this.biasConstraint=sn(e.biasConstraint),this.dropout=Fc([1,la([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Fc([1,la([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var n;e=qe(e);const r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let i;if(this.useBias){if(this.unitForgetBias){const s=this.biasInitializer,o=this.units;i=new(n=class extends Ti{apply(l,u){const c=s.apply([o]),f=new RE().apply([o]),h=s.apply([o*2]);return bM(bM(c,f),h)}},n.className="CustomInit",n)}else i=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,i,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,n){return X(()=>{const r=n.training==null?!1:n.training;if(e=e,e.length!==3)throw new B(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let i=e[1];const s=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=fa({ones:()=>Ci(e),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=fa({ones:()=>Ci(i),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,a=this.recurrentDropoutMask;let l,u,c,f;0<this.dropout&&this.dropout<1&&(e=z(e,o[0]));let h=Is(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(i=z(i,a[0])),h=oe(h,Is(i,this.recurrentKernel.read())),this.useBias&&(h=ss(h,this.bias.read()));const[d,p,m,g]=Vr(h,4,h.rank-1);l=this.recurrentActivation.apply(d),u=this.recurrentActivation.apply(p),c=oe(z(u,s),z(l,this.activation.apply(m))),f=this.recurrentActivation.apply(g);const y=z(f,this.activation.apply(c));return[y,y,c]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:ua(this.activation),recurrentActivation:ua(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Et(this.kernelInitializer),recurrentInitializer:Et(this.recurrentInitializer),biasInitializer:Et(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:lt(this.kernelRegularizer),recurrentRegularizer:lt(this.recurrentRegularizer),biasRegularizer:lt(this.biasRegularizer),activityRegularizer:lt(this.activityRegularizer),kernelConstraint:rn(this.kernelConstraint),recurrentConstraint:rn(this.recurrentConstraint),biasConstraint:rn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),n)}}Lb.className="LSTMCell";se(Lb);class G6 extends Aa{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new Lb(e),super(e)}call(e,n){return X(()=>{this.cell.dropoutMask!=null&&(je(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(je(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:s})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}G6.className="LSTM";se(G6);class YE extends Fb{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?e.push(...n.stateSize):e.push(n.stateSize);return e}call(e,n){return X(()=>{e=e;let r=e.slice(1);const i=[];for(const a of this.cells.slice().reverse())Array.isArray(a.stateSize)?i.push(r.splice(0,a.stateSize.length)):i.push(r.splice(0,1));i.reverse();const s=[];let o;for(let a=0;a<this.cells.length;++a){const l=this.cells[a];r=i[a],a===0?o=[e[0]].concat(r):o=[o[0]].concat(r),o=l.call(o,n),s.push(o.slice(1))}r=[];for(const a of s.slice().reverse())r.push(...a);return[o[0]].concat(r)})}build(e){R$(e)&&(e=e[0]),e=e;let n;this.cells.forEach((r,i)=>{hl(`RNNCell_${i}`,()=>{r.build(e),Array.isArray(r.stateSize)?n=r.stateSize[0]:n=r.stateSize,e=[e[0],n]})}),this.built=!0}getConfig(){const e=super.getConfig(),n=s=>({className:s.getClassName(),config:s.getConfig()}),i={cells:this.cells.map(n)};return Object.assign(Object.assign({},e),i)}static fromConfig(e,n,r={}){const i=[];for(const s of n.cells)i.push(eo(s,r));return new e({cells:i})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const n of this.cells)e.push(...n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.cells)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.cells)n.push(...r.trainableWeights);return n.concat(e)}return e}getWeights(){const e=[];for(const n of this.cells)e.push(...n.weights);return M$(e)}setWeights(e){const n=[];for(const r of this.cells){const i=r.weights.length,s=e.splice(i);for(let o=0;o<r.weights.length;++o)n.push([r.weights[o],s[o]])}VE(n)}}YE.className="StackedRNNCells";se(YE);function fa(t){const{ones:e,rate:n,training:r=!1,count:i=1,dropoutFunc:s}=t,o=()=>s!=null?s(e(),n):MG(e(),n),a=()=>km(o,e,r);return!i||i<=1?Cs(a().clone()):Array(i).fill(void 0).map(a).map(u=>Cs(u.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var $De=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class H6 extends Aa{constructor(e){if(e.unroll)throw new De("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new De("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new tn({ndim:5})]}call(e,n){return X(()=>{if(this.cell.dropoutMask!=null&&(je(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(je(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new B("ConvRNN2D cell does not support constants");const r=n==null?null:n.mask,i=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:s})})}computeOutputShape(e){let n=this.computeSingleOutputShape(e);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([e[0],...n.slice(-3)])]),n}getInitialState(e){return X(()=>{const{stateSize:n}=this.cell,r=e.shape,i=this.computeSingleOutputShape(r),s=[i[0],...i.slice(2)],o=hn(s);return Array.isArray(n)?Array(n.length).fill(o):[o]})}resetStates(e,n=!1){X(()=>{if(!this.stateful)throw new cs("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,i=this.computeSingleOutputShape(r),s=[i[0],...i.slice(2)];if(r[0]==null)throw new B("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>hn(s)):this.states_=[hn(s)];else if(e==null)je(this.states_),this.keptStates!=null&&(je(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>hn(s)):this.states_[0]=hn(s);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new B(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n?this.keptStates.push(this.states_.slice()):je(this.states_);for(let a=0;a<this.states_.length;++a){const l=e[a],u=s;if(!et(l.shape,u))throw new B(`State ${a} is incompatible with layer ${this.name}: expected shape=${u}, received shape=${l.shape}`);this.states_[a]=l}}this.states_=this.states_.map(a=>Cs(a.clone()))})}computeSingleOutputShape(e){const{dataFormat:n,filters:r,kernelSize:i,padding:s,strides:o,dilationRate:a}=this.cell,l=n==="channelsFirst",u=e[l?3:2],c=e[l?4:3],f=Qi(u,i[0],s,o[0],a[0]),h=Qi(c,i[1],s,o[1],a[1]);return[...e.slice(0,2),...l?[r,f,h]:[f,h,r]]}}H6.className="ConvRNN2D";class ZE extends Lb{constructor(e){const{filters:n,kernelSize:r,strides:i,padding:s,dataFormat:o,dilationRate:a}=e;super(Object.assign(Object.assign({},e),{units:n})),this.filters=n,mn(this.filters,"filters"),this.kernelSize=Zu(r,2,"kernelSize"),this.kernelSize.forEach(l=>mn(l,"kernelSize")),this.strides=Zu(i||1,2,"strides"),this.strides.forEach(l=>mn(l,"strides")),this.padding=s||"valid",Yr(this.padding),this.dataFormat=o||"channelsLast",Wt(this.dataFormat),this.dilationRate=Zu(a||1,2,"dilationRate"),this.dilationRate.forEach(l=>mn(l,"dilationRate"))}build(e){var n;e=qe(e);const r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new B(`The channel dimension of the input should be defined. Found ${e[r]}`);const i=e[r],s=4,o=this.kernelSize.concat([i,this.filters*s]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const a=this.kernelSize.concat([this.filters,this.filters*s]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",a,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const u=this.biasInitializer,c=this.filters;l=new(n=class extends Ti{apply(h,d){const p=u.apply([c]),m=Ea([c]),g=u.apply([c*2]);return DE([p,m,g])}},n.className="CustomInit",n)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*s],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,n){return X(()=>{if(e.length!==3)throw new B(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training||!1,i=e[0],s=e[1],o=e[2],a=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=fa({ones:()=>Ci(i),rate:this.dropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,u=(V,q,K)=>!q||!q[K]?V:z(q[K],V);let c=u(i,l,0),f=u(i,l,1),h=u(i,l,2),d=u(i,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=fa({ones:()=>Ci(s),rate:this.recurrentDropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const p=this.recurrentDropoutMask;let m=u(s,p,0),g=u(s,p,1),y=u(s,p,2),v=u(s,p,3);const x=3,[b,w,S,C]=Vr(this.kernel.read(),a,x),[$,k,I,T]=this.useBias?Vr(this.bias.read(),a):[null,null,null,null];c=this.inputConv(c,b,$,this.padding),f=this.inputConv(f,w,k,this.padding),h=this.inputConv(h,S,I,this.padding),d=this.inputConv(d,C,T,this.padding);const[A,_,D,P]=Vr(this.recurrentKernel.read(),a,x);m=this.recurrentConv(m,A),g=this.recurrentConv(g,_),y=this.recurrentConv(y,D),v=this.recurrentConv(v,P);const R=this.recurrentActivation.apply(oe(c,m)),F=this.recurrentActivation.apply(oe(f,g)),O=oe(z(F,o),z(R,this.activation.apply(oe(h,y)))),M=z(this.recurrentActivation.apply(oe(d,v)),this.activation.apply(O));return[M,M,O]})}getConfig(){const e=super.getConfig(),n=$De(e,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),r)}inputConv(e,n,r,i){const s=Al(e,n,this.strides,i||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?ss(s,r,this.dataFormat):s}recurrentConv(e,n){return Al(e,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}ZE.className="ConvLSTM2DCell";se(ZE);class K6 extends H6{constructor(e){const n=new ZE(e);super(Object.assign(Object.assign({},e),{cell:n}))}static fromConfig(e,n){return new e(n)}}K6.className="ConvLSTM2D";se(K6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class QE extends Fe{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const n=e.shape,r=[];for(let i=0;i<this.noiseShape.length;++i)r.push(this.noiseShape[i]==null?n[i]:this.noiseShape[i]);return r}call(e,n){return X(()=>{this.invokeCallHook(e,n);const r=Ae(e);if(0<this.rate&&this.rate<1){const i=n.training==null?!1:n.training,s=this.getNoiseShape(r);return km(()=>MG(r,this.rate,s,this.seed),()=>r,i)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(e,n),e}dispose(){return super.dispose()}}QE.className="Dropout";se(QE);class q6 extends QE{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const n=e.shape;return[n[0],1,n[2]]}}q6.className="SpatialDropout1D";se(q6);class JE extends Fe{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let n=null;e.batchSize!=null&&(n=e.batchSize),this.batchInputShape=[n,e.inputDim]}this.units=e.units,mn(this.units,"units"),this.activation=ca(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=Ct(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=Ct(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=sn(e.kernelConstraint),this.biasConstraint=sn(e.biasConstraint),this.kernelRegularizer=kt(e.kernelRegularizer),this.biasRegularizer=kt(e.biasRegularizer),this.activityRegularizer=kt(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=qe(e);const n=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(e){e=qe(e);const n=e.slice();return n[n.length-1]=this.units,n}call(e,n){return X(()=>{this.invokeCallHook(e,n);const r=Ae(e),i=NG(this.activation.getClassName());let s;return i!=null?s=Is(r,this.kernel.read(),i,this.bias?this.bias.read():null):(s=Is(r,this.kernel.read()),this.bias!=null&&(s=ss(s,this.bias.read())),this.activation!=null&&(s=this.activation.apply(s))),s})}getConfig(){const e={units:this.units,activation:ua(this.activation),useBias:this.useBias,kernelInitializer:Et(this.kernelInitializer),biasInitializer:Et(this.biasInitializer),kernelRegularizer:lt(this.kernelRegularizer),biasRegularizer:lt(this.biasRegularizer),activityRegularizer:lt(this.activityRegularizer),kernelConstraint:rn(this.kernelConstraint),biasConstraint:rn(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}JE.className="Dense";se(JE);class X6 extends Fe{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=qe(e);for(const n of e.slice(1))if(n==null)throw new B(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],na(e,1)]}call(e,n){return X(()=>{this.invokeCallHook(e,n);let r=Ae(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){const i=[0];for(let s=2;s<r.rank;++s)i.push(s);i.push(1),r=Ue(r,i)}return r_e(r)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(e,n),e}}X6.className="Flatten";se(X6);class Y6 extends Fe{constructor(e){super(e),this.supportsMasking=!0,this.activation=ca(e.activation)}call(e,n){return X(()=>{this.invokeCallHook(e,n);const r=Ae(e);return this.activation.apply(r)})}getConfig(){const e={activation:ua(this.activation)},n=super.getConfig();return Object.assign(e,n),e}}Y6.className="Activation";se(Y6);class Z6 extends Fe{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,n){return X(()=>(e=Ae(e),t_e(e,this.n)))}getConfig(){const e={n:this.n},n=super.getConfig();return Object.assign(e,n),e}}Z6.className="RepeatVector";se(Z6);class Q6 extends Fe{constructor(e){super(e),this.targetShape=e.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,n){const r="Total size of new array must be unchanged.",i=n.slice();let s=1,o=null;for(let l=0;l<i.length;++l){const u=i[l];if(this.isUnknown(u))if(o===null)o=l;else throw new B("Can only specifiy one unknown dimension.");else s*=u}const a=na(e);if(o!==null){if(s===0||a%s!==0)throw new B(r);i[o]=a/s}else if(a!==s)throw new B(r);return i}computeOutputShape(e){let n=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){n=!0;break}return n?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,n){return X(()=>{this.invokeCallHook(e,n);const r=Ae(e),i=r.shape,s=i.slice(0,1).concat(this.fixUnknownDimension(i.slice(1),this.targetShape));return G(r,s)})}getConfig(){const e={targetShape:this.targetShape},n=super.getConfig();return Object.assign(e,n),e}}Q6.className="Reshape";se(Q6);class J6 extends Fe{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const n=es(1,e.dims.length+1);if(!et(e.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new tn({ndim:this.dims.length+1})]}computeOutputShape(e){e=qe(e);const n=e.slice();return this.dims.forEach((r,i)=>{n[i+1]=e[r]}),n}call(e,n){return Ue(Ae(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},n=super.getConfig();return Object.assign(e,n),e}}J6.className="Permute";se(J6);class e5 extends Fe{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,e),n}computeMask(e,n){const r=Ae(e);return I$(Bv(r,this.maskValue),-1)}call(e,n){return X(()=>{this.invokeCallHook(e,n);const r=Ae(e),o=I$(Bv(r,this.maskValue),-1,!0);return z(r,me(o,r.dtype))})}}e5.className="Masking";se(e5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class t5 extends Fe{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let n=null;e.batchSize!=null&&(n=e.batchSize),e.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(nt(e.inputLength))}this.inputDim=e.inputDim,mn(this.inputDim,"inputDim"),this.outputDim=e.outputDim,mn(this.outputDim,"outputDim"),this.embeddingsInitializer=Ct(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=kt(e.embeddingsRegularizer),this.activityRegularizer=kt(e.activityRegularizer),this.embeddingsConstraint=sn(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,n){return X(()=>this.maskZero?(e=Ae(e),Bv(e,Ge(e))):null)}computeOutputShape(e){if(e=qe(e),this.inputLength==null)return[...e,this.outputDim];const n=nt(this.inputLength);if(n.length!==e.length-1)throw new B(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let i=0;i<n.length;++i){const s=n[i],o=e[i+1];if(s!=null&&o!=null&&s!==o)throw new B(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);s==null&&(n[r]=o),r++}}return[e[0],...n,this.outputDim]}call(e,n){return X(()=>{this.invokeCallHook(e,n);let r=Ae(e);r.dtype!=="int32"&&(r=ks(r,"int32"));const i=RG(this.embeddings.read(),G(r,[r.size]));return G(i,qe(this.computeOutputShape(r.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Et(this.embeddingsInitializer),embeddingsRegularizer:lt(this.embeddingsRegularizer),activityRegularizer:lt(this.activityRegularizer),embeddingsConstraint:rn(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(e,n),e}}t5.className="Embedding";se(t5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Jl extends Fe{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new De}computeElementwiseOpOutputShape(e,n){if(e==null||n==null)return null;if(e.length<n.length)return this.computeElementwiseOpOutputShape(n,e);if(n.length===0)return e;const r=e.slice(0,e.length-n.length);for(let i=0;i<n.length;++i){const s=e[e.length-n.length+i],o=n[i];if(s==null||o==null||s<0||o<0)r.push(null);else if(s===1)r.push(o);else if(o===1)r.push(s);else{if(s!==o)throw new B("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(n));r.push(s)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[qe(e)]),e=e,e.length<2)throw new B(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let n=[];for(const s of e)s!=null&&s[0]!==null&&n.push(s[0]);if(n=ta(n),n.length>1)throw new B(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let r=e[0]==null?null:e[0].slice(1);for(let s=1;s<e.length;++s){const o=e[s]==null?null:e[s].slice(1);r=this.computeElementwiseOpOutputShape(r,o)}const i=e.map(s=>s.length);e.indexOf(null)===-1&&ta(i).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,n){return X(()=>{if(e=e,this.reshapeRequired){const r=[],i=e.map(s=>s.rank);if(i.indexOf(null)===-1){const s=la(i);for(let o of e){const a=o.rank;for(let l=0;l<s-a;++l)o=Cm(o,1);r.push(o)}return this.mergeFunction(r)}else{let s=!1;for(const l of e){const u=l.rank;if(u==null){const c=l.shape,f=c[0],h=c.slice(1).concat([f]);let d=G(l,[f].concat(na(c.slice(1))));d=Ue(d,[1,0]),d=G(d,h),r.push(d),s=!0}else if(u>1){const c=es(1,u).concat([0]);r.push(Ue(l,c)),s=!0}else r.push(l)}let o=this.mergeFunction(r);const a=o.rank;if(s){if(a==null){const l=o.shape,u=l.length,c=l[u-1],f=[c].concat(l.slice(0,l.length-1));o=G(Ue(G(o,[-1,c]),[1,0]),f)}else if(a>1){const l=[a-1].concat(es(0,a-1));o=Ue(o,l)}}return o}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let n;e[0]==null?n=null:n=e[0].slice(1);for(let i=1;i<e.length;++i){const s=e[i]==null?null:e[i].slice(1);n=this.computeElementwiseOpOutputShape(n,s)}let r=[];for(const i of e)i!=null&&i[0]!==null&&r.push(i[0]);return r=ta(r),r.length===1?n=r.concat(n):n=[null].concat(n),n}computeMask(e,n){return X(()=>{if(n==null)return null;if(!Array.isArray(n))throw new B("`mask` should be an Array");if(!Array.isArray(e))throw new B("`inputs` should be an Array");if(n.length!==e.length)throw new B(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${n.length})`);if(n.every(i=>i==null))return null;n=n.map(i=>i==null?i:or(i,0));let r=n[0];for(let i=1;i<n.length-1;++i)r=co(r,n[i]);return r})}}class n5 extends Jl{constructor(e){super(e)}mergeFunction(e){return X(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=oe(n,e[r]);return n})}}n5.className="Add";se(n5);class r5 extends Jl{constructor(e){super(e)}mergeFunction(e){return X(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=z(n,e[r]);return n})}}r5.className="Multiply";se(r5);class i5 extends Jl{constructor(e){super(e)}mergeFunction(e){return X(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=oe(n,e[r]);return z(1/e.length,n)})}}i5.className="Average";se(i5);class s5 extends Jl{constructor(e){super(e)}mergeFunction(e){return X(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=Ta(n,e[r]);return n})}}s5.className="Maximum";se(s5);class o5 extends Jl{constructor(e){super(e)}mergeFunction(e){return X(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=Vd(n,e[r]);return n})}}o5.className="Minimum";se(o5);class a5 extends Jl{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new B("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let n=!0;for(const i of e)if(i!=null){n=!1;break}if(n)return;const r=[];for(let i=0;i<e.length;++i){const s=e[i].slice();s.splice(this.axis,1);let o=!1;for(const a of r)if(et(a,s)){o=!0;break}o||r.push(s)}if(r.length>1)throw new B("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return X(()=>DE(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new B("A `Concatenate` layer should be called on a list of inputs.");const n=e,r=n[0].slice(),i=this.axis<0?r.length+this.axis:this.axis;for(const s of n.slice(1)){if(r[i]==null||s[i]==null){r[i]=null;break}r[i]+=s[i]}return r}computeMask(e,n){if(n==null)return null;if(!Array.isArray(n))throw new B("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new B("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new B(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${e.length})`);return X(()=>{let r=!0;if(n.forEach(o=>{if(o!=null){r=!1;return}}),r)return null;const i=[];for(let o=0;o<e.length;++o)n[o]==null?i.push(me(Ci(e[o]),"bool")):n[o].rank<e[o].rank?i.push(or(n[o],-1)):i.push(n[o]);const s=cr(i,this.axis);return lU(s,-1,!1)})}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}a5.className="Concatenate";se(a5);function Jf(t,e){for(;t<0;)t+=e;return t}function kDe(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new De("batchDot is not implemented for tensors of 4D or higher rank yet");if(E(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),E(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||e.dtype==="complex64")throw new De("batchDot is not implemented for complex64-type Tensors yet.");const r=t.shape.length,i=e.shape.length;n==null&&(n=[r-1,i-2]);const s=n;return X(()=>{let o;if(r>i){o=r-i;const l=[];for(let u=0;u<o;++u)l.push(1);e=G(e,e.shape.concat(l))}else if(i>r){o=i-r;const l=[];for(let u=0;u<o;++u)l.push(1);t=G(t,t.shape.concat(l))}else o=0;let a;if(t.shape.length===2&&e.shape.length===2)s[0]===s[1]?a=$e(z(t,e),s[0]):a=$e(z(Ue(t,[1,0]),e),s[1]);else{const l=s[0]!==t.shape.length-1,u=s[1]===e.shape.length-1;a=Ye(t,e,l,u)}if(o>0){let l;r>i?l=r+i-3:l=r-1;const u=[];for(let c=l;c<l+o;++c)u.push(c);a=ym(a,u)}return a.shape.length===1&&(a=or(a,1)),a})}class l5 extends Jl{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){E(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0],r=e[1];if(n.length>3||r.length>3)throw new De("Dot layer does not support tensors of 4D or higher rank yet.");const i=this.interpretAxes(n,r);if(n[i[0]]!==r[i[1]])throw new B(`Dimension incompatibility: ${n[i[0]]} !== ${r[i[1]]}`)}mergeFunction(e){if(e.length!==2)throw new B(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],r=e[1],i;return Array.isArray(this.axes)?i=this.axes.map((s,o)=>Jf(s,e[o].shape.length)):i=[Jf(this.axes,n.shape.length),Jf(this.axes,r.shape.length)],this.normalize&&(n=Hv(n,i[0]),r=Hv(r,i[1])),kDe(n,r,i)}interpretAxes(e,n){let r;return Array.isArray(this.axes)?r=this.axes:r=[Jf(this.axes,e.length),Jf(this.axes,n.length)],r}computeOutputShape(e){E(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0].slice(),r=e[1].slice();if(n.length>3||r.length>3)throw new De("Dot layer does not support tensors of 4D or higher rank yet.");const i=this.interpretAxes(n,r);n.splice(i[0],1),r.splice(i[1],1),r.splice(0,1);const s=n.concat(r);return s.length===1&&s.push(1),s}computeMask(e,n){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(e,n),e}}l5.className="Dot";se(l5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class u5 extends Fe{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,e),n}call(e,n){return X(()=>{this.invokeCallHook(e,n);const r=Ae(e);return km(()=>oe(Ob(r.shape,0,this.stddev),r),()=>r,n.training||!1)})}}u5.className="GaussianNoise";se(u5);class c5 extends Fe{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return X(()=>{this.invokeCallHook(e,n);const r=Ae(e);return this.rate>0&&this.rate<1?km(()=>{const s=Math.sqrt(this.rate/(1-this.rate));return z(r,Ob(r.shape,1,s))},()=>r,n.training||!1):r})}}c5.className="GaussianDropout";se(c5);class f5 extends Fe{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||Ae(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return X(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(e);return km(()=>{const s=Ae(e),l=-1.6732632423543772*1.0507009873554805;let u=ql(gm(r),this.rate);u=ks(u,"float32");const c=((1-this.rate)*(1+this.rate*l**2))**-.5,f=-c*l*this.rate,h=oe(z(s,u),z(oe(u,-1),l));return oe(z(h,c),f)},()=>Ae(e),n.training||!1)}return e})}}f5.className="AlphaDropout";se(f5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Hd(t,e,n,r,i,s=.001){let o;if(t.rank===2)o=iTe(t,e,n,r,i,s);else if(t.rank===3)o=oTe(t,e,n,r,i,s);else if(t.rank===4)o=lTe(t,e,n,r,i,s);else throw new De(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return o}function IDe(t,e,n,r,i=.001){return X(()=>{const s=M2(t,r),o=s.mean,a=s.variance;return[Hd(t,o,a,n,e,i),o,a]})}function TDe(t,e,n,r,i=.001){return X(()=>{const s=M2(t,r),o=s.mean,a=s.variance,l=[];for(const p of es(0,t.rank))r.indexOf(p)!==-1?l.push(1):l.push(t.shape[p]);const u=G(o,l),c=G(a,l),f=e==null?null:G(e,l),h=n==null?null:G(n,l);return[Hd(t,u,c,h,f,i),o,a]})}function EDe(t,e,n,r,i=.001){return et(r.slice().sort(),es(0,t.rank-1))?IDe(t,e,n,r,i):TDe(t,e,n,r,i)}class h5 extends Fe{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Ct(e.betaInitializer||"zeros"),this.gammaInitializer=Ct(e.gammaInitializer||"ones"),this.movingMeanInitializer=Ct(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=Ct(e.movingVarianceInitializer||"ones"),this.betaConstraint=sn(e.betaConstraint),this.gammaConstraint=sn(e.gammaConstraint),this.betaRegularizer=kt(e.betaRegularizer),this.gammaRegularizer=kt(e.gammaRegularizer)}build(e){e=qe(e);const n=this.axis>=0?this.axis:this.axis+e.length,r=e[n];if(r==null)throw new B(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new tn({ndim:e.length,axes:{[n]:r}})];const i=[r];this.scale&&(this.gamma=this.addWeight("gamma",i,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",i,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",i,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",i,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,n){return X(()=>{const r=n.training==null?!1:n.training,i=Ae(e),s=i.shape,o=s.length,a=es(0,o),l=this.axis>=0?this.axis:this.axis+o;a.splice(l,1);const u=Dl(1,o);u[l]=s[l];const c=a.slice();c.sort();const f=!et(c,es(0,o).slice(0,o-1)),h=()=>{if(f){const v=G(this.movingMean.read(),u),x=G(this.movingVariance.read(),u),b=this.center?G(this.beta.read(),u):null,w=this.scale?G(this.gamma.read(),u):null;return Hd(i,v,x,b,w,this.epsilon)}else return Hd(i,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return h();const[d,p,m]=EDe(i,this.gamma.read(),this.beta.read(),a,this.epsilon),g=(v,x,b)=>{X(()=>{const w=1-b,S=v.read(),C=z(Ie(S,x),w);v.write(Ie(S,C))})};return(()=>{g(this.movingMean,p,this.momentum),g(this.movingVariance,m,this.momentum)})(),d})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Et(this.betaInitializer),gammaInitializer:Et(this.gammaInitializer),movingMeanInitializer:Et(this.movingMeanInitializer),movingVarianceInitializer:Et(this.movingVarianceInitializer),betaRegularizer:lt(this.betaRegularizer),gammaRegularizer:lt(this.gammaRegularizer),betaConstraint:rn(this.betaConstraint),gammaConstraint:rn(this.gammaConstraint)},n=super.getConfig();return Object.assign(e,n),e}}h5.className="BatchNormalization";se(h5);class d5 extends Fe{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Ct(e.betaInitializer||"zeros"),this.gammaInitializer=Ct(e.gammaInitializer||"ones"),this.betaRegularizer=kt(e.betaRegularizer),this.gammaRegularizer=kt(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=qe(e);const n=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let s=0;s<this.axis.length;++s)this.axis[s]<0&&(this.axis[s]+=n);for(const s of this.axis)if(s<0||s>=n)throw new Error(`Invalid axis: ${s}`);if(this.axis.length!==ta(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(s=>e[s]),i=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,i):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,i):this.beta=null,this.built=!0}call(e,n){const r=Ae(e),i=r.shape,s=i.length;return X(()=>{let{mean:a,variance:l}=M2(r,this.axis,!0);const u=Dl(1,s);for(const m of this.axis)u[m]=i[m];const c=m=>m!=null&&m.shape.length!==s?G(m,u):m;let f=this.scale?c(this.gamma.read()):null,h=this.center?c(this.beta.read()):null;const d=[],p=[];for(let m=0;m<s;++m)this.axis.indexOf(m)!==-1?(d.push(i[m]),p.push(1)):(d.push(1),p.push(i[m]));return a=Ki(a,d),l=Ki(l,d),f!=null&&(f=Ki(f,p)),h!=null&&(h=Ki(h,p)),Hd(r,a,l,h,f,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Et(this.betaInitializer),gammaInitializer:Et(this.gammaInitializer),betaRegularizer:lt(this.betaRegularizer),gammaRegularizer:lt(this.gammaRegularizer)},n=super.getConfig();return Object.assign(e,n),e}}d5.className="LayerNormalization";se(d5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function NDe(t,e,n){return X(()=>{if(t.rank!==4)throw new B(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new B("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=ts()),n!=="channelsLast"&&n!=="channelsFirst")throw new B(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return n==="channelsFirst"?r=[[0,0],[0,0],e[0],e[1]]:r=[[0,0],e[0],e[1],[0,0]],F2(t,r)})}class p5 extends Fe{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?ts():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new B(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let n,r;if(typeof e.padding[0]=="number")n=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new B(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(n=e.padding[0],e.padding[1].length!==2)throw new B(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[n,r]}this.inputSpec=[new tn({ndim:4})]}computeOutputShape(e){e=qe(e);let n,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?n=e[2]+this.padding[0][0]+this.padding[0][1]:n=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],n,r]):(e[1]!=null&&e[1]>=0?n=e[1]+this.padding[0][0]+this.padding[0][1]:n=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],n,r,e[3]])}call(e,n){return X(()=>NDe(Ae(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}p5.className="ZeroPadding2D";se(p5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Bb(t,e,n,r,i,s){return X(()=>{Wt(i),OG(s),Yr(r),n==null&&(n=[1,1]),r==null&&(r="valid"),i==null&&(i=ts()),s==null&&(s="max"),t=KE(t,i);let o;const a=r==="same"?"same":"valid";return s==="max"?o=R2(t,e,n,a):o=k2(t,e,n,a),i==="channelsFirst"&&(o=Ue(o,[0,3,1,2])),o})}function m5(t,e,n,r,i,s){return X(()=>{Wt(i),OG(s),Yr(r),n==null&&(n=[1,1,1]),r==null&&(r="valid"),i==null&&(i=ts()),s==null&&(s="max"),t=_6(t,i);let o;const a=r==="same"?"same":"valid";return s==="max"?o=H2e(t,e,n,a):o=qIe(t,e,n,a),i==="channelsFirst"&&(o=Ue(o,[0,4,1,2,3])),o})}class g5 extends Fe{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new B(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(mn(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new B(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);mn(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,Yr(this.padding),this.inputSpec=[new tn({ndim:3})]}computeOutputShape(e){e=qe(e);const n=Qi(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],n,e[2]]}call(e,n){return X(()=>{this.invokeCallHook(e,n),e=Cm(Ae(e),2);const r=this.poolingFunction(Ae(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return ym(r,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(e,n),e}}class y5 extends g5{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return Wt(s),Yr(i),Bb(e,n,r,i,s,"max")}}y5.className="MaxPooling1D";se(y5);class v5 extends g5{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return Wt(s),Yr(i),Bb(e,n,r,i,s,"avg")}}v5.className="AveragePooling1D";se(v5);class x5 extends Fe{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new B(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];mn(this.poolSize,"poolSize"),mn(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Wt(this.dataFormat),Yr(this.padding),this.inputSpec=[new tn({ndim:4})]}computeOutputShape(e){e=qe(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2];return n=Qi(n,this.poolSize[0],this.padding,this.strides[0]),r=Qi(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r]:[e[0],n,r,e[3]]}call(e,n){return X(()=>(this.invokeCallHook(e,n),this.poolingFunction(Ae(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class b5 extends x5{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return Wt(s),Yr(i),Bb(e,n,r,i,s,"max")}}b5.className="MaxPooling2D";se(b5);class w5 extends x5{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return Wt(s),Yr(i),Bb(e,n,r,i,s,"avg")}}w5.className="AveragePooling2D";se(w5);class S5 extends Fe{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new B(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];mn(this.poolSize,"poolSize"),mn(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Wt(this.dataFormat),Yr(this.padding),this.inputSpec=[new tn({ndim:5})]}computeOutputShape(e){e=qe(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],i=this.dataFormat==="channelsFirst"?e[4]:e[3];return n=Qi(n,this.poolSize[0],this.padding,this.strides[0]),r=Qi(r,this.poolSize[1],this.padding,this.strides[1]),i=Qi(i,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r,i]:[e[0],n,r,i,e[4]]}call(e,n){return X(()=>(this.invokeCallHook(e,n),this.poolingFunction(Ae(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class C5 extends S5{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return Wt(s),Yr(i),m5(e,n,r,i,s,"max")}}C5.className="MaxPooling3D";se(C5);class $5 extends S5{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return Wt(s),Yr(i),m5(e,n,r,i,s,"avg")}}$5.className="AveragePooling3D";se($5);class k5 extends Fe{constructor(e){super(e),this.inputSpec=[new tn({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,n){throw new De}}class I5 extends k5{constructor(e){super(e||{})}call(e,n){return X(()=>{const r=Ae(e);return Xt(r,1)})}}I5.className="GlobalAveragePooling1D";se(I5);class T5 extends k5{constructor(e){super(e||{})}call(e,n){return X(()=>{const r=Ae(e);return Zi(r,1)})}}T5.className="GlobalMaxPooling1D";se(T5);class E5 extends Fe{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Wt(this.dataFormat),this.inputSpec=[new tn({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,n){throw new De}getConfig(){const e={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class N5 extends E5{call(e,n){return X(()=>{const r=Ae(e);return this.dataFormat==="channelsLast"?Xt(r,[1,2]):Xt(r,[2,3])})}}N5.className="GlobalAveragePooling2D";se(N5);class A5 extends E5{call(e,n){return X(()=>{const r=Ae(e);return this.dataFormat==="channelsLast"?Zi(r,[1,2]):Zi(r,[2,3])})}}A5.className="GlobalMaxPooling2D";se(A5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class O5 extends Fe{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(e,n),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,n,r={}){const i=n.layer,s=eo(i,r);delete n.layer;const o={layer:s};return Object.assign(o,n),new e(o)}}class P5 extends O5{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=qe(e),e.length<3)throw new B(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=qe(e);const n=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(n),i=e[1];return[r[0],i].concat(r.slice(1))}call(e,n){return X(()=>(e=Ae(e),V6((o,a)=>[Ae(this.layer.call(o,n)),[]],e,[],!1,null,null,!1,!0)[1]))}}P5.className="TimeDistributed";se(P5);function ADe(t){Ql(YPe,"BidirectionalMergeMode",t)}const ODe="concat";class _5 extends O5{constructor(e){super(e);const n=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=n,this.forwardLayer=eo(r),n.goBackwards=n.goBackwards!==!0;const i={};if(i.className=e.layer.getClassName(),i.config=n,this.backwardLayer=eo(i),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?ODe:e.mergeMode,ADe(this.mergeMode),e.weights)throw new De("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const n=e.length,r=Math.floor(n/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let n=this.forwardLayer.computeOutputShape(e);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let r,i,s;return this.returnState&&(s=n.slice(1)),r=n[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,i=[r]):this.mergeMode==null?i=[r,r.slice()]:i=[r],this.returnState?this.mergeMode==null?i.concat(s).concat(s.slice()):[r].concat(s).concat(s.slice()):ar(i)}apply(e,n){let r=n==null?null:n.initialState,i=n==null?null:n.constants;n==null&&(n={});const s=z6(e,r,i,this.numConstants);if(e=s.inputs,r=s.initialState,i=s.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&i==null)return super.apply(e,n);const o=[],a=[];if(r!=null){const u=r.length;if(u%2>0)throw new B("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,o.push(...r);const c=r.map(f=>new tn({shape:f.shape}));this.forwardLayer.stateSpec=c.slice(0,u/2),this.backwardLayer.stateSpec=c.slice(u/2),a.push(...c)}if(i!=null)throw new De("Support for constants in Bidirectional layers is not implemented yet.");const l=o[0]instanceof Os;for(const u of o)if(u instanceof Os!==l)throw new B("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const u=[e].concat(o),c=this.inputSpec.concat(a),f=this.inputSpec;this.inputSpec=c;const h=super.apply(u,n);return this.inputSpec=f,h}else return super.apply(e,n)}call(e,n){return X(()=>{const r=n.initialState;let i,s;if(r==null)i=this.forwardLayer.call(e,n),s=this.backwardLayer.call(e,n);else{const l=r.slice(0,r.length/2),u=r.slice(r.length/2);i=this.forwardLayer.call(e,Object.assign(n,{initialState:l})),s=this.backwardLayer.call(e,Object.assign(n,{initialState:u}))}let o;this.returnState&&(Array.isArray(i)&&(o=i.slice(1).concat(s.slice(1))),i=i[0],s=s[0]),this.returnSequences&&(s=Pl(s,1));let a;return this.mergeMode==="concat"?a=DE([i,s]):this.mergeMode==="sum"?a=oe(i,s):this.mergeMode==="ave"?a=z(.5,oe(i,s)):this.mergeMode==="mul"?a=z(i,s):this.mergeMode==null&&(a=[i,s]),this.returnState?this.mergeMode==null?a.concat(o):[a].concat(o):a})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){hl(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),hl(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,n){Array.isArray(n)&&(n=n[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[n,n]:r=n:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const s=this.forwardLayer.states.map(o=>null);return Array.isArray(r)?r.concat(s).concat(s):[r].concat(s).concat(s)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(e,n){const r=eo(n.layer);if(delete n.layer,n.numConstants!=null)throw new De("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const i=n;return i.layer=r,new e(i)}}_5.className="Bidirectional";se(_5);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class D5 extends Fe{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return X(()=>(e=Ae(e),e.dtype!=="float32"&&(e=ks(e,"float32")),oe(z(e,this.scale),this.offset)))}}D5.className="Rescaling";se(D5);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:PDe,cropAndResize:_De}=Gs;class R5 extends Fe{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,n,r,i,s,o,a,l){return X(()=>{let u,c=!1;const f=n/o,h=r/a,d=(i+n)/o,p=(s+r)/a,m=[f,h,d,p],g=[];e.rank===3?(c=!0,u=fo([e])):u=e;for(let w=0;w<u.shape[0];w++)g.push(m);const y=QW(g,[g.length,4]),v=Wd(0,g.length,1,"int32"),b=_De(u,y,v,[i,s],"nearest");return ks(c?Ae(_l(b)):b,l)})}upsize(e,n,r,i){return X(()=>{const s=PDe(e,[n,r]);return ks(s,i)})}call(e,n){return X(()=>{const r=Ae(e),i=r.dtype,s=r.shape,o=s[s.length-3],a=s[s.length-2];let l=0;o!==this.height&&(l=Math.floor((o-this.height)/2));let u=0;return a!==this.width&&(u=Math.floor((a-this.width)/2),u===0&&(u=1)),l>=0&&u>=0?this.centerCrop(r,l,u,this.height,this.width,o,a,i):this.upsize(e,this.height,this.width,i)})}getConfig(){const e={height:this.height,width:this.width},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=qe(e);const n=e.length-3,r=e.length-2;return e[n]=this.height,e[r]=this.width,e}}R5.className="CenterCrop";se(R5);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function DDe(t,e,n,r){let i=Ae(t);if(i.dtype!=="int32"&&(i=ks(i,"int32")),e==="int")return i;const s=i.shape;if(i.rank===0&&(i=or(i,-1)),e==="oneHot"&&i.shape[i.shape.length-1]!==1&&(i=or(i,-1)),i.rank>2)throw new B(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${s} which would result in output rank ${i.rank}.`);const o=["multiHot","oneHot"].includes(e),a=i;let l;if(typeof r<"u"&&e==="count"?l=sM(a,r,n,o):l=sM(a,[],n,o),e!=="tfIdf")return l;if(r)return z(l,r);throw new B("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class M5 extends Fe{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){return e=qe(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,n){return X(()=>{e=Ae(e),e.dtype!=="int32"&&(e=ks(e,"int32"));let r;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new B(`countWeights is not used when outputMode !== count.
              Received countWeights=${n.countWeights}`);r=Ae(n.countWeights)}const i=Zi(e),s=Fv(e),o=Xr(this.numTokens,i).bufferSync().get(0),a=ql(s,0).bufferSync().get(0);if(!(o&&a))throw new B(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return DDe(e,this.outputMode,this.numTokens,r)})}}M5.className="CategoryEncoding";se(M5);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const RDe=["bilinear","nearest"],LM=new Set(RDe);class F5 extends Fe{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(LM.has(e.interpolation))this.interpolation=e.interpolation;else throw new B(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=qe(e);const n=e[2];return[this.height,this.width,n]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return X(()=>{const r=[this.height,this.width];if(this.interpolation==="bilinear")return Gs.resizeBilinear(e,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return Gs.resizeNearestNeighbor(e,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...LM]} are supported`)})}}F5.className="Resizing";se(F5);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class L5{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}L5.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class B5 extends Fe{constructor(e){super(e),this.randomGenerator=new L5(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(e,n),e}}B5.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const MDe=["bilinear","nearest"],BM=new Set(MDe);class j5 extends B5{constructor(e){super(e);const{factor:n,interpolation:r="bilinear"}=e;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new B(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new B(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new B(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(BM.has(r))this.interpolation=r;else throw new B(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=qe(e);const n=e[2];return[this.imgHeight,-1,n]}call(e,n){return X(()=>{const r=Ae(e);this.imgHeight=r.shape[r.shape.length-3];const i=r.shape[r.shape.length-2];this.widthFactor=gm([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let s=this.widthFactor.dataSync()[0]*i;s=Math.round(s);const o=[this.imgHeight,s];switch(this.interpolation){case"bilinear":return Gs.resizeBilinear(e,o);case"nearest":return Gs.resizeNearestNeighbor(e,o);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...BM]} are supported`)}})}}j5.className="RandomWidth";se(j5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function bw(t){return new JE(t)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FDe=Y();FDe.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var jM;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(jM||(jM={}));var zM;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(zM||(zM={}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var VM;(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})(VM||(VM={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function be(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&E(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LDe=FU;class jb extends ET{nextDataId(){return jb.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new nW(this,ls())}write(e,n,r){this.firstUse&&(this.firstUse=!1,Y().get("IS_NODE")&&Fr(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const i={id:this.nextDataId()};return this.data.set(i,{values:e,dtype:r,refCount:1}),i}makeTensorInfo(e,n,r){let i;if(n==="string"&&r!=null&&r.length>0&&vp(r[0])){const s=r.map(o=>ea(o));i=this.write(s,e,n)}else i=this.write(r,e,n);return{dataId:i,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,i,s){this.data.set(e,{values:n,dtype:i,refCount:s})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const i=this.readSync(r.real.dataId),s=this.readSync(r.imag.dataId);return ho(i,s)}return uke(this.data.get(e).values,n)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(i=>aa(i));return Re(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Re(e.shape,e.dtype,n)}makeOutput(e,n,r){return ls().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=sr();return e(),{kernelMs:sr()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){be([e],"where");const n=this.readSync(e.dataId);return LDe(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}jb.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z5(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const BDe=t=>{const{x:e}=t.inputs,n=t.backend;be(e,"abs");let r=new Float32Array(J(e.shape));const i=n.data.get(e.dataId).values;return r=z5(i),n.makeOutput(r,e.shape,e.dtype)},jDe={kernelName:yx,backendName:"cpu",kernelFunc:BDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ut(t){return(e,n,r,i,s)=>{const o=_e(e,n),a=o.length,l=Se(o),u=J(o),c=_n(s,u),f=e.length,h=n.length,d=Se(e),p=Se(n),m=Rc(e,o),g=Rc(n,o);if(m.length+g.length===0)for(let y=0;y<c.length;++y)c[y]=t(r[y%r.length],i[y%i.length]);else for(let y=0;y<c.length;++y){const v=hf(y,a,l),x=v.slice(-f);m.forEach(C=>x[C]=0);const b=Ss(x,f,d),w=v.slice(-h);g.forEach(C=>w[C]=0);const S=Ss(w,h,p);c[y]=t(r[b],i[S])}return[c,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xr(t){const{inputs:e,backend:n}=t,{real:r,imag:i}=e,s=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,a=n.makeTensorInfo(r.shape,"complex64"),l=n.data.get(a.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",s),imag:n.makeTensorInfo(i.shape,"float32",o)},a}const zDe={kernelName:zT,backendName:"cpu",kernelFunc:xr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zv(t,e,n="float32"){if(n==="complex64"){const i=Zv(t,e,"float32"),s=Zv(t,e,"float32");return xr({inputs:{real:i,imag:s},backend:t})}const r=Dn(J(e),n);return t.makeTensorInfo(e,n,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ps(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const VDe={kernelName:Bp,backendName:"cpu",kernelFunc:Ps};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rl(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.data.get(r.dataId).complexTensorInfos.real,s=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,s)}const WDe={kernelName:f2,backendName:"cpu",kernelFunc:Rl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V5(t,e,n,r){if(r==="int32"){const i=Int32Array.from(t);return[e,"int32",i]}if(r==="bool"){const i=Kl([0],n),[s,o]=Ut((a,l)=>a!==l?1:0)(e,[],t,i,"bool");return[o,"bool",s]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function ha(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dtype:s}=r;if(s==="complex64"){if(i.dtype==="complex64")return Ps({inputs:{x:i},backend:n});const c=Zv(n,i.shape,i.dtype),f=ha({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),h=xr({inputs:{real:f,imag:c},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),h}if(i.dtype==="complex64"){const c=Rl({inputs:{input:i},backend:n}),f=ha({inputs:{x:c},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(c),f}if(!sW(i.dtype,s)){const c=Ps({inputs:{x:i},backend:n});return{dataId:c.dataId,shape:c.shape,dtype:s}}const o=n.data.get(i.dataId).values,[a,l,u]=V5(o,i.shape,i.dtype,s);return n.makeTensorInfo(a,l,u)}const UDe={kernelName:Ip,backendName:"cpu",kernelFunc:ha};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ln(t,e,n,r){return n==null?({inputs:i,backend:s})=>{const{a:o,b:a}=i,l=s;be([o,a],t);const u=l.data.get(o.dataId).values,c=l.data.get(a.dataId).values,f=o.dtype==="string"?po(u):u,h=o.dtype==="string"?po(c):c,d=r||o.dtype,[p,m]=e(o.shape,a.shape,f,h,d);return l.makeTensorInfo(m,d,p)}:({inputs:i,backend:s})=>{const{a:o,b:a}=i,l=s;if(o.dtype==="complex64"||a.dtype==="complex64"){const u=ha({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),c=l.data.get(u.dataId),f=c.complexTensorInfos.real,h=c.complexTensorInfos.imag,d=l.data.get(f.dataId).values,p=l.data.get(h.dataId).values,m=ha({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),g=l.data.get(m.dataId),y=g.complexTensorInfos.real,v=g.complexTensorInfos.imag,x=l.data.get(y.dataId).values,b=l.data.get(v.dataId).values,[w,S,C]=n(o.shape,a.shape,d,p,x,b),$=l.makeTensorInfo(C,"float32",w),k=l.makeTensorInfo(C,"float32",S),I=xr({inputs:{real:$,imag:k},backend:l});return l.disposeIntermediateTensorInfo(u),l.disposeIntermediateTensorInfo(m),l.disposeIntermediateTensorInfo($),l.disposeIntermediateTensorInfo(k),I}else{const u=l.data.get(o.dataId).values,c=l.data.get(a.dataId).values,f=r||o.dtype,[h,d]=e(o.shape,a.shape,u,c,f);return l.makeTensorInfo(d,f,h)}}}function eN(t){return(e,n,r,i,s,o)=>{const a=_e(e,n),l=J(a),u=a.length,c=Se(a),f=_n("float32",l),h=_n("float32",l),d=Rc(e,a),p=Rc(n,a),m=ho(r,i),g=ho(s,o),y=e.length,v=Se(e),x=n.length,b=Se(n);if(d.length+p.length===0)for(let w=0;w<f.length;w++){const S=w%m.length,C=w%g.length,$=t(m[S*2],m[S*2+1],g[C*2],g[C*2+1]);f[w]=$.real,h[w]=$.imag}else for(let w=0;w<f.length;w++){const S=hf(w,u,c),C=S.slice(-y);d.forEach(A=>C[A]=0);const $=Ss(C,y,v),k=S.slice(-x);p.forEach(A=>k[A]=0);const I=Ss(k,x,b),T=t(m[$*2],m[$*2+1],g[I*2],g[I*2+1]);f[w]=T.real,h[w]=T.imag}return[f,h,a]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W5=Ut((t,e)=>t+e),GDe=eN((t,e,n,r)=>({real:t+n,imag:e+r})),Bc=ln(df,W5,GDe),HDe={kernelName:df,backendName:"cpu",kernelFunc:Bc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tN(t,e,n,r,i){const s=J(r),o=Dn(i,n);for(let a=0;a<t.length;a++){const l=t[a];if(l<0)throw new Error("Input x must be non-negative!");l>=i||(s>0?o[l]+=e[a]:o[l]+=1)}return o}function U5(t,e,n,r=!1){const i=t.shape[0],s=t.shape[1],o=Re([i,n],e.dtype);for(let a=0;a<i;a++)for(let l=0;l<s;l++){const u=t.get(a,l);if(u<0)throw new Error("Input x must be non-negative!");u>=n||(r?o.set(1,a,u):e.size>0?o.set(o.get(a,u)+e.get(a,l),a,u):o.set(o.get(a,u)+1,a,u))}return o}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G5=Ut((t,e)=>t&e),KDe=ln(jT,G5),qDe={kernelName:jT,backendName:"cpu",kernelFunc:KDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ds(t){return(e,n,r)=>{const i=Lt(n,e.length);for(let s=0;s<e.length;++s)i[s]=t(e[s],r);return i}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rt(t,e,n){const r=Ds(e);return Oa(t,r,n)}function Oa(t,e,n){return({inputs:r,attrs:i,backend:s})=>{const{x:o}=r;be(o,t);const a=s,l=a.data.get(o.dataId).values;let u;if(o.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");u=po(l)}else u=l;const c=n||o.dtype,f=e(u,c,i);return a.makeTensorInfo(o.shape,c,f)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H5=Ds(t=>Math.ceil(t)),XDe=Oa(Tp,H5),YDe={kernelName:Tp,backendName:"cpu",kernelFunc:XDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K5(t,e,n,r){const i=Lt(n,J(e));if(r&&n!=="string"){let s=0;t.forEach(o=>{const a=J(o.shape);i.set(o.vals,s),s+=a})}else{let s=0;t.forEach(o=>{const a=n==="string"?po(o.vals):o.vals;let l=0;for(let u=0;u<o.shape[0];++u){const c=u*e[1]+s;for(let f=0;f<o.shape[1];++f)i[c+f]=a[l++]}s+=o.shape[1]})}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q5=Ut((t,e)=>t===e?1:0),X5=ln(Px,q5,null,"bool"),ZDe={kernelName:Px,backendName:"cpu",kernelFunc:X5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y5=Ds(t=>Math.exp(t)),Z5=Oa(Dp,Y5,"float32"),QDe={kernelName:Dp,backendName:"cpu",kernelFunc:Z5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q5=Ds(t=>Math.expm1(t)),JDe=Oa(Rp,Q5),eRe={kernelName:Rp,backendName:"cpu",kernelFunc:JDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J5=Ds(t=>Math.floor(t)),tRe=Oa(Mp,J5),nRe={kernelName:Mp,backendName:"cpu",kernelFunc:tRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eH=Ut((t,e)=>Math.floor(t/e)),rRe=ln(Fp,eH,null,"int32"),iRe={kernelName:Fp,backendName:"cpu",kernelFunc:rRe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tH(t,e,n,r,i,s,o,a,l){const u=Re([r,s],n);for(let c=0;c<r;c++){const f=[];let h=0;for(let d=0;d<i;d++){const p=t[c*i+d];h+=p*o[d],f.push(p)}if(h<0||h>=l/s)throw new Error(`Invalid indices: ${f} does not index into ${a}`);for(let d=0;d<s;d++)u.values[c*s+d]=e.get(...e.indexToLoc(h*s+d))}return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nH(t,e,n){const r=Re(n,t.dtype);for(let i=0;i<r.size;++i){const o=r.indexToLoc(i).slice(),a=o[0],l=o[2],u=e.locToIndex([a,l]);o[2]=e.values[u];const c=t.locToIndex(o);0<=c&&c<t.values.length&&(r.values[i]=t.values[c])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rH=Ut((t,e)=>t>e?1:0),sRe=ln(Mx,rH,null,"bool"),oRe={kernelName:Mx,backendName:"cpu",kernelFunc:sRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iH=Ut((t,e)=>t>=e?1:0),aRe=ln(Lp,iH,null,"bool"),lRe={kernelName:Lp,backendName:"cpu",kernelFunc:aRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sH=Ut((t,e)=>t<e?1:0),uRe=ln(Lx,sH,null,"bool"),cRe={kernelName:Lx,backendName:"cpu",kernelFunc:uRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oH=Ut((t,e)=>t<=e?1:0),fRe=ln(Bx,oH,null,"bool"),hRe={kernelName:Bx,backendName:"cpu",kernelFunc:fRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aH(t,e,n){const r=(e-t)/(n-1),i=Dn(n,"float32");i[0]=t;for(let s=1;s<i.length;s++)i[s]=i[s-1]+r;return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lH=Ds(t=>Math.log(t)),dRe=Oa(Wp,lH),pRe={kernelName:Wp,backendName:"cpu",kernelFunc:dRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uH(t,e,n,r){const i=_n(r,J(n));for(let s=0;s<i.length;++s){const o=s*e;let a=t[o];for(let l=0;l<e;++l){const u=t[o+l];(Number.isNaN(u)||u>a)&&(a=u)}i[s]=a}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cH=Ut((t,e)=>Math.max(t,e)),mRe=ln(Gp,cH),gRe={kernelName:Gp,backendName:"cpu",kernelFunc:mRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fH=Ut((t,e)=>Math.min(t,e)),yRe=ln(Hp,fH),vRe={kernelName:Hp,backendName:"cpu",kernelFunc:yRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nN=Ut((t,e)=>t*e),xRe=eN((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})),zb=ln(qp,nN,xRe),bRe={kernelName:qp,backendName:"cpu",kernelFunc:zb};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hH(t,e,n){const r=$a(-1,n);return nN([],e,r,t,n)}function wRe(t){const{inputs:e,backend:n}=t,{x:r}=e;be(r,"neg");const i=n.data.get(r.dataId).values,[s,o]=hH(i,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,s)}const SRe={kernelName:Yx,backendName:"cpu",kernelFunc:wRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dH=Ut((t,e)=>t!==e?1:0),CRe=ln(Zx,dH,null,"bool"),$Re={kernelName:Zx,backendName:"cpu",kernelFunc:CRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rN(t,e,n,r,i){const s=e.length,o=J(e),a=Se(e),l=Se(i),u=_n(n,J(i));for(let c=0;c<o;++c){const f=hf(c,s,a),h=new Array(f.length);for(let p=0;p<h.length;p++)h[p]=f[r[p]];const d=Ss(h,s,l);u[d]=t[c]}return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hr(t){const{inputs:e,attrs:n,backend:r}=t,{x:i}=e,{perm:s}=n;be(i,"transpose");const o=i.shape.length,a=new Array(o);for(let f=0;f<a.length;f++)a[f]=i.shape[s[f]];const l=r.data.get(i.dataId).values,u=rN(l,i.shape,i.dtype,s,a);return{dataId:r.write(u,a,i.dtype),shape:a,dtype:i.dtype}}const kRe={kernelName:qu,backendName:"cpu",kernelFunc:hr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pH(t,e,n,r){const[i,s]=yn(t,r),o=Tr(e,"int32"),a=Dn(J(i),o),l=J(s);for(let u=0;u<a.length;++u){const c=u*l;let f=1;for(let h=0;h<l;++h)f*=n[c+h];a[u]=f}return{outVals:a,outShape:i,outDtype:o}}function IRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r;be(i,"prod");const a=i.shape.length,l=Me(s,i.shape),u=Nt(l,a);let c=l,f=i;const h=[];u!=null&&(f=hr({inputs:{x:i},backend:n,attrs:{perm:u}}),h.push(f),c=Vt(c.length,a));const d=n.data.get(f.dataId).values,{outVals:p,outShape:m,outDtype:g}=pH(f.shape,f.dtype,d,c);let y=m;return o&&(y=Yt(m,l)),h.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.makeTensorInfo(y,g,p)}const TRe={kernelName:rb,backendName:"cpu",kernelFunc:IRe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ERe(t,e,n){t.forEach((r,i)=>{if(r<0||r>=n){const s=hf(i,e.length,Se(e)).join(",");throw new Error(`indices[${s}] = ${r} is not in [0, ${n})`)}})}function NRe(t,e){for(let n=0;n<t.length;++n){const r=t[n],i=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>i)throw new Error("Ragged splits must not point past values");for(let s=1;s<r.length;++s)if(r[s-1]>r[s])throw new Error("Ragged splits must be sorted in ascending order")}}function ARe(t,e,n,r){const i=[];let s=0;const o=e.length-1+n.length,a=new Array(o).fill(null).map(()=>[0]);NRe(n,r);let l=1;for(let u=0;u<e.length-1;++u){l*=e[u];const c=e[u+1];for(let f=1;f<l+1;++f)a[u].push(f*c)}for(let u=0;u<t.length;++u){let c=t[u],f=t[u]+1;for(let h=0;h<n.length;++h){const d=n[h],p=h+e.length-1;if(p>=0){const m=a[p],g=m[m.length-1]-d[c];for(let y=c;y<f;++y)a[p].push(d[y+1]+g)}c=d[c],f=d[f]}f!==c&&(i.push([c,f]),s+=f-c)}return{outSplits:a,valueSlices:i,numValues:s}}function ORe(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,i=Lt("int32",r);e.push(i),t[n].forEach((s,o)=>i[o]=s)}return e}function WM(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function PRe(t,e,n,r,i,s){const o=WM(e,2)[1],a=WM(s,2)[1];let l=0;for(const u of n)for(let c=u[0];c<u[1];++c){for(let f=0;f<r;++f)i[l*a+f]=t[c*o+f];++l}}function _Re(t,e,n,r,i){const s=e.slice();s[0]=i;const o=Lt(n,J(s)),a=t.length,l=a===0?0:a/e[0];return PRe(t,e,r,l,o,s),[o,s]}function mH(t,e,n,r,i,s,o,a){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if(ERe(s,o,l),r.length===0)throw new Error("params.rank must be nonzero");const u=r[0],{outSplits:c,valueSlices:f,numValues:h}=ARe(s,o,t,u),d=ORe(c),p=_Re(n,r,i,f,h);return[d,p[0],p[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UM=2147483647;function gH(t,e,n,r,i,s,o){if(e.length>1)throw new Error("starts must be a scalar or vector");if(i.length>1)throw new Error("limits must be a scalar or vector");if(o.length>1)throw new Error("deltas must be a scalar or vector");const a=e.length===0,l=i.length===0,u=o.length===0,c=[];a||c.push(e[0]),l||c.push(i[0]),u||c.push(o[0]);for(let g=1;g<c.length;++g)if(c[g]!==c[g-1])throw new Error("starts, limits, and deltas must have the same shape");const f=c.length===0?1:c[0],h=Lt("int32",f+1);h[0]=0;for(let g=0;g<f;++g){const y=a?t[0]:t[g],v=l?r[0]:r[g],x=u?s[0]:s[g];if(x===0)throw new Error("Requires delta != 0");let b;if(x>0&&v<y||x<0&&v>y)b=0;else if(b=Math.ceil(Math.abs((v-y)/x)),b>UM)throw new Error(`Requires ((limit - start) / delta) <= ${UM}`);h[g+1]=h[g]+b}const d=h[f],p=Lt(n,d);let m=0;for(let g=0;g<f;++g){const y=h[g+1]-h[g];let v=a?t[0]:t[g];const x=u?s[0]:s[g];for(let b=0;b<y;++b)p[m++]=v,v+=x}return[h,p]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ri=Wi;class Qv{constructor(e,n,r,i,s,o,a,l,u,c){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=i,this.valuesDType=s,this.defaultValue=o,this.defaultValueShape=a,this.rowPartitionValues=l,this.rowPartitionValuesShapes=u,this.rowPartitionTypes=nG(c),this.raggedRank=rG(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===ri.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===ri.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case ri.VALUE_ROWIDS:return Qv.getMaxWidthValueRowID(n);case ri.ROW_SPLITS:return Qv.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${ri[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let i=0;i<n-1;++i){const s=e[i+1]-e[i];s>r&&(r=s)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,i=e[0],s=0;for(let o=1;o<n;++o){const a=e[o];a!==i&&(i=a,s=Math.max(o-r,s),r=o)}return Math.max(n-r,s)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return HM(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;iG(r,n);const i=this.tensorShapeFromTensor(this.shape,this.shapeShape),o=tG(this.raggedRank,i,n);o[0]<0&&(o[0]=e);for(let a=1;a<=this.raggedRank;++a)o[a]<0&&(o[a]=this.getMaxWidth(a));return o}calculateFirstParentOutputIndex(e,n,r){const i=Math.min(e,r),s=[];let o=0;for(let a=0;a<i;++a,o+=n)s.push(o);for(let a=i;a<e;++a)s.push(-1);return E(s.length===e,()=>"Final length of result must be equal to firstDimension."),s}calculateOutputIndexRowSplit(e,n,r,i){const s=e.length,o=[];for(let a=0;a<s-1;++a){const l=e[a+1]-e[a];let u=Math.min(i,l),c=n[a];c===-1&&(u=0);for(let f=0;f<u;++f)o.push(c),c+=r;for(let f=0;f<l-u;++f)o.push(-1)}if(s>0&&o.length!==e[s-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(e,n,r,i){const s=e.length,o=[];if(s===0)return[];let a=0,l=e[0];if(l>=n.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${n.length}`);let u=n[l];o.push(u);for(let c=1;c<s;++c){const f=e[c];if(f===l)u>=0&&(++a,a<i?u+=r:u=-1);else{if(a=0,l=f,f>=n.length)throw new Error(`Got nextValueRowId=${f} which is not less than ${n.length}`);u=n[f]}o.push(u)}if(o.length!==e.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(e,n,r,i){const s=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case ri.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(s,n,r,i);case ri.ROW_SPLITS:if(s.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${s.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(s,n,r,i);default:throw new Error(`Unsupported partition type: ${ri[o]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case ri.FIRST_DIM_SIZE:return e[0];case ri.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case ri.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${ri[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),i=new Array(this.raggedRank+1);i[i.length-1]=1;for(let l=i.length-2;l>=0;--l)i[l]=i[l+1]*r[l+1];const s=HM(r,!1),o=Lt(this.valuesDType,J(s));if(i[0]*r[0]>0){let l=this.calculateFirstParentOutputIndex(n,i[0],r[0]);for(let u=1;u<=this.raggedRank;++u)l=this.calculateOutputIndex(u-1,l,i[u],r[u]);this.setOutput(this.raggedRank,l,o,s)}return[s,o]}setOutput(e,n,r,i){if(r.length===0)return;const s=this.values,o=r;let a=i.slice();a=a.slice(e+1);const l=J(a),u=n.length;let c=this.defaultValue;if(c.length!==l&&c.length!==1){const p=this.defaultValueShape;X(()=>{const m=G(c,p);c=Ph(m,a).dataSync()})}let f=0,h=0,d=0;for(let p=0;p<=u;++p){let m=p<u?n[p]:-1;if(m===d){++d;continue}if(h<d){const g=s.subarray(f*l),y=o.subarray(h*l),v=(d-h)*l;GM(y,g,v)}if(p>=u){const g=r.length;m=Math.floor(g/l)}if(m>d)if(this.defaultValue.length===1)o.subarray(d*l,m*l).fill(this.defaultValue[0]),d=m;else for(;m>d;){const g=o.slice(d*l);GM(g,c,l),++d}m<0?(f=p+1,h=d):(f=p,h=d,d=h+1)}}}function GM(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function HM(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function yH(t,e,n,r,i,s,o,a,l,u){return new Qv(t,e,n,r,i,s,o,a,l,u).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vH(t,e,n,r){const i=t===e,s=t<e&&n<0,o=e<t&&n>1;if(i||s||o)return Dn(0,r);const a=Math.abs(Math.ceil((e-t)/n)),l=Dn(a,r);e<t&&n===1&&(n=-1),l[0]=t;for(let u=1;u<l.length;u++)l[u]=l[u-1]+n;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xH=Ds(t=>1/Math.sqrt(t)),DRe=Oa(em,xH),RRe={kernelName:em,backendName:"cpu",kernelFunc:DRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function il(t,e,n,r,i,s,o,a,l,u){const c=[r/i,i],f=t.values,h=e.values;if(r===0)return Re(n,e.dtype);const d=l instanceof Sn?l:Re(c,e.dtype);typeof l=="string"||typeof l=="number"?d.values.fill(l):typeof l=="boolean"&&d.values.fill(+l);for(let p=0;p<s;p++){const m=[];let g=0;for(let y=0;y<o;y++){const v=f[p*o+y];m.push(v),g+=v*a[y]}if(g<0||g>=r/i)throw new Error(`Invalid indices: ${m} does not index into ${n}`);for(let y=0;y<i;y++)u?d.values[g*i+y]+=h[p*i+y]:d.values[g*i+y]=e.rank===0?h[0]:h[p*i+y]}return d}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MRe=Ds(t=>1/(1+Math.exp(-t))),bH=rt(sm,t=>1/(1+Math.exp(-t))),FRe={kernelName:sm,backendName:"cpu",kernelFunc:bH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wH(t,e,n,r,i){const s=uE(r,e,n),o=J(n),a=Se(r);if(s){const f=cE(e,a);return i==="string"?t.slice(f,f+o):t.subarray(f,f+o)}const l=i==="string"?po(t):t,u=Re(r,i,l),c=Re(n,i);for(let f=0;f<c.size;++f){const h=c.indexToLoc(f),d=h.map((p,m)=>p+e[m]);c.set(u.get(...d),...h)}return i==="string"?$G(c.values):c.values}function Ml(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:s,size:o}=r;be(i,"slice");const[a,l]=Ib(i,s,o);aE(i,a,l);const u=n.data.get(i.dataId).values,c=wH(u,a,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,c)}const LRe={kernelName:ub,backendName:"cpu",kernelFunc:Ml};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SH(t,e,n,r,i,s,o){const a=e[0],l=s[0],u=new Array(l),c=new Array(a),f=e[1];if(l===0){if(a!==0)throw new Error(fG(a));const g=Lt(n,0),y=Lt(i,0);return[g,[0,f],y,u,c]}let h=!0,d=0;const p=new Array(l).fill(0);for(let g=0;g<a;++g){const y=t[g*f];if(y<0)throw new Error(hG(g,y));if(y>=l)throw new Error(dG(g,y,l));++p[y],h=h&&y>=d,d=y}let m=!0;for(let g=0;g<l;++g){const y=p[g]===0;u[g]=y,m=m&&!y,p[g]=Math.max(p[g],1),g>0&&(p[g]+=p[g-1])}if(m&&h){const g=t,y=r;for(let v=0;v<a;++v)c[v]=v;return[g,[a,f],y,u,c]}else{const g=p[l-1],y=Lt(n,g*f),v=Lt(i,g),x=new Array(l).fill(0);for(let b=0;b<a;++b){const w=t[b*f],S=x[w],C=(w===0?0:p[w-1])+S;x[w]++;for(let $=0;$<f;++$)y[C*f+$]=t[b*f+$];v[C]=r[b],c[b]=C}for(let b=0;b<l;++b)if(x[b]===0){const S=b===0?0:p[b-1];y[S*f+0]=b;for(let C=1;C<f;++C)y[S*f+C]=0;v[S]=o}return[y,[g,f],v,u,c]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CH(t,e,n,r,i){const s=J(r),o=e[0],a=i.length,l=[];let u=1,c=-1;for(let g=0;g<a;++g){const y=i[g];if(y===-1){if(c!==-1)throw new Error(pG(c,g));c=g,l.push(1)}else{if(y<0)throw new Error(mG(g,y));u*=y,l.push(y)}}if(c!==-1){if(u<=0)throw new Error(gG());const g=Math.trunc(s/u);if(u*g!==s)throw new Error(yG(r,l));l[c]=g}if(J(l)!==s)throw new Error(vG(r,l));const h=r.length,d=[];if(h>0){d[h-1]=1;for(let g=h-2;g>=0;--g)d[g]=d[g+1]*r[g+1]}const p=[];if(a>0){p[a-1]=1;for(let g=a-2;g>=0;--g)p[g]=p[g+1]*l[g+1]}const m=Lt(n,o*a);for(let g=0;g<o;++g){let y=0;for(let v=0;v<h;++v)y+=t[g*h+v]*d[v];for(let v=0;v<a;++v)m[g*a+v]=Math.trunc(y/p[v]),y%=p[v]}return[m,[o,a],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iN(t,e,n,r,i,s=!1,o=0){const a=r.length,l=[e[0],t.length/e[0]],u=l[1],f=a>0?i[a-1]+1:0;if(f<0)throw new Error(O$());const h=e.slice();h[0]=f;const d=h.reduce((x,b)=>x*b,1),p=Lt(n,d);if(a===0)return f>0&&p.fill(o),[p,h];if(f<=0)throw new Error(O$());let m=0,g=1,y=0,v=i[m];for(;;){let x=0;if(g<a){if(x=i[g],v===x){++g;continue}if(v>=x)throw new Error(xG())}if(v<0||v>=f)throw new Error(bG(v,f));v>y&&p.fill(o,y*u,v*u);for(let b=m;b<g;++b){const w=r[b];if(w<0||w>=l[0])throw new Error(wG(b,r[b],l[0]));for(let S=0;S<u;S++)p[v*u+S]+=t[w*u+S]}if(s)for(let b=0;b<u;b++)p[v*u+b]/=g-m;if(m=g,++g,y=v+1,v=x,g>a)break}return y<f&&p.fill(o,y*u,f*u),[p,h]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BRe=Ds(t=>Math.sqrt(t)),jRe=rt(am,t=>Math.sqrt(t)),zRe={kernelName:am,backendName:"cpu",kernelFunc:jRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $H=Ut((t,e)=>{const n=t-e;return n*n}),VRe=ln(lm,$H),WRe={kernelName:lm,backendName:"cpu",kernelFunc:VRe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kH=Ds((t,e)=>{const{pattern:n,replaceGlobal:r,rewrite:i}=e;return t.replace(new RegExp(n,r?"g":""),i)}),URe=Oa(m2,kH),GRe={kernelName:m2,backendName:"cpu",kernelFunc:URe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IH(t,e,n,r){const i=Re(t,e.dtype);for(let s=0;s<i.size;s++){const o=i.indexToLoc(s),a=new Array(o.length);for(let l=0;l<a.length;l++)a[l]=o[l]*n[l]+r[l];i.set(e.get(...a),...o)}return i}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HRe{constructor(e,n,r,i,s,o){this.separator=ea(e),this.nGramWidths=n,this.leftPad=ea(r),this.rightPad=ea(i),this.padWidth=s,this.preserveShort=o}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,i,s,o){for(let a=0;a<s;++a){const l=this.getPadWidth(o),u=Math.max(0,l-a),c=Math.max(0,l-(s-(a+1))),f=o-(u+c),h=n+(u>0?0:a-l);let d=0;d+=u*this.leftPad.length;for(let v=0;v<f;++v)d+=e[h+v].length;d+=c*this.rightPad.length;const p=u+c+f-1;d+=p*this.separator.length,r[i+a]=new Uint8Array(d);const m=r[i+a];let g=0;const y=v=>v.forEach(x=>m[g++]=x);for(let v=0;v<u;++v)y(this.leftPad),y(this.separator);for(let v=0;v<f-1;++v)y(e[h+v]),y(this.separator);if(f>0){y(e[h+f-1]);for(let v=0;v<c;++v)y(this.separator),y(this.rightPad)}else{for(let v=0;v<c-1;++v)y(this.rightPad),y(this.separator);y(this.rightPad)}}}compute(e,n){const r=e.length,i=n.length;if(i>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let u=1;u<i;++u){let c=n[u]>=l;if(c=c&&n[u]<=r,!c)throw new Error(`Invalid split value ${n[u]}, must be in [${l}, ${r}]`);l=n[u]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const s=i-1,o=Lt("int32",i);if(r===0||i===0){const l=new Array(r);for(let u=0;u<=s;++u)o[u]=0;return[l,o]}o[0]=0;for(let l=1;l<=s;++l){const u=n[l]-n[l-1];let c=0;this.nGramWidths.forEach(f=>{c+=this.getNumNGrams(u,f)}),this.preserveShort&&u>0&&c===0&&(c=1),o[l]=o[l-1]+c}const a=new Array(o[s]);for(let l=0;l<s;++l){const u=n[l];let c=o[l];if(this.nGramWidths.forEach(f=>{const h=n[l+1]-n[l],d=this.getNumNGrams(h,f);this.createNGrams(e,u,a,c,d,f),c+=d}),this.preserveShort&&c===o[l]){const f=n[l+1]-n[l];if(f===0)continue;const h=f+2*this.padWidth;this.createNGrams(e,u,a,c,1,h)}}return[a,o]}}function TH(t,e,n,r,i,s,o,a){return new HRe(n,r,i,s,o,a).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KRe(t,e,n,r){if(!t.length)return;if(e.length===0){for(let s=0;s<t.length;++s)r.push(t.subarray(s,s+1));return}if(e.length===1){const s=e[0];let o=t.indexOf(s);for(;o!==-1;){const a=t.subarray(0,o);(!n||a.length!==0)&&r.push(a),t=t.subarray(o+1),o=t.indexOf(s)}(!n||t.length!==0)&&r.push(t);return}let i=0;for(let s=0;s<t.length+1;s++)if(s===t.length||e.indexOf(t[s])!==-1){const o=t.subarray(i,s);(!n||o.length!==0)&&r.push(o),i=s+1}}function EH(t,e,n){const r=t.length,i=[];let s=0,o=0;const a=new Array(r);for(let h=0;h<r;++h){const d=i.length;KRe(t[h],e,n,i);const p=i.length-d;a[h]=p,s+=p,o=Math.max(o,p)}const l=Lt("int32",s*2),u=new Array(s),c=[r,o];let f=0;for(let h=0;h<r;++h)for(let d=0;d<a[h];++d)l[f*2]=h,l[f*2+1]=d,u[f]=i[f],++f;return[l,u,c]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NH(t,e){const n=Lt("int32",t.length);for(let r=0;r<t.length;++r)n[r]=Eke(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AH=Ut((t,e)=>t-e),qRe=eN((t,e,n,r)=>({real:t-n,imag:e-r})),sN=ln(um,AH,qRe),XRe={kernelName:um,backendName:"cpu",kernelFunc:sN};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OH(t,e){const n=new Array(t.rank);for(let i=0;i<n.length;i++)n[i]=t.shape[i]*e[i];const r=Re(n,t.dtype);for(let i=0;i<r.values.length;++i){const s=r.indexToLoc(i),o=new Array(t.rank);for(let l=0;l<o.length;l++)o[l]=s[l]%t.shape[l];const a=t.locToIndex(o);r.values[i]=t.values[a]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fh=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function PH(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const a=r-n+1,l=e-n+1,u=Math.log(a),c=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*c*(a-c)/a)*Math.sign(l-a/2),h=Math.max(n,Math.floor(e-l*c/a+f)),d=Math.min(r,Math.floor(e+(a-l)*c/a+f));PH(t,e,h,d)}const i=t[e];let s=n,o=r;for(du(t,n,e),fh(t[r],i)>0&&du(t,n,r);s<o;){for(du(t,s,o),s++,o--;fh(t[s],i)<0;)s=s+1;for(;fh(t[o],i)>0;)o=o-1}fh(t[n],i)===0?du(t,n,o):(o=o+1,du(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}}function _H(t,e,n,r,i){const s=e[e.length-1],[o,a]=[t.length/s,s],l=_n(n,o*r),u=_n("int32",o*r);for(let f=0;f<o;f++){const h=f*a,d=t.subarray(h,h+a);let p=new Array(d.length);d.forEach((v,x)=>p[x]={value:v,index:x}),r<p.length&&(PH(p,r),p=p.slice(0,r)),i&&p.sort(fh);const m=f*r,g=l.subarray(m,m+r),y=u.subarray(m,m+r);for(let v=0;v<r;v++)g[v]=p[v].value,y[v]=p[v].index}const c=e.slice();return c[c.length-1]=r,[Re(c,n,l),Re(c,"int32",u)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DH(t,e,n,r){const i=Me(e,n)[0],s=[1,n[0],1];for(let p=0;p<i;p++)s[0]*=n[p];s[1]=n[i];for(let p=i+1;p<n.length;p++)s[2]*=n[p];const o=new Map,a=new Int32Array(n[i]),l=new Sn(s,r,t),u=[],c=s[0]===1&&s[2]===1;for(let p=0;p<n[i];p++){let m;if(c)m=t[p].toString();else{const y=[];for(let v=0;v<s[0];v++)for(let x=0;x<s[2];x++)y.push(l.get(v,p,x));m=y.join(",")}const g=o.get(m);if(g!=null)a[p]=g;else{const y=o.size;o.set(m,y),a[p]=y,u.push(p)}}const f=s.slice();f[1]=o.size;const h=new Sn(f,r);u.forEach((p,m)=>{for(let g=0;g<s[0];g++)for(let y=0;y<s[2];y++)h.set(l.get(g,p,y),g,m,y)});const d=n.slice();return d[i]=f[1],{outputValues:h.values,outputShape:d,indices:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YRe=Object.freeze(Object.defineProperty({__proto__:null,addImpl:W5,bincountImpl:tN,bincountReduceImpl:U5,bitwiseAndImpl:G5,castImpl:V5,ceilImpl:H5,concatImpl:K5,equalImpl:q5,expImpl:Y5,expm1Impl:Q5,floorDivImpl:eH,floorImpl:J5,gatherNdImpl:tH,gatherV2Impl:nH,greaterEqualImpl:iH,greaterImpl:rH,lessEqualImpl:oH,lessImpl:sH,linSpaceImpl:aH,logImpl:lH,maxImpl:uH,maximumImpl:cH,minimumImpl:fH,multiplyImpl:nN,negImpl:hH,notEqualImpl:dH,prodImpl:pH,raggedGatherImpl:mH,raggedRangeImpl:gH,raggedTensorToTensorImpl:yH,rangeImpl:vH,rsqrtImpl:xH,scatterImpl:il,sigmoidImpl:MRe,simpleAbsImpl:z5,sliceImpl:wH,sparseFillEmptyRowsImpl:SH,sparseReshapeImpl:CH,sparseSegmentReductionImpl:iN,sqrtImpl:BRe,squaredDifferenceImpl:$H,staticRegexReplaceImpl:kH,stridedSliceImpl:IH,stringNGramsImpl:TH,stringSplitImpl:EH,stringToHashBucketFastImpl:NH,subImpl:AH,tileImpl:OH,topKImpl:_H,transposeImpl:rN,uniqueImpl:DH},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */JW("cpu",()=>new jb,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RH=rt(Pp,t=>t>=0?t:Math.exp(t)-1),ZRe={kernelName:Pp,backendName:"cpu",kernelFunc:RH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MH(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{alpha:s}=r;be([i],"leakyRelu");const o=J(i.shape),a=n.data.get(i.dataId).values,l=_n("float32",o);for(let u=0;u<a.length;u++)l[u]=a[u]<0?s*a[u]:a[u];return n.makeTensorInfo(i.shape,"float32",l)}const QRe={kernelName:Fx,backendName:"cpu",kernelFunc:MH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JRe=Ut((t,e)=>t<0?e*t:t);function FH(t){const{inputs:e,backend:n}=t,{x:r,alpha:i}=e;be([r,i],"prelu");const s=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,[a,l]=JRe(r.shape,i.shape,s,o,"float32");return n.makeTensorInfo(l,"float32",a)}const eMe={kernelName:nb,backendName:"cpu",kernelFunc:FH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LH=rt(Zp,t=>Math.max(0,t)),tMe={kernelName:Zp,backendName:"cpu",kernelFunc:LH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BH=rt(Qp,t=>Math.min(Math.max(0,t),6)),nMe={kernelName:Qp,backendName:"cpu",kernelFunc:BH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jv(t,e,n,r,i){if(n==="linear")return Ps({inputs:{x:e},backend:t});if(n==="relu")return LH({inputs:{x:e},backend:t});if(n==="elu")return RH({inputs:{x:e},backend:t});if(n==="relu6")return BH({inputs:{x:e},backend:t});if(n==="prelu")return FH({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return MH({inputs:{x:e},backend:t,attrs:{alpha:i}});if(n==="sigmoid")return bH({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{shape:s}=r,o=J(i.shape),a=iW(s,o),l=J(a);E(o===l,()=>`The new shape (${a}) has ${l} elements and the old shape (${i.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`),n.incRef(i.dataId);const u=n.data.get(i.dataId);if(u.complexTensorInfos!=null){const c=u.complexTensorInfos.real,f=u.complexTensorInfos.imag;c.shape=a,f.shape=a}return{dataId:i.dataId,shape:a,dtype:i.dtype}}const rMe={kernelName:ib,backendName:"cpu",kernelFunc:dt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jH(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:s}=e,{transposeA:o,transposeB:a}=r;be([i,s],"matMul");const l=i.shape.length,u=s.shape.length,c=o?i.shape[l-2]:i.shape[l-1],f=a?s.shape[u-1]:s.shape[u-2],h=o?i.shape[l-1]:i.shape[l-2],d=a?s.shape[u-2]:s.shape[u-1],p=i.shape.slice(0,-2),m=s.shape.slice(0,-2),g=J(p),y=J(m),x=_e(i.shape.slice(0,-2),s.shape.slice(0,-2)).concat([h,d]);E(c===f,()=>`Error in matMul: inner shapes (${c}) and (${f}) of Tensors with shapes ${i.shape} and ${s.shape} and transposeA=${o} and transposeB=${a} must match.`);const b=o?[g,c,h]:[g,h,c],w=a?[y,d,f]:[y,f,d],S=dt({inputs:{x:i},backend:n,attrs:{shape:b}}),C=dt({inputs:{x:s},backend:n,attrs:{shape:w}}),$=o?S.shape[1]:S.shape[2],k=o?S.shape[2]:S.shape[1],I=a?C.shape[1]:C.shape[2],T=Math.max(g,y),A=n.data.get(S.dataId).values,_=n.data.get(C.dataId).values,D=Se(S.shape),P=Se(C.shape),[R,F,O]=o?[D[0],1,D[1]]:[D[0],D[1],1],[M,V,q]=a?[1,P[1],P[0]]:[P[1],1,P[0]],K=k*I,Z=Re([T,k,I],S.dtype),re=Z.values,ie=n.blockSize;for(let le=0;le<T;le++){const ge=le%g,ye=le%y;for(let ne=0;ne<k;ne+=ie){const ue=Math.min(ne+ie,k);for(let ce=0;ce<I;ce+=ie){const ee=Math.min(ce+ie,I);for(let Te=0;Te<$;Te+=ie){const Ce=Math.min(Te+ie,$);for(let Pe=ne;Pe<ue;Pe++)for(let Oe=ce;Oe<ee;Oe++){let Le=0;for(let Ke=Te;Ke<Ce;Ke++){const Bn=A[ge*R+Pe*F+Ke*O],At=_[Ke*M+Oe*V+ye*q];Le+=Bn*At}re[le*K+(Pe*I+Oe)]+=Le}}}}}return n.disposeIntermediateTensorInfo(S),n.disposeIntermediateTensorInfo(C),n.makeTensorInfo(x,Z.dtype,Z.values)}const iMe={kernelName:Sx,backendName:"cpu",kernelFunc:jH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sMe(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:s,bias:o,preluActivationWeights:a}=e,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:f}=r;let h,d,p;const m=[];h=jH({inputs:{a:i,b:s},attrs:{transposeA:l,transposeB:u},backend:n}),o&&(d=Bc({inputs:{a:h,b:o},backend:n}),m.push(h),h=d),c&&(p=Jv(n,h,c,a,f),m.push(h),h=p);for(const y of m)n.disposeIntermediateTensorInfo(y);return h}const oMe={kernelName:Pv,backendName:"cpu",kernelFunc:sMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aMe=rt(xp,t=>Math.acos(t)),lMe={kernelName:xp,backendName:"cpu",kernelFunc:aMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uMe=rt(bp,t=>Math.acosh(t)),cMe={kernelName:bp,backendName:"cpu",kernelFunc:uMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fMe(t){const{inputs:e,backend:n}=t,r=e;be(e,"addN");const i=r.map(a=>n.data.get(a.dataId).values),s=Re(r[0].shape,r[0].dtype),o=s.values;for(let a=0;a<r.length;a++){const l=i[a];for(let u=0;u<o.length;u++)o[u]+=l[u]}return n.makeTensorInfo(s.shape,s.dtype,s.values)}const hMe={kernelName:DT,backendName:"cpu",kernelFunc:fMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r;be(i,"all");const a=Me(s,i.shape);let l=a;const u=Nt(l,i.shape.length);let c=i;u!=null&&(c=hr({inputs:{x:i},backend:n,attrs:{perm:u}}),l=Vt(l.length,i.shape.length)),kn("all",l,c.shape.length);const[f,h]=yn(c.shape,l),d=J(h),p=Dn(J(f),c.dtype),m=n.data.get(c.dataId).values;for(let y=0;y<p.length;++y){const v=y*d;let x=m[v];for(let b=0;b<d;++b){const w=m[v+b];x=x&&w}p[y]=x}u!=null&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(f,c.dtype,p);if(o){const y=Yt(f,a),v=dt({inputs:{x:g},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(g),v}return g}const pMe={kernelName:RT,backendName:"cpu",kernelFunc:dMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r;be(i,"any");const a=Me(s,i.shape);let l=a;const u=Nt(l,i.shape.length);let c=i;u!=null&&(c=hr({inputs:{x:i},backend:n,attrs:{perm:u}}),l=Vt(l.length,i.shape.length)),kn("any",l,c.shape.length);const[f,h]=yn(c.shape,l),d=J(h),p=Dn(J(f),c.dtype),m=n.data.get(c.dataId).values;for(let y=0;y<p.length;++y){const v=y*d;let x=m[v];for(let b=0;b<d;++b){const w=m[v+b];x=x||w}p[y]=x}u!=null&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(f,c.dtype,p);if(o){const y=Yt(f,a),v=dt({inputs:{x:g},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(g),v}return g}const gMe={kernelName:MT,backendName:"cpu",kernelFunc:mMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s}=r;be(i,"argMax");let o=Me(s,i.shape);const a=Nt(o,i.shape.length);let l=i;const u=[];a!=null&&(l=hr({inputs:{x:i},backend:n,attrs:{perm:a}}),u.push(l),o=Vt(o.length,l.shape.length)),o=[o[0]],kn("argMax",o,l.shape.length);const[c,f]=yn(l.shape,o),h=J(c),d=Dn(h,"int32"),p=J(f),m=n.data.get(l.dataId).values;for(let g=0;g<d.length;++g){const y=g*p;let v=m[y],x=0;for(let b=0;b<p;++b){const w=m[y+b];w>v&&(v=w,x=b)}d[g]=x}return u.forEach(g=>n.disposeIntermediateTensorInfo(g)),n.makeTensorInfo(c,"int32",d)}const vMe={kernelName:vx,backendName:"cpu",kernelFunc:yMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s}=r;be(i,"argMin");let o=Me(s,i.shape);const a=Nt(o,i.shape.length);let l=i;const u=[];a!=null&&(l=hr({inputs:{x:i},backend:n,attrs:{perm:a}}),u.push(l),o=Vt(o.length,l.shape.length)),o=[o[0]],kn("argMin",o,l.shape.length);const[c,f]=yn(l.shape,o),h=J(c),d=Dn(h,"int32"),p=J(f),m=n.data.get(l.dataId).values;for(let g=0;g<d.length;++g){const y=g*p;let v=m[y],x=0;for(let b=0;b<p;++b){const w=m[y+b];w<v&&(v=w,x=b)}d[g]=x}return u.forEach(g=>n.disposeIntermediateTensorInfo(g)),n.makeTensorInfo(c,"int32",d)}const bMe={kernelName:xx,backendName:"cpu",kernelFunc:xMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wMe=rt(wp,t=>Math.asin(t)),SMe={kernelName:wp,backendName:"cpu",kernelFunc:wMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CMe=rt(Sp,t=>Math.asinh(t)),$Me={kernelName:Sp,backendName:"cpu",kernelFunc:CMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kMe=rt(Cp,t=>Math.atan(t)),IMe={kernelName:Cp,backendName:"cpu",kernelFunc:kMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TMe=Ut((t,e)=>Math.atan2(t,e)),EMe=ln(kp,TMe),NMe={kernelName:kp,backendName:"cpu",kernelFunc:EMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AMe=rt($p,t=>Math.atanh(t)),OMe={kernelName:$p,backendName:"cpu",kernelFunc:AMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oN(t,e,n,r,i,s){const o=i.strideHeight,a=i.strideWidth,l=i.dilationHeight,u=i.dilationWidth,c=i.effectiveFilterHeight,f=i.effectiveFilterWidth,h=i.padInfo.top,d=i.padInfo.left,p=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=Re(i.outShape,n),g=m.values,y=i.outShape[1]*i.outShape[2]*i.outShape[3],v=i.outShape[2]*i.outShape[3],x=i.outShape[3];for(let b=0;b<i.batchSize;++b){const w=b*y,S=b*r[0];for(let C=0;C<i.inChannels;++C)for(let $=0;$<i.outHeight;++$){const k=$*o-h,I=Math.max(0,k),T=Math.min(i.inHeight,c+k),A=w+$*v;for(let _=0;_<i.outWidth;++_){const D=_*a-d,P=Math.max(0,D),R=Math.min(i.inWidth,f+D);let F=p,O=0,M=0;for(let q=I;q<T;q+=l){const K=S+q*r[1];for(let Z=P;Z<R;Z+=u){const re=K+Z*r[2],ie=t[re+C];s==="max"&&ie>F?F=ie:s==="avg"&&(O+=ie,M++)}if(isNaN(F))break}const V=A+_*x+C;g[V]=s==="avg"?O/M:F}}}return m}function zH(t,e,n,r,i=!1,s=!1){const o=Re(r.outShape,"int32"),a=r.strideHeight,l=r.strideWidth,u=r.dilationHeight,c=r.dilationWidth,f=r.effectiveFilterHeight,h=r.effectiveFilterWidth,d=r.padInfo.top,p=r.padInfo.left,m=Re(e,n,t);for(let g=0;g<r.batchSize;++g)for(let y=0;y<r.inChannels;++y)for(let v=0;v<r.outHeight;++v){const x=v*a-d;let b=x;for(;b<0;)b+=u;const w=Math.min(r.inHeight,f+x);for(let S=0;S<r.outWidth;++S){const C=S*l-p;let $=C;for(;$<0;)$+=c;const k=Math.min(r.inWidth,h+C);let I=Number.NEGATIVE_INFINITY,T=-1;for(let A=b;A<w;A+=u){const _=A-x;for(let D=$;D<k;D+=c){const P=D-C,R=m.get(g,A,D,y);R>I&&(I=R,i?T=s?((g*r.inHeight+A)*r.inWidth+D)*r.inChannels+y:(A*r.inWidth+D)*r.inChannels+y:T=_*h+P)}}o.set(T,g,v,S,y)}}return o}function VH(t,e,n,r,i,s){const o=i.strideDepth,a=i.strideHeight,l=i.strideWidth,u=i.dilationDepth,c=i.dilationHeight,f=i.dilationWidth,h=i.effectiveFilterDepth,d=i.effectiveFilterHeight,p=i.effectiveFilterWidth,m=i.padInfo.front,g=i.padInfo.top,y=i.padInfo.left,v=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,x=Re(i.outShape,n),b=x.values,w=i.outShape[1]*i.outShape[2]*i.outShape[3]*i.outShape[4],S=i.outShape[2]*i.outShape[3]*i.outShape[4],C=i.outShape[3]*i.outShape[4],$=i.outShape[4];for(let k=0;k<i.batchSize;++k){const I=k*w,T=k*r[0];for(let A=0;A<i.inChannels;++A)for(let _=0;_<i.outDepth;++_){const D=_*o-m;let P=D;for(;P<0;)P+=u;const R=Math.min(i.inDepth,h+D),F=I+_*S;for(let O=0;O<i.outHeight;++O){const M=O*a-g;let V=M;for(;V<0;)V+=c;const q=Math.min(i.inHeight,d+M),K=F+O*C;for(let Z=0;Z<i.outWidth;++Z){const re=Z*l-y;let ie=re;for(;ie<0;)ie+=f;const le=Math.min(i.inWidth,p+re),ge=K+Z*$;let ye=v,ne=0,ue=0;for(let ee=P;ee<R;ee+=u){const Te=T+ee*r[1];for(let Ce=V;Ce<q;Ce+=c){const Pe=Te+Ce*r[2];for(let Oe=ie;Oe<le;Oe+=f){const Le=Pe+Oe*r[3],Ke=t[Le+A];if(s==="max"&&Ke>ye?ye=Ke:s==="avg"&&(ne+=Ke,ue++),isNaN(ye))break}if(isNaN(ye))break}if(isNaN(ye))break}const ce=ge+A;b[ce]=s==="avg"?ne/Math.max(ue,1):ye}}}}return x}function PMe(t,e){const n=Re(e.outShape,"int32"),r=e.strideDepth,i=e.strideHeight,s=e.strideWidth,o=e.dilationDepth,a=e.dilationHeight,l=e.dilationWidth,u=e.effectiveFilterDepth,c=e.effectiveFilterHeight,f=e.effectiveFilterWidth,h=e.padInfo.front,d=e.padInfo.top,p=e.padInfo.left;for(let m=0;m<e.batchSize;++m)for(let g=0;g<e.inChannels;++g)for(let y=0;y<e.outDepth;++y){const v=y*r-h;let x=v;for(;x<0;)x+=o;const b=Math.min(e.inDepth,u+v);for(let w=0;w<e.outHeight;++w){const S=w*i-d;let C=S;for(;C<0;)C+=a;const $=Math.min(e.inHeight,c+S);for(let k=0;k<e.outWidth;++k){const I=k*s-p;let T=I;for(;T<0;)T+=l;const A=Math.min(e.inWidth,f+I);let _=Number.NEGATIVE_INFINITY,D=-1;for(let P=x;P<b;P+=o){const R=P-v;for(let F=C;F<$;F+=a){const O=F-S;for(let M=T;M<A;M+=l){const V=M-I,q=t.get(m,P,F,M,g);q>=_&&(_=q,D=R*c*f+O*c+V)}}}n.set(D,m,y,w,k,g)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Me(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;be(i,"avgPool");const{filterSize:s,strides:o,pad:a,dimRoundingMode:l}=r,u=1;E(Mn(o,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=Ii(i.shape,s,o,u,a,l);let f;if(c.filterWidth===1&&c.filterHeight===1&&et(c.inShape,c.outShape))f=Ps({inputs:{x:i},backend:n});else{const h=n.data.get(i.dataId).values,d=Se(i.shape),p=oN(h,i.shape,i.dtype,d,c,"avg");f=n.makeTensorInfo(c.outShape,i.dtype,p.values)}return f}const DMe={kernelName:bx,backendName:"cpu",kernelFunc:_Me};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:s,strides:o,pad:a,dimRoundingMode:l,dataFormat:u}=r;be(i,"avgPool3d");const c=bo(i.shape,s,o,1,a,l,u),f=n.data.get(i.dataId).values,h=VH(f,i.shape,i.dtype,Se(i.shape),c,"avg");return n.makeTensorInfo(h.shape,"float32",h.values)}const MMe={kernelName:wx,backendName:"cpu",kernelFunc:RMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FMe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,{filterSize:o,strides:a,pad:l,dimRoundingMode:u}=r;be([i,s],"avgPool3DGrad");const c=bo(s.shape,o,a,1,l,u),f=c.strideDepth,h=c.strideHeight,d=c.strideWidth,p=c.filterDepth,m=c.filterHeight,g=c.filterWidth,y=c.dilationDepth,v=c.dilationHeight,x=c.dilationWidth,b=c.effectiveFilterDepth,w=c.effectiveFilterHeight,S=c.effectiveFilterWidth,C=b-1-c.padInfo.front,$=S-1-c.padInfo.left,k=w-1-c.padInfo.top,I=Re(s.shape,"float32"),T=1/(p*m*g),A=n.bufferSync(i);for(let _=0;_<c.batchSize;++_)for(let D=0;D<c.inChannels;++D)for(let P=0;P<c.inDepth;++P)for(let R=0;R<c.inHeight;++R)for(let F=0;F<c.inWidth;++F){const O=P-C,M=R-k,V=F-$;let q=0;for(let K=0;K<b;K+=y){const Z=(O+K)/f;if(!(Z<0||Z>=c.outDepth||Math.floor(Z)!==Z))for(let re=0;re<w;re+=v){const ie=(M+re)/h;if(!(ie<0||ie>=c.outHeight||Math.floor(ie)!==ie))for(let le=0;le<S;le+=x){const ge=(V+le)/d;if(ge<0||ge>=c.outWidth||Math.floor(ge)!==ge)continue;const ye=A.get(_,Z,ie,ge,D);q+=ye}}}I.set(q*T,_,P,R,F,D)}return n.makeTensorInfo(I.shape,I.dtype,I.values)}const LMe={kernelName:LT,backendName:"cpu",kernelFunc:FMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BMe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,o=s;be([i,s],"avgPoolGrad");const{filterSize:a,strides:l,pad:u}=r,c=Ii(o.shape,a,l,1,u),f=c.strideHeight,h=c.strideWidth,d=c.filterHeight,p=c.filterWidth,m=c.dilationHeight,g=c.dilationWidth,y=c.effectiveFilterHeight,v=c.effectiveFilterWidth,x=v-1-c.padInfo.left,b=y-1-c.padInfo.top,w=Re(o.shape,"float32"),S=1/(d*p),C=n.data.get(i.dataId).values,$=Re(i.shape,"float32",C);for(let k=0;k<c.batchSize;++k)for(let I=0;I<c.inChannels;++I)for(let T=0;T<c.inHeight;++T)for(let A=0;A<c.inWidth;++A){const _=T-b,D=A-x;let P=0;for(let R=0;R<y;R+=m){const F=(_+R)/f;if(!(F<0||F>=c.outHeight||Math.floor(F)!==F))for(let O=0;O<v;O+=g){const M=(D+O)/h;if(M<0||M>=c.outWidth||Math.floor(M)!==M)continue;const V=$.get(k,F,M,I);P+=V}}w.set(P*S,k,T,A,I)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}const jMe={kernelName:FT,backendName:"cpu",kernelFunc:BMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,scale:s,offset:o,mean:a,variance:l}=e;E(a.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),E(o==null||a.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),E(s==null||a.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),be([i,a,l,s,o],"batchNorm");let{varianceEpsilon:u}=r;u==null&&(u=.001);const c=n.data.get(i.dataId).values,f=n.data.get(a.dataId).values,h=n.data.get(l.dataId).values,d=s?n.data.get(s.dataId).values:new Float32Array([1]),p=o?n.data.get(o.dataId).values:new Float32Array([0]),m=new Float32Array(c.length),g=p.length,y=d.length,v=h.length,x=f.length;let b=0,w=0,S=0,C=0;for(let $=0;$<c.length;++$)m[$]=p[b++]+(c[$]-f[w++])*d[S++]/Math.sqrt(h[C++]+u),b>=g&&(b=0),w>=x&&(w=0),S>=y&&(S=0),C>=v&&(C=0);return n.makeTensorInfo(i.shape,i.dtype,m)}const VMe={kernelName:Dx,backendName:"cpu",kernelFunc:zMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:s,crops:o}=r;be([i],"batchToSpaceND");const a=s.reduce((y,v)=>y*v),l=xm(i.shape,s,a),u=bm(l.length,s.length),c=wm(i.shape,s,a),f=mE(o,s.length),h=gE(c,o,s.length),d=dt({inputs:{x:i},backend:n,attrs:{shape:l}}),p=hr({inputs:{x:d},backend:n,attrs:{perm:u}}),m=dt({inputs:{x:p},backend:n,attrs:{shape:c}}),g=Ml({inputs:{x:m},backend:n,attrs:{begin:f,size:h}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}const UMe={kernelName:Cx,backendName:"cpu",kernelFunc:WMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:s}=e,{size:o}=r,a=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,u=tN(a,l,s.dtype,s.shape,o);return n.makeTensorInfo([o],s.dtype,u)}const HMe={kernelName:BT,backendName:"cpu",kernelFunc:GMe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KMe(t){const{inputs:e,backend:n}=t,{s0:r,s1:i}=e,s=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,a=_e(Array.from(s),Array.from(o));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const qMe={kernelName:cW,backendName:"cpu",kernelFunc:KMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XMe=rt(Ep,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),YMe={kernelName:Ep,backendName:"cpu",kernelFunc:XMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZMe=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(J(e.shape)),i=n.data.get(e.dataId),s=i.complexTensorInfos.real,o=i.complexTensorInfos.imag,a=n.data.get(s.dataId).values,l=n.data.get(o.dataId).values;for(let u=0;u<a.length;u++){const c=a[u],f=l[u];r[u]=Math.hypot(c,f)}return n.makeOutput(r,e.shape,"float32")},QMe={kernelName:$x,backendName:"cpu",kernelFunc:ZMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jc(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.data.get(r.dataId).complexTensorInfos.imag,s=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,s)}const JMe={kernelName:r2,backendName:"cpu",kernelFunc:jc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zc(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r,s=Me(i,e[0].shape)[0],o=e.map(m=>m.shape);hE(o,s);let a=$s(e.map(m=>m.shape),s);if(J(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(m=>J(m.shape)>0);if(l.length===1)return Ps({inputs:{x:l[0]},backend:n});if(l[0].dtype==="complex64"){const m=l.map(b=>Rl({inputs:{input:b},backend:n})),g=l.map(b=>jc({inputs:{input:b},backend:n})),y=zc({inputs:m,backend:n,attrs:{axis:s}}),v=zc({inputs:g,backend:n,attrs:{axis:s}}),x=xr({inputs:{real:y,imag:v},backend:n});return m.forEach(b=>n.disposeIntermediateTensorInfo(b)),g.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),x}const u=l.map(m=>{const y=[-1,J(m.shape.slice(s))];return dt({inputs:{x:m},backend:n,attrs:{shape:y}})}),c=u.map(m=>({vals:n.data.get(m.dataId).values,shape:m.shape}));a=$s(u.map(m=>m.shape),1);const f=u[0].shape[0]===1,h=K5(c,a,e[0].dtype,f),d=$s(l.map(m=>m.shape),s),p=n.makeTensorInfo(d,e[0].dtype,h);return u.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const eFe={kernelName:kx,backendName:"cpu",kernelFunc:zc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WH(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:o,pad:a,dataFormat:l,dilations:u,dimRoundingMode:c}=r;be([i,s],"conv2d");const f=wo(l),h=$n(i.shape,s.shape,o,u,a,c,!1,f),d=h.filterHeight,p=h.filterWidth,m=h.dilationHeight,g=h.dilationWidth,y=h.padInfo.left,v=h.padInfo.top,x=h.dataFormat==="channelsLast",b=new Sn(h.outShape,i.dtype),w=Se(i.shape),S=Se(s.shape),C=w[0],$=x?w[1]:w[2],k=x?w[2]:1,I=x?1:w[1],T=b.strides[0],A=x?b.strides[1]:b.strides[2],_=x?b.strides[2]:1,D=x?1:b.strides[1],P=n.data.get(i.dataId).values,R=n.data.get(s.dataId).values,F=b.values;for(let O=0;O<h.batchSize;++O){const M=O*C,V=O*T;for(let q=0;q<h.outHeight;++q){const K=V+q*A,Z=q*h.strideHeight-v;for(let re=0;re<d;++re){const ie=Z+re*m;if(ie<0||ie>=h.inHeight)continue;const le=re*S[0],ge=M+ie*$;for(let ye=0;ye<h.outWidth;++ye){const ne=K+ye*_,ue=ye*h.strideWidth-y;for(let ce=0;ce<p;++ce){const ee=ue+ce*g;if(ee<0||ee>=h.inWidth)continue;const Te=le+ce*S[1],Ce=ge+ee*k;let Pe=Te;for(let Oe=0;Oe<h.inChannels;++Oe){const Le=P[Ce+Oe*I];for(let Ke=0;Ke<h.outChannels;++Ke)F[ne+Ke*D]+=Le*R[Pe+Ke];Pe+=h.outChannels}}}}}}return n.makeTensorInfo(b.shape,b.dtype,F)}const tFe={kernelName:Ix,backendName:"cpu",kernelFunc:WH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:o,pad:a,dataFormat:l,dimRoundingMode:u,filterShape:c}=r;be([i,s],"conv2dBackpropFilter");const f=wo(l),h=$n(i.shape,c,o,1,a,u,!1,f),{strideHeight:d,strideWidth:p,filterHeight:m,filterWidth:g}=h,y=h.dataFormat==="channelsLast",v=new Sn(h.filterShape,"float32"),x=h.padInfo.left,b=h.padInfo.top,w=n.data.get(i.dataId).values,S=n.data.get(s.dataId).values,C=new Sn(i.shape,i.dtype,w),$=new Sn(s.shape,s.dtype,S);for(let k=0;k<m;++k){const I=Math.max(0,Math.ceil((b-k)/d)),T=Math.min(h.outHeight,(h.inHeight+b-k)/d);for(let A=0;A<g;++A){const _=Math.max(0,Math.ceil((x-A)/p)),D=Math.min(h.outWidth,(h.inWidth+x-A)/p);for(let P=0;P<h.inChannels;++P)for(let R=0;R<h.outChannels;++R){let F=0;for(let O=0;O<h.batchSize;++O)for(let M=I;M<T;++M){const V=k+M*d-b;for(let q=_;q<D;++q){const K=A+q*p-x;y?F+=C.get(O,V,K,P)*$.get(O,M,q,R):F+=C.get(O,P,V,K)*$.get(O,R,M,q)}}v.set(F,k,A,P,R)}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const rFe={kernelName:VT,backendName:"cpu",kernelFunc:nFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iFe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{inputShape:o,strides:a,pad:l,dataFormat:u,dimRoundingMode:c}=r;be([i,s],"conv2dBackpropInput");const f=Se(s.shape),h=Se(i.shape);let d=wo(u);const p=$n(o,s.shape,a,1,l,c,!1,d),m=new Sn(p.inShape,"float32"),g=m.values,y=n.data.get(i.dataId).values,v=n.data.get(s.dataId).values,[x,b,w]=f,{batchSize:S,filterHeight:C,filterWidth:$,inChannels:k,inHeight:I,inWidth:T,outChannels:A,outHeight:_,outWidth:D,strideHeight:P,strideWidth:R}=p;d=p.dataFormat;const F=C-1-p.padInfo.top,O=$-1-p.padInfo.left,M=d==="channelsLast",V=m.strides[0],q=M?m.strides[1]:m.strides[2],K=M?m.strides[2]:1,Z=M?1:m.strides[1],re=h[0],ie=M?h[1]:h[2],le=M?h[2]:1,ge=M?1:h[1];for(let ye=0;ye<S;++ye)for(let ne=0;ne<k;++ne)for(let ue=0;ue<I;++ue){const ce=ue-F,ee=Math.max(0,Math.ceil(ce/P)),Te=Math.min(_,(C+ce)/P);for(let Ce=0;Ce<T;++Ce){const Pe=Ce-O,Oe=Math.max(0,Math.ceil(Pe/R)),Le=Math.min(D,($+Pe)/R);let Ke=0;for(let At=ee;At<Te;++At){const jn=At*P-ce;for(let Gt=Oe;Gt<Le;++Gt){const Ni=Gt*R-Pe,gr=re*ye+ie*At+le*Gt,Zr=x*(C-1-jn)+b*($-1-Ni)+w*ne;for(let Co=0;Co<A;++Co){const $o=y[gr+ge*Co],ko=v[Zr+Co];Ke+=$o*ko}}}const Bn=V*ye+q*ue+K*Ce+Z*ne;g[Bn]=Ke}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const sFe={kernelName:Tx,backendName:"cpu",kernelFunc:iFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:o,pad:a,dilations:l}=r;be([i,s],"conv3d");const u=ka(i.shape,s.shape,o,l,a),{filterDepth:c,filterHeight:f,filterWidth:h,dilationDepth:d,dilationHeight:p,dilationWidth:m,padInfo:g}=u,y=g.front,v=g.left,x=g.top,b=new Sn(u.outShape,i.dtype),w=n.data.get(i.dataId).values,S=n.data.get(s.dataId).values,C=b.values,$=Se(i.shape),k=Se(s.shape);for(let I=0;I<u.batchSize;++I){const T=I*$[0],A=I*b.strides[0];for(let _=0;_<u.outDepth;++_){const D=A+_*b.strides[1],P=_*u.strideDepth-y;for(let R=0;R<c;++R){const F=P+R*d;if(F<0||F>=u.inDepth)continue;const O=R*k[0],M=T+F*$[1];for(let V=0;V<u.outHeight;++V){const q=D+V*b.strides[2],K=V*u.strideHeight-x;for(let Z=0;Z<f;++Z){const re=K+Z*p;if(re<0||re>=u.inHeight)continue;const ie=O+Z*k[1],le=M+re*$[2];for(let ge=0;ge<u.outWidth;++ge){const ye=q+ge*u.outChannels,ne=ge*u.strideWidth-v;for(let ue=0;ue<h;++ue){const ce=ne+ue*m;if(ce<0||ce>=u.inWidth)continue;const ee=ie+ue*k[2],Te=le+ce*u.inChannels;let Ce=ee;for(let Pe=0;Pe<u.inChannels;++Pe){const Oe=w[Te+Pe];for(let Le=0;Le<u.outChannels;++Le)C[ye+Le]+=Oe*S[Ce+Le];Ce+=u.outChannels}}}}}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const aFe={kernelName:Ex,backendName:"cpu",kernelFunc:oFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:o,pad:a,filterShape:l}=r;be([i,s],"conv3dBackpropFilterV2");const u=Se(i.shape),c=Se(s.shape),f=ka(i.shape,l,o,1,a),h=f.strideDepth,d=f.strideHeight,p=f.strideWidth,m=f.filterDepth,g=f.filterHeight,y=f.filterWidth,v=new Sn(f.filterShape,"float32"),x=v.values,[b,w,S,C]=v.strides,$=n.data.get(s.dataId).values,[k,I,T,A]=c,_=n.data.get(i.dataId).values,[D,P,R,F]=u,O=f.padInfo.front,M=f.padInfo.left,V=f.padInfo.top;for(let q=0;q<m;++q){const K=Math.max(0,Math.ceil((O-q)/h)),Z=Math.min(f.outDepth,(f.inDepth+O-q)/h),re=q*b;for(let ie=0;ie<g;++ie){const le=Math.max(0,Math.ceil((V-ie)/d)),ge=Math.min(f.outHeight,(f.inHeight+V-ie)/d),ye=ie*w+re;for(let ne=0;ne<y;++ne){const ue=Math.max(0,Math.ceil((M-ne)/p)),ce=Math.min(f.outWidth,(f.inWidth+M-ne)/p),ee=ne*S+ye;for(let Te=0;Te<f.inChannels;++Te){const Ce=Te*C+ee;for(let Pe=0;Pe<f.outChannels;++Pe){let Oe=0;for(let Le=0;Le<f.batchSize;++Le){const Ke=Le*D,Bn=Le*k;for(let At=K;At<Z;++At){const Gt=(q+At*h-O)*P+Ke,Ni=At*I+Bn;for(let gr=le;gr<ge;++gr){const Co=(ie+gr*d-V)*R+Gt,$o=gr*T+Ni;for(let ko=ue;ko<ce;++ko){const Kb=(ne+ko*p-M)*F+Co,qb=ko*A+$o;Oe+=_[Kb+Te]*$[qb+Pe]}}}}x[Ce+Pe]=Oe}}}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const uFe={kernelName:WT,backendName:"cpu",kernelFunc:lFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cFe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{pad:o,strides:a,inputShape:l}=r;be([i],"conv3dBackpropInputV2");const u=Se(i.shape),c=Se(s.shape),f=ka(l,s.shape,a,1,o),h=new Sn(f.inShape,"float32"),d=h.values,[p,m,g,y]=h.strides,v=n.data.get(i.dataId).values,[x,b,w,S]=u,C=n.data.get(s.dataId).values,[$,k,I,T]=c,{batchSize:A,filterDepth:_,filterHeight:D,filterWidth:P,inChannels:R,inDepth:F,inHeight:O,inWidth:M,outChannels:V,outDepth:q,outHeight:K,outWidth:Z,strideDepth:re,strideHeight:ie,strideWidth:le}=f,ge=_-1-f.padInfo.front,ye=D-1-f.padInfo.top,ne=P-1-f.padInfo.left;for(let ue=0;ue<A;++ue)for(let ce=0;ce<R;++ce)for(let ee=0;ee<F;++ee){const Te=ee-ge,Ce=Math.max(0,Math.ceil(Te/re)),Pe=Math.min(q,(_+Te)/re);for(let Oe=0;Oe<O;++Oe){const Le=Oe-ye,Ke=Math.max(0,Math.ceil(Le/ie)),Bn=Math.min(K,(D+Le)/ie);for(let At=0;At<M;++At){const jn=At-ne,Gt=Math.max(0,Math.ceil(jn/le)),Ni=Math.min(Z,(P+jn)/le);let gr=0;for(let Zr=Ce;Zr<Pe;++Zr){const Co=Zr*re-Te;for(let $o=Ke;$o<Bn;++$o){const ko=$o*ie-Le;for(let Ef=Gt;Ef<Ni;++Ef){const Kb=Ef*le-jn,qb=x*ue+b*Zr+w*$o+S*Ef,V8=$*(_-1-Co)+k*(D-1-ko)+I*(P-1-Kb)+T*ce;for(let Mm=0;Mm<V;++Mm){const W8=v[qb+Mm],U8=C[V8+Mm];gr+=W8*U8}}}}d[p*ue+m*ee+g*Oe+y*At+ce]=gr}}}return n.makeTensorInfo(h.shape,h.dtype,h.values)}const fFe={kernelName:UT,backendName:"cpu",kernelFunc:cFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hFe=rt(Np,t=>Math.cos(t)),dFe={kernelName:Np,backendName:"cpu",kernelFunc:hFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pFe=rt(Ap,t=>Math.cosh(t)),mFe={kernelName:Ap,backendName:"cpu",kernelFunc:pFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gFe(t){const{inputs:e,backend:n,attrs:r}=t,{image:i,boxes:s,boxInd:o}=e,{cropSize:a,method:l,extrapolationValue:u}=r,[c,f,h,d]=i.shape,p=s.shape[0],[m,g]=a,y=Re([p,m,g,d],"float32"),v=n.data.get(s.dataId).values,x=n.data.get(o.dataId).values,b=n.data.get(i.dataId).values,w=Se(i.shape),S=Se(y.shape);for(let C=0;C<p;C++){const $=C*4,k=v[$],I=v[$+1],T=v[$+2],A=v[$+3],_=x[C];if(_>=c)continue;const D=m>1?(T-k)*(f-1)/(m-1):0,P=g>1?(A-I)*(h-1)/(g-1):0;for(let R=0;R<m;R++){const F=m>1?k*(f-1)+R*D:.5*(k+T)*(f-1);if(F<0||F>f-1){for(let O=0;O<g;O++)for(let M=0;M<d;M++){const V=M+O*S[2]+R*S[1]+C*S[0];y.values[V]=u}continue}if(l==="bilinear"){const O=Math.floor(F),M=Math.ceil(F),V=F-O;for(let q=0;q<g;q++){const K=g>1?I*(h-1)+q*P:.5*(I+A)*(h-1);if(K<0||K>h-1){for(let le=0;le<d;le++){const ge=le+q*S[2]+R*S[1]+C*S[0];y.values[ge]=u}continue}const Z=Math.floor(K),re=Math.ceil(K),ie=K-Z;for(let le=0;le<d;le++){let ge=le+Z*w[2]+O*w[1]+_*w[0];const ye=b[ge];ge=le+re*w[2]+O*w[1]+_*w[0];const ne=b[ge];ge=le+Z*w[2]+M*w[1]+_*w[0];const ue=b[ge];ge=le+re*w[2]+M*w[1]+_*w[0];const ce=b[ge],ee=ye+(ne-ye)*ie,Te=ue+(ce-ue)*ie;ge=le+q*S[2]+R*S[1]+C*S[0],y.values[ge]=ee+(Te-ee)*V}}}else for(let O=0;O<g;++O){const M=g>1?I*(h-1)+O*P:.5*(I+A)*(h-1);if(M<0||M>h-1){for(let K=0;K<d;K++){const Z=K+O*S[2]+R*S[1]+C*S[0];y.values[Z]=u}continue}const V=Math.round(M),q=Math.round(F);for(let K=0;K<d;K++){const Z=K+V*w[2]+q*w[1]+_*w[0],re=K+O*S[2]+R*S[1]+C*S[0];y.values[re]=b[Z]}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const yFe={kernelName:HT,backendName:"cpu",kernelFunc:gFe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,exclusive:o,reverse:a}=r;be(i,"cumprod");const l=Nt([s],i.shape.length);let u=i;l!=null&&(u=hr({inputs:{x:i},backend:n,attrs:{perm:l}}));const c=Vt(1,i.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const f=Tr(u.dtype,"int32"),h=OT(J(u.shape),f),d=n.data.get(u.dataId).values,p=u.shape[u.shape.length-1],m=a?(y,v)=>y+p-v-1:(y,v)=>y+v;for(let y=0;y<d.length;y+=p)for(let v=0;v<p;v++){const x=m(y,v);if(v===0)h[x]=o?1:d[x];else{const b=m(y,v-1);h[x]=o?d[b]*h[b]:d[x]*h[b]}}const g=n.makeTensorInfo(u.shape,f,h);if(l!=null){const y=Ia(l),v=hr({inputs:{x:g},backend:n,attrs:{perm:y}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(u),v}return g}const xFe={kernelName:GT,backendName:"cpu",kernelFunc:vFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,exclusive:o,reverse:a}=r;be(i,"cumsum");const l=Nt([s],i.shape.length);let u=i;l!=null&&(u=hr({inputs:{x:i},backend:n,attrs:{perm:l}}));const c=Vt(1,i.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const f=Tr(u.dtype,"int32"),h=Dn(J(u.shape),f),d=n.data.get(u.dataId).values,p=u.shape[u.shape.length-1],m=a?(y,v)=>y+p-v-1:(y,v)=>y+v;for(let y=0;y<d.length;y+=p)for(let v=0;v<p;v++){const x=m(y,v);if(v===0)h[x]=o?0:d[x];else{const b=m(y,v-1);h[x]=o?d[b]+h[b]:d[x]+h[b]}}const g=n.makeTensorInfo(u.shape,f,h);if(l!=null){const y=Ia(l),v=hr({inputs:{x:g},backend:n,attrs:{perm:y}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(u),v}return g}const wFe={kernelName:Nx,backendName:"cpu",kernelFunc:bFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:s}=e,{size:o,binaryOutput:a}=r;if(i.shape.length===1){const l=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,c=tN(l,u,s.dtype,s.shape,o);return n.makeTensorInfo([o],s.dtype,c)}else if(i.shape.length===2){const l=n.bufferSync(i),u=n.bufferSync(s),c=U5(l,u,o,a);return n.makeTensorInfo(c.shape,s.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}const CFe={kernelName:KT,backendName:"cpu",kernelFunc:SFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Fe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockSize:s,dataFormat:o}=r;E(o==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${o}`);const a=i.shape[0],l=i.shape[1],u=i.shape[2],c=i.shape[3],f=l*s,h=u*s,d=c/(s*s),p=n.data.get(i.dataId).values,m=new Float32Array(a*f*h*d);let g=0;for(let y=0;y<a;++y)for(let v=0;v<f;++v){const x=Math.floor(v/s),b=v%s;for(let w=0;w<h;++w){const S=Math.floor(w/s),C=w%s,$=(b*s+C)*d;for(let k=0;k<d;++k){const T=k+$+c*(S+u*(x+l*y));m[g++]=p[T]}}}return n.makeTensorInfo([a,f,h,d],i.dtype,m)}const kFe={kernelName:qT,backendName:"cpu",kernelFunc:$Fe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UH(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:o,pad:a,dilations:l,dimRoundingMode:u}=r;be([i,s],"depthwiseConv2DNative");const c=Se(i.shape),f=Se(s.shape);let h=l;h==null&&(h=[1,1]),E(Mn(o,h),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${h}'`);const d=$n(i.shape,s.shape,o,h,a,u,!0),{filterHeight:p,filterWidth:m,dilationHeight:g,dilationWidth:y,padInfo:v}=d,x=v.left,b=v.top,w=d.outChannels/d.inChannels,S=new Sn(d.outShape,i.dtype),C=n.data.get(i.dataId).values,$=n.data.get(s.dataId).values,k=S.values;for(let I=0;I<d.batchSize;++I){const T=I*c[0],A=I*S.strides[0];for(let _=0;_<d.outHeight;++_){const D=A+_*S.strides[1],P=_*d.strideHeight-b;for(let R=0;R<p;++R){const F=P+R*g;if(F<0||F>=d.inHeight)continue;const O=R*f[0],M=T+F*c[1];for(let V=0;V<d.outWidth;++V){const q=D+V*S.strides[2],K=V*d.strideWidth-x;for(let Z=0;Z<m;++Z){const re=K+Z*y;if(re<0||re>=d.inWidth)continue;const ie=O+Z*f[1],le=M+re*d.inChannels;let ge=q,ye=ie;for(let ne=0;ne<d.inChannels;++ne){const ue=C[le+ne];for(let ce=0;ce<w;++ce)k[ge+ce]+=ue*$[ye+ce];ge+=w,ye+=w}}}}}}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const IFe={kernelName:Ax,backendName:"cpu",kernelFunc:UH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:u,filterShape:c}=r;be([i,s],"depthwiseConv2dNativeBackpropFilter");const f=$n(i.shape,c,o,a,l,u,!0),{strideHeight:h,strideWidth:d,filterHeight:p,filterWidth:m}=f,g=new Sn(f.filterShape,"float32"),y=f.padInfo.left,v=f.padInfo.top,x=f.outChannels/f.inChannels,b=n.data.get(i.dataId).values,w=new Sn(i.shape,i.dtype,b),S=n.data.get(s.dataId).values,C=new Sn(s.shape,s.dtype,S);for(let $=0;$<p;++$){const k=Math.max(0,Math.ceil((v-$)/h)),I=Math.min(f.outHeight,(f.inHeight+v-$)/h);for(let T=0;T<m;++T){const A=Math.max(0,Math.ceil((y-T)/d)),_=Math.min(f.outWidth,(f.inWidth+y-T)/d);for(let D=0;D<f.outChannels;++D){const P=Math.trunc(D/x),R=D%x;let F=0;for(let O=0;O<f.batchSize;++O)for(let M=k;M<I;++M){const V=$+M*h-v;for(let q=A;q<_;++q){const K=T+q*d-y;F+=w.get(O,V,K,P)*C.get(O,M,q,D)}}g.set(F,$,T,P,R)}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const EFe={kernelName:XT,backendName:"cpu",kernelFunc:TFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NFe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:u,inputShape:c}=r;be([i,s],"depthwiseConv2DNativeBackpropInput");const f=Se(i.shape),h=Se(s.shape),d=$n(c,s.shape,o,a,l,u,!0),p=new Sn(d.inShape,"float32"),m=p.values,[g,y,v]=p.strides,x=n.data.get(i.dataId).values,[b,w,S]=f,C=n.data.get(s.dataId).values,[$,k,I]=h,{batchSize:T,filterHeight:A,filterWidth:_,inChannels:D,inHeight:P,inWidth:R,outChannels:F,outHeight:O,outWidth:M,strideHeight:V,strideWidth:q}=d,K=A-1-d.padInfo.top,Z=_-1-d.padInfo.left,re=F/D;for(let ie=0;ie<T;++ie)for(let le=0;le<D;++le)for(let ge=0;ge<P;++ge){const ye=ge-K,ne=Math.max(0,Math.ceil(ye/V)),ue=Math.min(O,(A+ye)/V);for(let ce=0;ce<R;++ce){const ee=ce-Z,Te=Math.max(0,Math.ceil(ee/q)),Ce=Math.min(M,(_+ee)/q);let Pe=0;for(let Oe=ne;Oe<ue;++Oe){const Le=Oe*V-ye;for(let Ke=Te;Ke<Ce;++Ke){const Bn=Ke*q-ee,At=b*ie+w*Oe+S*Ke,jn=$*(A-1-Le)+k*(_-1-Bn)+I*le;for(let Gt=0;Gt<re;++Gt){const Ni=le*re+Gt,gr=x[At+Ni],Zr=C[jn+Gt];Pe+=gr*Zr}}}m[g*ie+y*ge+v*ce+le]=Pe}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}const AFe={kernelName:YT,backendName:"cpu",kernelFunc:NFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OFe(t){const{inputs:e,backend:n}=t,{x:r}=e,i=J(r.shape),s=n.data.get(r.dataId).values,o=Re([i,i],r.dtype),a=o.values;for(let u=0;u<s.length;u++)a[u*i+u]=s[u];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,o.dtype,o.values)}const PFe={kernelName:fW,backendName:"cpu",kernelFunc:OFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Fe={kernelName:Ox,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i}=t,{strides:s,pad:o,dilations:a}=n,l=e,u=l.data.get(r.dataId).values,c=r.shape.length,f=l.data.get(i.dataId).values,h=i.shape.length,{batchSize:d,inHeight:p,inWidth:m,inChannels:g,outHeight:y,outWidth:v,padInfo:x,strideHeight:b,strideWidth:w,filterHeight:S,filterWidth:C,dilationHeight:$,dilationWidth:k,outShape:I}=pm(r.shape,i.shape,s,o,"NHWC",a),T=J(I),A=I.length,_=Lt(r.dtype,T);for(let P=0;P<d;++P)for(let R=0;R<y;++R){const F=R*b-x.top;for(let O=0;O<v;++O){const M=O*w-x.left;for(let V=0;V<g;++V){let q=Number.MIN_SAFE_INTEGER;for(let Z=0;Z<S;++Z){const re=F+Z*$;if(re>=0&&re<p)for(let ie=0;ie<C;++ie){const le=M+ie*k;if(le>=0&&le<m){const ge=Ss([P,re,le,V],c,Se(r.shape)),ye=Ss([Z,ie,V],h,Se(i.shape)),ne=u[ge]+f[ye];ne>q&&(q=ne)}}}const K=Ss([P,R,O,V],A,Se(I));_[K]=q}}}return{dataId:l.write(Kl(_,r.dtype),I,r.dtype),shape:I,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DFe={kernelName:m$,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i,dy:s}=t,{strides:o,pad:a,dilations:l}=n,u=e,c=Yi(r.shape,u.data.get(r.dataId).values),f=Yi(i.shape,u.data.get(i.dataId).values),{batchSize:h,inHeight:d,inWidth:p,inChannels:m,outHeight:g,outWidth:y,padInfo:v,strideHeight:x,strideWidth:b,filterHeight:w,filterWidth:S,dilationHeight:C,dilationWidth:$,outShape:k}=pm(r.shape,i.shape,o,a,"NHWC",l);E(s.rank===k.length,()=>`Error in ${m$}, dy must have the same rank as output ${k.length}, but got ${s.rank}`);const I=Yi(k,u.data.get(s.dataId).values),T=aW(i.shape,i.dtype);for(let _=0;_<h;++_)for(let D=0;D<g;++D){const P=D*x-v.top;for(let R=0;R<y;++R){const F=R*b-v.left;for(let O=0;O<m;++O){let M=Number.MIN_SAFE_INTEGER,V=0,q=0;for(let K=0;K<w;++K){const Z=P+K*C;if(Z>=0&&Z<d)for(let re=0;re<S;++re){const ie=F+re*$;if(ie>=0&&ie<p){const le=c[_][Z][ie][O]+f[K][re][O];le>M&&(M=le,V=K,q=re)}}}T[V][q][O]+=I[_][D][R][O]}}}return{dataId:u.write(Kl(T,r.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RFe={kernelName:p$,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i,dy:s}=t,{strides:o,pad:a,dilations:l}=n,u=e,c=Yi(r.shape,u.data.get(r.dataId).values),f=Yi(i.shape,u.data.get(i.dataId).values),{batchSize:h,inHeight:d,inWidth:p,inChannels:m,outHeight:g,outWidth:y,padInfo:v,strideHeight:x,strideWidth:b,filterHeight:w,filterWidth:S,dilationHeight:C,dilationWidth:$,outShape:k}=pm(r.shape,i.shape,o,a,"NHWC",l);E(s.rank===k.length,()=>`Error in ${p$}, dy must have the same rank as output ${k.length}, but got ${s.rank}`);const I=Yi(k,u.data.get(s.dataId).values),T=aW(r.shape,r.dtype);for(let _=0;_<h;++_)for(let D=0;D<g;++D){const P=D*x-v.top;for(let R=0;R<y;++R){const F=R*b-v.left;for(let O=0;O<m;++O){let M=Number.MIN_SAFE_INTEGER,V=P<0?0:P,q=F<0?0:F;for(let K=0;K<w;++K){const Z=P+K*C;if(Z>=0&&Z<d)for(let re=0;re<S;++re){const ie=F+re*$;if(ie>=0&&ie<p){const le=c[_][Z][ie][O]+f[K][re][O];le>M&&(M=le,V=Z,q=ie)}}}T[_][V][q][O]+=I[_][D][R][O]}}}return{dataId:u.write(Kl(T,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MFe(t){const{inputs:e,backend:n,attrs:r}=t,{image:i}=e,{canvas:s,options:o}=r,{contextOptions:a,imageOptions:l}=o||{},u=(l==null?void 0:l.alpha)||1,c=(a==null?void 0:a.contextType)||"2d";if(c!=="2d")throw new Error(`Context type ${a.contextType} is not supported by the CPU backend.`);const f=s.getContext(c,(a==null?void 0:a.contextAttributes)||{});if(f==null)throw new Error(`Could not get the context with ${c} type.`);const[h,d]=i.shape.slice(0,2),p=i.shape.length===2?1:i.shape[2],m=n.data.get(i.dataId).values,g=i.dtype==="float32"?255:1,y=new Uint8ClampedArray(d*h*4);for(let x=0;x<h*d;++x){const b=[0,0,0,255*u];for(let S=0;S<p;S++){const C=m[x*p+S];if(i.dtype==="float32"){if(C<0||C>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${C}.`)}else if(i.dtype==="int32"&&(C<0||C>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${C}.`);p===1?(b[0]=C*g,b[1]=C*g,b[2]=C*g):b[S]=C*g}const w=x*4;y[w+0]=Math.round(b[0]),y[w+1]=Math.round(b[1]),y[w+2]=Math.round(b[2]),y[w+3]=Math.round(b[3])}s.width=d,s.height=h;const v=new ImageData(y,d,h);return f.putImageData(v,0,0),i}const FFe={kernelName:yke,backendName:"cpu",kernelFunc:MFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Am(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r;be(i,"sum");let a;i.dtype==="bool"?a=ha({inputs:{x:i},backend:n,attrs:{dtype:"int32"}}):a=Ps({inputs:{x:i},backend:n});const l=a.shape.length,u=Me(s,a.shape),c=Nt(u,l);let f=u,h=a;c!=null&&(h=hr({inputs:{x:a},backend:n,attrs:{perm:c}}),f=Vt(f.length,l)),kn("sum",f,h.shape.length);const[d,p]=yn(h.shape,f),m=Tr(h.dtype,"int32");let g=Zv(n,d,m);const y=J(p),v=n.data.get(g.dataId).values,x=n.data.get(h.dataId).values;for(let b=0;b<v.length;++b){const w=b*y;let S=0;for(let C=0;C<y;++C)S+=x[w+C];v[b]=S}if(o){const b=Yt(g.shape,u),w=g;g=dt({inputs:{x:g},backend:n,attrs:{shape:b}}),n.disposeIntermediateTensorInfo(w)}return n.disposeIntermediateTensorInfo(a),c!=null&&n.disposeIntermediateTensorInfo(h),g}const LFe={kernelName:cb,backendName:"cpu",kernelFunc:Am};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BFe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:i}=r,s=e,{allDims:o,summedDims:a,idDims:l}=$E(i,s.length);IE(o.length,l,s);const{path:u,steps:c}=TE(a,l),f=c.length;let h=null,d=o.length;const p=[];for(let m=0;m<f;++m){for(const g of c[m]){const{permutationIndices:y,expandDims:v}=kE(d,l[g]);let x;EE(y)?x=s[g]:(x=hr({inputs:{x:s[g]},backend:n,attrs:{perm:y}}),p.push(x));const b=x.shape.slice();for(let w=0;w<v.length;++w)b.splice(v[w],0,1);et(x.shape,b)||(x=dt({inputs:{x},backend:n,attrs:{shape:b}}),p.push(x)),h===null?h=x:(h=zb({inputs:{a:x,b:h},backend:n}),p.push(h))}m<f-1&&(u[m]>=0&&(h=Am({inputs:{x:h},backend:n,attrs:{axis:u[m]-(o.length-d),keepDims:!1}}),p.push(h)),d--)}for(const m of p)m!==h&&n.disposeIntermediateTensorInfo(m);return h}const jFe={kernelName:ZT,backendName:"cpu",kernelFunc:BFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zFe(t){const{inputs:e,backend:n}=t,{dy:r,y:i}=e;be([r,i],"eluGrad");const s=new Float32Array(J(i.shape)),o=n.data.get(i.dataId).values,a=n.data.get(r.dataId).values;for(let l=0;l<o.length;++l){const u=o[l];u>=0?s[l]=a[l]:s[l]=a[l]*(u+1)}return n.makeTensorInfo(i.shape,"float32",s)}const VFe={kernelName:QT,backendName:"cpu",kernelFunc:zFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WFe=yE,UFe=vE,GFe=xE,HFe=bE,KFe=wE,qFe=SE,XFe=rt(_p,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+WFe*n);return e*(1-((((qFe*r+KFe)*r+HFe)*r+GFe)*r+UFe)*r*Math.exp(-n*n))}),YFe={kernelName:_p,backendName:"cpu",kernelFunc:XFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e0(t){const{inputs:e,backend:n,attrs:r}=t,{input:i}=e,{dim:s}=r,o=i.shape.length,a=i.shape.slice();let l=s;return s<0&&(E(-(o+1)<=s,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+s+1),a.splice(l,0,1),dt({inputs:{x:i},backend:n,attrs:{shape:a}})}const ZFe={kernelName:_x,backendName:"cpu",kernelFunc:e0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QFe=Ut((t,e)=>t/e),aN=ln(Op,QFe),V$={kernelName:Op,backendName:"cpu",kernelFunc:aN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GH(t,e,n){const r=t.shape,i=r[0],s=r[1],o=n.data.get(t.dataId),a=o.complexTensorInfos.real,l=o.complexTensorInfos.imag,u=[i,s],c=J(u),f=_n("float32",c),h=_n("float32",c);for(let g=0;g<i;g++){const y=Ml({inputs:{x:a},backend:n,attrs:{begin:[g,0],size:[1,s]}}),v=Ml({inputs:{x:l},backend:n,attrs:{begin:[g,0],size:[1,s]}}),x=xr({inputs:{real:y,imag:v},backend:n}),{real:b,imag:w}=JFe(x,e,n),S=ho(b,w);for(let C=0;C<s;C++){const $=CE(S,C);f[g*s+C]=$.real,h[g*s+C]=$.imag}n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(x)}const d=n.makeTensorInfo(u,"float32",f),p=n.makeTensorInfo(u,"float32",h),m=xr({inputs:{real:d,imag:p},backend:n});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),m}function JFe(t,e,n){const r=J(t.shape),i=n.data.get(t.dataId),s=n.data.get(i.complexTensorInfos.real.dataId).values,o=n.data.get(i.complexTensorInfos.imag.dataId).values;if(eLe(r)){const a=W$(s,o,r,e,n),l=[t.shape[0],t.shape[1]];if(e){const u=n.makeTensorInfo(l,"float32",a.real),c=n.makeTensorInfo(l,"float32",a.imag),f=n.makeTensorInfo([],"float32",$a(r,"float32")),h=Ps({inputs:{x:f},backend:n}),d=V$.kernelFunc({inputs:{a:u,b:f},backend:n}),p=V$.kernelFunc({inputs:{a:c,b:h},backend:n}),m=n.data.get(d.dataId).values,g=n.data.get(p.dataId).values;return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),{real:m,imag:g}}return a}else{const a=ho(s,o),l=tLe(a,r,e);return sG(l)}}function eLe(t){return(t&t-1)===0}function W$(t,e,n,r,i){if(n===1)return{real:t,imag:e};const s=ho(t,e),o=n/2,a=oG(s),l=a.real,u=a.imag,c=[l.length],f=i.makeTensorInfo(c,"float32",l),h=i.makeTensorInfo(c,"float32",u),d=xr({inputs:{real:f,imag:h},backend:i}),p=aG(s),m=p.real,g=p.imag,y=[m.length],v=i.makeTensorInfo(y,"float32",m),x=i.makeTensorInfo(y,"float32",g),b=xr({inputs:{real:v,imag:x},backend:i}),w=W$(l,u,o,r,i),S=w.real,C=w.imag,$=[S.length],k=i.makeTensorInfo($,"float32",S),I=i.makeTensorInfo($,"float32",C),T=xr({inputs:{real:k,imag:I},backend:i}),A=W$(m,g,o,r,i),_=A.real,D=A.imag,P=[_.length],R=i.makeTensorInfo(P,"float32",_),F=i.makeTensorInfo(P,"float32",D),O=xr({inputs:{real:R,imag:F},backend:i}),M=uG(n,r),V=[M.real.length],q=i.makeTensorInfo(V,"float32",M.real),K=i.makeTensorInfo(V,"float32",M.imag),Z=xr({inputs:{real:q,imag:K},backend:i}),re=zb({inputs:{a:Z,b:O},backend:i}),ie=Bc({inputs:{a:T,b:re},backend:i}),le=sN({inputs:{a:T,b:re},backend:i}),ge=Rl({inputs:{input:ie},backend:i}),ye=Rl({inputs:{input:le},backend:i}),ne=jc({inputs:{input:ie},backend:i}),ue=jc({inputs:{input:le},backend:i}),ce=zc({inputs:[ge,ye],backend:i,attrs:{axis:0}}),ee=zc({inputs:[ne,ue],backend:i,attrs:{axis:0}}),Te=i.data.get(ce.dataId).values,Ce=i.data.get(ee.dataId).values;return i.disposeIntermediateTensorInfo(f),i.disposeIntermediateTensorInfo(h),i.disposeIntermediateTensorInfo(d),i.disposeIntermediateTensorInfo(v),i.disposeIntermediateTensorInfo(x),i.disposeIntermediateTensorInfo(b),i.disposeIntermediateTensorInfo(k),i.disposeIntermediateTensorInfo(I),i.disposeIntermediateTensorInfo(T),i.disposeIntermediateTensorInfo(R),i.disposeIntermediateTensorInfo(F),i.disposeIntermediateTensorInfo(O),i.disposeIntermediateTensorInfo(q),i.disposeIntermediateTensorInfo(K),i.disposeIntermediateTensorInfo(Z),i.disposeIntermediateTensorInfo(re),i.disposeIntermediateTensorInfo(ie),i.disposeIntermediateTensorInfo(le),i.disposeIntermediateTensorInfo(ge),i.disposeIntermediateTensorInfo(ne),i.disposeIntermediateTensorInfo(ye),i.disposeIntermediateTensorInfo(ue),i.disposeIntermediateTensorInfo(ce),i.disposeIntermediateTensorInfo(ee),{real:Te,imag:Ce}}function tLe(t,e,n){const r=new Float32Array(e*2);for(let i=0;i<e;i++){let s=0,o=0;for(let a=0;a<e;a++){const l=cG(i*a,e,n),u=CE(t,a);s+=u.real*l.real-u.imag*l.imag,o+=u.real*l.imag+u.imag*l.real}n&&(s/=e,o/=e),lG(r,s,o,i)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nLe(t){const{inputs:e,backend:n}=t,{input:r}=e,i=J(r.shape),s=r.shape[r.shape.length-1],o=i/s,a=dt({inputs:{x:r},backend:n,attrs:{shape:[o,s]}}),l=GH(a,!1,n),u=dt({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}const rLe={kernelName:JT,backendName:"cpu",kernelFunc:nLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lN(t){const{backend:e,attrs:n}=t,{shape:r,value:i,dtype:s}=n,o=s||ff(i),a=Lt(o,J(r));return sLe(a,i,o),e.makeTensorInfo(r,o,a)}const iLe={kernelName:e2,backendName:"cpu",kernelFunc:lN};function sLe(t,e,n){t.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oLe={kernelName:t2,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,i=n,s=_n(r.dtype,J(r.shape)),[o,a,l,u]=r.shape,c=i.data.get(r.dataId).values;for(let h=0;h<o;h++){const d=h*l*a*u;for(let p=0;p<a;p++){const m=p*(l*u);for(let g=0;g<l;g++){const y=g*u;for(let v=0;v<u;v++){const x=Math.round(l-g-1),b=d+m+y+v;let w=c[b];if(x>=0&&x<l){const S=x*u,C=d+m+S+v;w=c[C]}s[b]=w}}}}return{dataId:i.write(s,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s,bias:o,preluActivationWeights:a}=e,{strides:l,pad:u,dataFormat:c,dilations:f,dimRoundingMode:h,activation:d,leakyreluAlpha:p}=r;let m=WH({inputs:{x:i,filter:s},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:f,dimRoundingMode:h}});if(o){const g=m;if(c==="NCHW"&&o.shape.length===1&&o.shape[0]!==1){const y=dt({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});m=Bc({inputs:{a:m,b:y},backend:n}),n.disposeIntermediateTensorInfo(y)}else m=Bc({inputs:{a:m,b:o},backend:n});n.disposeIntermediateTensorInfo(g)}if(d){const g=m;if(c==="NCHW"&&d==="prelu"&&a.shape.length===1&&a.shape[0]!==1){const y=dt({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});m=Jv(n,m,d,y,p),n.disposeIntermediateTensorInfo(y)}else m=Jv(n,m,d,a,p);n.disposeIntermediateTensorInfo(g)}return m}const lLe={kernelName:_v,backendName:"cpu",kernelFunc:aLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s,bias:o,preluActivationWeights:a}=e,{strides:l,pad:u,dataFormat:c,dilations:f,dimRoundingMode:h,activation:d,leakyreluAlpha:p}=r;let m=UH({inputs:{x:i,filter:s},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:f,dimRoundingMode:h}});if(o){const g=m;m=Bc({inputs:{a:m,b:o},backend:n}),n.disposeIntermediateTensorInfo(g)}if(d){const g=m;m=Jv(n,m,d,a,p),n.disposeIntermediateTensorInfo(g)}return m}const cLe={kernelName:AW,backendName:"cpu",kernelFunc:uLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fLe(t){const{inputs:e,backend:n}=t,{params:r,indices:i}=e,s=J(r.shape),o=i.shape,a=o[o.length-1],[l,u,c,f]=oE(r,i);if(u===0)return n.makeTensorInfo(l,r.dtype,[]);const h=n.data.get(i.dataId).values,d=n.bufferSync(r),p=tH(h,d,r.dtype,u,a,c,f,r.shape,s);return n.makeTensorInfo(l,r.dtype,p.values)}const hLe={kernelName:hW,backendName:"cpu",kernelFunc:fLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,indices:s}=e,{axis:o,batchDims:a}=r;be([i,s],"gatherV2");const l=Me(o,i.shape)[0],u=n.data.get(s.dataId).values,c=i.shape[l];for(let b=0;b<u.length;++b){const w=u[b];E(w<=c-1&&w>=0,()=>`GatherV2: the index value ${w} is not in [0, ${c-1}]`)}let f=a;a==null&&(f=0);const h=J(s.shape),d=AE(i,s,l,f),p=dt({inputs:{x:i},backend:n,attrs:{shape:[d.batchSize,d.outerSize,d.dimSize,d.sliceSize]}}),m=dt({inputs:{x:s},backend:n,attrs:{shape:[d.batchSize,h/d.batchSize]}}),g=[d.batchSize,d.outerSize,h/d.batchSize,d.sliceSize],y=n.bufferSync(m),v=n.bufferSync(p),x=nH(v,y,g);return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(d.outputShape,x.dtype,x.values)}const pLe={kernelName:Rx,backendName:"cpu",kernelFunc:dLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mLe(t){const{inputs:e,backend:n}=t,{input:r}=e,i=J(r.shape),s=r.shape[r.shape.length-1],o=i/s,a=dt({inputs:{x:r},backend:n,attrs:{shape:[o,s]}}),l=GH(a,!0,n),u=dt({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}const gLe={kernelName:n2,backendName:"cpu",kernelFunc:mLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yLe=rt(jp,t=>Number.isFinite(t)?1:0,"bool"),vLe={kernelName:jp,backendName:"cpu",kernelFunc:yLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xLe=rt(zp,t=>Math.abs(t)===1/0?1:0,"bool"),bLe={kernelName:zp,backendName:"cpu",kernelFunc:xLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wLe=rt(Vp,t=>Number.isNaN(t)?1:0,"bool"),SLe={kernelName:Vp,backendName:"cpu",kernelFunc:wLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CLe(t){const{backend:e,attrs:n}=t,{start:r,stop:i,num:s}=n,o=aH(r,i,s);return e.makeTensorInfo([o.length],"float32",o)}const $Le={kernelName:dW,backendName:"cpu",kernelFunc:CLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kLe=rt(Up,t=>Math.log1p(t)),ILe={kernelName:Up,backendName:"cpu",kernelFunc:kLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TLe=Ut((t,e)=>t&&e),ELe=ln(jx,TLe,null,"bool"),NLe={kernelName:jx,backendName:"cpu",kernelFunc:ELe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ALe=rt(zx,t=>t?0:1,"bool"),OLe={kernelName:zx,backendName:"cpu",kernelFunc:ALe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PLe=Ut((t,e)=>t||e),_Le=ln(Vx,PLe,null,"bool"),DLe={kernelName:Vx,backendName:"cpu",kernelFunc:_Le};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{depthRadius:s,bias:o,alpha:a,beta:l}=r;be(i,"LRN");const u=i.shape[3],c=u-1,f=n.data.get(i.dataId).values,h=J(i.shape),d=new Float32Array(h);function p(m){const g=m%u;let y=m-g+Math.max(0,g-s);const v=m-g+Math.min(g+s,c);let x=0;for(;y<=v;y++){const b=f[y];x+=b*b}return x}for(let m=0;m<h;m++){const g=p(m),y=f[m]*Math.pow(o+a*g,-l);d[m]=y}return n.makeTensorInfo(i.shape,i.dtype,d)}const MLe={kernelName:Wx,backendName:"cpu",kernelFunc:RLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,y:s,dy:o}=e,{depthRadius:a,bias:l,alpha:u,beta:c}=r;be(o,"LRNGrad");const f=J(o.shape),h=o.shape[3],d=n.data.get(o.dataId).values,p=n.data.get(i.dataId).values,m=n.data.get(s.dataId).values,g=new Float32Array(f),y=f;for(let v=0;v<y;v++){const x=v%h,b=v-x+Math.max(0,x-a),w=v-x+Math.min(h,x+a+1);let S=0;for(let C=b;C<w;C++)S+=Math.pow(p[C],2);S=u*S+l;for(let C=b;C<w;C++){let $=-2*u*c*p[C]*m[v]/S;v===C&&($+=Math.pow(S,-c)),$*=d[v],g[C]+=$}}return n.makeTensorInfo(o.shape,i.dtype,g)}const LLe={kernelName:i2,backendName:"cpu",kernelFunc:FLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HH(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reductionIndices:s,keepDims:o}=r,a=n;let l=i.shape;const u=l.length,c=Me(s,l);let f=c;const h=Nt(f,u);let d=a.data.get(i.dataId).values;if(h!=null){const b=new Array(u);for(let w=0;w<b.length;w++)b[w]=l[h[w]];d=rN(d,l,i.dtype,h,b),f=Vt(f.length,u),l=b}be(i,"max"),kn("max",f,u);const[p,m]=yn(l,f),g=J(m),y=uH(d,g,p,i.dtype),v=a.write(y,p,i.dtype);let x=p;return o&&(x=Yt(p,c)),{dataId:v,shape:x,dtype:i.dtype}}const BLe={kernelName:Ux,backendName:"cpu",kernelFunc:HH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;be(i,"maxPool");const{filterSize:s,strides:o,pad:a,dimRoundingMode:l}=r,u=1;E(Mn(o,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=Ii(i.shape,s,o,u,a,l);let f;if(c.filterWidth===1&&c.filterHeight===1&&et(c.inShape,c.outShape))f=Ps({inputs:{x:i},backend:n});else{const h=n.data.get(i.dataId).values,d=Se(i.shape),p=oN(h,i.shape,i.dtype,d,c,"max");f=n.makeTensorInfo(c.outShape,i.dtype,p.values)}return f}const zLe={kernelName:Gx,backendName:"cpu",kernelFunc:jLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:s,strides:o,pad:a,dimRoundingMode:l,dataFormat:u}=r;be(i,"maxPool3d");const c=bo(i.shape,s,o,1,a,l,u),f=n.data.get(i.dataId).values,h=VH(f,i.shape,i.dtype,Se(i.shape),c,"max");return n.makeTensorInfo(h.shape,"float32",h.values)}const WLe={kernelName:Hx,backendName:"cpu",kernelFunc:VLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ULe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,{filterSize:o,strides:a,pad:l,dimRoundingMode:u}=r;be([i,s],"maxPool3DGrad");const c=bo(s.shape,o,a,1,l,u),f=n.bufferSync(s),h=PMe(f,c),d=c.strideDepth,p=c.strideHeight,m=c.strideWidth,g=c.dilationDepth,y=c.dilationHeight,v=c.dilationWidth,x=c.effectiveFilterDepth,b=c.effectiveFilterHeight,w=c.effectiveFilterWidth,S=x-1-c.padInfo.front,C=w-1-c.padInfo.left,$=b-1-c.padInfo.top,k=Re(s.shape,"float32"),I=n.bufferSync(i);for(let T=0;T<c.batchSize;++T)for(let A=0;A<c.inChannels;++A)for(let _=0;_<c.inDepth;++_)for(let D=0;D<c.inHeight;++D)for(let P=0;P<c.inWidth;++P){const R=_-S,F=D-$,O=P-C;let M=0;for(let V=0;V<x;V+=g){const q=(R+V)/d;if(!(q<0||q>=c.outDepth||Math.floor(q)!==q))for(let K=0;K<b;K+=y){const Z=(F+K)/p;if(!(Z<0||Z>=c.outHeight||Math.floor(Z)!==Z))for(let re=0;re<w;re+=v){const ie=(O+re)/m;if(ie<0||ie>=c.outWidth||Math.floor(ie)!==ie)continue;const le=x*b*w-1-h.get(T,q,Z,ie,A),ge=V*b*w+K*w+re,ye=le===ge?1:0;if(ye===0)continue;const ne=I.get(T,q,Z,ie,A);M+=ne*ye}}}k.set(M,T,_,D,P,A)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const GLe={kernelName:o2,backendName:"cpu",kernelFunc:ULe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HLe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s,output:o}=e,a=s;be([s,o],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:f}=r,h=Ii(a.shape,l,u,1,c,f),d=n.data.get(a.dataId).values,p=Re(h.outShape,a.dtype,zH(d,a.shape,a.dtype,h).values),m=h.strideHeight,g=h.strideWidth,y=h.dilationHeight,v=h.dilationWidth,x=h.effectiveFilterHeight,b=h.effectiveFilterWidth,w=b-1-h.padInfo.left,S=x-1-h.padInfo.top,C=Re(a.shape,"float32"),$=n.data.get(i.dataId).values,k=Re(i.shape,"float32",$);for(let I=0;I<h.batchSize;++I)for(let T=0;T<h.inChannels;++T)for(let A=0;A<h.inHeight;++A)for(let _=0;_<h.inWidth;++_){const D=A-S,P=_-w;let R=0;for(let F=0;F<x;F+=y){const O=(D+F)/m;if(!(O<0||O>=h.outHeight||Math.floor(O)!==O))for(let M=0;M<b;M+=v){const V=(P+M)/g;if(V<0||V>=h.outWidth||Math.floor(V)!==V)continue;const q=x*b-1-p.get(I,O,V,T),K=F*b+M,Z=q===K?1:0;if(Z===0)continue;const re=k.get(I,O,V,T);R+=re*Z}}C.set(R,I,A,_,T)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}const KLe={kernelName:s2,backendName:"cpu",kernelFunc:HLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qLe(t,e,n,r,i){const s=Se(e),o=oN(t,e,n,s,i,"max"),a=zH(t,e,n,i,!0,r);return[o.values,a.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XLe={kernelName:pW,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:i,strides:s,pad:o,includeBatchInIndex:a}=e,l=n;be(r,"MaxPoolWithArgmax");const u=l.data.get(r.dataId).values,c=Ii(r.shape,i,s,[1,1],o),[f,h]=qLe(u,r.shape,r.dtype,a,c),d=l.write(f,c.outShape,r.dtype),p=l.write(h,c.outShape,r.dtype);return[{dataId:d,shape:c.outShape,dtype:r.dtype},{dataId:p,shape:c.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r,a=Me(s,i.shape),u=yn(i.shape,a)[1],c=J(u),f=[],h=n.makeTensorInfo([],"float32",new Float32Array([c]));f.push(h);const d=ha({inputs:{x:i},backend:n,attrs:{dtype:"float32"}});f.push(d);const p=aN({inputs:{a:d,b:h},backend:n});f.push(p);const m=Am({inputs:{x:p},backend:n,attrs:{axis:s,keepDims:o}});return f.forEach(g=>n.disposeIntermediateTensorInfo(g)),m}const ZLe={kernelName:Kx,backendName:"cpu",kernelFunc:YLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r;be(i,"min");const a=Me(s,i.shape);let l=a;const u=Nt(l,i.shape.length);let c=i;u!=null&&(c=hr({inputs:{x:i},backend:n,attrs:{perm:u}}),l=Vt(l.length,i.shape.length)),kn("min",l,c.shape.length);const[f,h]=yn(c.shape,l),d=J(h),p=Dn(J(f),c.dtype),m=n.data.get(c.dataId).values;for(let y=0;y<p.length;++y){const v=y*d;let x=m[v];for(let b=0;b<d;++b){const w=m[v+b];(Number.isNaN(w)||w<x)&&(x=w)}p[y]=x}u!=null&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(f,c.dtype,p);if(o){const y=Yt(f,a),v=dt({inputs:{x:g},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(g),v}return g}const JLe={kernelName:qx,backendName:"cpu",kernelFunc:QLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:s,mode:o}=r;be(i,"mirrorPad");const a=s.map((x,b)=>x[0]+i.shape[b]+x[1]),l=s.map(x=>x[0]),u=s.map((x,b)=>x[0]+i.shape[b]),c=o==="reflect"?0:1,f=n.data.get(i.dataId).values,h=i.shape.length,d=Se(i.shape),p=J(a),m=a.length,g=Se(a),y=_n(i.dtype,p);for(let x=0;x<p;x++){let b=hf(x,m,g);for(let S=0;S<m;S++)b[S]<l[S]?b[S]=l[S]*2-b[S]-c:b[S]>=u[S]&&(b[S]=(u[S]-1)*2-b[S]+c);b=b.map((S,C)=>S-l[C]);const w=Ss(b,h,d);y[x]=f[w]}return{dataId:n.write(y,a,i.dtype),shape:a,dtype:i.dtype}}const t3e={kernelName:Xx,backendName:"cpu",kernelFunc:e3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n3e=Ut((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),r3e=ln(Kp,n3e),i3e={kernelName:Kp,backendName:"cpu",kernelFunc:r3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KH(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{dim:s}=r,o=i.shape.length;let a=s;if(a===-1&&(a=o-1),a!==o-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${o} and dim was ${a}`);const l=Me([a],i.shape),u=HH({inputs:{x:i},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),c=Yt(u.shape,l),f=dt({inputs:{x:u},backend:n,attrs:{shape:c}}),h=sN({inputs:{a:i,b:f},backend:n}),d=Z5({inputs:{x:h},backend:n}),p=Am({inputs:{x:d},backend:n,attrs:{axis:l,keepDims:!1}}),m=dt({inputs:{x:p},backend:n,attrs:{shape:c}}),g=aN({inputs:{a:d,b:m},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}const s3e={kernelName:db,backendName:"cpu",kernelFunc:KH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o3e(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{numSamples:s,seed:o,normalized:a}=r;be(i,"multinomial");const l=a?i:KH({inputs:{logits:i},backend:n,attrs:{dim:-1}}),u=l.shape[0],c=l.shape[1],f=n.data.get(l.dataId).values,h=[u,s],d=Dn(J(h),"int32");for(let p=0;p<u;++p){const m=p*c,g=new Float32Array(c-1);g[0]=f[m];for(let x=1;x<g.length;++x)g[x]=g[x-1]+f[m+x];const y=H2.alea(o.toString()),v=p*s;for(let x=0;x<s;++x){const b=y();d[v+x]=g.length;for(let w=0;w<g.length;w++)if(b<g[w]){d[v+x]=w;break}}}return a||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(h,"int32",d)}const a3e={kernelName:mW,backendName:"cpu",kernelFunc:o3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l3e=tE;function u3e(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l}=r;be(i,"NonMaxSuppression");const u=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values,{selectedIndices:f}=l3e(u,c,o,a,l);return n.makeTensorInfo([f.length],"int32",new Int32Array(f))}const c3e={kernelName:a2,backendName:"cpu",kernelFunc:u3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f3e=nE;function h3e(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:u}=r;be(i,"NonMaxSuppressionPadded");const c=n.data.get(i.dataId).values,f=n.data.get(s.dataId).values,{selectedIndices:h,validOutputs:d}=f3e(c,f,o,a,l,u);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([d]))]}const d3e={kernelName:l2,backendName:"cpu",kernelFunc:h3e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p3e=rE;function m3e(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,softNmsSigma:u}=r;be(i,"NonMaxSuppressionWithScore");const c=n.data.get(i.dataId).values,f=n.data.get(s.dataId).values,h=o,d=a,p=l,m=u,{selectedIndices:g,selectedScores:y}=p3e(c,f,h,d,p,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}const g3e={kernelName:u2,backendName:"cpu",kernelFunc:m3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y3e(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i}=e,{dtype:s,depth:o,onValue:a,offValue:l}=r;be(i,"oneHot");const u=J(i.shape),c=new Float32Array(u*o);c.fill(l);const f=n.data.get(i.dataId).values;for(let h=0;h<u;++h)f[h]>=0&&f[h]<o&&(c[h*o+f[h]]=a);return n.makeTensorInfo([...i.shape,o],s,c)}const v3e={kernelName:Jx,backendName:"cpu",kernelFunc:y3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t0(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const i=Rl({inputs:{input:r},backend:n}),s=t0({inputs:{x:i},backend:n}),o=jc({inputs:{input:r},backend:n}),a=t0({inputs:{x:o},backend:n}),l=xr({inputs:{real:s,imag:a},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return lN({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const x3e={kernelName:gb,backendName:"cpu",kernelFunc:t0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qH(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const i=Rl({inputs:{input:r},backend:n}),s=qH({inputs:{x:i},backend:n}),o=jc({inputs:{input:r},backend:n}),a=t0({inputs:{x:o},backend:n}),l=xr({inputs:{real:s,imag:a},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return lN({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const b3e={kernelName:Qx,backendName:"cpu",kernelFunc:qH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XH(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r;if(e.length===1)return e0({inputs:{input:e[0]},backend:n,attrs:{dim:i}});const s=e[0].shape,o=e[0].dtype;e.forEach(c=>{AT(s,c.shape,"All tensors passed to stack must have matching shapes"),E(o===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(c=>{const f=e0({inputs:{input:c},backend:n,attrs:{dim:i}});return a.push(f),f}),u=zc({inputs:l,backend:n,attrs:{axis:i}});return a.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const w3e={kernelName:eb,backendName:"cpu",kernelFunc:XH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:s,constantValue:o}=r;be(i,"pad");const a=s.map((v,x)=>v[0]+i.shape[x]+v[1]),l=s.map(v=>v[0]),u=n.data.get(i.dataId).values,c=J(i.shape),f=i.shape.length,h=Se(i.shape),d=J(a),p=a.length,m=Se(a),g=_n(i.dtype,d);o!==0&&g.fill(o);for(let v=0;v<c;v++){const b=hf(v,f,h).map((S,C)=>S+l[C]),w=Ss(b,p,m);g[w]=u[v]}return{dataId:n.write(g,a,i.dtype),shape:a,dtype:i.dtype}}const YH={kernelName:tb,backendName:"cpu",kernelFunc:S3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C3e=Ut((t,e)=>Math.pow(t,e)),$3e=ln(Xp,C3e),k3e={kernelName:Xp,backendName:"cpu",kernelFunc:$3e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I3e(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:i,paramsDenseValues:s,indices:o}=e,a=i.map(g=>n.data.get(g.dataId).values),l=i.map(g=>g.shape),u=n.data.get(s.dataId).values,c=n.data.get(o.dataId).values,[f,h,d]=mH(a,l,u,s.shape,s.dtype,c,o.shape),p=f.map(g=>n.makeTensorInfo([g.length],"int32",g)),m=n.makeTensorInfo(d,s.dtype,h);return p.concat([m])}const T3e={kernelName:gW,backendName:"cpu",kernelFunc:I3e};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E3e(t){const{inputs:e,backend:n}=t,{starts:r,limits:i,deltas:s}=e,o=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,[u,c]=gH(o,r.shape,r.dtype,a,i.shape,l,s.shape),f=n.makeTensorInfo([u.length],"int32",u),h=n.makeTensorInfo([c.length],r.dtype,c);return[f,h]}const N3e={kernelName:yW,backendName:"cpu",kernelFunc:E3e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A3e(t){const{inputs:e,backend:n,attrs:r}=t,{shape:i,values:s,defaultValue:o,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=r,u=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values,f=n.data.get(o.dataId).values,h=a.map(g=>n.data.get(g.dataId).values),d=a.map(g=>g.shape),[p,m]=yH(u,i.shape,c,s.shape,s.dtype,f,o.shape,h,d,l);return n.makeTensorInfo(p,s.dtype,m)}const O3e={kernelName:vW,backendName:"cpu",kernelFunc:A3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P3e(t){const{backend:e,attrs:n}=t,{start:r,stop:i,dtype:s,step:o}=n,a=vH(r,i,o,s);return e.makeTensorInfo([a.length],s,a)}const _3e={kernelName:c2,backendName:"cpu",kernelFunc:P3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D3e=rt(Yp,t=>1/t),R3e={kernelName:Yp,backendName:"cpu",kernelFunc:D3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M3e(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:s,halfPixelCenters:o,size:a}=r;be(i,"resizeBilinear");const l=Se(i.shape),[u,c]=a,[f,h,d,p]=i.shape,m=n.data.get(i.dataId).values,g=new Float32Array(J([f,u,c,p])),y=[s&&u>1?h-1:h,s&&c>1?d-1:d],v=[s&&u>1?u-1:u,s&&c>1?c-1:c];let x=0;const b=y[0]/v[0],w=y[1]/v[1];for(let S=0;S<f;S++)for(let C=0;C<u;C++){let $;o?$=b*(C+.5)-.5:$=b*C;const k=Math.max(0,Math.floor($)),I=$-k,T=Math.min(h-1,Math.ceil($)),A=S*l[0]+k*l[1],_=S*l[0]+T*l[1];for(let D=0;D<c;D++){let P;o?P=w*(D+.5)-.5:P=w*D;const R=Math.max(0,Math.floor(P)),F=P-R,O=Math.min(d-1,Math.ceil(P)),M=A+R*l[2],V=_+R*l[2],q=A+O*l[2],K=_+O*l[2];for(let Z=0;Z<p;Z++){const re=m[M+Z],ie=m[V+Z],le=m[q+Z],ge=m[K+Z],ye=re+(le-re)*F,ne=ie+(ge-ie)*F,ue=ye+(ne-ye)*I;g[x++]=ue}}}return n.makeTensorInfo([f,u,c,p],"float32",g)}const F3e={kernelName:ob,backendName:"cpu",kernelFunc:M3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L3e(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:s}=e,{alignCorners:o}=r;be([s,i],"resizeBilinearGrad");const a=Se(i.shape),[l,u,c,f]=i.shape,[,h,d]=s.shape,p=new Float32Array(l*u*c*f),m=[o&&h>1?u-1:u,o&&d>1?c-1:c],g=[o&&h>1?h-1:h,o&&d>1?d-1:d],y=m[0]/g[0],v=m[1]/g[1],x=n.data.get(s.dataId).values;let b=0;for(let w=0;w<l;w++){const S=w*a[0];for(let C=0;C<h;C++){const $=C*y,k=Math.floor($),I=Math.min(Math.ceil($),u-1),T=S+k*a[1],A=S+I*a[1],_=$-k,D=1-_;for(let P=0;P<d;P++){const R=P*v,F=Math.floor(R),O=Math.min(Math.ceil(R),c-1),M=R-F,V=1-M,q=T+F*a[2],K=T+O*a[2],Z=A+F*a[2],re=A+O*a[2],ie=D*V,le=D*M,ge=_*V,ye=_*M;for(let ne=0;ne<f;ne++){const ue=x[b++];p[q+ne]+=ue*ie,p[K+ne]+=ue*le,p[Z+ne]+=ue*ge,p[re+ne]+=ue*ye}}}}return n.makeTensorInfo([l,c,u,f],"float32",p)}const B3e={kernelName:d2,backendName:"cpu",kernelFunc:L3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j3e(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:s,halfPixelCenters:o,size:a}=r;be(i,"resizeNearestNeighbor");const l=Se(i.shape),[u,c]=a,[f,h,d,p]=i.shape,m=n.data.get(i.dataId).values,g=new Float32Array(f*u*c*p),y=[s&&u>1?h-1:h,s&&c>1?d-1:d],v=[s&&u>1?u-1:u,s&&c>1?c-1:c],x=y[0]/v[0],b=y[1]/v[1];let w=0;for(let S=0;S<f;S++){const C=S*l[0];for(let $=0;$<u;$++){const k=o?x*($+.5):x*$;let I=Math.min(h-1,s?Math.round(k):Math.floor(k));o&&(I=Math.max(0,I));const T=C+I*l[1];for(let A=0;A<c;A++){const _=o?b*(A+.5):b*A;let D=Math.min(d-1,s?Math.round(_):Math.floor(_));o&&(D=Math.max(0,D));const P=T+D*l[2];for(let R=0;R<p;R++){const F=m[P+R];g[w++]=F}}}}return n.makeTensorInfo([f,u,c,p],i.dtype,g)}const z3e={kernelName:sb,backendName:"cpu",kernelFunc:j3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V3e(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:s}=e,{alignCorners:o}=r;be([s,i],"resizeNearestNeighborGrad");const a=Se(i.shape),l=Se(s.shape),[u,c,f,h]=i.shape,[,d,p]=s.shape,m=new Float32Array(u*c*f*h),g=n.data.get(s.dataId).values,y=[o&&d>1?c-1:c,o&&p>1?f-1:f],v=[o&&d>1?d-1:d,o&&p>1?p-1:p],x=y[0]/v[0],b=y[1]/v[1],w=1/x,S=1/b,C=Math.ceil(w)*2+2,$=Math.ceil(S)*2+2;for(let k=0;k<u;k++){const I=k*a[0];for(let T=0;T<c;T++){const A=I+T*a[1],_=Math.floor(T*w),D=Math.floor(_-C/2);for(let P=0;P<f;P++){const R=A+P*a[2],F=Math.floor(P*S),O=Math.floor(F-$/2);for(let M=0;M<h;M++){let V=0;for(let q=0;q<C;q++){const K=q+D;if(K<0||K>=d)continue;const Z=I+K*l[1],re=K*x,ie=Math.min(c-1,o?Math.round(re):Math.floor(re));if(T===ie)for(let le=0;le<$;le++){const ge=le+O;if(ge<0||ge>=p)continue;const ye=Z+ge*l[2],ne=ge*b,ue=Math.min(f-1,o?Math.round(ne):Math.floor(ne));P===ue&&(V+=g[ye+M])}}m[R+M]=V}}}}return n.makeTensorInfo(i.shape,i.dtype,m)}const W3e={kernelName:h2,backendName:"cpu",kernelFunc:V3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dims:s}=r;be(i,"reverse");const o=i.shape.length,a=Me(s,i.shape);if(o===0)return Ps({inputs:{x:i},backend:n});const l=new Sn(i.shape,i.dtype),u=n.bufferSync(i);for(let c=0;c<l.size;c++){const f=l.indexToLoc(c),h=f.slice();a.forEach(d=>h[d]=i.shape[d]-1-h[d]),l.set(u.get(...h),...f)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const G3e={kernelName:ab,backendName:"cpu",kernelFunc:U3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H3e={kernelName:b2,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:i,fillValue:s,center:o}=e,a=n,l=_n(r.dtype,J(r.shape)),[u,c,f,h]=r.shape,[d,p]=pE(o,c,f),m=255,g=Math.sin(i),y=Math.cos(i),v=a.data.get(r.dataId).values;for(let b=0;b<u;b++){const w=b*f*c*h;for(let S=0;S<c;S++){const C=S*(f*h);for(let $=0;$<f;$++){const k=$*h;for(let I=0;I<h;I++){const T=[u,S,$,I],A=T[2],_=T[1];let D=(A-d)*y-(_-p)*g,P=(A-d)*g+(_-p)*y;D=Math.round(D+d),P=Math.round(P+p);let R=s;if(typeof s!="number"&&(I===3?R=m:R=s[I]),D>=0&&D<f&&P>=0&&P<c){const O=P*(f*h),M=D*h,V=w+O+M+I;R=v[V]}const F=w+C+k+I;l[F]=R}}}}return{dataId:a.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K3e=rt(Jp,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),q3e={kernelName:Jp,backendName:"cpu",kernelFunc:K3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X3e(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i,updates:s}=e,{shape:o}=r,{sliceRank:a,numUpdates:l,sliceSize:u,strides:c,outputSize:f}=Zl(s,i,o),h=!0,d=n.bufferSync(i),p=n.bufferSync(s),m=il(d,p,o,f,u,l,a,c,0,h);return n.makeTensorInfo(o,m.dtype,m.values)}const Y3e={kernelName:xW,backendName:"cpu",kernelFunc:X3e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z3e(t,e){let n=0,r=t.length,i=0;for(;n<r;)i=Math.floor((n+r)/2),t[i]<e?n=i+1:r=i;return r}function Q3e(t,e){let n=0,r=t.length,i=0;for(;n<r;)i=Math.floor((n+r)/2),t[i]<=e?n=i+1:r=i;return r}function J3e(t,e,n,r,i,s){const o=Lt("int32",n*i);for(let a=0;a<n;++a){const l=t.slice(a*r,(a+1)*r),u=a*i;for(let c=0;c<i;++c)o[u+c]=s==="left"?Z3e(l,e[c+u]):Q3e(l,e[c+u])}return o}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eBe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:i,values:s}=e,{side:o}=r,a=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,u=J3e(a,l,i.shape[0],i.shape[1],s.shape[1],o);return n.makeTensorInfo(s.shape,"int32",u)}const tBe={kernelName:wW,backendName:"cpu",kernelFunc:eBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nBe(t){const{inputs:e,backend:n}=t,{condition:r,t:i,e:s}=e;be([r,i,s],"select");const o=r.shape.length,a=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,c=Tr(i.dtype,s.dtype),f=Dn(J(i.shape),c);let h=0;const d=o===0||o>1||i.shape.length===1?1:J(i.shape.slice(1));for(let p=0;p<a.length;p++)for(let m=0;m<d;m++)a[p]===1?f[h++]=l[p]:f[h++]=u[p];return n.makeTensorInfo(i.shape,c,f)}const rBe={kernelName:lb,backendName:"cpu",kernelFunc:nBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iBe=Eb,sBe=Nb,oBe=rt(tm,t=>t>=0?sBe*t:iBe*(Math.exp(t)-1)),aBe={kernelName:tm,backendName:"cpu",kernelFunc:oBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lBe=rt(im,t=>t<0?-1:t>0?1:0),uBe={kernelName:im,backendName:"cpu",kernelFunc:lBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cBe=rt(nm,t=>Math.sin(t)),fBe={kernelName:nm,backendName:"cpu",kernelFunc:cBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hBe=rt(rm,t=>Math.sinh(t)),dBe={kernelName:rm,backendName:"cpu",kernelFunc:hBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pBe=11920928955078125e-23,KM=Math.log(pBe)+2,mBe=rt(om,t=>{const e=t>-KM,n=t<KM,r=Math.exp(t);let i;return n?i=r:e?i=t:i=Math.log(1+r),i}),gBe={kernelName:om,backendName:"cpu",kernelFunc:mBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yBe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:s,paddings:o}=r;be([i],"spaceToBatchND");const a=J(s),l=[[0,0]];l.push(...o);for(let S=1+s.length;S<i.shape.length;++S)l.push([0,0]);const u=YH.kernelFunc({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),c=xm(u.shape,s,a,!1),f=bm(c.length,s.length,!1),h=wm(u.shape,s,a,!1),m=dt({inputs:{x:u},backend:n,attrs:{shape:c}}),v=hr({inputs:{x:m},backend:n,attrs:{perm:f}}),w=dt({inputs:{x:v},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),w}const vBe={kernelName:fb,backendName:"cpu",kernelFunc:yBe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xBe(t){const{inputs:e,backend:n}=t,{indices:r,values:i,denseShape:s,defaultValue:o}=e;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${s.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${i.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const a=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,c=n.data.get(o.dataId).values[0],[f,h,d,p,m]=SH(a,r.shape,r.dtype,l,i.dtype,u,c);return[n.makeTensorInfo(h,r.dtype,f),n.makeTensorInfo([h[0]],i.dtype,d),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(g=>Number(g)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}const bBe={kernelName:SW,backendName:"cpu",kernelFunc:xBe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wBe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:i,newShape:s}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${i.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);const o=Array.from(n.data.get(i.dataId).values),a=n.data.get(r.dataId).values,l=Array.from(n.data.get(s.dataId).values),[u,c,f]=CH(a,r.shape,r.dtype,o,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([f.length],s.dtype,new Int32Array(f))]}const SBe={kernelName:CW,backendName:"cpu",kernelFunc:wBe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CBe(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${s.shape}`);if(i.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,[u,c]=iN(o,r.shape,r.dtype,a,l,!0);return n.makeTensorInfo(c,r.dtype,u)}const $Be={kernelName:$W,backendName:"cpu",kernelFunc:CBe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kBe(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${s.shape}`);if(i.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,[u,c]=iN(o,r.shape,r.dtype,a,l);return n.makeTensorInfo(c,r.dtype,u)}const IBe={kernelName:kW,backendName:"cpu",kernelFunc:kBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TBe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:i,sparseValues:s,defaultValue:o}=e,{outputShape:a}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:f,outputSize:h}=Zl(s,i,a),d=!1,p=n.bufferSync(i);let m;switch(s.dtype){case"bool":{const g=n.bufferSync(s),y=!!n.data.get(o.dataId).values[0];m=il(p,g,a,h,c,u,l,f,y,d);break}case"float32":{const g=n.bufferSync(s),y=n.data.get(o.dataId).values[0];m=il(p,g,a,h,c,u,l,f,y,d);break}case"int32":{const g=n.bufferSync(s),y=n.data.get(o.dataId).values[0];m=il(p,g,a,h,c,u,l,f,y,d);break}case"string":{const g=n.bufferSync(s),y=aa(n.data.get(o.dataId).values[0]);m=il(p,g,a,h,c,u,l,f,y,d);break}default:throw new Error(`Unsupported type ${s.dtype}`)}return n.makeTensorInfo(a,m.dtype,m.values)}const EBe={kernelName:IW,backendName:"cpu",kernelFunc:TBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NBe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{numOrSizeSplits:s,axis:o}=r,a=Me(o,i.shape)[0],l=NE(i,s,a),u=new Array(i.shape.length).fill(0),c=i.shape.slice();return l.map(f=>{const h=[...c];h[a]=f;const d=Ml({inputs:{x:i},backend:n,attrs:{begin:u,size:h}});return u[a]+=f,d})}const ABe={kernelName:hb,backendName:"cpu",kernelFunc:NBe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OBe={kernelName:p2,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;be(n,"square");const i=r.data.get(n.dataId).values,s=new Float32Array(i.length);for(let a=0;a<i.length;++a){const l=i[a];s[a]=l*l}return{dataId:r.write(s,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PBe=rt(dm,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),_Be={kernelName:dm,backendName:"cpu",kernelFunc:PBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DBe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:s,end:o,strides:a,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:f,shrinkAxisMask:h}=r;be(i,"stridedSlice");const{finalShapeSparse:d,finalShape:p,isIdentity:m,sliceDim0:g,isSimpleSlice:y,begin:v,end:x,strides:b}=fE(i.shape,s,o,a,l,u,c,f,h);let w;if(m)w=dt({inputs:{x:i},backend:n,attrs:{shape:p}});else if(g||y){E(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);const S=lE(v,x,b),C=Ml({inputs:{x:i},backend:n,attrs:{begin:v,size:S}});w=dt({inputs:{x:C},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(C)}else{const S=n.bufferSync(i),C=IH(d,S,b,v);w=n.makeTensorInfo(p,C.dtype,C.values)}return w}const RBe={kernelName:g2,backendName:"cpu",kernelFunc:DBe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MBe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:i,nGramWidths:s,leftPad:o,rightPad:a,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:f}=e,h=n.data.get(c.dataId).values,d=n.data.get(f.dataId).values,[p,m]=TH(h,d,i,s,o,a,l,u);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(f.shape,"int32",m)]}const FBe={kernelName:TW,backendName:"cpu",kernelFunc:MBe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LBe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:i}=r,{input:s,delimiter:o}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const a=n.data.get(s.dataId).values,l=n.data.get(o.dataId).values[0],[u,c,f]=EH(a,l,i),h=c.length;return[n.makeTensorInfo([h,2],"int32",u),n.makeTensorInfo([h],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(f))]}const BBe={kernelName:EW,backendName:"cpu",kernelFunc:LBe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jBe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:i}=r,{input:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const o=n.data.get(s.dataId).values,a=NH(o,i);return n.makeTensorInfo(s.shape,"int32",a)}const zBe={kernelName:NW,backendName:"cpu",kernelFunc:jBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VBe=rt(cm,t=>Math.tan(t)),WBe={kernelName:cm,backendName:"cpu",kernelFunc:VBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UBe=rt(fm,t=>Math.tanh(t)),GBe={kernelName:fm,backendName:"cpu",kernelFunc:UBe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HBe(t){const{inputs:e,backend:n}=t,{tensor:r,indices:i,updates:s}=e,{sliceRank:o,numUpdates:a,sliceSize:l,strides:u,outputSize:c}=Zl(s,i,r.shape),f=!1,h=n.bufferSync(i),d=n.bufferSync(s),p=n.bufferSync(r),m=il(h,d,r.shape,c,l,a,o,u,p,f);return n.makeTensorInfo(r.shape,m.dtype,m.values)}const KBe={kernelName:bW,backendName:"cpu",kernelFunc:HBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qBe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reps:s}=r;be(i,"tile");const o=OH(n.bufferSync(i),s);return n.makeTensorInfo(o.shape,o.dtype,o.values)}const XBe={kernelName:hm,backendName:"cpu",kernelFunc:qBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YBe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{k:s,sorted:o}=r;be(i,"topk");const a=n.data.get(i.dataId).values,[l,u]=_H(a,i.shape,i.dtype,s,o);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}const ZBe={kernelName:y2,backendName:"cpu",kernelFunc:YBe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QBe(t){const{inputs:e,attrs:n,backend:r}=t,{image:i,transforms:s}=e,{interpolation:o,fillMode:a,fillValue:l,outputShape:u}=n,[c,f,h,d]=i.shape,[p,m]=u??[f,h],g=[c,p,m,d],y=Se(i.shape),v=y[0],x=y[1],b=y[2],w=Se(g),S=w[0],C=w[1],$=w[2],k=_n(i.dtype,J(g));k.fill(l);const I=r.data.get(i.dataId).values,T=r.data.get(s.dataId).values;for(let _=0;_<c;++_){const D=s.shape[0]===1?T:T.subarray(_*8,_*8+8);for(let P=0;P<p;++P)for(let R=0;R<m;++R)for(let F=0;F<d;++F){let O;const M=D[6]*R+D[7]*P+1;if(M===0)continue;const V=(D[0]*R+D[1]*P+D[2])/M,q=(D[3]*R+D[4]*P+D[5])/M,K=qM(V,h,a),Z=qM(q,f,a);switch(o){case"nearest":O=ije(I,f,h,v,x,b,_,Z,K,F,l);break;case"bilinear":O=sje(I,f,h,v,x,b,_,Z,K,F,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${o}`)}const re=_*S+P*C+R*$+F;k[re]=O}return r.makeTensorInfo(g,i.dtype,k)}return{dataId:r.write(k,g,i.dtype),shape:i.shape,dtype:i.dtype}}const JBe={kernelName:v2,backendName:"cpu",kernelFunc:QBe};function qM(t,e,n){switch(n){case"reflect":return eje(t,e);case"wrap":return tje(t,e);case"nearest":return rje(t,e);case"constant":default:return nje(t)}}function eje(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{const r=2*e;n-=r*Math.trunc(n/r),n>=e&&(n=r-n-1)}return $l(0,n,e-1)}function tje(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{const r=e-1;n-=e*Math.trunc(n/r)}return $l(0,n,e-1)}function nje(t,e){return t}function rje(t,e){return $l(0,t,e-1)}function hh(t,e,n,r,i,s,o,a,l,u,c){const f=o*r+a*i+l*s+u;return 0<=a&&a<e&&0<=l&&l<n?t[f]:c}function ije(t,e,n,r,i,s,o,a,l,u,c){const f=Math.round(a),h=Math.round(l);return hh(t,e,n,r,i,s,o,f,h,u,c)}function sje(t,e,n,r,i,s,o,a,l,u,c){const f=Math.floor(a),h=Math.floor(l),d=f+1,p=h+1,m=(p-l)*hh(t,e,n,r,i,s,o,f,h,u,c)+(l-h)*hh(t,e,n,r,i,s,o,f,p,u,c),g=(p-l)*hh(t,e,n,r,i,s,o,d,h,u,c)+(l-h)*hh(t,e,n,r,i,s,o,d,p,u,c);return(d-a)*m+(a-f)*g}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oje(t){const{inputs:e,attrs:n,backend:r}=t,{axis:i}=n,{x:s}=e;be(s,"unique");const o=r.data.get(s.dataId).values,{outputValues:a,outputShape:l,indices:u}=DH(o,i,s.shape,s.dtype);return[r.makeTensorInfo(l,s.dtype,a),r.makeTensorInfo([u.length],"int32",u)]}const aje={kernelName:x2,backendName:"cpu",kernelFunc:oje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lje(t){const{inputs:e,backend:n,attrs:r}=t,{value:i}=e;let{axis:s}=r;s<0&&(s+=i.shape.length);const o=i.shape.length,a=i.shape[s],l=new Array(o-1);let u=0;for(let d=0;d<o;d++)d!==s&&(l[u++]=i.shape[d]);const c=new Array(o).fill(0),f=i.shape.slice();f[s]=1;const h=new Array(a);for(let d=0;d<h.length;d++){c[s]=d;const p=Ml({inputs:{x:i},backend:n,attrs:{begin:c,size:f}});h[d]=dt({inputs:{x:p},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(p)}return h}const uje={kernelName:pb,backendName:"cpu",kernelFunc:lje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cje(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,segmentIds:s}=e,{numSegments:o}=r;be(i,"unsortedSegmentSum");const a=i.shape.length,l=s.shape.length,u=[],c=[],f=a-l;let h=s;for(let p=0;p<f;++p){const m=e0({inputs:{input:h},backend:n,attrs:{dim:p+1}});h=m,c.push(m)}for(let p=0;p<o;++p){const m=$a(p,"int32"),g=n.makeTensorInfo([],"int32",m),y=X5({inputs:{a:g,b:h},backend:n}),v=ha({inputs:{x:y},backend:n,attrs:{dtype:"float32"}}),x=zb({inputs:{a:v,b:i},backend:n}),b=Am({inputs:{x},backend:n,attrs:{axis:0,keepDims:!1}});u.push(b),c.push(g),c.push(y),c.push(v),c.push(x),c.push(b)}const d=XH({inputs:u,backend:n,attrs:{axis:0}});return c.forEach(p=>n.disposeIntermediateTensorInfo(p)),d}const fje={kernelName:mb,backendName:"cpu",kernelFunc:cje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hje=[oMe,jDe,lMe,cMe,HDe,hMe,pMe,gMe,vMe,bMe,SMe,$Me,IMe,NMe,OMe,DMe,MMe,LMe,jMe,iMe,VMe,UMe,HMe,qDe,qMe,UDe,YDe,YMe,zDe,QMe,eFe,tFe,rFe,sFe,aFe,uFe,fFe,dFe,mFe,yFe,xFe,wFe,CFe,kFe,IFe,EFe,AFe,PFe,_Fe,DFe,RFe,FFe,jFe,ZRe,VFe,ZDe,YFe,QDe,ZFe,eRe,rLe,iLe,oLe,nRe,iRe,lLe,cLe,hLe,pLe,oRe,lRe,VDe,gLe,JMe,vLe,bLe,SLe,QRe,cRe,hRe,$Le,pRe,ILe,NLe,OLe,DLe,MLe,LLe,BLe,gRe,zLe,WLe,GLe,KLe,XLe,ZLe,JLe,vRe,t3e,i3e,a3e,bRe,SRe,c3e,d3e,g3e,$Re,v3e,b3e,w3e,YH,k3e,eMe,TRe,T3e,N3e,O3e,_3e,WDe,V$,R3e,tMe,nMe,rMe,F3e,B3e,z3e,W3e,G3e,H3e,q3e,RRe,Y3e,tBe,rBe,aBe,FRe,uBe,fBe,dBe,LRe,s3e,gBe,vBe,bBe,SBe,$Be,IBe,EBe,ABe,zRe,OBe,WRe,GRe,_Be,RBe,FBe,BBe,zBe,XRe,LFe,WBe,GBe,KBe,XBe,ZBe,JBe,kRe,aje,uje,fje,x3e];for(const t of hje)OW(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ka={},Cg={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function dje(t,e){Ka[t]=e}function ns(t,e){if(!(t in Ka)||e!=null){const r=mje(t,e);if(r!==null)Ka[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=Ka[t];return n==null||n.isContextLost()?(delete Ka[t],ns(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),Ka[t])}function pje(t){if(!Y().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function mje(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??pje(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete Ka[t]},!1),Y().getBool("SOFTWARE_WEBGL_ENABLED")&&(Cg.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",Cg)||n.getContext("experimental-webgl",Cg):n.getContext("webgl2",Cg)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Kd;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(Kd||(Kd={}));var Br;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(Br||(Br={}));var bn;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(bn||(bn={}));function Om(t,e){return[e,t]}function gje(t,e){return t*e}function $g(t){const e=J(t),n=Math.ceil(e/4);return c$(n)}function bf(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function yje(t,e){const[n,r]=bf(t,e);return n*r*4}function uN(t,e){const n=t;let r,i,s,o,a,l,u,c,f,h;return Y().getNumber("WEBGL_VERSION")===2?(r=n.R32F,i=n.R16F,s=n.RGBA16F,o=n.RGBA32F,a=n.RED,u=4,c=1,f=n.HALF_FLOAT,h=n.FLOAT,l=n.RGBA8):(r=t.RGBA,i=t.RGBA,s=t.RGBA,o=n.RGBA,a=t.RGBA,u=4,c=4,f=e!=null?e.HALF_FLOAT_OES:null,h=t.FLOAT,l=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:i,internalFormatPackedHalfFloat:s,internalFormatPackedFloat:o,textureFormatFloat:a,downloadTextureFormat:l,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:f,textureTypeFloat:h}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pe(t,e){const n=e();return Y().getBool("DEBUG")&&vje(t),n}function vje(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+Sje(t,e))}const xje=596e-10,bje=65504;function wje(t){return!!(Y().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||xje<Math.abs(t)&&Math.abs(t)<bje)}function Sje(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function kg(t,e){return So(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function Cje(t,e){const n=So(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(pe(t,()=>t.shaderSource(n,e)),pe(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function $je(t,e){const n=So(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(pe(t,()=>t.shaderSource(n,e)),pe(t,()=>t.compileShader(n)),Y().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw ZH(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const kje=/ERROR: [0-9]+:([0-9]+):/g;function ZH(t,e){const n=kje.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],i=t.split(`
`),s=i.length.toString().length+2,o=i.map((f,h)=>Ku((h+1).toString(),s)+f);let a=0;for(let f=0;f<o.length;f++)a=Math.max(o[f].length,a);const l=o.slice(0,r-1),u=o.slice(r-1,r),c=o.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${Ku(u[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(c.join(`
`))}function Ije(t){return So(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function Tje(t,e){if(pe(t,()=>t.linkProgram(e)),!Y().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function ww(t,e){if(pe(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function Eje(t,e){const n=So(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return pe(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),pe(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function Nje(t,e){const n=So(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return pe(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),pe(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function Aje(t){return So(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function Oje(t,e){const n=Y().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,i=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+i+".")}}function Pje(t){return So(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function XM(t,e,n,r,i,s,o){const a=t.getAttribLocation(e,n);return a===-1?!1:(pe(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),pe(t,()=>t.vertexAttribPointer(a,i,t.FLOAT,!1,s,o)),pe(t,()=>t.enableVertexAttribArray(a)),!0)}function _je(t,e,n){Lje(t,n),pe(t,()=>t.activeTexture(t.TEXTURE0+n)),pe(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function Dje(t,e,n){return So(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function Rje(t,e,n){return t.getUniformLocation(e,n)}function Mje(t,e,n,r){pe(t,()=>_je(t,e,r)),pe(t,()=>t.uniform1i(n,r))}function Sw(t,e,n){pe(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),pe(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function YM(t,e){pe(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),pe(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function Ig(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Fje(t,e))}function Fje(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function So(t,e,n){const r=pe(t,()=>e());if(r==null)throw new Error(n);return r}function Lje(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const i=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${i}.`)}}function Vc(t,e=2){return J(t.slice(0,t.length-e))}function Wc(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function Tg(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[Vc(t),...Wc(t)]),e}function Bje(t,e=!1){let n=Y().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=Y().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&Y().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((a,l)=>l>=t.length-2?NT(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=Ca(t).newShape);let i=J(t),s=null;t.length<=1&&i<=n?s=[1,i]:t.length===2&&t[0]<=n&&t[1]<=n?s=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?s=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?s=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?s=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(s=[t[0],t[1]*t[2]*t[3]]);const o=s!=null&&Math.max(...s)>r&&Math.min(...s)<=(e?2:1)&&Math.min(...s)>0;if(s==null||o)if(e){const a=Vc(t);let l=2,u=2;t.length&&([l,u]=Wc(t)),i=a*(l/2)*(u/2),s=c$(i).map(c=>c*2)}else s=c$(i);return s}function Eg(t){return t%2===0}function n0(t,e){if(t=t.slice(-2),e=e.slice(-2),et(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t[t.length-1],r=e[e.length-1];if(n===r||Eg(n)&&Eg(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&Eg(t[0])&&Eg(e[0])}let Cw,$w;function jje(t){if(Cw==null){const e=ns(t);Cw=e.getParameter(e.MAX_TEXTURE_SIZE)}return Cw}function zje(t){if($w==null){const e=ns(t);$w=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,$w)}function Vje(t){if(t===0)return 0;let e;const n=ns(t);return mi(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:mi(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function mi(t,e){return t.getExtension(e)!=null}function ZM(t){try{if(ns(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function Wje(t){if(t===0)return!1;const e=ns(t);if(t===1){if(!mi(e,"OES_texture_float"))return!1}else if(!mi(e,"EXT_color_buffer_float"))return!1;return U$(e)}function Uje(t){if(t===0)return!1;const e=ns(t);if(t===1){if(!mi(e,"OES_texture_float")||!mi(e,"WEBGL_color_buffer_float"))return!1}else{if(mi(e,"EXT_color_buffer_float"))return U$(e);const r="EXT_color_buffer_half_float";if(mi(e,r)){const i=e.getExtension(r);return Gje(e,i)}return!1}return U$(e)}function U$(t){const e=uN(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const s=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,s),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(s),o}function Gje(t,e){const n=uN(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(o),a}function Hje(t){return t!==2?!1:ns(t).fenceSync!=null}function Pm(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&E(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const we=Y();we.registerFlag("HAS_WEBGL",()=>we.getNumber("WEBGL_VERSION")>0);we.registerFlag("WEBGL_VERSION",()=>ZM(2)?2:ZM(1)?1:0);we.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);we.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>we.get("WEBGL_VERSION")===2);we.registerFlag("WEBGL_CPU_FORWARD",()=>!0);we.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);we.registerFlag("WEBGL_PACK",()=>we.getBool("HAS_WEBGL"));we.registerFlag("WEBGL_PACK_NORMALIZATION",()=>we.getBool("WEBGL_PACK"));we.registerFlag("WEBGL_PACK_CLIP",()=>we.getBool("WEBGL_PACK"));we.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>we.getBool("WEBGL_PACK"));we.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>we.getBool("WEBGL_PACK"));we.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>we.getBool("WEBGL_PACK"));we.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>we.getBool("WEBGL_PACK"));we.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>we.getBool("WEBGL_PACK"));we.registerFlag("WEBGL_PACK_REDUCE",()=>we.getBool("WEBGL_PACK"));we.registerFlag("WEBGL_LAZILY_UNPACK",()=>we.getBool("WEBGL_PACK"));we.registerFlag("WEBGL_CONV_IM2COL",()=>we.getBool("WEBGL_PACK"));we.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>we.getBool("WEBGL_PACK"));we.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>jje(we.getNumber("WEBGL_VERSION")));we.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>zje(we.getNumber("WEBGL_VERSION")));we.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=we.getNumber("WEBGL_VERSION");return t===0?0:Vje(t)});we.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>we.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!qW());we.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>Wje(we.getNumber("WEBGL_VERSION")));we.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>we.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:we.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));we.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>Uje(we.getNumber("WEBGL_VERSION")));we.registerFlag("WEBGL_FENCE_API_ENABLED",()=>Hje(we.getNumber("WEBGL_VERSION")));we.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>we.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);we.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});we.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>qW()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});we.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);we.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);we.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);we.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);we.registerFlag("WEBGL_EXP_CONV",()=>!1);we.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>we.getBool("IS_TEST"));we.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);we.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);we.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);we.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nr(){let t,e,n,r,i,s,o,a,l,u;return Y().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",i="texture",s="outputColor",o="out vec4 outputColor;",a=Y().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",u=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",i="texture2D",s="gl_FragColor",o="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,u=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:i,output:s,defineOutput:o,defineSpecialNaN:a,defineSpecialInf:l,defineRound:u}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eu(t,e,n="index"){const r=Se(e);return r.map((i,s)=>{const o=`int ${t[s]} = ${n} / ${i}`,a=s===r.length-1?`int ${t[s+1]} = ${n} - ${t[s]} * ${i}`:`index -= ${t[s]} * ${i}`;return`${o}; ${a};`}).join("")}function Vb(t,e,n="index"){const r=Se(e);return r.map((i,s)=>{const o=`int ${t[s]} = ${n} / outShapeStrides[${s}]`,a=s===r.length-1?`int ${t[s+1]} = ${n} - ${t[s]} * outShapeStrides[${s}]`:`index -= ${t[s]} * outShapeStrides[${s}]`;return`${o}; ${a};`}).join("")}function Kje(t,e){const n=t.length,r=t.map(s=>`${e}[${s}]`),i=new Array(n-1);i[n-2]=r[n-1];for(let s=n-3;s>=0;--s)i[s]=`(${i[s+1]} * ${r[s+1]})`;return i}function qje(t,e,n="index"){const r=t.map((s,o)=>o),i=Kje(r,e);return i.map((s,o)=>{const a=`int ${t[o]} = ${n} / ${i[o]}`,l=o===i.length-1?`int ${t[o+1]} = ${n} - ${t[o]} * ${i[o]}`:`index -= ${t[o]} * ${i[o]}`;return`${a}; ${l};`}).join("")}function cN(t){const e=Se(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function fN(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const QH=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:JH}=FAe;function Xje(t,e,n){const r=[];if(t.forEach(d=>{const p=J(d.shapeInfo.logicalShape);if(d.shapeInfo.isUniform?r.push(`uniform float ${d.name}${p>1?`[${p}]`:""};`):(r.push(`uniform sampler2D ${d.name};`),r.push(`uniform int offset${d.name};`)),n.enableShapeUniforms){const{uniformShape:m}=hN(n.packedInputs,d.shapeInfo.logicalShape,d.shapeInfo.texShape);switch(m.length){case 1:r.push(`uniform int ${d.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${d.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${d.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${d.name}Shape;`);break}r.push(`uniform ivec2 ${d.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(d=>{r.push(`uniform ${d.type} ${d.name}${d.arrayIndex?`[${d.arrayIndex}]`:""};`)});const i=r.join(`
`),s=t.map(d=>Yje(d,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),o=e.texShape,a=nr(),l=Jje(a);let u,c,f=nze(a);return e.isPacked?(u=Zje(e.logicalShape,o,n.enableShapeUniforms),c=tze(a)):(u=Qje(e.logicalShape,o,n.enableShapeUniforms),c=eze(a)),n.packedInputs&&(f+=oze),[f,l,c,i,u,s,n.userCode].join(`
`)}function wf(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return vze(t,e);case 1:return bze(t,e);case 2:return Sze(t,e);case 3:return $ze(t,e);case 4:return Ize(t,e);case 5:return Tze(t);case 6:return Eze(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function e8(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return yze(t);case 1:return xze(t,e);case 2:return wze(t,e);case 3:return Cze(t,e);default:return kze(t,e)}}function Yje(t,e,n=!1,r){let i="";n?i+=e8(t,r):i+=wf(t,r);const s=t.shapeInfo.logicalShape,o=e.logicalShape;return s.length<=o.length&&(n?i+=Nze(t,e):i+=Aze(t,e)),i}function Zje(t,e,n){switch(t.length){case 0:return t8();case 1:return aze(t,e,n);case 2:return mze(t,e,n);case 3:return uze(t,e,n);default:return fze(t,e,n)}}function Qje(t,e,n){switch(t.length){case 0:return t8();case 1:return lze(t,e,n);case 2:return gze(t,e,n);case 3:return cze(t,e,n);case 4:return hze(t,e,n);case 5:return dze(t,e);case 6:return pze(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function Jje(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function eze(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function tze(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function nze(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${rze}
    ${ize}
    ${sze}
  `}const rze=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,ize=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,sze=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,oze=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function t8(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function aze(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function lze(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function uze(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],i=Math.ceil(t[2]/2),s=i*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${s};
      index -= b * ${s};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec3(b, r, c);
    }
  `}function cze(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${Vb(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=eu(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function fze(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],i=Math.ceil(t[t.length-1]/2),s=i*Math.ceil(t[t.length-2]/2);let o=s,a="",l="b, r, c";for(let u=2;u<t.length-1;u++)o*=t[t.length-u-1],a=`
      int b${u} = index / ${o};
      index -= b${u} * ${o};
    `+a,l=`b${u}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${a}

      int b = index / ${s};
      index -= b * ${s};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec${t.length}(${l});
    }
  `}function hze(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${Vb(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=eu(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function dze(t,e){const n=eu(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function pze(t,e){const n=eu(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function mze(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(et(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const i=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec2(r, c);
    }
  `}function gze(t,e,n){return et(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function tu(t){return`offset${t}`}function yze(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=nr();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function vze(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[i,s]=t.shapeInfo.texShape;if(i===1&&s===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const o=tu(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${o});
      return sampleTexture(${n}, uv);
    }
  `;const[a,l]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${a}, ${l}, ${o});
      return sampleTexture(${n}, uv);
    }
  `}function xze(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t.shapeInfo.texShape,s=nr();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${s.texture2D}(${n}, uv);
    }
  `;const o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${o[0]}, ${o[1]}, index);
      return ${s.texture2D}(${n}, uv);
    }
  `}function bze(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${Sf(t)}
      }
    `;const i=t.shapeInfo.texShape,s=i[0],o=i[1];if(o===1&&s===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const a=tu(n);return o===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${s}.0);
        return sampleTexture(${n}, uv);
      }
    `:s===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${o}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${a});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${s}, ${o}, index + ${a});
      return sampleTexture(${n}, uv);
    }
  `}function wze(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape,o=s[0],a=s[1],l=nr();if(s!=null&&et(n,s))return e?`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${o}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${i}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],c=Math.ceil(n[1]/2);return`
    vec4 ${i}(int row, int col) {
      vec2 uv = packedUVfrom2D(${c}, ${u[0]}, ${u[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function Sze(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape;if(s!=null&&et(n,s)){if(e)return`
      float ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const h=s[0],d=s[1];return`
    float ${i}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${d}.0, ${h}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:o,keptDims:a}=Ca(n),l=o;if(l.length<n.length){const h=Cf(t,l),d=["row","col"];return`
      ${wf(h,e)}
      float ${i}(int row, int col) {
        return ${i}(${$f(d,a)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${Sf(t)}
      }
    `;const u=s[0],c=s[1],f=tu(r);return c===1?e?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${f}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${f}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${u}.0);
      return sampleTexture(${r}, uv);
    }
  `:u===1?e?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${f}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${f}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${i}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${f};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${i}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${f};
    vec2 uv = uvFromFlat(${u}, ${c}, index);
    return sampleTexture(${r}, uv);
  }
`}function Cze(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape,o=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];if(n[0]===1){const h=n.slice(1),d=[1,2],p=Cf(t,h),m=["b","row","col"];return`
        ${e8(p,e)}
        vec4 ${i}(int b, int row, int col) {
          return ${i}(${$f(m,d)});
        }
      `}const a=nr();if(e)return`
    vec4 ${i}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `;const l=o[0],u=o[1],c=Math.ceil(n[2]/2),f=c*Math.ceil(n[1]/2);return`
    vec4 ${i}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${u}, ${f}, ${c}, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `}function $ze(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n[1]*n[2],o=n[2],{newShape:a,keptDims:l}=Ca(n),u=a;if(u.length<n.length){const m=Cf(t,u),g=["row","col","depth"];return`
        ${wf(m,e)}
        float ${i}(int row, int col, int depth) {
          return ${i}(${$f(g,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${s}, ${o}, 1)));
        ${Sf(t)}
      }
    `;const c=t.shapeInfo.texShape,f=c[0],h=c[1],d=t.shapeInfo.flatOffset;if(h===s&&d==null)return e?`
      float ${i}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${i}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${o}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${h}.0, ${f}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(h===o&&d==null)return e?`
      float ${i}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${h}.0, ${f}.0);
      return sampleTexture(${r}, uv);
    }
  `;const p=tu(r);return e?`
    float ${i}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${p};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${i}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${s} + col * ${o} + depth + ${p};
        vec2 uv = uvFromFlat(${f}, ${h}, index);
        return sampleTexture(${r}, uv);
      }
  `}function kze(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=nr();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${i.texture2D}(${n}, uv);
    }
  `;const s=t.shapeInfo.logicalShape,o=s.length,a=t.shapeInfo.texShape,l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],u=l[0],c=l[1],f=Math.ceil(s[o-1]/2);let h=f*Math.ceil(s[o-2]/2),d="int b, int row, int col",p=`b * ${h} + (row / 2) * ${f} + (col / 2)`;for(let m=2;m<o-1;m++)d=`int b${m}, `+d,h*=s[o-m-1],p=`b${m} * ${h} + `+p;return`
    vec4 ${r}(${d}) {
      int index = ${p};
      int texR = index / ${c};
      int texC = index - texR * ${c};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${c}, ${u});
      return ${i.texture2D}(${n}, uv);
    }
  `}function Ize(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n[3],o=n[2]*s,a=n[1]*o,{newShape:l,keptDims:u}=Ca(n);if(l.length<n.length){const v=Cf(t,l),x=["row","col","depth","depth2"];return`
      ${wf(v,e)}
      float ${i}(int row, int col, int depth, int depth2) {
        return ${i}(${$f(x,u)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${a}, ${o}, ${s}, 1)));
        ${Sf(t)}
      }
    `;const c=t.shapeInfo.flatOffset,f=t.shapeInfo.texShape,h=f[0],d=f[1],p=`int stride2 = ${r}Shape[3];`,m=`int stride1 = ${r}Shape[2] * stride2;`,g=`int stride0 = ${r}Shape[1] * stride1;`;if(d===a&&c==null)return e?`
      float ${i}(int row, int col, int depth, int depth2) {
        ${p}
        ${m}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${o}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${d}.0, ${h}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(d===s&&c==null)return e?`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${d}.0, ${h}.0);
        return sampleTexture(${r}, uv);
      }
    `;const y=tu(r);return e?`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${p}
      ${m}
      ${g}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${y});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${o} +
          depth * ${s} + depth2;
      vec2 uv = uvFromFlat(${h}, ${d}, index + ${y});
      return sampleTexture(${r}, uv);
    }
  `}function Tze(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e[4],s=e[3]*i,o=e[2]*s,a=e[1]*o,{newShape:l,keptDims:u}=Ca(e);if(l.length<e.length){const m=Cf(t,l),g=["row","col","depth","depth2","depth3"];return`
      ${wf(m)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${$f(g,u)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${a}, ${o}, ${s}, ${i})) +
          depth3;
        ${Sf(t)}
      }
    `;const c=t.shapeInfo.flatOffset,f=t.shapeInfo.texShape,h=f[0],d=f[1];if(d===a&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${o}, ${s}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${d}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(d===i&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${d}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;const p=tu(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${o} + depth * ${s} +
          depth2 * ${i} + depth3 + ${p};
      vec2 uv = uvFromFlat(${h}, ${d}, index);
      return sampleTexture(${n}, uv);
    }
  `}function Eze(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:i,keptDims:s}=Ca(e);if(i.length<e.length){const g=Cf(t,i),y=["row","col","depth","depth2","depth3","depth4"];return`
      ${wf(g)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${$f(y,s)});
      }
    `}const o=e[5],a=e[4]*o,l=e[3]*a,u=e[2]*l,c=e[1]*u;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${c}, ${u}, ${l}, ${a})) +
          dot(
            vec2(depth3, depth4),
            vec2(${o}, 1)));
        ${Sf(t)}
      }
    `;const f=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,d=h[0],p=h[1];if(p===c&&f==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${u}, ${l}, ${a}, ${o})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${p}.0, ${d}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(p===o&&f==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${p}.0, ${d}.0);
        return sampleTexture(${n}, uv);
      }
    `;const m=tu(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${c} + col * ${u} + depth * ${l} +
          depth2 * ${a} + depth3 * ${o} + depth4 + ${m};
      vec2 uv = uvFromFlat(${d}, ${p}, index);
      return sampleTexture(${n}, uv);
    }
  `}function Sf(t){const e=t.name,n=J(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function Nze(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",s=t.shapeInfo.logicalShape.length,o=e.logicalShape.length,a=JH(t.shapeInfo.logicalShape,e.logicalShape),l=st(o),u=o-s;let c;const f=["x","y","z","w","u","v"];s===0?c="":o<2&&a.length>=1?c="coords = 0;":c=a.map(v=>`coords.${f[v+u]} = 0;`).join(`
`);let h="";o<2&&s>0?h="coords":h=t.shapeInfo.logicalShape.map((v,x)=>`coords.${f[x+u]}`).join(", ");let d="return outputValue;";const m=J(t.shapeInfo.logicalShape)===1,y=J(e.logicalShape)===1;if(s===1&&!m&&!y)d=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(m&&!y)o===1?d=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:d=`
        return vec4(outputValue.x);
      `;else if(a.length){const v=s-2,x=s-1;a.indexOf(v)>-1&&a.indexOf(x)>-1?d="return vec4(outputValue.x);":a.indexOf(v)>-1?d="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(x)>-1&&(d="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${i}() {
      ${l} coords = getOutputCoords();
      ${c}
      vec4 outputValue = get${r}(${h});
      ${d}
    }
  `}function Aze(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",s=e.texShape,o=t.shapeInfo.texShape,a=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&a===l&&t.shapeInfo.flatOffset==null&&et(o,s))return`
      float ${i}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const u=st(l),c=JH(t.shapeInfo.logicalShape,e.logicalShape),f=l-a;let h;const d=["x","y","z","w","u","v"];a===0?h="":l<2&&c.length>=1?h="coords = 0;":h=c.map(m=>`coords.${d[m+f]} = 0;`).join(`
`);let p="";return l<2&&a>0?p="coords":p=t.shapeInfo.logicalShape.map((m,g)=>`coords.${d[g+f]}`).join(", "),`
    float ${i}() {
      ${u} coords = getOutputCoords();
      ${h}
      return get${r}(${p});
    }
  `}function st(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function hN(t,e,n){const{newShape:r,keptDims:i}=Ca(e),s=e.length,o=t&&s===3&&e[0]===1,a=o?e.slice(1):r,l=!t&&s>1&&!et(e,n)&&r.length<s||o;return{useSqueezeShape:l,uniformShape:l?a:e,keptDims:i}}function Cf(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function $f(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oze(t,e,n,r){const i=n.map((c,f)=>{const h={logicalShape:c.shape,texShape:c.isUniform?null:c.texData.texShape,isUniform:c.isUniform,isPacked:c.isUniform?!1:c.texData.isPacked,flatOffset:null};return c.texData!=null&&c.texData.slice!=null&&c.texData.slice.flatOffset>0&&(h.flatOffset=c.texData.slice.flatOffset),{name:e.variableNames[f],shapeInfo:h}}),s=i.map(c=>c.shapeInfo),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},a=Xje(i,o,e),l=$je(t.gl,a),u=t.createProgram(l);return Y().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:a,webGLProgram:u,inShapeInfos:s,outShapeInfo:o,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(u),Object.assign({program:e,fragmentShader:l,source:a,webGLProgram:u,inShapeInfos:s,outShapeInfo:o},n8(t,e,u)))}function n8(t,e,n){const r=[],i=[];let s,o,a,l=null,u=null;u=t.getUniformLocation(n,"NAN",!1),Y().getNumber("WEBGL_VERSION")===1&&(l=t.getUniformLocation(n,"INFINITY",!1));const c=!1;for(const f of e.variableNames){const h={name:f,uniform:t.getUniformLocation(n,f,c),offset:t.getUniformLocation(n,`offset${f}`,c)};e.enableShapeUniforms&&(h.shape=t.getUniformLocation(n,`${f}Shape`,c),h.texShape=t.getUniformLocation(n,`${f}TexShape`,c)),r.push(h)}if(e.enableShapeUniforms&&(s=t.getUniformLocation(n,"outShape",c),a=t.getUniformLocation(n,"outShapeStrides",c),o=t.getUniformLocation(n,"outTexShape",c)),e.customUniforms)for(const f of e.customUniforms)i.push(t.getUniformLocation(n,f.name,c));return{variablesLocations:r,customUniformLocations:i,infLoc:l,nanLoc:u,outShapeLocation:s,outShapeStridesLocation:a,outTexShapeLocation:o}}function QM(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const i=n.logicalShape,s=e[r],o=s.shape;if(!et(i,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${i} and ${o} must match`);if(n.isUniform&&s.isUniform)return;const a=n.texShape,l=s.isUniform?null:s.texData.texShape;if(!et(a,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${l} must match`)})}function Pze(t,e,n,r,i){e.program.enableShapeUniforms||(QM(e.inShapeInfos,n),QM([e.outShapeInfo],[r]));const s=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(s.texture,o[0],o[1]):t.setOutputMatrixTexture(s.texture,o[0],o[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),Y().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN);for(let l=0;l<n.length;++l){const u=n[l],{uniform:c,offset:f,shape:h,texShape:d}=e.variablesLocations[l];if(h){const{uniformShape:p}=hN(e.program.packedInputs,u.shape,u.texData.texShape);switch(p.length){case 1:t.gl.uniform1iv(h,new Int32Array(p));break;case 2:t.gl.uniform2iv(h,new Int32Array(p));break;case 3:t.gl.uniform3iv(h,new Int32Array(p));break;case 4:t.gl.uniform4iv(h,new Int32Array(p));break}}if(d&&t.gl.uniform2i(d,u.texData.texShape[0],u.texData.texShape[1]),c!=null){if(u.isUniform){if(J(u.shape)<2)t.gl.uniform1f(c,u.uniformValues[0]);else{let p=u.uniformValues;p instanceof Float32Array||(p=new Float32Array(p)),t.gl.uniform1fv(c,p)}continue}u.texData.slice!=null&&f!=null&&t.gl.uniform1i(f,u.texData.slice.flatOffset),t.setInputMatrixTexture(u.texData.texture.texture,c,l)}}const a=e.outShapeLocation;if(a)switch(r.shape.length){case 1:t.gl.uniform1iv(a,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(a,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(a,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(a,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const l=Se(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&i)for(let l=0;l<e.program.customUniforms.length;++l){const u=e.program.customUniforms[l],c=e.customUniformLocations[l],f=i[l];if(u.type==="float")t.gl.uniform1fv(c,f);else if(u.type==="vec2")t.gl.uniform2fv(c,f);else if(u.type==="vec3")t.gl.uniform3fv(c,f);else if(u.type==="vec4")t.gl.uniform4fv(c,f);else if(u.type==="int")t.gl.uniform1iv(c,f);else if(u.type==="ivec2")t.gl.uniform2iv(c,f);else if(u.type==="ivec3")t.gl.uniform3iv(c,f);else if(u.type==="ivec4")t.gl.uniform4iv(c,f);else throw Error(`uniform type ${u.type} is not supported yet.`)}t.executeProgram()}function _ze(t,e,n){let r="";e.concat(n).forEach(o=>{const a=o.texData!=null&&o.texData.slice!=null&&o.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!o.isUniform){const l=o.texData.texShape,{useSqueezeShape:u,uniformShape:c,keptDims:f}=hN(t.packedInputs,o.shape,l);let h="",d="",p="";if(c.length===1&&t.packedInputs){const w=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];h=`${w[0]>1}_${w[1]>1}`}else if(c.length===2&&!t.packedInputs)d=`${c[0]>1}_${c[1]>1}`;else if(c.length>2&&!t.packedInputs){const w=Se(c);p=`${w[0]===l[1]}_${w[w.length-1]===l[1]}`}const m=o.shape.length,g=c.length===2&&et(o.shape,l),y=J(o.shape)===1,v=Rc(o.shape,n.shape),x=!t.packedInputs&&m===n.shape.length&&et(l,n.texData.texShape),b=t.packedInputs||c.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${m}_${x}_${u?f:""}_${c.length}_${y}_${v}_${g}_${h}_${d}_${p}_${b}_${a}`}else{const l=o.isUniform?"uniform":o.texData.texShape;r+=`${o.shape}_${l}_${a}`}});const i=t.userCode;let s=t.constructor.name;return s+="_"+r+"_"+i+`${Y().getNumber("WEBGL_VERSION")}`,s}function Ln(t){return Y().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Dze{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Kd.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=nr();this.outputShape=e,this.enableShapeUniforms=Ln(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?Vb(["r","c","d"],e):eu(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Rze{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Kd.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=nr();this.outputShape=e,this.enableShapeUniforms=Ln(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?Vb(["r","c","d"],e):eu(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Mze{constructor(e){this.variableNames=["A"],this.outTexUsage=Br.DOWNLOAD;const n=nr();this.outputShape=e,this.userCode=`
      ${QH}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Fze{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Br.DOWNLOAD;const n=nr();this.outputShape=e,this.userCode=`
      ${QH}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lze={R:0,G:1,B:2,A:3};class JM{constructor(e,n=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const i=nr();this.outputShape=e,this.enableShapeUniforms=Ln(this.outputShape.length);let s="result";n&&(s="floor(result * 255. + 0.5)");let o="";for(let a=0;a<r.length;a++){const l=r[a];o+=`
          if(offset == ${a}) {
            result = values[${Lze[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?fN():cN(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${i.texture2D}(A, uv);
          ${o}
        }
        ${i.output} = vec4(${s}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Bze{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=nr();this.outputShape=e,this.enableShapeUniforms=Ln(this.outputShape.length);let i="",s="result";n&&(s="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let a=0;a<=1;a++){const l=o*2+a;i+=`
          localCoords = coords;
          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${a};
          if (localCoords[1] + ${o} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${o};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?fN():cN(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${i}

          ${r.output} = ${s};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jze(t){const e=nr(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return Cje(t,n)}function zze(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return Eje(t,e)}function Vze(t){const e=new Uint16Array([0,1,2,2,1,3]);return Nje(t,e)}function _m(t,e,n,r,i,s){Oje(e,n);const o=Aje(t),a=t.TEXTURE_2D;return pe(t,()=>t.bindTexture(a,o)),pe(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),pe(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),pe(t,()=>t.texParameteri(a,t.TEXTURE_MIN_FILTER,t.NEAREST)),pe(t,()=>t.texParameteri(a,t.TEXTURE_MAG_FILTER,t.NEAREST)),Y().getNumber("WEBGL_VERSION")===1?pe(t,()=>t.texImage2D(a,0,r,e,n,0,i,s,null)):pe(t,()=>t.texStorage2D(a,1,r,e,n)),pe(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:o,texShape:[n,e]}}function r8(t){return t.internalFormatFloat}function Wze(t,e,n,r){const[i,s]=Om(e,n);return _m(t,i,s,r8(r),r.textureFormatFloat,t.FLOAT)}function i8(t){return t.internalFormatHalfFloat}function Uze(t,e,n,r){const[i,s]=Om(e,n);return _m(t,i,s,i8(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function s8(t){return t.downloadTextureFormat}function Gze(t,e,n,r){const[i,s]=Om(e,n);return _m(t,i,s,s8(r),t.RGBA,t.UNSIGNED_BYTE)}function o8(t){return t.internalFormatPackedFloat}function Hze(t,e,n,r){const[i,s]=bf(e,n);return _m(t,i,s,o8(r),t.RGBA,t.FLOAT)}function a8(t){return t.internalFormatPackedHalfFloat}function Kze(t,e,n,r){const[i,s]=bf(e,n);return _m(t,i,s,a8(r),t.RGBA,r.textureTypeHalfFloat)}function qze(t,e,n){return pe(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),XM(t,e,"clipSpacePos",n,3,20,0)&&XM(t,e,"uv",n,2,20,12)}function Xze(t,e,n,r,i,s){pe(t,()=>t.bindTexture(t.TEXTURE_2D,e));let o,a,l;i instanceof Uint8Array?(o=new Uint8Array(n*r*4),a=t.UNSIGNED_BYTE,l=t.RGBA):(o=new Float32Array(n*r*4),a=t.FLOAT,l=s.internalFormatPackedFloat),o.set(i),Y().getNumber("WEBGL_VERSION")===2?pe(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,a,o)):pe(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,r,0,t.RGBA,a,o)),pe(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function Yze(t,e,n){pe(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?Y().getNumber("WEBGL_VERSION")===2?pe(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):pe(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):Y().getNumber("WEBGL_VERSION")===2?pe(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):pe(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),pe(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function Zze(t,e,n,r){const i=t.createBuffer();pe(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,i));const a=4*4*e*n;return pe(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,a,t.STREAM_READ)),pe(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),pe(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),i}function Qze(t,e,n){const r=t,i=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function Jze(t,e,n,r){const[i,s]=Om(e,n),o=4,a=new Uint8Array(gje(e*n,o));return pe(t,()=>t.readPixels(0,0,i,s,r.downloadTextureFormat,t.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}function eVe(t,e,n,r,i,s,o,a){const l=t,u=new Float32Array(yje(s,o));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}function tVe(t,e,n){const r=new Float32Array(e*n*4);return pe(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kw{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=Y().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,dje(n,e)):this.gl=ns(n),e=this.gl,Y().getNumber("WEBGL_VERSION")===2){const s=e;this.createVertexArray=()=>pe(s,()=>s.createVertexArray()),this.bindVertexArray=o=>pe(s,()=>s.bindVertexArray(o)),this.deleteVertexArray=o=>pe(s,()=>s.deleteVertexArray(o)),this.getVertexArray=()=>pe(s,()=>s.getParameter(s.VERTEX_ARRAY_BINDING))}else if(e!=null){const s=e.getExtension("OES_vertex_array_object");if(s==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>pe(e,()=>s.createVertexArrayOES()),this.bindVertexArray=o=>pe(e,()=>s.bindVertexArrayOES(o)),this.deleteVertexArray=o=>pe(e,()=>s.deleteVertexArrayOES(o)),this.getVertexArray=()=>pe(e,()=>e.getParameter(s.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const i="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),Y().getNumber("WEBGL_VERSION")===1){const s="OES_texture_float",o="OES_texture_half_float";if(this.textureFloatExtension=kg(this.gl,s),mi(this.gl,o))this.textureHalfFloatExtension=kg(this.gl,o);else if(Y().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),mi(this.gl,i))this.colorBufferHalfFloatExtension=kg(this.gl,i);else if(Y().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",mi(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(mi(this.gl,i))this.colorBufferHalfFloatExtension=this.gl.getExtension(i);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=zze(this.gl),this.indexBuffer=Vze(this.gl),this.framebuffer=Pje(this.gl),this.textureConfig=uN(this.gl,this.textureHalfFloatExtension)}get debug(){return Y().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;pe(e,()=>e.finish()),pe(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),pe(e,()=>e.deleteFramebuffer(this.framebuffer)),pe(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),pe(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),pe(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),Wze(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),Uze(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),Gze(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),Yze(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,i){this.throwIfDisposed(),Xze(this.gl,e,n,r,i,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),Kze(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),Hze(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(YM(this.gl,this.framebuffer),this.outputTexture=null),pe(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>Jze(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,i,s,o){return eVe(this.gl,e,n,r,i,s,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return Qze(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const i=Zze(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),i}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(Y().getBool("WEBGL_FENCE_API_ENABLED")){const i=e,s=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const o=i.clientWaitSync(s,0,0);return o===i.ALREADY_SIGNALED||o===i.CONDITION_SATISFIED},n=s}else Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>tVe(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=jze(n));const r=Ije(n);pe(n,()=>n.attachShader(r,this.vertexShader)),pe(n,()=>n.attachShader(r,e)),Tje(n,r);const i=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&ww(n,i),i}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const n=this.gl;pe(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),qze(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(pe(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&ww(this.gl,this.program),pe(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?Dje(this.gl,e,n):Rje(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),pe(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),Mje(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[i,s]=bf(n,r);this.setOutputMatrixTextureDriver(e,i,s)}setOutputMatrixWriteRegion(e,n,r,i){this.setOutputMatrixWriteRegionDriver(r,e,i,n)}setOutputPackedMatrixWriteRegion(e,n,r,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&ww(this.gl,this.program),Ig(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}pe(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),pe(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=kg(this.gl,Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,i=this.getQueryTimerExtensionWebGL2(),s=r.createQuery();return r.beginQuery(i.TIME_ELAPSED_EXT,s),s}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await BR(()=>this.disposed||this.isQueryAvailable(e,Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,i=this.getQueryTimerExtensionWebGL2(),s=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),s&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),i=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=nVe(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in Y().platform&&(r=Y().platform.setTimeoutCustom.bind(Y().platform)),BR(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),Sw(this.gl,e,this.framebuffer),this.debug&&Ig(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(Sw(this.gl,this.outputTexture,this.framebuffer),this.debug&&Ig(this.gl)):YM(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const i=this.gl;Sw(i,e,this.framebuffer),this.debug&&Ig(i),this.outputTexture=e,pe(i,()=>i.viewport(0,0,n,r)),pe(i,()=>i.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,i){this.throwIfDisposed(),pe(this.gl,()=>this.gl.scissor(e,n,r,i))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function nVe(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:rVe,bincountImpl:l8,bincountReduceImpl:iVe,bitwiseAndImpl:sVe,castImpl:oVe,ceilImpl:aVe,concatImpl:lVe,equalImpl:uVe,expImpl:cVe,expm1Impl:fVe,floorImpl:hVe,gatherNdImpl:dVe,gatherV2Impl:pVe,greaterImpl:mVe,greaterEqualImpl:gVe,lessImpl:yVe,lessEqualImpl:vVe,linSpaceImpl:xVe,logImpl:bVe,maxImpl:wVe,maximumImpl:SVe,minimumImpl:CVe,multiplyImpl:$Ve,negImpl:kVe,notEqualImpl:IVe,prodImpl:TVe,raggedGatherImpl:EVe,raggedRangeImpl:NVe,raggedTensorToTensorImpl:AVe,rangeImpl:OVe,rsqrtImpl:PVe,scatterImpl:_Ve,sigmoidImpl:DVe,simpleAbsImpl:u8,sliceImpl:RVe,sparseFillEmptyRowsImpl:MVe,sparseReshapeImpl:FVe,sparseSegmentReductionImpl:c8,sqrtImpl:LVe,staticRegexReplaceImpl:BVe,stridedSliceImpl:jVe,stringNGramsImpl:zVe,stringSplitImpl:VVe,stringToHashBucketFastImpl:WVe,subImpl:UVe,tileImpl:GVe,topKImpl:HVe,transposeImpl:dN,uniqueImpl:KVe}=YRe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f8(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function Zn(t,e){return e===1?[t]:f8(t,e)}function qVe(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XVe{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=Ln(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=Zn("rc",this.rank),r=st(this.rank),i=this.getOutOfBoundsCondition(n),s=this.getSetup(n),o=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${i}) {
            setOutput(vec4(0));
          } else {
            ${s}

            setOutput(vec4(${o}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let i=0;i<=1;i++){let s=`${r===0?"r":"rp1"}, ${i===0?"c":"cp1"}`;for(let o=2;o<this.rank;o++)s=`${e[e.length-1-o]},`+s;n.push(s)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],i=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${i};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class h8{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=Ln(this.outputShape.length);let r="";for(let i=0;i<4;i++){let s="thisRC = rc;";i%2===1&&(s+="thisRC.z += 1;"),i>1&&(s+="thisRC.y += 1;"),r+=`
        ${s}
        ${i>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${i}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${i>0?"}":""}
      `}this.userCode=`
      ${YVe(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?fN():cN(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function YVe(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?qje(["r","c","d"],"inputShape"):eu(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZVe{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,r){const i=tF(n,r),s=nF(e,i,r);s in this.freeTextures||(this.freeTextures[s]=[]),s in this.usedTextures||(this.usedTextures[s]=[]);const o=eF(e,i,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[s].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const l=this.freeTextures[s].pop();return this.usedTextures[s].push(l),l}let a;return i===bn.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):i===bn.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):i===bn.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):i===bn.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):i===bn.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[s].push(a),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),a}releaseTexture(e,n,r,i){if(this.freeTextures==null)return;const s=tF(r,i),o=nF(n,s,i);o in this.freeTextures||(this.freeTextures[o]=[]);const a=eF(n,s,this.gpgpu.gl,this.gpgpu.textureConfig,i),l=Y().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=a):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const u=this.usedTextures[o],c=u&&u.indexOf(e);if(c==null||c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u[c]=u[u.length-1],u.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function QVe(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function eF(t,e,n,r,i){const s=JVe(e,r);let o;if(i){const[l,u]=bf(t[0],t[1]);o=l*u}else{const[l,u]=Om(t[0],t[1]);o=l*u}const a=QVe(n,s);return o*a}function JVe(t,e){switch(t){case bn.PACKED_2X2_FLOAT32:return o8(e);case bn.PACKED_2X2_FLOAT16:return a8(e);case bn.UNPACKED_FLOAT32:return r8(e);case bn.UNPACKED_FLOAT16:return i8(e);case bn.PACKED_4X1_UNSIGNED_BYTE:return s8(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function e4e(t){return Y().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?bn.PACKED_2X2_FLOAT32:bn.UNPACKED_FLOAT32:t?bn.PACKED_2X2_FLOAT16:bn.UNPACKED_FLOAT16}function tF(t,e){if(t===Br.UPLOAD)return bn.PACKED_2X2_FLOAT32;if(t===Br.RENDER||t==null)return e4e(e);if(t===Br.DOWNLOAD||t===Br.PIXELS)return bn.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function nF(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ms{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=Ln(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const Ei="if (isnan(x)) return x;",t4e="return x;",rF="return abs(x);",n4e="return (x >= 0.0) ? x : (exp(x) - 1.0);",r4e=Ei+`
  return (x < 0.0) ? 0.0 : x;
`,i4e=Ei+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Oo="return x;",s4e="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o4e="return x;",a4e=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,l4e=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,u4e=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,c4e="return 1.0 / (1.0 + exp(-1.0 * x));";class zo{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=Ln(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class f4e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=Ln(this.outputShape.length);const n=e.length,r=Zn("rc",n),i=st(n),s=qVe(n,r),o=r.slice(-2),a=n<=1?"rc":`vec2(${o.join(",")})`;this.userCode=`
      void main() {
        ${i} rc = getOutputCoords();
        vec4 packedInput = getA(${s});

        setOutput(getChannel(packedInput, ${a}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h4e=FU,d4e=1e-7,p4e=1e-4,Ng={};function m4e(t){return t in Ng||(Ng[t]={}),Ng[t]}const g4e=Y().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),y4e=600;function v4e(){return Y().global.screen==null?1024:Y().global.screen.height*Y().global.screen.width*window.devicePixelRatio*y4e/1024/1024}class Wb extends ET{nextDataId(){return Wb.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!Y().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof kw)n=e;else{const r=ns(Y().getNumber("WEBGL_VERSION"),e);n=new kw(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=ns(Y().getNumber("WEBGL_VERSION"));n=new kw(r),this.binaryCache=m4e(Y().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new ZVe(this.gpgpu),this.numMBBeforeWarning=v4e(),this.texData=new nW(this,ls())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,n,r,i,s,o){const a=this.makeTensorInfo(n,r),l=this.texData.get(a.dataId);l.isPacked=!1,l.texture={texture:e,texShape:[i,s]},l.texShape=[i,s];const u=Tg(n),c=new JM(u,!1,o),f=this.runWebGLProgram(c,[a],r,[[i,s]]);return f.shape=n,l.texture=null,this.disposeIntermediateTensorInfo(a),f.dataId}write(e,n,r){if((Y().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Y().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const i={id:this.nextDataId()};return this.texData.set(i,{shape:n,dtype:r,values:e,usage:Br.UPLOAD,refCount:1}),i}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,i,s){if(Y().getBool("DEBUG")&&this.checkNumericalProblems(n),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:i,values:n,usage:Br.UPLOAD,refCount:s})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:i,complexTensorInfos:s,slice:o,shape:a,isPacked:l}=n;if(o!=null){let h;l?h=new zo(a,Oo):h=new ms(a,Oo);const d=this.runWebGLProgram(h,[{dataId:e,shape:a,dtype:i}],i),p=this.readSync(d.dataId);return this.disposeIntermediateTensorInfo(d),p}if(r!=null)return this.convertAndCacheOnCPU(e);if(i==="string")return r;const u=this.activeTimers!=null;let c;u&&(c=sr());let f;if(i==="complex64"){const h=this.readSync(s.real.dataId),d=this.readSync(s.imag.dataId);f=ho(h,d)}else f=this.getValuesFromTexture(e);return u&&(this.downloadWaitMs+=sr()-c),this.convertAndCacheOnCPU(e,f)}async read(e){if(this.pendingRead.has(e)){const p=this.pendingRead.get(e);return new Promise(m=>p.push(m))}const n=this.texData.get(e),{values:r,shape:i,slice:s,dtype:o,complexTensorInfos:a,isPacked:l}=n;if(s!=null){let p;l?p=new zo(i,Oo):p=new ms(i,Oo);const m=this.runWebGLProgram(p,[{dataId:e,shape:i,dtype:o}],o),g=this.read(m.dataId);return this.disposeIntermediateTensorInfo(m),g}if(r!=null)return this.convertAndCacheOnCPU(e);if(Y().getBool("DEBUG")&&!Y().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&Y().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u=null,c;if(o!=="complex64"&&Y().get("WEBGL_BUFFER_SUPPORTED")){c=this.decode(e);const p=this.texData.get(c.dataId);u=this.gpgpu.createBufferFromTexture(p.texture.texture,...$g(i))}this.pendingRead.set(e,[]),o!=="complex64"&&await this.gpgpu.createAndWaitForFence();let f;if(o==="complex64"){const p=await Promise.all([this.read(a.real.dataId),this.read(a.imag.dataId)]),m=p[0],g=p[1];f=ho(m,g)}else if(u==null)f=this.getValuesFromTexture(e);else{const p=J(i);f=this.gpgpu.downloadFloat32MatrixFromBuffer(u,p)}if(c!=null&&this.disposeIntermediateTensorInfo(c),u!=null){const p=this.gpgpu.gl;pe(p,()=>p.deleteBuffer(u))}const h=this.convertAndCacheOnCPU(e,f),d=this.pendingRead.get(e);return this.pendingRead.delete(e),d.forEach(p=>p(h)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&ls().removeDataId(e,this),this.pendingDeletes--),h}readToGPU(e,n={}){const r=this.texData.get(e),{values:i,shape:s,slice:o,dtype:a,isPacked:l,texture:u}=r;if(a==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(o!=null){let d;l?d=new zo(s,Oo):d=new ms(s,Oo);const p=this.runWebGLProgram(d,[{dataId:e,shape:s,dtype:a}],a),m=this.readToGPU(p,n);return this.disposeIntermediateTensorInfo(p),m}if(u==null)throw i!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const c=this.decode(e,n.customTexShape),f=ls().makeTensorFromTensorInfo(c),h=this.texData.get(c.dataId);return Object.assign({tensorRef:f},h.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(i=>aa(i));return Re(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Re(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!wje(r))throw Y().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:i}=this.texData.get(e),s=J(n);if(Y().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const h=this.decode(e),d=this.texData.get(h.dataId),p=this.gpgpu.downloadMatrixFromPackedTexture(d.texture.texture,...$g(n)).subarray(0,s);return this.disposeIntermediateTensorInfo(h),p}const o=Y().getBool("WEBGL_PACK")&&i===!0,a=o?Tg(n):n,l=o?new Fze(a):new Mze(a),u=this.runWebGLProgram(l,[{shape:a,dtype:r,dataId:e}],"float32"),c=this.texData.get(u.dataId),f=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture.texture,c.texShape[0],c.texShape[1]).subarray(0,s);return this.disposeIntermediateTensorInfo(u),f}timerAvailable(){return Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let i=!1;this.programTimersStack==null?(this.programTimersStack=r,i=!0):this.activeTimers.push(r),this.activeTimers=r,e();const s=kl(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),o=kl(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,i&&(this.programTimersStack=null);const a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(s);a.kernelMs=ike(l),a.getExtraProfileInfo=()=>l.map((u,c)=>({name:o[c],ms:u})).map(u=>`${u.name}: ${u.ms}`).join(", ")}else a.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:sr(),endMs:null}}endTimer(e){return Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=sr(),e)}async getQueryTime(e){if(Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:i,usage:s,isPacked:o,slice:a}=this.texData.get(e),l=a&&a.origDataId||e,u=this.dataRefCount.get(l);u>1?this.dataRefCount.set(l,u-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(i,r),this.textureManager.releaseTexture(n,i,s,o)));const c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=g4e){return Y().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&J(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){Fr("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return h4e(e.shape,n)}packedUnaryOp(e,n,r){const i=new zo(e.shape,n),s=this.compileAndRun(i,[e],r);return ls().makeTensorFromTensorInfo(s)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const i=u8(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,i)}if(Y().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,rF,e.dtype);const n=new ms(e.shape,rF),r=this.compileAndRun(n,[e]);return ls().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let i;if(n==="string"&&r!=null&&r.length>0&&vp(r[0])){const s=r.map(o=>ea(o));i=this.write(s,e,n)}else i=this.write(r,e,n);return this.texData.get(i).usage=null,{dataId:i,shape:e,dtype:n}}makeOutput(e,n,r){return ls().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new f4e(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new XVe(e.shape);return this.runWebGLProgram(n,[e],e.dtype,null,!0)}packedReshape(e,n){const r=[Vc(e.shape),...Wc(e.shape)],i={dtype:e.dtype,shape:r,dataId:e.dataId},s=[Vc(n),...Wc(n)],o=new h8(s,r),a=!0,l=[r],u=this.runWebGLProgram(o,[i],e.dtype,l,a);return{dataId:u.dataId,shape:n,dtype:u.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:i,shape:s,dtype:o}=r;if(n!=null){const h=J(s),d=n[0]*n[1]*4;E(h<=d,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const a=Tg(s);let l;i?l=new Rze(a):l=new Dze(a);const u=!0,c=[n??$g(a)],f=this.runWebGLProgram(l,[{shape:a,dtype:o,dataId:e}],o,c,u,n);return{dtype:o,shape:s,dataId:f.dataId}}runWebGLProgram(e,n,r,i,s=!1,o){const a=this.makeTensorInfo(e.outputShape,r),l=this.texData.get(a.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===Kd.DENSE){const y=o??$g(e.outputShape);l.texShape=y.map(v=>v*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),J(a.shape)===0)return l.values=_n(a.dtype,0),a;const u=[],c=n.map(y=>{if(y.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let v=this.texData.get(y.dataId);if(v.texture==null){if(!e.packedInputs&&J(y.shape)<=Y().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:y.shape,texData:null,isUniform:!0,uniformValues:v.values};e.packedInputs&&(v.isPacked=!0,v.shape=y.shape)}if(this.uploadToGPU(y.dataId),!!v.isPacked!=!!e.packedInputs)y=v.isPacked?this.unpackTensor(y):this.packTensor(y),u.push(y),v=this.texData.get(y.dataId);else if(v.isPacked&&!n0(v.shape,y.shape)){const x=y,b=y.shape;y.shape=v.shape,y=this.packedReshape(y,b),u.push(y),v=this.texData.get(y.dataId),x.shape=b}return{shape:y.shape,texData:v,isUniform:!1}});this.uploadToGPU(a.dataId);const f={shape:a.shape,texData:l,isUniform:!1},h=_ze(e,c,f),d=this.getAndSaveBinary(h,()=>Oze(this.gpgpu,e,c,f)),p=this.activeTimers!=null;let m;p&&(m=this.startTimer()),Y().get("ENGINE_COMPILE_ONLY")||Pze(this.gpgpu,d,c,f,i),u.forEach(y=>this.disposeIntermediateTensorInfo(y)),p&&(m=this.endTimer(m),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(m)}));const g=Y().getNumber("WEBGL_FLUSH_THRESHOLD");if(g>0){const y=sr();y-this.lastGlFlushTime>g&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=y)}if(!Y().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&s===!1){const y=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),y}return a}compileAndRun(e,n,r,i,s=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,i,s)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(Y().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=X(()=>{if(!Y().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=Y().getBool("DEBUG");Y().set("DEBUG",!1);const n=this.abs(Ze(1e-8)).dataSync()[0];if(Y().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?d4e:p4e}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:i,values:s,texture:o,usage:a,isPacked:l}=n;if(o!=null)return;const u=this.activeTimers!=null;let c;u&&(c=sr());let f=n.texShape;if(f==null&&(f=Bje(r,l),n.texShape=f),s!=null){const h=Tg(r);let d,p=f[1],m=f[0];const g=s instanceof Uint8Array||s instanceof Uint8ClampedArray;(l||!g)&&([p,m]=bf(f[0],f[1])),l?d=new Bze(h,g):d=new JM(h,g);const y=g?[m,p]:f,v=this.makeTensorInfo(y,i),x=this.texData.get(v.dataId);g?x.usage=Br.PIXELS:x.usage=Br.UPLOAD,x.texShape=y,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(v.dataId),p,m,s);const b=[[m,p]],S=this.runWebGLProgram(d,[v],i,b,!0),C=this.texData.get(S.dataId);n.texShape=C.texShape,n.isPacked=C.isPacked,n.usage=C.usage,Y().get("ENGINE_COMPILE_ONLY")?this.disposeData(S.dataId):(n.texture=C.texture,n.values=null,this.texData.delete(S.dataId)),this.disposeIntermediateTensorInfo(v),u&&(this.uploadWaitMs+=sr()-c)}else{const h=this.acquireTexture(f,a,i,l);n.texture=h}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:i}=r;return n!=null&&(r.values=x4e(n,i)),r.values}acquireTexture(e,n,r,i){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const s=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${s} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,i)}computeBytes(e,n){return e[0]*e[1]*Ov(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(i=>{try{this.checkCompletion_(n),i(!0)}catch(s){throw s}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await eG(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(ZH(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:n,customUniformLocations:r,infLoc:i,nanLoc:s,outShapeLocation:o,outShapeStridesLocation:a,outTexShapeLocation:l}=n8(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=n,e.customUniformLocations=r,e.infLoc=i,e.nanLoc=s,e.outShapeLocation=o,e.outShapeStridesLocation=a,e.outTexShapeLocation=l}}createTensorFromGPUData(e,n,r){e.channels=e.channels||"RGBA";const{texture:i,height:s,width:o,channels:a}=e,l=ls().backend;if(!l.gpgpu.gl.isTexture(i))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const u=l.writeTexture(i,n,r,s,o,a);return ls().makeTensorFromDataId(u,n,r,l)}}Wb.nextDataId=0;function x4e(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */XW()&&JW("webgl",()=>new Wb,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pN=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class Fl{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=_e(n,r),this.enableShapeUniforms=Ln(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nu=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class kf{constructor(e,n,r,i=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=_e(n,r);const s=this.outputShape.length;this.enableShapeUniforms=Ln(s);let o="";if(i)if(s===0||J(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          ${st(s)} coords = getOutputCoords();
        `,s===1)this.enableShapeUniforms?o+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:o+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=Zn("coords",s);this.enableShapeUniforms?o+=`
            bool nextRowOutOfBounds =
              (${l[s-2]} + 1) >= outShape[${s} - 2];
            bool nextColOutOfBounds =
              (${l[s-1]} + 1) >= outShape[${s} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:o+=`
            bool nextRowOutOfBounds =
              (${l[s-2]} + 1) >= ${this.outputShape[s-2]};
            bool nextColOutOfBounds =
              (${l[s-1]} + 1) >= ${this.outputShape[s-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${o}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nr(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const b4e={kernelName:Bp,backendName:"webgl",kernelFunc:Nr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pa(t){const{inputs:e,backend:n}=t,{real:r,imag:i}=e,s=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(s.dataId),a=Nr({inputs:{x:r},backend:n}),l=Nr({inputs:{x:i},backend:n});return o.complexTensorInfos={real:a,imag:l},s}const w4e={kernelName:zT,backendName:"webgl",kernelFunc:Pa};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d8="return (a < 0.) ? b * a : a;",p8=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function S4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{alpha:s}=r,o=n.makeTensorInfo([],"float32",$a(s,"float32")),a=Y().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new kf(p8,i.shape,o.shape):new Fl(d8,i.shape,o.shape),l=n.runWebGLProgram(a,[i,o],"float32");return n.disposeIntermediateTensorInfo(o),l}const C4e={kernelName:Fx,backendName:"webgl",kernelFunc:S4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m8="return (a < 0.) ? b * a : a;",g8=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function $4e(t){const{inputs:e,backend:n}=t,{x:r,alpha:i}=e,s=Y().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new kf(g8,r.shape,i.shape):new Fl(m8,r.shape,i.shape);return n.runWebGLProgram(s,[r,i],"float32")}const k4e={kernelName:nb,backendName:"webgl",kernelFunc:$4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const If="if (isnan(x)) return x;";function He({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:i,backend:s})=>{const{x:o}=i,a=s,l=r||o.dtype;if(a.shouldExecuteOnCPU([o])&&n!=null){const f=a.texData.get(o.dataId),h=n(f.values,l);return a.makeTensorInfo(o.shape,l,h)}const u=Y().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let c;return u?c=new zo(o.shape,e):c=new ms(o.shape,t),a.runWebGLProgram(c,[o],l)}}function In({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:i,dtype:s}){return({inputs:o,backend:a})=>{const{a:l,b:u}=o,c=a;if(r&&l.dtype==="complex64"){const p=c.texData.get(l.dataId),m=c.texData.get(u.dataId),[g,y]=[[p.complexTensorInfos.real,m.complexTensorInfos.real],[p.complexTensorInfos.imag,m.complexTensorInfos.imag]].map(x=>{const[b,w]=x,S={dataId:b.dataId,dtype:b.dtype,shape:l.shape},C={dataId:w.dataId,dtype:w.dtype,shape:u.shape},$=new Fl(t,l.shape,u.shape);return c.runWebGLProgram($,[S,C],Tr(b.dtype,w.dtype))}),v=Pa({inputs:{real:g,imag:y},backend:c});return c.disposeIntermediateTensorInfo(g),c.disposeIntermediateTensorInfo(y),v}const f=s||Tr(l.dtype,u.dtype);if((l.dtype==="string"||u.dtype==="string"||c.shouldExecuteOnCPU([l,u]))&&i!=null){const p=c.texData.get(l.dataId).values,m=c.texData.get(u.dataId).values,g=l.dtype==="string"?po(p):p,y=l.dtype==="string"?po(m):m,[v,x]=i(l.shape,u.shape,g,y,f),b=c.makeTensorInfo(x,f),w=c.texData.get(b.dataId);return w.values=v,b}const h=Y().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let d;return h?d=new kf(e,l.shape,u.shape,n):d=new Fl(t,l.shape,u.shape),c.runWebGLProgram(d,[l,u],f)}}function qd(t,e=!1){if(t==="linear")return e?o4e:t4e;if(t==="relu")return e?l4e:r4e;if(t==="elu")return e?a4e:n4e;if(t==="relu6")return e?u4e:i4e;if(t==="prelu")return e?g8:m8;if(t==="leakyrelu")return e?p8:d8;if(t==="sigmoid")return e?c4e:s4e;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class y8{constructor(e,n,r,i=!1,s=!1,o=!1,a=null,l=!1,u=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=Ln(this.outputShape.length);const c=i?e[1]:e[2],f=Math.ceil(c/2),h=i?"i * 2, rc.y":"rc.y, i * 2",d=s?"rc.z, i * 2":"i * 2, rc.z",p=i?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=s?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let g="",y="";a&&(l?g=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${a}
        }`:u?g=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${a}
        }`:g=`vec4 activation(vec4 x) {
          ${a}
        }`,y="result = activation(result);");const v=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),u&&this.variableNames.push("leakyreluAlpha");let x="rc.x",b="rc.x";e[0]<n[0]?x=`imod(rc.x, ${e[0]})`:n[0]<e[0]&&(b=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${g}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${f}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${x};
        int batchB = ${b};
        for (int i = 0; i < ${f}; i++) {
          vec4 a = getMatrixA(batchA, ${h});
          vec4 b = getMatrixB(batchB, ${d});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${p[0]} * ${m[0]});
          result += (${p[1]} * ${m[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${v}

        ${y}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iF={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class sF{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=_e(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oF="return a * b;";function mN(t){const{inputs:e,backend:n}=t,{a:r,b:i}=e,s=Tr(r.dtype,i.dtype);if(r.dtype==="complex64"){const a=n.texData.get(r.dataId),l=n.texData.get(i.dataId),u=new sF(iF.REAL,r.shape,i.shape),c=new sF(iF.IMAG,r.shape,i.shape),f=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:r.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:i.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:i.shape}],h=n.runWebGLProgram(u,f,"float32"),d=n.runWebGLProgram(c,f,"float32"),p=Pa({inputs:{real:h,imag:d},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),p}if(n.shouldExecuteOnCPU([r,i])){const a=n.texData.get(r.dataId),l=n.texData.get(i.dataId),[u,c]=$Ve(r.shape,i.shape,a.values,l.values,s),f=n.makeTensorInfo(c,s),h=n.texData.get(f.dataId);return h.values=u,f}let o;return Y().getBool("WEBGL_PACK_BINARY_OPERATIONS")?o=new kf(oF,r.shape,i.shape):o=new Fl(oF,r.shape,i.shape),n.runWebGLProgram(o,[r,i],s)}const I4e={kernelName:qp,backendName:"webgl",kernelFunc:mN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T4e(t,e,n){const r=[Vc(t.shape),...Wc(t.shape)],i={dtype:t.dtype,shape:r,dataId:t.dataId},s=[Vc(e),...Wc(e)],o=new h8(s,r),a=!0,l=[r],u=n.runWebGLProgram(o,[i],t.dtype,l,a);return{dataId:u.dataId,shape:e,dtype:u.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{shape:s}=r,o=n,a=J(i.shape),l=iW(s,a),u=J(l);E(a===u,()=>`The new shape (${l}) has ${u} elements and the old shape (${i.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);const c=o.texData.get(i.dataId);return c.isPacked&&!n0(i.shape,l)&&!(c.texture!==null&&n0(c.shape,l))?T4e(i,l,o):(o.incRef(i.dataId),{dataId:i.dataId,shape:l,dtype:i.dtype})}const E4e={kernelName:ib,backendName:"webgl",kernelFunc:fe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aF{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:i,inSize:s,outSize:o}=e;this.outputShape=[i,o];const a=Math.floor(r/4)*4,l=r%4;let u="sumValue += dot(values, ones);";if(n!=null){const f=1/n;u=`sumValue += dot(values * ${Oc(f)?f.toPrecision(2):f}, ones);`}let c="";s%r>0&&(c=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${c}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${a}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${u}
        }

        int inIdx = inOffset + ${a};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${u}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${u}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${u}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class N4e{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:i,inSize:s,outSize:o}=e;this.outputShape=[i,o];let a="0.0",l="";n==="prod"?a="1.0":n==="min"?(a="1.0 / 1e-20",l="min"):n==="max"&&(a="-1.0 / 1e-20",l="max");let u=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?u="sumValue":n==="prod"?u="prodValue":n==="all"?u="allValue":n==="any"&&(u="anyValue");const c=Math.floor(r/4)*4,f=r%4;let h=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,d="vec4";n==="all"?(a="1.0",h=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,d="bvec4"):n==="any"&&(a="0.0",h=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,d="bvec4");let p="";s%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${a};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${p}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${a});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          ${d} values = ${d}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${h}
        }

        int inIdx = inOffset + ${c};
        if (${f===1}) {
          ${d} values = ${d}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${h}
        } else if (${f===2}) {
          ${d} values = ${d}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${h}
        } else if (${f===3}) {
          ${d} values = ${d}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${h}
        }
        setOutput(${u});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A4e(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=Tb(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function ru(t,e,n,r){const i=A4e(t.shape);let s=t;for(let o=0;o<i.length;o++){const{inSize:a,windowSize:l,outSize:u}=i[o];let c,f;n==="mean"?c=o===0?new aF({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:u},a):new aF({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:u}):c=new N4e({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:u},n),f=s,s=r.runWebGLProgram(c,[s],e),f.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(f)}return s}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class O4e{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[n[o]];this.outputShape=r,this.rank=r.length;const i=st(this.rank),s=P4e(n);this.userCode=`
    void main() {
      ${i} resRC = getOutputCoords();
      setOutput(getA(${s}));
    }
    `}}function P4e(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let i=0;i<t.length;i++)r[t[i]]=n[i];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _4e{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let c=0;c<r.length;c++)r[c]=e[n[c]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const i=st(this.rank),s=f8("rc",this.rank),o=new Array(this.rank);for(let c=0;c<n.length;c++)o[n[c]]=s[c];const a=`vec2(${o.slice(-2).join()})`,l=`++${s[this.rank-1]} < ${r[this.rank-1]}`,u=`getChannel(getA(${o.join()}), ${a})`;this.userCode=`
    void main() {
      ${i} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${u};
      if(${l}) {
        result[1] = ${u};
      }
      --${s[this.rank-1]};
      if(++${s[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${u};
        if(${l}) {
          result[3] = ${u};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ub(t,e,n){const r=Y().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new _4e(t.shape,e):new O4e(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D4e(t,e,n,r){const i=e,s=t.shape.length,o=Me(i,t.shape);let a=o;const l=Nt(a,s),u=l!=null;let c=t;u&&(c=Ub(t,l,r),a=Vt(a.length,s)),kn("sum",a,s);const[f,h]=yn(c.shape,a);let d=f;n&&(d=Yt(f,o));const p=J(h),g=J(t.shape)/p,y=fe({inputs:{x:c},attrs:{shape:[g,p]},backend:r}),v=S2(t.dtype),x=ru(y,v,"sum",r),b=fe({inputs:{x},attrs:{shape:d},backend:r});return r.disposeIntermediateTensorInfo(y),r.disposeIntermediateTensorInfo(x),u&&r.disposeIntermediateTensorInfo(c),b}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gb(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r;return D4e(i,s,o,n)}const R4e={kernelName:cb,backendName:"webgl",kernelFunc:Gb};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tr(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{perm:s}=r,o=n,a=i.shape.length,l=new Array(a);for(let c=0;c<l.length;c++)l[c]=i.shape[s[c]];let u;if(o.shouldExecuteOnCPU([i])){const f=o.texData.get(i.dataId).values,h=dN(f,i.shape,i.dtype,s,l);u=o.makeTensorInfo(l,i.dtype);const d=o.texData.get(u.dataId);d.values=h}else u=Ub(i,s,o);return u}const M4e={kernelName:qu,backendName:"webgl",kernelFunc:tr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v8=1e3;function r0({a:t,b:e,transposeA:n,transposeB:r,backend:i,bias:s=null,preluActivationWeights:o=null,leakyreluAlpha:a=0,activation:l=null}){const u=t.shape.length,c=e.shape.length,f=n?t.shape[u-2]:t.shape[u-1],h=r?e.shape[c-1]:e.shape[c-2],d=n?t.shape[u-1]:t.shape[u-2],p=r?e.shape[c-2]:e.shape[c-1],m=t.shape.slice(0,-2),g=e.shape.slice(0,-2),y=J(m),v=J(g),b=_e(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([d,p]);E(f===h,()=>`Error in matMul: inner shapes (${f}) and (${h}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const w=n?[y,f,d]:[y,d,f],S=r?[v,p,h]:[v,h,p],C=fe({inputs:{x:t},backend:i,attrs:{shape:w}}),$=fe({inputs:{x:e},backend:i,attrs:{shape:S}}),k=[C,$],I=Math.max(y,v),T=n?C.shape[1]:C.shape[2],A=s!=null,_=o!=null,D=l==="leakyrelu",P=l!=null?qd(l,!0):null,R=A||_||D||P!=null;let F;if((d===1||p===1)&&T>v8&&R===!1){let M=C,V=$;n&&(M=tr({inputs:{x:C},backend:i,attrs:{perm:[0,2,1]}}),k.push(M)),r&&(V=tr({inputs:{x:$},backend:i,attrs:{perm:[0,2,1]}}),k.push(V));const q=p!==1,K=p===1;let Z=M;q&&(Z=fe({inputs:{x:M},backend:i,attrs:{shape:[I,T,1]}}),k.push(Z));const re=p===1?2:1;let ie=V;K&&(ie=fe({inputs:{x:V},backend:i,attrs:{shape:[I,1,T]}}),k.push(ie));const le=mN({inputs:{a:Z,b:ie},backend:i});F=Gb({inputs:{x:le},backend:i,attrs:{axis:re,keepDims:!0}}),k.push(le)}else{const M=Tr(t.dtype,e.dtype),V=new y8(w,S,[I,d,p],n,r,A,P,_,D),q=[C,$];if(s!=null&&q.push(s),_&&q.push(o),D){const K=i.makeTensorInfo([],"float32",$a(a,"float32"));q.push(K),k.push(K)}F=i.runWebGLProgram(V,q,M)}const O=fe({inputs:{x:F},backend:i,attrs:{shape:b}});k.push(F);for(const M of k)i.disposeIntermediateTensorInfo(M);return O}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F4e(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:s,bias:o,preluActivationWeights:a}=e,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:f}=r;return r0({a:i,b:s,transposeA:l,transposeB:u,backend:n,bias:o,preluActivationWeights:a,leakyreluAlpha:f,activation:c})}const L4e={kernelName:Pv,backendName:"webgl",kernelFunc:F4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lF="return abs(x);";function B4e(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const s=n.texData.get(r.dataId),o=u8(s.values);return n.makeTensorInfo(r.shape,r.dtype,o)}let i;return Y().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new zo(r.shape,lF):i=new ms(r.shape,lF),n.runWebGLProgram(i,[r],r.dtype)}const j4e={kernelName:yx,backendName:"webgl",kernelFunc:B4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z4e=Ei+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,V4e=He({opSnippet:z4e}),W4e={kernelName:xp,backendName:"webgl",kernelFunc:V4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U4e=Ei+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,G4e=He({opSnippet:U4e}),H4e={kernelName:bp,backendName:"webgl",kernelFunc:G4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uF="return a + b;",K4e=In({opSnippet:uF,packedOpSnippet:uF,supportsComplex:!0,cpuKernelImpl:rVe}),q4e={kernelName:df,backendName:"webgl",kernelFunc:K4e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class X4e{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((s,o)=>`T${o}`);const r=[];this.variableNames.forEach(s=>{r.push(`float v${s} = get${s}AtOutCoords();`)});const i=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${i};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Y4e{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((s,o)=>`T${o}`);const r=[];this.variableNames.forEach(s=>{r.push(`vec4 v${s} = get${s}AtOutCoords();`)});const i=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${i};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qg(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return Nr({inputs:{x:r[0]},backend:n});if(r.length>Y().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(r.length/2),u=qg({inputs:r.slice(0,l),backend:n}),c=qg({inputs:r.slice(l),backend:n});return qg({inputs:[u,c],backend:n})}const i=r.map(l=>l.dtype).reduce((l,u)=>Tr(l,u)),s=r.map(l=>l.shape),a=Y().getBool("WEBGL_PACK")?new Y4e(r[0].shape,s):new X4e(r[0].shape,s);return n.runWebGLProgram(a,r,i)}const Z4e={kernelName:DT,backendName:"webgl",kernelFunc:qg};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r,a=i.shape.length,l=Me(s,i.shape);let u=l;const c=Nt(u,a);let f=i;c!=null&&(f=tr({inputs:{x:i},backend:n,attrs:{perm:c}}),u=Vt(u.length,a)),kn("all",u,a);const[h,d]=yn(f.shape,u),p=J(d),m=fe({inputs:{x:f},backend:n,attrs:{shape:[-1,p]}}),g=ru(m,m.dtype,"all",n);let y;if(o){const v=Yt(h,l);y=fe({inputs:{x:g},backend:n,attrs:{shape:v}})}else y=fe({inputs:{x:g},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),c!=null&&n.disposeIntermediateTensorInfo(f),y}const J4e={kernelName:RT,backendName:"webgl",kernelFunc:Q4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r,a=i.shape.length,l=Me(s,i.shape);let u=l;const c=Nt(u,a);let f=i;c!=null&&(f=tr({inputs:{x:i},backend:n,attrs:{perm:c}}),u=Vt(u.length,a)),kn("any",u,a);const[h,d]=yn(f.shape,u),p=J(d),m=fe({inputs:{x:f},backend:n,attrs:{shape:[-1,p]}}),g=ru(m,m.dtype,"any",n);let y;if(o){const v=Yt(h,l);y=fe({inputs:{x:g},backend:n,attrs:{shape:v}})}else y=fe({inputs:{x:g},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),c!=null&&n.disposeIntermediateTensorInfo(f),y}const tWe={kernelName:MT,backendName:"webgl",kernelFunc:eWe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nWe{constructor(e,n,r){this.variableNames=["A"];const{windowSize:i,batchSize:s,outSize:o}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[s,o];const a=n==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${i};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${i}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${a} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rWe{constructor(e,n,r,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,E(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const s=e[e.length-1],o=Math.ceil(s/n);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),i||this.variableNames.push("bestIndicesA");const a=this.outputShape,l=a.length,u=st(l),c=Zn("coords",l);let f,h;if(o===1){h=l+1;const $=st(h);f=`
        ${$} sourceLocR = ${$}(${c.join()}, 0);
        ++${c[l-1]};
        ${$} sourceLocG = ${$}(${c.join()}, 0);
        ++${c[l-2]};
        ${$} sourceLocA = ${$}(${c.join()}, 0);
        --${c[l-1]};
        ${$} sourceLocB = ${$}(${c.join()}, 0);
        --${c[l-2]};`}else h=l,f=`
        ${u} sourceLocR = coords;
        ++${c[l-1]};
        ${u} sourceLocG = coords;
        ++${c[l-2]};
        ${u} sourceLocA = coords;
        --${c[l-1]};
        ${u} sourceLocB = coords;
        --${c[l-2]};`;const d=["x","y","z","w","u","v"].slice(0,h),p="."+d[h-1],m=d.map($=>"int "+$),g=Zn("sourceLocR",h-1).concat("inIdx.r"),y=Zn("sourceLocG",h-1).concat("inIdx.g"),v=Zn("sourceLocB",h-1).concat("inIdx.b"),x=Zn("sourceLocA",h-1).concat("inIdx.a"),b=r==="max"?"greaterThan":"lessThan",w=i?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${g.join()}),
                             getBestIndicesAChannel(${y.join()}),
                             getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${x.join()})));`,S=`vec4(
            getAChannel(${g.join()}),
            hasNextCol ? getAChannel(${y.join()}) : 0.,
            hasNextRow ? getAChannel(${v.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${x.join()}) : 0.)`,C=i?"":`
      float getBestIndicesAChannel(${m.join()}) {
        return getChannel(getBestIndicesA(${d.join()}),
                                          vec2(${d.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${m.join()}) {
        return getChannel(getA(${d.join()}),
                               vec2(${d.slice(-2).join()}));
      }
      ${C}
      void main() {
        ${u} coords = getOutputCoords();
        bool hasNextCol = ${c[l-1]} < ${a[l-1]-1};
        bool hasNextRow = ${c[l-2]} < ${a[l-2]-1};
        ${f}
        ivec4 srcIdx = ivec4(sourceLocR${p}, sourceLocG${p},
          sourceLocB${p}, sourceLocA${p}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${S};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${w}
          vec4 candidate = ${S};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${b}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x8(t,e,n,r=null){let i=e.shape[0],s=e.shape[1];r!=null&&(i=r.shape[0],s=r.shape[1]);const o=Tb(s),a={windowSize:o,inSize:s,batchSize:i,outSize:Math.ceil(s/o)},l=new nWe(a,n,r==null),u=[e];r!=null&&u.push(r);const c=t.runWebGLProgram(l,u,"int32");if(c.shape[1]===1)return c;const f=x8(t,e,n,c);return t.disposeIntermediateTensorInfo(c),f}function b8(t,e,n,r=null){const i=r!=null?r.shape:e.shape,s=i[i.length-1],o=Tb(s),a=new rWe(i,o,n,r==null),l=r==null?[e]:[e,r],u=t.runWebGLProgram(a,l,"int32");if(u.shape.length===e.shape.length){const c=b8(t,e,n,u);return t.disposeIntermediateTensorInfo(u),c}return u}function w8(t,e,n,r){const i=[n];if(kn("arg"+r.charAt(0).toUpperCase()+r.slice(1),i,e.shape.length),!Y().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const s=[],o=t.texData.get(e.dataId),a=o!==null&&o.isPacked;let l=e;a&&(l=t.unpackTensor(e),s.push(l));const[u,c]=yn(l.shape,i),f=J(c),h=fe({inputs:{x:l},backend:t,attrs:{shape:[-1,f]}});s.push(h);const d=x8(t,h,r);s.push(d);const p=fe({inputs:{x:d},backend:t,attrs:{shape:u}});return s.forEach(m=>t.disposeIntermediateTensorInfo(m)),p}return b8(t,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s}=r;let o=Me(s,i.shape);const a=Nt(o,i.shape.length);let l=i;const u=[];a!=null&&(l=tr({inputs:{x:i},backend:n,attrs:{perm:a}}),u.push(l),o=Vt(o.length,l.shape.length)),kn("argMax",[o[0]],l.shape.length);const c=w8(n,l,o[0],"max");return u.forEach(f=>n.disposeIntermediateTensorInfo(f)),c}const sWe={kernelName:vx,backendName:"webgl",kernelFunc:iWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s}=r;let o=Me(s,i.shape);const a=Nt(o,i.shape.length);let l=i;const u=[];a!=null&&(l=tr({inputs:{x:i},backend:n,attrs:{perm:a}}),u.push(l),o=Vt(o.length,l.shape.length)),kn("argMin",[o[0]],l.shape.length);const c=w8(n,l,o[0],"min");return u.forEach(f=>n.disposeIntermediateTensorInfo(f)),c}const aWe={kernelName:xx,backendName:"webgl",kernelFunc:oWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lWe=Ei+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,uWe=He({opSnippet:lWe}),cWe={kernelName:wp,backendName:"webgl",kernelFunc:uWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fWe=Ei+"return log(x + sqrt(x * x + 1.0));",hWe=He({opSnippet:fWe}),dWe={kernelName:Sp,backendName:"webgl",kernelFunc:hWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pWe=Ei+`
  return atan(x);
`,mWe=He({opSnippet:pWe}),gWe={kernelName:Cp,backendName:"webgl",kernelFunc:mWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yWe=pN+`
  return atan(a, b);
`,vWe=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+nu+`
  return result;
`,xWe=In({opSnippet:yWe,packedOpSnippet:vWe}),bWe={kernelName:kp,backendName:"webgl",kernelFunc:xWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wWe=Ei+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,SWe=He({opSnippet:wWe}),CWe={kernelName:$p,backendName:"webgl",kernelFunc:SWe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xd{constructor(e,n,r,i=!1,s=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,a=e.strideHeight,l=e.strideWidth,u=e.dilationHeight,c=e.dilationWidth,f=e.effectiveFilterHeight,h=e.effectiveFilterWidth,d=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;const m=n==="avg",g=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,y=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let v="0.0";if(m||(v="-1.0 / 1e-20"),r){const $=">=";this.userCode=`
        const ivec2 strides = ivec2(${a}, ${l});
        const ivec2 pads = ivec2(${d}, ${p});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${f};
              wR += ${u}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h};
                wC += ${c}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${$} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${i?s?g:y:`wR * ${h} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const x="max";let b=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(b="avgValue / max(count, 1.0)");const w=Math.floor(o/4)*4,S=o%4,C=`
      if (${m}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${x}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${l});
      const ivec2 pads = ivec2(${d}, ${p});
      const float initializationValue = ${v};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${v});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${f};
            wR += ${u}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${w}; wC += 4) {
            int xC = xCCorner + wC * ${c};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              getValue(batch, xR, xC + 3 * ${c}, d)
            );

            ${C}
          }

          int xC = xCCorner + ${w};
          if (${S===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${C}
          } else if (${S===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              initializationValue,
              initializationValue
            );

            ${C}
          } else if (${S===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              initializationValue
            );

            ${C}
          }
        }
        setOutput(${b});
      }
    `}}class gN{constructor(e,n,r,i=!1,s=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,a=e.strideDepth,l=e.strideHeight,u=e.strideWidth,c=e.dilationDepth,f=e.dilationHeight,h=e.dilationWidth,d=e.effectiveFilterDepth,p=e.effectiveFilterHeight,m=e.effectiveFilterWidth,g=e.padInfo.front,y=e.padInfo.top,v=e.padInfo.left;this.outputShape=e.outShape;const x=n==="avg";let b="0.0";if(x||(b="-1.0 / 1e-20"),r){const I=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${a}, ${l}, ${u});
        const ivec3 pads = ivec3(${g}, ${y}, ${v});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${d};
              wD += ${c}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${p};
                wR += ${f}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${m};
                  wC += ${h}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${I} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${i?s?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${p} * ${m} +
                      wR * ${m} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const w="max";let S=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(S="avgValue / max(count, 1.0)");const C=Math.floor(o/4)*4,$=o%4,k=`
      if (${x}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${w}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${a}, ${l}, ${u});
      const ivec3 pads = ivec3(${g}, ${y}, ${v});
      const float initializationValue = ${b};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${b});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${c}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p};
            wR += ${f}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${C}; wC += 4) {
              int xC = xCCorner + wC * ${h};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                getValue(batch, xD, xR, xC + 2 * ${h}, ch),
                getValue(batch, xD, xR, xC + 3 * ${h}, ch)
              );

              ${k}
            }

            int xC = xCCorner + ${C};
            if (${$===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${k}
            } else if (${$===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                initializationValue,
                initializationValue
              );

              ${k}
            } else if (${$===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                getValue(batch, xD, xR, xC + 2 * ${h}, ch),
                initializationValue
              );

              ${k}
            }
          }
        }
        setOutput(${S});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $We(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;Pm(i,"avgPool");const{filterSize:s,strides:o,pad:a,dimRoundingMode:l}=r,u=1;E(Mn(o,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=Ii(i.shape,s,o,u,a,l);if(c.filterWidth===1&&c.filterHeight===1&&et(c.inShape,c.outShape))return Nr({inputs:{x:i},backend:n});const f=new Xd(c,"avg",!1);return n.runWebGLProgram(f,[i],"float32")}const kWe={kernelName:bx,backendName:"webgl",kernelFunc:$We};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:s,strides:o,pad:a,dimRoundingMode:l,dataFormat:u}=r,c=[1,1,1],f=bo(i.shape,s,o,c,a,l,u),h=new gN(f,"avg",!1);return n.runWebGLProgram(h,[i],"float32")}const TWe={kernelName:wx,backendName:"webgl",kernelFunc:IWe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EWe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,s=e.strideWidth,o=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=l-1-e.padInfo.top,f=u-1-e.padInfo.left,h=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${c}, ${f});
      const float avgMultiplier = float(${h});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${u};
            wC+= ${a}) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class NWe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,i=e.filterWidth,s=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,f=e.effectiveFilterDepth,h=e.effectiveFilterHeight,d=e.effectiveFilterWidth,p=f-1-e.padInfo.front,m=h-1-e.padInfo.top,g=d-1-e.padInfo.left,y=1/(n*r*i);this.userCode=`
      const ivec3 pads = ivec3(${p}, ${m}, ${g});
      const float avgMultiplier = float(${y});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${f};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${s}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${h};
              wR += ${u}) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${d};
                wC += ${c}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AWe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,o=s,{filterSize:a,strides:l,pad:u,dimRoundingMode:c}=r,f=[1,1,1],h=bo(o.shape,a,l,f,u,c),d=new NWe(h);return n.runWebGLProgram(d,[i],o.dtype)}const OWe={kernelName:LT,backendName:"webgl",kernelFunc:AWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PWe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,o=s;Pm([i,s],"avgPoolGrad");const{filterSize:a,strides:l,pad:u}=r,c=Ii(o.shape,a,l,1,u),f=new EWe(c);return n.runWebGLProgram(f,[i],o.dtype)}const _We={kernelName:FT,backendName:"webgl",kernelFunc:PWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DWe(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:s}=e,{transposeA:o,transposeB:a}=r;return r0({a:i,b:s,transposeA:o,transposeB:a,backend:n})}const RWe={kernelName:Sx,backendName:"webgl",kernelFunc:DWe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MWe{constructor(e,n,r,i,s,o){this.outputShape=[],this.variableNames=["x","mean","variance"],_e(e,n),_e(e,r);let a="0.0";i!=null&&(_e(e,i),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="1.0";s!=null&&(_e(e,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${a};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${o}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FWe{constructor(e,n,r,i,s,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],_e(e,n),_e(e,r);let a="vec4(0.0)";i!=null&&(_e(e,i),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="vec4(1.0)";s!=null&&(_e(e,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${a};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${o}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LWe=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:i,variance:s,offset:o,scale:a}=t;E(i.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),E(o==null||i.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),E(a==null||i.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const u=[r,i,s];let c=null;o!=null&&(c=o.shape,u.push(o));let f=null;a!=null&&(f=a.shape,u.push(a));const h=Y().getBool("WEBGL_PACK_NORMALIZATION")?new FWe(r.shape,i.shape,s.shape,c,f,l):new MWe(r.shape,i.shape,s.shape,c,f,l);return e.runWebGLProgram(h,u,u[0].dtype)},BWe={kernelName:Dx,backendName:"webgl",kernelFunc:LWe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jWe{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=st(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=zWe(this.rank);let i;const s=e.map((o,a)=>`sourceLoc.${G$[a]} = start[${a}] + coords.${G$[a]};`);i=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${s.join(`
`)}
      `,this.userCode=`
      void main() {
        ${i}
        setOutput(getSource(${r}));
      }
    `}}const G$=["x","y","z","w","u","v"];function zWe(t){if(t===1)return"sourceLoc";if(t<=6)return G$.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VWe{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=st(this.rank),r=Zn("coords",this.rank),i=Zn("sourceLoc",this.rank),s=this.rank===1?"sourceLoc":`vec2(${i.slice(-2).join()})`,o=`getChannel(getSource(${i.join()}), ${s})`,a=`
      result.x = ${o};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${i[this.rank-1]};
        result.y = ${o};
        --${i[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${i[this.rank-2]};
        result.z = ${o};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${i[this.rank-1]};
          result.w = ${o};
        }
      }
    `,u=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((c,f)=>`start[${f}]`).join()});`:e.map((c,f)=>`${i[f]} = ${r[f]} + start[${f}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${u}
        vec4 result = vec4(0.);
        ${a}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WWe(t,e,n,r){const i=r.texData.get(t.dataId),s=r.makeTensorInfo(n,t.dtype),o=r.texData.get(s.dataId);Object.assign(o,i),o.refCount=1,o.shape=n,o.dtype=t.dtype;let a=cE(e,Se(t.shape));i.slice&&(a+=i.slice.flatOffset),o.slice={flatOffset:a,origDataId:i.slice&&i.slice.origDataId||t.dataId};const l=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,l+1),s}function Tf(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:s,size:o}=r,[a,l]=Ib(i,s,o);if(aE(i,a,l),J(l)===0)return n.makeTensorInfo(l,i.dtype,[]);if(n.shouldExecuteOnCPU([i])||i.dtype==="string"){const f=n.texData.get(i.dataId),h=RVe(f.values,a,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,h)}const{isPacked:u}=n.texData.get(i.dataId),c=uE(i.shape,a,l);if(u||!c){const f=Y().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new VWe(l):new jWe(l),h=[a];return n.runWebGLProgram(f,[i],i.dtype,h)}return n.uploadToGPU(i.dataId),WWe(i,a,l,n)}const UWe={kernelName:ub,backendName:"webgl",kernelFunc:Tf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GWe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:s,crops:o}=r;E(i.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const a=s.reduce((v,x)=>v*x),l=xm(i.shape,s,a),u=bm(l.length,s.length),c=wm(i.shape,s,a),f=mE(o,s.length),h=gE(c,o,s.length),d=[],p=fe({inputs:{x:i},backend:n,attrs:{shape:l}}),m=tr({inputs:{x:p},backend:n,attrs:{perm:u}}),g=fe({inputs:{x:m},backend:n,attrs:{shape:c}}),y=Tf({inputs:{x:g},backend:n,attrs:{begin:f,size:h}});return d.push(p),d.push(m),d.push(g),d.forEach(v=>n.disposeIntermediateTensorInfo(v)),y},HWe={kernelName:Cx,backendName:"webgl",kernelFunc:GWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:s}=e,{size:o}=r,a=n.readSync(i.dataId),l=n.readSync(s.dataId),u=l8(a,l,s.dtype,s.shape,o);return n.makeTensorInfo([o],s.dtype,u)}const qWe={kernelName:BT,backendName:"webgl",kernelFunc:KWe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XWe=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,YWe=`
  return float(int(a.r) & int(b.r));
`;function ZWe(t){const{inputs:e,backend:n}=t,{a:r,b:i}=e,s=Y().getBool("WEBGL_PACK_BINARY_OPERATIONS"),o=Y().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,i])||o===1){const l=n.texData.get(r.dataId).values,u=n.texData.get(i.dataId).values,[c,f]=sVe(r.shape,i.shape,l,u,r.dtype),h=n.makeTensorInfo(f,r.dtype),d=n.texData.get(h.dataId);return d.values=c,h}let a;return s?a=new kf(XWe,r.shape,i.shape,!1):a=new Fl(YWe,r.shape,i.shape),n.runWebGLProgram(a,[r,i],r.dtype)}const QWe={kernelName:jT,backendName:"webgl",kernelFunc:ZWe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JWe(t){const{inputs:e,backend:n}=t,{s0:r,s1:i}=e,s=n.readSync(r.dataId),o=n.readSync(i.dataId),a=_e(Array.from(s),Array.from(o));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const eUe={kernelName:cW,backendName:"webgl",kernelFunc:JWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tUe="return float(a != b);",S8=In({opSnippet:tUe,cpuKernelImpl:IVe,dtype:"bool"}),nUe={kernelName:Zx,backendName:"webgl",kernelFunc:S8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dm(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.texData.get(r.dataId);return Nr({inputs:{x:i.complexTensorInfos.real},backend:n})}const rUe={kernelName:f2,backendName:"webgl",kernelFunc:Dm};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iUe="return float(int(x));";function sUe(t,e){const n=new ms(t.shape,iUe),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H$(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dtype:s}=r;if(s==="complex64"){if(i.dtype==="complex64")return Nr({inputs:{x:i},backend:n});const o=hn(i.shape),a=H$({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),l=Pa({inputs:{real:a,imag:o},backend:n});return o.dispose(),n.disposeIntermediateTensorInfo(a),l}if(i.dtype==="complex64"){const o=Dm({inputs:{input:i},backend:n}),a=H$({inputs:{x:o},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(o),a}if(!sW(i.dtype,s)){const o=Nr({inputs:{x:i},backend:n});return{dataId:o.dataId,shape:o.shape,dtype:s}}if(n.shouldExecuteOnCPU([i])){const o=n.texData.get(i.dataId).values,[a,l,u]=oVe(o,i.shape,i.dtype,s);return n.makeTensorInfo(a,l,u)}if(s==="int32")return sUe(i,n);if(s==="bool"){const o=n.makeTensorInfo([],"bool",_n("bool",1)),l=S8({inputs:{a:i,b:o},backend:n});return n.disposeIntermediateTensorInfo(o),l}throw new Error(`Error in Cast: failed to cast ${i.dtype} to ${s}`)}const oUe={kernelName:Ip,backendName:"webgl",kernelFunc:H$};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cF="return ceil(x);",aUe=He({opSnippet:cF,packedOpSnippet:cF,cpuKernelImpl:aVe}),lUe={kernelName:Tp,backendName:"webgl",kernelFunc:aUe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uUe{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cUe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{clipValueMin:s,clipValueMax:o}=r;let a;Y().getBool("WEBGL_PACK_CLIP")?a=new cUe(i.shape):a=new uUe(i.shape);const l=[[s],[o]];return n.runWebGLProgram(a,[i],i.dtype,l)}const hUe={kernelName:Ep,backendName:"webgl",kernelFunc:fUe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dUe{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fF(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function pUe(t){const{inputs:e,backend:n}=t,{x:r}=e,i=n.texData.get(r.dataId),s=new dUe(r.shape),o=[fF(r,i.complexTensorInfos.real),fF(r,i.complexTensorInfos.imag)];return n.runWebGLProgram(s,o,o[0].dtype)}const mUe={kernelName:$x,backendName:"webgl",kernelFunc:pUe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gUe{constructor(e){this.outputShape=[],this.outputShape=$s(e,1),this.variableNames=e.map((o,a)=>`T${a}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let o=1;o<n.length;o++)n[o]=n[o-1]+e[o][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let o=1;o<n.length;o++){const a=n[o-1];r.push(`else if (yC < ${n[o]}) setOutput(getT${o}(yR, yC-${a}));`)}const i=n.length,s=n[n.length-1];r.push(`else setOutput(getT${i}(yR, yC-${s}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yUe{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=$s(e,n);const r=this.outputShape,i=r.length,s=st(i),o=Zn("coords",i),a=["x","y","z","w","u","v"].slice(0,i);this.variableNames=e.map((m,g)=>`T${g}`);const l=new Array(e.length-1);l[0]=e[0][n];for(let m=1;m<l.length;m++)l[m]=l[m-1]+e[m][n];const u=a[n],c=a.slice(-2),f=a.join();let h=`if (${u} < ${l[0]}) {
        return getChannel(
            getT0(${f}), vec2(${c.join()}));
        }`;for(let m=1;m<l.length;m++){const g=l[m-1];h+=`
        if (${u} < ${l[m]}  && ${u} >= ${l[m-1]}) {
          return getChannel(
            getT${m}(${Ag(a,u,g)}),
            vec2(${Ag(c,u,g)}));
        }`}const d=l.length,p=l[l.length-1];h+=`
        return getChannel(
          getT${d}(${Ag(a,u,p)}),
          vec2(${Ag(c,u,p)}));`,this.userCode=`
      float getValue(${a.map(m=>"int "+m)}) {
        ${h}
      }

      void main() {
        ${s} coords = getOutputCoords();
        vec4 result = vec4(getValue(${o}), 0., 0., 0.);

        ${o[i-1]} = ${o[i-1]} + 1;
        if (${o[i-1]} < ${r[i-1]}) {
          result.g = getValue(${o});
        }

        ${o[i-2]} = ${o[i-2]} + 1;
        if (${o[i-2]} < ${r[i-2]}) {
          result.a = getValue(${o});
        }

        ${o[i-1]} = ${o[i-1]} - 1;
        if (${o[i-2]} < ${r[i-2]} &&
            ${o[i-1]} < ${r[i-1]}) {
          result.b = getValue(${o});
        }
        setOutput(result);
      }
    `}}function Ag(t,e,n){const r=t.indexOf(e);return t.map((s,o)=>o===r?`${s} - ${n}`:s).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hb(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.texData.get(r.dataId);return Nr({inputs:{x:i.complexTensorInfos.imag},backend:n})}const vUe={kernelName:r2,backendName:"webgl",kernelFunc:Hb};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dh(t,e,n){const r=t[0].dtype;if(r==="complex64"){const d=t.map(v=>Dm({inputs:{input:v},backend:n})),p=t.map(v=>Hb({inputs:{input:v},backend:n})),m=dh(d,e,n),g=dh(p,e,n),y=Pa({inputs:{real:m,imag:g},backend:n});return d.forEach(v=>n.disposeIntermediateTensorInfo(v)),p.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),y}let i=n.shouldExecuteOnCPU(t);if(r==="string"&&(i=!0),i){const d=t.map(b=>{const S=[-1,J(b.shape.slice(e))];return fe({inputs:{x:b},backend:n,attrs:{shape:S}})}),p=d.map(b=>({vals:n.readSync(b.dataId),shape:b.shape})),m=$s(d.map(b=>b.shape),1),g=d[0].shape[0]===1,y=lVe(p,m,r,g),v=$s(t.map(b=>b.shape),e),x=n.makeTensorInfo(v,r,y);return d.forEach(b=>n.disposeIntermediateTensorInfo(b)),x}const s=t.filter(d=>J(d.shape)>0),o=Y().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&s[0].shape.length>1;if(s.length===1){const d=o?new ms(t[0].shape,Oo):new zo(t[0].shape,Oo);return n.runWebGLProgram(d,t,r)}const a=Y().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(s.length>a){const d=[];for(let m=0;m<s.length;m+=a){const g=s.slice(m,m+a);d.push(dh(g,e,n))}const p=dh(d,e,n);for(const m of d)n.disposeIntermediateTensorInfo(m);return p}if(o){const d=new yUe(s.map(p=>p.shape),e);return n.runWebGLProgram(d,s,r)}const{tensors2D:l,outShape:u}=xUe(s,e,n),c=new gUe(l.map(d=>d.shape)),f=n.runWebGLProgram(c,l,r);l.forEach(d=>n.disposeIntermediateTensorInfo(d));const h=fe({inputs:{x:f},attrs:{shape:u},backend:n});return n.disposeIntermediateTensorInfo(f),h}function xUe(t,e,n){const r=$s(t.map(s=>s.shape),e);return{tensors2D:t.map(s=>fe({inputs:{x:s},attrs:{shape:[-1,J(s.shape.slice(e))]},backend:n})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C8(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r,s=Me(i,e[0].shape)[0],o=e.map(u=>u.shape);hE(o,s);const a=$s(e.map(u=>u.shape),s);if(J(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(u=>J(u.shape)>0);return l.length===1?Nr({inputs:{x:l[0]},backend:n}):dh(l,s,n)}const bUe={kernelName:kx,backendName:"webgl",kernelFunc:C8};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $8{constructor(e,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const o=e.padInfo.top,a=e.padInfo.left,l=e.strideHeight,u=e.strideWidth,c=e.dilationHeight,f=e.dilationWidth,h=e.filterHeight,d=e.filterWidth,p=Math.floor(e.inChannels/4)*4,m=e.inChannels%4,g=e.dataFormat==="channelsLast",y=g?1:2,v=g?2:3,x=g?3:1;let b="",w="";r&&(i?b=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?b=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:b=`
          float activation(float x) {
            ${r}
          }
        `,w="result = activation(result);");const S=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${b}

      const ivec2 strides = ivec2(${l}, ${u});
      const ivec2 pads = ivec2(${o}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${x}];

        ivec2 xRCCorner =
            ivec2(coords[${y}], coords[${v}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${h}; wR++) {
          int xR = xRCorner + wR * ${c};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${d}; wC++) {
            int xC = xCCorner + wC * ${f};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${p}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${g}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${m===1}) {

              if (${g}) {
                dotProd +=
                    getX(batch, xR, xC, ${p}) *
                    getW(wR, wC, ${p}, d2);
              } else {
                dotProd +=
                    getX(batch, ${p}, xR, xC) *
                    getW(wR, wC, ${p}, d2);
              }

            } else if (${m===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2)
              );

              if (${g}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${m===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2),
                getW(wR, wC, ${p} + 2, d2)
              );

              if (${g}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1),
                  getX(batch, xR, xC, ${p} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC),
                  getX(batch, ${p} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${S}
        ${w}
        setOutput(result);
      }
    `}}class wUe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,i=e.padInfo.left,s=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,f=e.filterDepth,h=e.filterHeight,d=e.filterWidth,p=Math.floor(e.inChannels/4)*4,m=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${s}, ${o}, ${a});
      const ivec3 pads = ivec3(${n}, ${r}, ${i});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${f}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${h}; wR++) {
            int xR = xRCorner + wR * ${u};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${d}; wC++) {
              int xC = xCCorner + wC * ${c};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${p}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${m===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${p}) *
                  getW(wF, wR, wC, ${p}, d2);
              } else if (${m===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${m===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1),
                  getX(batch, xF, xR, xC, ${p} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2),
                  getW(wF, wR, wC, ${p} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class k8{constructor(e,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Ln(this.outputShape.length);const o=e.padInfo.left,a=e.strideWidth,l=e.dilationWidth,u=e.filterHeight,c=e.filterWidth,f=c;let h=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let g=0;g<c;g++)h+=`
           vec4 xTexelC${g*2};
           int xTexelC${g*2}Ready;
           vec4 xTexelC${g*2+1};
           int xTexelC${g*2+1}Ready;
           vec4 xC${g};`;h+=`
     for (int r = 0; r < ${u}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let g=0;g<c;g++)h+=`
           xTexelC${g*2} = vec4(0.0);
           xTexelC${g*2}Ready = 0;
           xTexelC${g*2+1} = vec4(0.0);
           xTexelC${g*2+1}Ready = 0;
           xC${g} = vec4(0.0);`;h+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let g=0;g<(f+1)/2;g++){const y=g*2;if(h+=`
           xC = xCCorner + ${y*l};
           `,a===1){if(y<c&&(o%2===1?(h+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }
               `,l===1&&y>0?h+=`
                 xC${y} = vec4(xTexelC${y-2}.zw, xTexelC${y}.xy);
                 `:h+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${y} = vec4(previous.zw, xTexelC${y}.xy);
                   } else {
                     xC${y} = vec4(0.0, 0.0, xTexelC${y}.xy);
                   }
                   `):h+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 xC${y} = xTexelC${y};
                 `,y+1<c)){const v=o%2===0?NT(l):l;l%2===0&&o%2===1||l%2!==0&&o%2!==1?(h+=`
                   xCOffset = xC + imod(pads[1], 2) + ${v};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                     xTexelC${y+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${y+1}.zw = vec2(0.0);
                     }
                     xTexelC${y+1}Ready = 1;
                   }
                   `,l>1?h+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${y+1} = vec4(previous.zw, xTexelC${y+1}.xy);
                     } else {
                      xC${y+1} = vec4(0.0, 0.0, xTexelC${y+1}.xy);
                     }
                     `:h+=`
                     xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.xy);
                     `):v===1?h+=`
                     xC${y+1} = xTexelC${y};
                     `:h+=`
                     xCOffset = xC + ${v};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                       xTexelC${y+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${y+1}.zw = vec2(0.0);
                       }
                       xTexelC${y+1}Ready = 1;
                     }

                     xC${y+1} = xTexelC${y+1};
                     `}}else y<c&&(o%2===1?(h+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${y+1}Ready == 0) {
                   xTexelC${y+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${y+1}.zw = vec2(0.0);
                   }
                   xTexelC${y+1}Ready = 1;
                 }

                 xC${y} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);
               `,y+1<c&&(h+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${y+1} = vec4(xTexelC${y+1}.xy, final.xy);
                 `)):(h+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                   xTexelC${y+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y+1}.zw = vec2(0.);
                   }
                   xTexelC${y+1}Ready = 1;
                 }

                 xC${y} = vec4(
                   xTexelC${y}.xy, xTexelC${y+1}.xy);
               `,y+1<c&&(h+=`
                   xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);
                 `)));y<c&&(h+=`
             wTexel = getW(r, ${y}, d1, d2);
             dotProd += xC${y}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${y}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,y+1<c&&(h+=`
               wTexel = getW(r, ${y+1}, d1, d2);
               dotProd += xC${y+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${y+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}h+=`
     }
   `,h+=`
     }
   `,h+=`
     }
   `;let d="",p="";r&&(i?d=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:s?d=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:d=`vec4 activation(vec4 x) {
           ${r}
         }`,p="result = activation(result);");const m=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${d}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${h}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${m}
         ${p}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SUe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=Ln(this.outputShape.length);const{dataFormat:r}=n,i=nr(),s=r==="channelsLast",o=s?1:2,a=s?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let u="";for(let c=0;c<=1;c++)for(let f=0;f<=1;f++)u+=`
          blockIndex = rc.z + ${f};
          pos = rc.y + ${c};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${o}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${a}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${s}) {
                  innerDims = vec2(d1, ch);
                  result[${c*2+f}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${c*2+f}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${u}

        ${i.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i0(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function I8({x:t,filter:e,convInfo:n,backend:r,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:o=0,activation:a=null}){const l=t.shape,u=r.texData.get(t.dataId),c=n.inChannels,f=l[0]*l[1]*l[2],h=n.outChannels,d=n.dataFormat==="channelsLast",p=!1,m=!1;let g;const y=[];if(s!=null){const b=i0(s.shape,d);b!=null&&(s=fe({inputs:{x:s},backend:r,attrs:{shape:b}}),y.push(s))}if(i!=null){const b=i0(i.shape,d);b!=null&&(i=fe({inputs:{x:i},backend:r,attrs:{shape:b}}),y.push(i))}if(!((f===1||h===1)&&c>v8)&&u.isPacked&&d&&u.texture!=null&&l[2]%2!==0&&et(u.shape.slice(-3),l.slice(-3))){const b=l[0]*l[1]*(l[2]+1),w={dataId:t.dataId,shape:[1,b,n.inChannels],dtype:t.dtype},S=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,E(n0(u.shape,w.shape),()=>`packed reshape ${u.shape} to ${w.shape} isn't free`);const C=fe({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});y.push(C);const $=r0({a:w,b:C,backend:r,transposeA:p,transposeB:m,bias:i,activation:a,preluActivationWeights:s,leakyreluAlpha:o}),k=r.texData.get($.dataId);E(k.isPacked,()=>"batchMatMul result is expected to be packed"),u.shape=S,k.shape=n.outShape,g=Nr({inputs:{x:$},backend:r}),g.shape=n.outShape,y.push($)}else{const b=n.outHeight*n.outWidth,w=fe({inputs:{x:t},backend:r,attrs:{shape:d?[n.batchSize,b,n.inChannels]:[n.batchSize,n.inChannels,b]}}),S=fe({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),C=r0({a:d?w:S,b:d?S:w,transposeA:!d,transposeB:m,backend:r,bias:i,activation:a,preluActivationWeights:s,leakyreluAlpha:o});g=fe({inputs:{x:C},backend:r,attrs:{shape:n.outShape}}),y.push(w),y.push(S),y.push(C)}for(const b of y)r.disposeIntermediateTensorInfo(b);return g}function T8({x:t,filter:e,convInfo:n,backend:r,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:o=0,activation:a=null}){const{filterWidth:l,filterHeight:u,inChannels:c,outWidth:f,outHeight:h,dataFormat:d}=n,p=d==="channelsLast",m=l*u*c,g=h*f,y=[n.batchSize,m,g],v=!0,x=!1,b=[];if(s!=null){const O=i0(s.shape,p);O!=null&&(s=fe({inputs:{x:s},backend:r,attrs:{shape:O}}),b.push(s))}if(i!=null){const O=i0(i.shape,p);O!=null&&(i=fe({inputs:{x:i},backend:r,attrs:{shape:O}}),b.push(i))}const w=fe({inputs:{x:e},backend:r,attrs:{shape:[1,m,J(e.shape)/m]}});b.push(w);const S=new SUe(y,n),C=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],$=r.runWebGLProgram(S,[t],"float32",C),k=fe({inputs:{x:$},backend:r,attrs:{shape:y}});b.push($),b.push(k);const I=i!=null,T=s!=null,A=a==="leakyrelu",_=a?qd(a,!0):null,D=new y8(p?k.shape:w.shape,p?w.shape:k.shape,p?[n.batchSize,g,n.outChannels]:[n.batchSize,n.outChannels,g],v,x,I,_,T,A),P=p?[k,w]:[w,k];if(i&&P.push(i),T&&P.push(s),A){const O=r.makeTensorInfo([],"float32",$a(o,"float32"));P.push(O),b.push(O)}const R=r.runWebGLProgram(D,P,"float32"),F=fe({inputs:{x:R},backend:r,attrs:{shape:n.outShape}});b.push(R);for(const O of b)r.disposeIntermediateTensorInfo(O);return F}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:o,pad:a,dataFormat:l,dilations:u,dimRoundingMode:c}=r,f=wo(l),h=$n(i.shape,s.shape,o,u,a,c,!1,f);let d;if(h.filterHeight===1&&h.filterWidth===1&&h.dilationHeight===1&&h.dilationWidth===1&&h.strideHeight===1&&h.strideWidth===1&&(h.padInfo.type==="SAME"||h.padInfo.type==="VALID"))d=I8({x:i,filter:s,convInfo:h,backend:n});else if(h.strideWidth<=2&&f==="channelsLast"&&Y().getBool("WEBGL_EXP_CONV")){const m=new k8(h),g=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];d=n.runWebGLProgram(m,[i,s],"float32",g)}else if(Y().getBool("WEBGL_CONV_IM2COL"))d=T8({x:i,filter:s,convInfo:h,backend:n});else{const m=new $8(h);d=n.runWebGLProgram(m,[i,s],"float32")}const p=fe({inputs:{x:d},backend:n,attrs:{shape:h.outShape}});return n.disposeIntermediateTensorInfo(d),p}const $Ue={kernelName:Ix,backendName:"webgl",kernelFunc:CUe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kUe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,i=e.padInfo.top,s=e.padInfo.left,o=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${i};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${s};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${o?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class IUe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,s=e.strideWidth,o=e.dataFormat==="channelsLast",a=n-1-e.padInfo.top,l=r-1-e.padInfo.left,u=o?1:2,c=o?2:3,f=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${f}];

        ivec2 dyCorner = ivec2(coords[${u}], coords[${c}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${o}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class TUe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,i=e.strideWidth,s=e.padInfo.front,o=e.padInfo.top,a=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${s};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${o};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${i} - ${a};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class EUe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,i=e.filterWidth,s=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=n-1-e.padInfo.front,u=r-1-e.padInfo.top,c=i-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${u}, ${c});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${s}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${i}; wC++) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${i} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:o,pad:a,dataFormat:l,dimRoundingMode:u,filterShape:c}=r,f=wo(l),h=$n(i.shape,c,o,1,a,u,!1,f),d=new kUe(h);return n.runWebGLProgram(d,[i,s],"float32")}const AUe={kernelName:VT,backendName:"webgl",kernelFunc:NUe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OUe{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=Ln(this.outputShape.length);const n=e.filterHeight,r=e.filterWidth,i=n-1-e.padInfo.top,s=r-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PUe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{inputShape:o,strides:a,pad:l,dataFormat:u,dimRoundingMode:c}=r,f=wo(u),h=$n(o,s.shape,a,1,l,c,!1,f);if(Y().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&f==="channelsLast"){const d=[[h.strideHeight,h.strideWidth]],p=new OUe(h);return n.runWebGLProgram(p,[i,s],"float32",d)}else{const d=new IUe(h);return n.runWebGLProgram(d,[i,s],"float32")}}const _Ue={kernelName:Tx,backendName:"webgl",kernelFunc:PUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:o,pad:a,dilations:l}=r,u=ka(i.shape,s.shape,o,l,a),c=new wUe(u);return n.runWebGLProgram(c,[i,s],"float32")}const RUe={kernelName:Ex,backendName:"webgl",kernelFunc:DUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:o,pad:a,filterShape:l}=r,u=ka(i.shape,l,o,1,a),c=new TUe(u);return n.runWebGLProgram(c,[i,s],"float32")}const FUe={kernelName:WT,backendName:"webgl",kernelFunc:MUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LUe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{pad:o,strides:a,inputShape:l}=r,u=ka(l,s.shape,a,1,o),c=new EUe(u);return n.runWebGLProgram(c,[i,s],"float32")}const BUe={kernelName:UT,backendName:"webgl",kernelFunc:LUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jUe=If+`
  return cos(x);
`,zUe=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${nu}
  return result;
`,VUe=He({opSnippet:jUe,packedOpSnippet:zUe}),WUe={kernelName:Np,backendName:"webgl",kernelFunc:VUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UUe=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,GUe=He({opSnippet:UUe}),HUe={kernelName:Ap,backendName:"webgl",kernelFunc:GUe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KUe{constructor(e,n,r,i,s){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,a,l,u]=e,[c]=n,[f,h]=r;this.outputShape=[c,f,h,u];const d=i==="bilinear"?1:0,[p,m]=[`${a-1}.0`,`${l-1}.0`],[g,y,v]=f>1?[`${(a-1)/(f-1)}`,"(y2-y1) * height_ratio",`y1*${p} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${p}`],[x,b,w]=h>1?[`${(l-1)/(h-1)}`,"(x2-x1) * width_ratio",`x1*${m} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${m}`];this.userCode=`
      const float height_ratio = float(${g});
      const float width_ratio = float(${x});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${o}) {
          return;
        }

        float height_scale = ${y};
        float width_scale = ${b};

        float in_y = ${v};
        if( in_y < 0.0 || in_y > ${p} ) {
          setOutput(float(${s}));
          return;
        }
        float in_x = ${w};
        if( in_x < 0.0 || in_x > ${m} ) {
          setOutput(float(${s}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${d} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qUe=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:i,boxes:s,boxInd:o}=e,{cropSize:a,method:l,extrapolationValue:u}=r,c=new KUe(i.shape,s.shape,a,l,u);return n.runWebGLProgram(c,[i,s,o],"float32")},XUe={kernelName:HT,backendName:"webgl",kernelFunc:qUe};var Yd;(function(t){t.Prod="*",t.Sum="+"})(Yd||(Yd={}));class hF{constructor(e,n,r,i){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const s=this.outputShape.length,o=this.op===Yd.Prod?"1.0":"0.0",a=r?o:`getX(${dF(s,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let u="",c="";r?(u=i?`end != ${l-1}`:"end != 0",c=i?"end + 1":"end - 1"):(u=i?`end + pow2 < ${l}`:"end >= pow2",c=i?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${st(s)} coords = getOutputCoords();
        int end = ${pF(s,"coords",this.op)};
        float val = ${a};
        int pow2 = int(pow(2.0, index));
        if (${u}) {
          int idx = ${c};
          ${pF(s,"coords",this.op)} = idx;
          val ${this.op}= getX(${dF(s,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function dF(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function pF(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E8(t,e,n,r,i,s){const o=e.shape.length,a=Nt([r],o);let l=e;a!=null&&(l=tr({inputs:{x:e},backend:n,attrs:{perm:a}}));const u=Vt(1,o)[0];if(u!==o-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const c=l.shape[u];let f=Nr({inputs:{x:l},backend:n});for(let h=0;h<=Math.ceil(Math.log2(c))-1;h++){const d=new hF(t,l.shape,!1,s),p=[[h]],m=f;f=n.runWebGLProgram(d,[f],f.dtype,p),n.disposeIntermediateTensorInfo(m)}if(i){const h=new hF(t,l.shape,i,s),d=f;f=n.runWebGLProgram(h,[f],f.dtype),n.disposeIntermediateTensorInfo(d)}if(a!=null){const h=Ia(a),d=tr({inputs:{x:f},backend:n,attrs:{perm:h}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(l),d}return f}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,exclusive:o,reverse:a}=r;return E8(Yd.Prod,i,n,s,o,a)}const ZUe={kernelName:GT,backendName:"webgl",kernelFunc:YUe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,exclusive:o,reverse:a}=r;return E8(Yd.Sum,i,n,s,o,a)}const JUe={kernelName:Nx,backendName:"webgl",kernelFunc:QUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:s}=e,{size:o,binaryOutput:a}=r;if(i.shape.length===1){const l=n.readSync(i.dataId),u=n.readSync(s.dataId),c=l8(l,u,s.dtype,s.shape,o);return n.makeTensorInfo([o],s.dtype,c)}else if(i.shape.length===2){const l=n.bufferSync(i),u=n.bufferSync(s),c=iVe(l,u,o,a);return n.makeTensorInfo(c.shape,s.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}const tGe={kernelName:KT,backendName:"webgl",kernelFunc:eGe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nGe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockSize:s,dataFormat:o}=r,a=i.shape[0],l=o==="NHWC"?i.shape[1]:i.shape[2],u=o==="NHWC"?i.shape[2]:i.shape[3],c=o==="NHWC"?i.shape[3]:i.shape[1],f=l*s,h=u*s,d=c/(s*s),p=o==="NHWC"?[a,f,h,d]:[a,d,f,h],m=new nGe(p,s,o);return n.runWebGLProgram(m,[i],i.dtype)}const iGe={kernelName:qT,backendName:"webgl",kernelFunc:rGe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class N8{constructor(e,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Ln(this.outputShape.length);const o=e.filterHeight,a=e.filterWidth,l=e.outChannels/e.inChannels;let u="",c="";r&&(i?u=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?u=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:u=`
          float activation(float x) {
            ${r}
          }
        `,c="result = activation(result);");const f=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${u}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${o}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${a}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${f}
        ${c}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class A8{constructor(e,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Ln(this.outputShape.length);const o=e.outChannels/e.inChannels,a=e.padInfo.left,l=e.strideWidth,u=e.dilationWidth,c=e.filterHeight,f=e.filterWidth,h=f;let d=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let y=0;y<f;y++)d+=`
          vec4 xTexelC${y*2};
          int xTexelC${y*2}Ready;
          vec4 xTexelC${y*2+1};
          int xTexelC${y*2+1}Ready;
          vec4 xC${y};`;d+=`
    for (int r = 0; r < ${c}; r++) {
      `;for(let y=0;y<f;y++)d+=`
          xTexelC${y*2} = vec4(0.0);
          xTexelC${y*2}Ready = 0;
          xTexelC${y*2+1} = vec4(0.0);
          xTexelC${y*2+1}Ready = 0;
          xC${y} = vec4(0.0);`;d+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let y=0;y<(h+1)/2;y++){const v=y*2;if(d+=`
          xC = xCCorner + ${v*u};
          `,l===1){if(v<f&&(a%2===1?(d+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }
              `,u===1&&v>0?d+=`
                xC${v} = vec4(xTexelC${v-2}.zw, xTexelC${v}.xy);
                `:d+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${v} = vec4(previous.zw, xTexelC${v}.xy);
                  } else {
                    xC${v} = vec4(0.0, 0.0, xTexelC${v}.xy);
                  }
                  `):d+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                xC${v} = xTexelC${v};
                `,v+1<f)){const x=a%2===0?NT(u):u;u%2===0&&a%2===1||u%2!==0&&a%2!==1?(d+=`
                  xCOffset = xC + imod(pads[1], 2) + ${x};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                    xTexelC${v+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${v+1}.zw = vec2(0.0);
                    }
                    xTexelC${v+1}Ready = 1;
                  }
                  `,u>1?d+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${v+1} = vec4(previous.zw, xTexelC${v+1}.xy);
                    } else {
                     xC${v+1} = vec4(0.0, 0.0, xTexelC${v+1}.xy);
                    }
                    `:d+=`
                    xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.xy);
                    `):x===1?d+=`
                    xC${v+1} = xTexelC${v};
                    `:d+=`
                    xCOffset = xC + ${x};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                      xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${v+1}.zw = vec2(0.0);
                      }
                      xTexelC${v+1}Ready = 1;
                    }

                    xC${v+1} = xTexelC${v+1};
                    `}}else v<f&&(a%2===1?(d+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${v+1}Ready == 0) {
                  xTexelC${v+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${v+1}.zw = vec2(0.0);
                  }
                  xTexelC${v+1}Ready = 1;
                }

                xC${v} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
              `,v+1<f&&(d+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${v+1} = vec4(xTexelC${v+1}.xy, final.xy);
                `)):(d+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                  xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v+1}.zw = vec2(0.);
                  }
                  xTexelC${v+1}Ready = 1;
                }

                xC${v} = vec4(
                  xTexelC${v}.xy, xTexelC${v+1}.xy);
              `,v+1<f&&(d+=`
                  xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
                `)));v<f&&(d+=`
            wTexel = getW(r, ${v}, d1, q);
            dotProd += xC${v} * vec4(wTexel.xz, wTexel.xz);
          `,v+1<f&&(d+=`
              wTexel = getW(r, ${v+1}, d1, q);
              dotProd += xC${v+1} * vec4(wTexel.xz, wTexel.xz);
            `))}d+=`
    }
  `,d+=`
      }
    `;let p="",m="";r&&(i?p=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?p=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:p=`vec4 activation(vec4 x) {
          ${r}
        }`,m="result = activation(result);");const g=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${p}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${o};
        int q = d2 - d1 * ${o};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${d}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${g}
        ${m}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:o,pad:a,dilations:l,dimRoundingMode:u}=r;let c=l;c==null&&(c=[1,1]),E(Mn(o,c),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const f=$n(i.shape,s.shape,o,c,a,u,!0);let h;Y().getBool("WEBGL_PACK_DEPTHWISECONV")&&f.strideWidth<=2&&f.outChannels/f.inChannels===1?h=new A8(f):h=new N8(f);const d=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]];return n.runWebGLProgram(h,[i,s],"float32",d)}const oGe={kernelName:Ax,backendName:"webgl",kernelFunc:sGe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aGe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,i=e.padInfo.top,s=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${o} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${i};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${s};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class lGe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,s=e.strideWidth,o=n-1-e.padInfo.top,a=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:u,filterShape:c}=r,f=$n(i.shape,c,o,a,l,u,!0),h=new aGe(f);return n.runWebGLProgram(h,[i,s],"float32")}const cGe={kernelName:XT,backendName:"webgl",kernelFunc:uGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fGe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:u,inputShape:c}=r,f=$n(c,s.shape,o,a,l,u,!0),h=new lGe(f);return n.runWebGLProgram(h,[i,s],"float32")}const hGe={kernelName:YT,backendName:"webgl",kernelFunc:fGe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dGe{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pGe(t){const{inputs:e,backend:n}=t,{x:r}=e,i=[...r.shape,...r.shape],s=J(r.shape),o=fe({inputs:{x:r},backend:n,attrs:{shape:[s]}}),a=new dGe(s),l=n.runWebGLProgram(a,[o],o.dtype),u=fe({inputs:{x:l},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),u}const mGe={kernelName:fW,backendName:"webgl",kernelFunc:pGe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gGe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:i,strideHeight:s,strideWidth:o,filterHeight:a,filterWidth:l,dilationHeight:u,dilationWidth:c}=e,{top:f,left:h}=i;this.userCode=`
      const ivec2 strides = ivec2(${s}, ${o});
      const ivec2 pads = ivec2(${f}, ${h});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${a}; h++) {
          int hIn = hBeg + h * ${u};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${c};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:o,pad:a,dilations:l}=r,u=pm(i.shape,s.shape,o,a,"NHWC",l);let c;const f=new gGe(u);c=n.runWebGLProgram(f,[i,s],"float32");const h=fe({inputs:{x:c},backend:n,attrs:{shape:u.outShape}});return n.disposeIntermediateTensorInfo(c),h}const vGe={kernelName:Ox,backendName:"webgl",kernelFunc:yGe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xGe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:i}=r,s=e,{allDims:o,summedDims:a,idDims:l}=$E(i,s.length);IE(o.length,l,s);const{path:u,steps:c}=TE(a,l),f=c.length;let h=null,d=o.length;const p=[];for(let m=0;m<f;++m){for(const g of c[m]){const{permutationIndices:y,expandDims:v}=kE(d,l[g]);let x;EE(y)?x=s[g]:(x=tr({inputs:{x:s[g]},backend:n,attrs:{perm:y}}),p.push(x));const b=x.shape.slice();for(let w=0;w<v.length;++w)b.splice(v[w],0,1);et(x.shape,b)||(x=fe({inputs:{x},backend:n,attrs:{shape:b}}),p.push(x)),h===null?h=x:(h=mN({inputs:{a:x,b:h},backend:n}),p.push(h))}m<f-1&&(u[m]>=0&&(h=Gb({inputs:{x:h},backend:n,attrs:{axis:u[m]-(o.length-d),keepDims:!1}}),p.push(h)),d--)}for(const m of p)m!==h&&n.disposeIntermediateTensorInfo(m);return h}const bGe={kernelName:ZT,backendName:"webgl",kernelFunc:xGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wGe="return (x >= 0.0) ? x : (exp(x) - 1.0);",SGe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,CGe=He({opSnippet:wGe,packedOpSnippet:SGe}),$Ge={kernelName:Pp,backendName:"webgl",kernelFunc:CGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kGe="return (b >= 0.0) ? a : a * (b + 1.0);",IGe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,TGe=t=>{const{inputs:e,backend:n}=t,{dy:r,y:i}=e,s=Y().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new kf(IGe,r.shape,i.shape):new Fl(kGe,r.shape,i.shape);return n.runWebGLProgram(s,[r,i],r.dtype)},EGe={kernelName:QT,backendName:"webgl",kernelFunc:TGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NGe=`
  return vec4(equal(a, b));
`,AGe="return float(a == b);",OGe=In({opSnippet:AGe,packedOpSnippet:NGe,dtype:"bool",cpuKernelImpl:uVe}),PGe={kernelName:Px,backendName:"webgl",kernelFunc:OGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Ge=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${yE};
  float a1 = ${vE};
  float a2 = ${xE};
  float a3 = ${bE};
  float a4 = ${wE};
  float a5 = ${SE};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,DGe=He({opSnippet:_Ge}),RGe={kernelName:_p,backendName:"webgl",kernelFunc:DGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MGe=If+`
  return exp(x);
`,FGe=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,O8=He({opSnippet:MGe,packedOpSnippet:FGe,cpuKernelImpl:cVe,dtype:"float32"}),LGe={kernelName:Dp,backendName:"webgl",kernelFunc:O8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K$(t){const{inputs:e,attrs:n,backend:r}=t,{dim:i}=n,{input:s}=e,o=s.shape.length,a=s.shape.slice();let l=i;return i<0&&(E(-(o+1)<=i,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+i+1),a.splice(l,0,1),fe({inputs:{x:s},backend:r,attrs:{shape:a}})}const BGe={kernelName:_x,backendName:"webgl",kernelFunc:K$};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mF="return exp(x) - 1.0;",jGe=He({opSnippet:mF,packedOpSnippet:mF,cpuKernelImpl:fVe}),zGe={kernelName:Rp,backendName:"webgl",kernelFunc:jGe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gF{constructor(e,n,r){this.variableNames=["real","imag"];const i=n[1];this.outputShape=n;const s=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,o=r?`${i}.0`:"1.0";let a;if(e==="real")a="return real * expR - imag * expI;";else if(e==="imag")a="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${s};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${a}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${i});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${i}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${o};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P8(t,e,n){const r=n.texData.get(t.dataId),i=J(t.shape),s=t.shape[t.shape.length-1],o=i/s,a=fe({inputs:{x:t},backend:n,attrs:{shape:[o,s]}}),l=a.shape,u=new gF("real",l,e),c=new gF("imag",l,e),f=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],h=n.runWebGLProgram(u,f,"float32"),d=n.runWebGLProgram(c,f,"float32"),p=Pa({inputs:{real:h,imag:d},backend:n});n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d);const m=fe({inputs:{x:p},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(p),m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VGe(t){const{inputs:e,backend:n}=t,{input:r}=e;return P8(r,!1,n)}const WGe={kernelName:JT,backendName:"webgl",kernelFunc:VGe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UGe{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rm(t){const{backend:e,attrs:n}=t,{shape:r,value:i}=n;let{dtype:s}=n;if(s=s||ff(i),s==="string"){const o=Lt(s,J(r));return o.fill(i),e.makeTensorInfo(r,s,o)}else{const o=new UGe(r,i),a=[[i]];return e.runWebGLProgram(o,[],s,a)}}const GGe={kernelName:e2,backendName:"webgl",kernelFunc:Rm};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HGe{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KGe={kernelName:t2,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,i=new HGe(n.shape);return r.runWebGLProgram(i,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yF="return floor(x);",qGe=He({opSnippet:yF,packedOpSnippet:yF,cpuKernelImpl:hVe}),XGe={kernelName:Mp,backendName:"webgl",kernelFunc:qGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YGe=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,ZGe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,QGe=In({opSnippet:YGe,packedOpSnippet:ZGe,dtype:"int32"}),JGe={kernelName:Fp,backendName:"webgl",kernelFunc:QGe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class e6e{constructor(e){this.variableNames=["A"];const n=nr(),[r,i]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${i}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class t6e{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=nr(),[r,i]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${i}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n6e={kernelName:xke,backendName:"webgl",kernelFunc:r6e};let fu,Iw=Y().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function r6e(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:i}=e;const{numChannels:s}=r,o=typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement,[l,u]=o?[i.videoWidth,i.videoHeight]:[i.width,i.height],c=[u,l],f=[u,l,s];if(a||o){const m=Y().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(fu==null||m!==Iw)&&(Iw=m,fu=document.createElement("canvas").getContext("2d",{willReadFrequently:Iw})),fu.canvas.width=l,fu.canvas.height=u,fu.drawImage(i,0,0,l,u),i=fu.canvas}const h=n.makeTensorInfo(c,"int32");n.texData.get(h.dataId).usage=Br.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),i);const d=Y().getBool("WEBGL_PACK")?new t6e(f):new e6e(f),p=n.runWebGLProgram(d,[h],"int32");return n.disposeData(h.dataId),p}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s,bias:o,preluActivationWeights:a}=e,{strides:l,pad:u,dataFormat:c,dilations:f,dimRoundingMode:h,activation:d,leakyreluAlpha:p}=r,m=wo(c),g=$n(i.shape,s.shape,l,f,u,h,!1,m);let y;const v=[],x=o!=null,b=a!=null,w=d==="leakyrelu",S=()=>{const $=[i,s],k=(I,T)=>{if(T==="NCHW"&&I.shape.length===1&&I.shape[0]!==1){const A=fe({inputs:{x:I},backend:n,attrs:{shape:[I.shape[0],1,1]}});return v.push(A),A}return I};if(x&&$.push(k(o,c)),b&&$.push(k(a,c)),w){const I=n.makeTensorInfo([],"float32",$a(p,"float32"));$.push(I),v.push(I)}return $};if(g.filterHeight===1&&g.filterWidth===1&&g.dilationHeight===1&&g.dilationWidth===1&&g.strideHeight===1&&g.strideWidth===1&&(g.padInfo.type==="SAME"||g.padInfo.type==="VALID"))y=I8({x:i,filter:s,convInfo:g,backend:n,bias:o,activation:d,preluActivationWeights:a,leakyreluAlpha:p});else if(g.strideWidth<=2&&m==="channelsLast"&&Y().getBool("WEBGL_EXP_CONV")){const $=d?qd(d,!0):null,k=new k8(g,x,$,b,w),I=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],T=S();y=n.runWebGLProgram(k,T,"float32",I)}else if(Y().getBool("WEBGL_CONV_IM2COL"))y=T8({x:i,filter:s,convInfo:g,backend:n,bias:o,activation:d,preluActivationWeights:a,leakyreluAlpha:p});else{const $=d?qd(d,!1):null,k=new $8(g,x,$,b,w),I=S();y=n.runWebGLProgram(k,I,"float32")}const C=fe({inputs:{x:y},backend:n,attrs:{shape:g.outShape}});return v.push(y),v.forEach($=>n.disposeIntermediateTensorInfo($)),C}const s6e={kernelName:_v,backendName:"webgl",kernelFunc:i6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s,bias:o,preluActivationWeights:a}=e,{strides:l,pad:u,dilations:c,dimRoundingMode:f,activation:h,leakyreluAlpha:d}=r,p=[];let m=c;m==null&&(m=[1,1]),E(Mn(l,m),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${m}'`);const g=$n(i.shape,s.shape,l,m,u,f,!0),y=Y().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,v=h?qd(h,y):null,x=[i,s],b=o!=null,w=a!=null,S=h==="leakyrelu";if(b&&x.push(o),w&&x.push(a),S){const I=n.makeTensorInfo([],"float32",$a(d,"float32"));x.push(I),p.push(I)}let C;y?C=new A8(g,b,v,w,S):C=new N8(g,b,v,w,S);const $=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],k=n.runWebGLProgram(C,x,"float32",$);return p.forEach(I=>n.disposeIntermediateTensorInfo(I)),k}const a6e={kernelName:AW,backendName:"webgl",kernelFunc:o6e};class l6e{constructor(e,n,r,i){this.sliceDim=e,this.strides=n,this.paramsShape=i,this.variableNames=["x","indices"],this.outputShape=r;const s=st(r.length);let o=`
    int index;`;for(let a=0;a<this.sliceDim;a++)o+=`
          index = round(getIndices(coords[0], ${a}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[a]};
          flattenIndex += index * ${this.strides[a]};`;this.userCode=`
         void main() {
          ${s} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${o}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u6e(t){const{inputs:e,backend:n}=t,{params:r,indices:i}=e,s=i.shape,o=s[s.length-1],a=J(r.shape),[l,u,c,f]=oE(r,i),h=fe({inputs:{x:i},backend:n,attrs:{shape:[u,o]}}),d=fe({inputs:{x:r},backend:n,attrs:{shape:[J(r.shape)/c,c]}});if(n.shouldExecuteOnCPU([r,i])||r.dtype==="string"){const y=n.readSync(i.dataId),v=n.bufferSync(r),x=dVe(y,v,r.dtype,u,o,c,f,r.shape,a);return n.makeTensorInfo(l,r.dtype,x.values)}const p=new l6e(o,f,[u,c],r.shape),m=n.runWebGLProgram(p,[d,h],d.dtype),g=fe({inputs:{x:m},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(m),g}const c6e={kernelName:hW,backendName:"webgl",kernelFunc:u6e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class f6e{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=st(this.rank),i=h6e(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${i}));
      }
    `}}function h6e(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let i=0;i<t.length;i++)i===2?r.push("index"):r.push(`${n[i]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _8(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,indices:s}=e,{axis:o,batchDims:a}=r,l=Me(o,i.shape)[0];if(Y().get("DEBUG")){const v=n.readSync(s.dataId),x=i.shape[l];for(let b=0;b<v.length;++b){const w=v[b];E(w<=x-1&&w>=0,()=>`GatherV2: the index value ${w} is not in [0, ${x-1}]`)}}const u=AE(i,s,l,a),c=J(s.shape),f=[],h=fe({inputs:{x:i},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),d=fe({inputs:{x:s},backend:n,attrs:{shape:[u.batchSize,c/u.batchSize]}});f.push(h),f.push(d);const p=[u.batchSize,u.outerSize,c/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([i,s])||i.dtype==="string"){const v=n.bufferSync(d),x=n.bufferSync(h),b=pVe(x,v,p);return f.forEach(w=>n.disposeIntermediateTensorInfo(w)),n.makeTensorInfo(u.outputShape,b.dtype,b.values)}const m=new f6e(h.shape,p),g=n.runWebGLProgram(m,[h,d],h.dtype);f.push(g);const y=fe({inputs:{x:g},backend:n,attrs:{shape:u.outputShape}});return f.forEach(v=>n.disposeIntermediateTensorInfo(v)),y}const d6e={kernelName:Rx,backendName:"webgl",kernelFunc:_8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p6e="return float(a > b);",m6e=`
  return vec4(greaterThan(a, b));
`,g6e=In({opSnippet:p6e,packedOpSnippet:m6e,cpuKernelImpl:mVe,dtype:"bool"}),y6e={kernelName:Mx,backendName:"webgl",kernelFunc:g6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v6e="return float(a >= b);",x6e=`
  return vec4(greaterThanEqual(a, b));
`,b6e=In({opSnippet:v6e,packedOpSnippet:x6e,dtype:"bool",cpuKernelImpl:gVe}),w6e={kernelName:Lp,backendName:"webgl",kernelFunc:b6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S6e(t){const{inputs:e,backend:n}=t,{input:r}=e;return P8(r,!0,n)}const C6e={kernelName:n2,backendName:"webgl",kernelFunc:S6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $6e="return float(!isnan(x) && !isinf(x));",k6e=He({opSnippet:$6e,dtype:"bool"}),I6e={kernelName:jp,backendName:"webgl",kernelFunc:k6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T6e="return float(isinf(x));",E6e=He({opSnippet:T6e,dtype:"bool"}),N6e={kernelName:zp,backendName:"webgl",kernelFunc:E6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A6e="return float(isnan(x));",O6e=He({opSnippet:A6e,dtype:"bool"}),P6e={kernelName:Vp,backendName:"webgl",kernelFunc:O6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _6e="return float(a < b);",D6e=`
  return vec4(lessThan(a, b));
`,R6e=In({opSnippet:_6e,packedOpSnippet:D6e,cpuKernelImpl:yVe,dtype:"bool"}),M6e={kernelName:Lx,backendName:"webgl",kernelFunc:R6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F6e="return float(a <= b);",L6e=`
  return vec4(lessThanEqual(a, b));
`,B6e=In({opSnippet:F6e,packedOpSnippet:L6e,cpuKernelImpl:vVe,dtype:"bool"}),j6e={kernelName:Bx,backendName:"webgl",kernelFunc:B6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z6e(t){const{backend:e,attrs:n}=t,{start:r,stop:i,num:s}=n,o=xVe(r,i,s);return e.makeTensorInfo([o.length],"float32",o)}const V6e={kernelName:dW,backendName:"webgl",kernelFunc:z6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W6e=If+`
  return x < 0.0 ? 0./0. : log(x);
`,U6e=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,G6e=He({opSnippet:W6e,packedOpSnippet:U6e,cpuKernelImpl:bVe}),H6e={kernelName:Wp,backendName:"webgl",kernelFunc:G6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K6e=If+`
  return log(1.0 + x);
`,q6e=He({opSnippet:K6e}),X6e={kernelName:Up,backendName:"webgl",kernelFunc:q6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y6e="return float(a >= 1.0 && b >= 1.0);",Z6e=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,Q6e=In({opSnippet:Y6e,packedOpSnippet:Z6e,dtype:"bool"}),J6e={kernelName:jx,backendName:"webgl",kernelFunc:Q6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e5e="return float(!(x >= 1.0));",t5e=He({opSnippet:e5e}),n5e={kernelName:zx,backendName:"webgl",kernelFunc:t5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r5e="return float(a >= 1.0 || b >= 1.0);",i5e=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,s5e=In({opSnippet:r5e,packedOpSnippet:i5e,dtype:"bool"}),o5e={kernelName:Vx,backendName:"webgl",kernelFunc:s5e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class a5e{constructor(e,n,r,i,s){this.variableNames=["x"],this.outputShape=[];const o=n,a=e[3]-1;this.outputShape=e;let l;const u=`float(${r}) + float(${i}) * sum`;s===.5?l=`inversesqrt(${u})`:s===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${o}; j <= ${o}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${a}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class l5e{constructor(e,n,r,i,s){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=n,a=e[3]-1;this.outputShape=e;let l;const u=`float(${r}) + float(${i}) * sum`;s===.5?l=`inversesqrt(${u})`:s===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${o};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${o}; j <= ${o}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u5e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{depthRadius:s,bias:o,alpha:a,beta:l}=r,u=Y().getBool("WEBGL_PACK_NORMALIZATION")?new l5e(i.shape,s,o,a,l):new a5e(i.shape,s,o,a,l);return n.runWebGLProgram(u,[i],i.dtype)},c5e={kernelName:Wx,backendName:"webgl",kernelFunc:u5e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class f5e{constructor(e,n,r,i,s){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=i,this.beta=s,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${i}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${i})
                * float(${s})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${s});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h5e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i,y:s,dy:o}=e,{depthRadius:a,bias:l,alpha:u,beta:c}=r,f=new f5e(i.shape,a,l,u,c);return n.runWebGLProgram(f,[i,s,o],i.dtype)},d5e={kernelName:i2,backendName:"webgl",kernelFunc:h5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p5e(t,e,n,r){const i=J(e),o=J(t.shape)/i,a=fe({inputs:{x:t},attrs:{shape:[o,i]},backend:r}),l=ru(a,t.dtype,"max",r),u=fe({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D8(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reductionIndices:s,keepDims:o}=r,a=i.shape.length,l=Me(s,i.shape);let u=l;const c=Nt(u,a),f=c!=null,h=n.shouldExecuteOnCPU([i]);let d=i;if(f){if(h){const x=n.texData.get(d.dataId).values,b=new Array(a);for(let C=0;C<b.length;C++)b[C]=i.shape[c[C]];const w=dN(x,i.shape,i.dtype,c,b);d=n.makeTensorInfo(b,i.dtype);const S=n.texData.get(d.dataId);S.values=w}else d=Ub(i,c,n);u=Vt(u.length,a)}kn("max",u,a);const[p,m]=yn(d.shape,u);let g=p;o&&(g=Yt(p,l));let y;if(h){const x=n.texData.get(d.dataId).values,b=wVe(x,J(m),g,i.dtype);y=n.makeTensorInfo(g,i.dtype);const w=n.texData.get(y.dataId);w.values=b}else y=p5e(d,m,g,n);return f&&n.disposeIntermediateTensorInfo(d),y}const m5e={kernelName:Ux,backendName:"webgl",kernelFunc:D8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g5e=pN+`
  return max(a, b);
`,y5e=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+nu+`
  return result;
`,v5e=In({opSnippet:g5e,packedOpSnippet:y5e,cpuKernelImpl:SVe}),x5e={kernelName:Gp,backendName:"webgl",kernelFunc:v5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;Pm(i,"maxPool");const{filterSize:s,strides:o,pad:a,dimRoundingMode:l}=r,u=1;E(Mn(o,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=Ii(i.shape,s,o,u,a,l);if(c.filterWidth===1&&c.filterHeight===1&&et(c.inShape,c.outShape))return Nr({inputs:{x:i},backend:n});const f=new Xd(c,"max",!1);return n.runWebGLProgram(f,[i],i.dtype)}const w5e={kernelName:Gx,backendName:"webgl",kernelFunc:b5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:s,strides:o,pad:a,dataFormat:l,dimRoundingMode:u}=r,c=[1,1,1],f=bo(i.shape,s,o,c,a,u,l),h=new gN(f,"max",!1);return n.runWebGLProgram(h,[i],i.dtype)}const C5e={kernelName:Hx,backendName:"webgl",kernelFunc:S5e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $5e{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,i=e.dilationHeight,s=e.effectiveFilterHeight,o=e.effectiveFilterWidth,a=s-1-e.padInfo.top,l=o-1-e.padInfo.left,u=s*o-1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${s};
          wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${o}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${u} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${o} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class k5e{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,o=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterDepth,u=e.effectiveFilterHeight,c=e.effectiveFilterWidth,f=l-1-e.padInfo.front,h=u-1-e.padInfo.top,d=c-1-e.padInfo.left,p=l*u*c-1;this.userCode=`
      const ivec3 pads = ivec3(${f}, ${h}, ${d});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${s}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${u};
              wR += ${o}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${c};
                wC += ${a}) {
              float dyC = float(dyCCorner + wC) / ${i}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${p} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${u} * ${c} +
                  wR * ${c} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I5e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,o=s,{filterSize:a,strides:l,pad:u,dimRoundingMode:c}=r,f=[1,1,1],h=bo(o.shape,a,l,f,u,c),d=new gN(h,"max",!0),p=n.runWebGLProgram(d,[o],o.dtype),m=new k5e(h),g=n.runWebGLProgram(m,[i,p],o.dtype);return n.disposeIntermediateTensorInfo(p),g}const T5e={kernelName:o2,backendName:"webgl",kernelFunc:I5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E5e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s,output:o}=e,a=s;Pm([s,o],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:f}=r,h=Ii(a.shape,l,u,1,c,f),d=!0,p=new Xd(h,"max",d),m=n.runWebGLProgram(p,[a],a.dtype),g=new $5e(h),y=n.runWebGLProgram(g,[i,m],a.dtype);return n.disposeIntermediateTensorInfo(m),y}const N5e={kernelName:s2,backendName:"webgl",kernelFunc:E5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A5e(t,e,n,r){let i=new Xd(n,"max",!1);const s=r.runWebGLProgram(i,[t],"float32");i=new Xd(n,"max",!0,!0,e);const o=r.runWebGLProgram(i,[t],"float32");return[s,o]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O5e={kernelName:pW,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:i,strides:s,pad:o,includeBatchInIndex:a}=e,l=n;E(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const u=[1,1];E(Mn(s,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${u}'`);const c=Ii(r.shape,i,s,u,o),[f,h]=A5e(r,a,c,l);return[f,h]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P5e(t,e,n,r){const i=J(e),o=J(t.shape)/i,a=fe({inputs:{x:t},attrs:{shape:[o,i]},backend:r}),l=ru(a,"float32","mean",r),u=fe({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _5e={kernelName:Kx,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:i,axis:s}=e,o=n,a=r.shape.length,l=Me(s,r.shape);let u=l;const c=Nt(u,a),f=c!=null,h=o.shouldExecuteOnCPU([r]),d=[];let p=r;if(f){if(h){const b=o.texData.get(p.dataId).values,w=new Array(a);for(let $=0;$<w.length;$++)w[$]=r.shape[c[$]];const S=dN(b,r.shape,r.dtype,c,w);p=o.makeTensorInfo(w,r.dtype);const C=o.texData.get(p.dataId);C.values=S}else p=Ub(r,c,o);d.push(p),u=Vt(u.length,a)}kn("sum",u,a);const[m,g]=yn(p.shape,u);let y=m;i&&(y=Yt(m,l));const v=P5e(p,g,y,o);for(const x of d)o.disposeIntermediateTensorInfo(x);return v}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r,a=i.shape.length,l=Me(s,i.shape);let u=l;const c=Nt(u,a);let f=i;c!=null&&(f=tr({inputs:{x:i},backend:n,attrs:{perm:c}}),u=Vt(u.length,i.shape.length)),kn("min",u,a);const[h,d]=yn(f.shape,u),p=J(d),m=fe({inputs:{x:f},backend:n,attrs:{shape:[-1,p]}}),g=ru(m,m.dtype,"min",n);let y;if(o){const v=Yt(h,l);y=fe({inputs:{x:g},backend:n,attrs:{shape:v}})}else y=fe({inputs:{x:g},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),c!=null&&n.disposeIntermediateTensorInfo(f),y}const R5e={kernelName:qx,backendName:"webgl",kernelFunc:D5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M5e=pN+`
  return min(a, b);
`,F5e=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+nu+`
  return result;
`,L5e=In({opSnippet:M5e,packedOpSnippet:F5e,cpuKernelImpl:CVe}),B5e={kernelName:Hp,backendName:"webgl",kernelFunc:L5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class j5e{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((c,f)=>c[0]+e[f]+c[1]);const i=e.length,s=st(i),o=n.map(c=>c[0]).join(","),a=n.map((c,f)=>c[0]+e[f]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i),u=r==="reflect"?0:1;if(i===1){this.userCode=`
        int start = ${o};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${u};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${u};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${o});
      ${s} end = ${s}(${a});

      void main() {
        ${s} outC = getOutputCoords();
        for (int i = 0; i < ${i}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${u};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${u};
          }
        }
        ${s} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class z5e{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((p,m)=>p[0]+e[m]+p[1]);const i=e.length,s=st(i),o=n.map(p=>p[0]).join(","),a=n.map((p,m)=>p[0]+e[m]).join(","),l=Zn("rc",i),u=Zn("source",i),c=`${l[i-1]} < ${this.outputShape[i-1]}`,f=i===1?"source":`vec2(${u.slice(-2).join()})`,h=r==="reflect"?0:1;let d="";if(i===1){const p=`
        ${s} source = rc;
        if (source < start) {
          source = start * 2 - source - ${h};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${h};
        }
        source -= start;
      `;d=`
        ${s} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${u.join()}), ${f});
        ${l[i-1]} += 1;
        if(${c}) {
          ${p}
          result[1] = getChannel(getX(${u.join()}), ${f});
        }
      `}else{const p=`
        ${s} source = rc;
        ${s} lt = ${s}(lessThan(source, start));
        ${s} gte = ${s}(greaterThanEqual(source, end));
        ${s} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${h}) +
                gte * ((end - 1) * 2 - source + ${h});
        source -= start;
      `;d=`
        ${s} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${u.join()}), ${f});
        ${l[i-1]} += 1;
        if(${c}) {
          ${p}
          result[1] = getChannel(getX(${u.join()}), ${f});
        }
        rc = outputLoc;
        ${l[i-2]} += 1;
        if(${l[i-2]} < ${this.outputShape[i-2]}) {
          ${p}
          result[2] = getChannel(getX(${u.join()}), ${f});
          ${l[i-1]} += 1;
          if(${c}) {
            ${p}
            result[3] = getChannel(getX(${u.join()}), ${f});
          }
        }
      `}this.userCode=`
      const ${s} start = ${s}(${o});
      const ${s} end = ${s}(${a});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${d}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V5e=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:i,mode:s}=n,o=Y().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new z5e(r.shape,i,s):new j5e(r.shape,i,s);return e.runWebGLProgram(o,[r],r.dtype)},W5e={kernelName:Xx,backendName:"webgl",kernelFunc:V5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U5e=`if (b == 0.0) return NAN;
  return mod(a, b);`,G5e=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+nu+`
  return result;
`,H5e=In({opSnippet:U5e,packedOpSnippet:G5e}),K5e={kernelName:Kp,backendName:"webgl",kernelFunc:H5e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class q5e{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X5e=`
if (a == b) {
  return 1.0;
};
return a / b;`,Y5e=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,R8=In({opSnippet:X5e,packedOpSnippet:Y5e,checkOutOfBounds:!0}),Z5e={kernelName:Op,backendName:"webgl",kernelFunc:R8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vF="return a - b;",M8=In({opSnippet:vF,packedOpSnippet:vF,supportsComplex:!0,cpuKernelImpl:UVe}),Q5e={kernelName:um,backendName:"webgl",kernelFunc:M8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F8(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{dim:s}=r,o=Me([s],i.shape),a=D8({inputs:{x:i},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),l=Yt(a.shape,o),u=fe({inputs:{x:a},backend:n,attrs:{shape:l}}),c=M8({inputs:{a:i,b:u},backend:n}),f=O8({inputs:{x:c},backend:n}),h=Gb({inputs:{x:f},backend:n,attrs:{axis:o,keepDims:!1}}),d=fe({inputs:{x:h},backend:n,attrs:{shape:l}}),p=R8({inputs:{a:f,b:d},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),p}const J5e={kernelName:db,backendName:"webgl",kernelFunc:F8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eHe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{numSamples:s,seed:o,normalized:a}=r,l=a?i:F8({inputs:{logits:i},backend:n,attrs:{dim:i.shape.length-1}}),u=l.shape[0],c=l.shape[1],f=new q5e(u,c,s),h=[[o]],d=n.runWebGLProgram(f,[l],"int32",h);return a||n.disposeIntermediateTensorInfo(l),d}const tHe={kernelName:mW,backendName:"webgl",kernelFunc:eHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nHe=Ei+`
  return -x;
`,rHe=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function iHe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const s=n.texData.get(r.dataId),[o,a]=kVe(s.values,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,o)}let i;return Y().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new zo(r.shape,rHe):i=new ms(r.shape,nHe),n.runWebGLProgram(i,[r],r.dtype)}const sHe={kernelName:Yx,backendName:"webgl",kernelFunc:iHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oHe=tE;function aHe(t){Fr("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l}=r,u=n.readSync(i.dataId),c=n.readSync(s.dataId),{selectedIndices:f}=oHe(u,c,o,a,l);return n.makeTensorInfo([f.length],"int32",new Int32Array(f))}const lHe={kernelName:a2,backendName:"webgl",kernelFunc:aHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uHe=nE;function cHe(t){Fr("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:u}=r,c=n.readSync(i.dataId),f=n.readSync(s.dataId),{selectedIndices:h,validOutputs:d}=uHe(c,f,o,a,l,u);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([d]))]}const fHe={kernelName:l2,backendName:"webgl",kernelFunc:cHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hHe=rE;function dHe(t){Fr("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,softNmsSigma:u}=r,c=n.readSync(i.dataId),f=n.readSync(s.dataId),h=o,d=a,p=l,m=u,{selectedIndices:g,selectedScores:y}=hHe(c,f,h,d,p,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}const pHe={kernelName:u2,backendName:"webgl",kernelFunc:dHe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mHe{constructor(e,n,r,i){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${i}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gHe=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:i}=e,{dtype:s,depth:o,onValue:a,offValue:l}=r,u=J(i.shape),c=new mHe(u,o,a,l),f=fe({inputs:{x:i},backend:n,attrs:{shape:[u]}}),h=n.runWebGLProgram(c,[f],s);n.disposeIntermediateTensorInfo(f);const d=[...i.shape,o],p=fe({inputs:{x:h},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(h),p},yHe={kernelName:Jx,backendName:"webgl",kernelFunc:gHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s0(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const i=Dm({inputs:{input:r},backend:n}),s=s0({inputs:{x:i},backend:n}),o=Hb({inputs:{input:r},backend:n}),a=s0({inputs:{x:o},backend:n}),l=Pa({inputs:{real:s,imag:a},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return Rm({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const vHe={kernelName:gb,backendName:"webgl",kernelFunc:s0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L8(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const i=Dm({inputs:{input:r},backend:n}),s=L8({inputs:{x:i},backend:n}),o=Hb({inputs:{input:r},backend:n}),a=s0({inputs:{x:o},backend:n}),l=Pa({inputs:{real:s,imag:a},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return Rm({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const xHe={kernelName:Qx,backendName:"webgl",kernelFunc:L8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bHe(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r;if(e.length===1)return K$({inputs:{input:e[0]},backend:n,attrs:{dim:i}});const s=e[0].shape,o=e[0].dtype;e.forEach(c=>{AT(s,c.shape,"All tensors passed to stack must have matching shapes"),E(o===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(c=>{const f=K$({inputs:{input:c},backend:n,attrs:{dim:i}});return a.push(f),f}),u=C8({inputs:l,backend:n,attrs:{axis:i}});return a.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const wHe={kernelName:eb,backendName:"webgl",kernelFunc:bHe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SHe{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((u,c)=>u[0]+e[c]+u[1]);const i=e.length,s=st(i),o=n.map(u=>u[0]).join(","),a=n.map((u,c)=>u[0]+e[c]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i);if(i===1){this.userCode=`
        int start = ${o};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${o});
      ${s} end = ${s}(${a});

      void main() {
        ${s} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${s} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CHe{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((m,g)=>m[0]+e[g]+m[1]);const i=e.length,s=st(i),o=n.map(m=>m[0]).join(","),a=n.map((m,g)=>m[0]+e[g]).join(","),l=Zn("rc",i),u=Zn("source",i),c=`${l[i-1]} < ${this.outputShape[i-1]}`,f=i===1?"source":`vec2(${u.slice(-2).join()})`,h=[`${s} rc = outputLoc;`,`${l[i-1]} += 1;
       if(${c}) {
      `,i===1?"":`}
       rc = outputLoc;
       ${l[i-2]} += 1;
       if(${l[i-2]} < ${this.outputShape[i-2]}) {`,i===1?"":`  ${l[i-1]} += 1;
         if(${c}) {`],d=i===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let m=0,g=i===1?2:4;m<g;m++)p+=`
        ${h[m]}
        if (${d}) {
          result[${m}] = float(value);
        } else {
          ${s} source = rc - start;
          result[${m}] = getChannel(getX(${u.join()}), ${f});
        }
      `;p+=i===1?"} ":"}}",this.userCode=`
      const ${s} start = ${s}(${o});
      const ${s} end = ${s}(${a});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${p}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B8=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:s,constantValue:o}=r;if(J(i.shape)===0){const u=s.map((c,f)=>c[0]+i.shape[f]+c[1]);return Rm({backend:n,attrs:{shape:u,value:o,dtype:i.dtype}})}const a=Y().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new CHe(i.shape,s,o):new SHe(i.shape,s,o),l=[[o]];return n.runWebGLProgram(a,[i],i.dtype,l)},$He={kernelName:tb,backendName:"webgl",kernelFunc:B8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kHe=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,IHe=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+nu+`
  return result;
`,THe=In({opSnippet:kHe,packedOpSnippet:IHe}),EHe={kernelName:Xp,backendName:"webgl",kernelFunc:THe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r,a=i.shape.length,l=[],u=Me(s,i.shape);let c=u;const f=Nt(c,a);let h=i;f!=null&&(h=tr({inputs:{x:i},backend:n,attrs:{perm:f}}),c=Vt(c.length,a),l.push(h)),kn("prod",c,a);let d;if(n.shouldExecuteOnCPU([h])){const p=n.texData.get(h.dataId).values,{outVals:m,outShape:g,outDtype:y}=TVe(h.shape,h.dtype,p,c);d=n.makeTensorInfo(g,y,m)}else{const[p,m]=yn(h.shape,c),g=J(m),y=fe({inputs:{x:h},backend:n,attrs:{shape:[-1,g]}}),v=S2(i.dtype),x=ru(y,v,"prod",n);d=fe({inputs:{x},backend:n,attrs:{shape:p}}),l.push(y),l.push(x)}if(o){l.push(d);const p=Yt(d.shape,u);d=fe({inputs:{x:d},backend:n,attrs:{shape:p}})}return l.forEach(p=>n.disposeIntermediateTensorInfo(p)),d}const AHe={kernelName:rb,backendName:"webgl",kernelFunc:NHe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OHe(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:i,paramsDenseValues:s,indices:o}=e,{outputRaggedRank:a}=r,l=i.map(y=>n.readSync(y.dataId)),u=i.map(y=>y.shape),c=n.readSync(s.dataId),f=n.readSync(o.dataId),[h,d,p]=EVe(l,u,c,s.shape,s.dtype,f,o.shape,a),m=h.map(y=>n.makeTensorInfo([y.length],"int32",y)),g=n.makeTensorInfo(p,s.dtype,d);return m.concat([g])}const PHe={kernelName:gW,backendName:"webgl",kernelFunc:OHe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _He(t){const{inputs:e,backend:n}=t,{starts:r,limits:i,deltas:s}=e,o=n.readSync(r.dataId),a=n.readSync(i.dataId),l=n.readSync(s.dataId),[u,c]=NVe(o,r.shape,r.dtype,a,i.shape,l,s.shape),f=n.makeTensorInfo([u.length],"int32",u),h=n.makeTensorInfo([c.length],r.dtype,c);return[f,h]}const DHe={kernelName:yW,backendName:"webgl",kernelFunc:_He};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RHe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:i,values:s,defaultValue:o,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=r,u=n.readSync(i.dataId),c=n.readSync(s.dataId),f=n.readSync(o.dataId),h=a.map(g=>n.readSync(g.dataId)),d=a.map(g=>g.shape),[p,m]=AVe(u,i.shape,c,s.shape,s.dtype,f,o.shape,h,d,l);return n.makeTensorInfo(p,s.dtype,m)}const MHe={kernelName:vW,backendName:"webgl",kernelFunc:RHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j8=t=>{const{backend:e,attrs:n}=t,{start:r,stop:i,step:s,dtype:o}=n,a=OVe(r,i,s,o);return e.makeTensorInfo([a.length],o,a)},FHe={kernelName:c2,backendName:"webgl",kernelFunc:j8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LHe="return 1.0 / x;",BHe=He({opSnippet:LHe}),jHe={kernelName:Yp,backendName:"webgl",kernelFunc:BHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zHe=Ei+`
  return (x < 0.0) ? 0.0 : x;
`,VHe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,WHe=He({opSnippet:zHe,packedOpSnippet:VHe}),UHe={kernelName:Zp,backendName:"webgl",kernelFunc:WHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GHe=Ei+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,HHe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,KHe=He({opSnippet:GHe,packedOpSnippet:HHe}),qHe={kernelName:Qp,backendName:"webgl",kernelFunc:KHe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XHe{constructor(e,n,r,i,s){this.variableNames=["A"],this.outputShape=[];const[o,a,l,u]=e;this.outputShape=[o,n,r,u];const c=[i&&n>1?a-1:a,i&&r>1?l-1:l],f=[i&&n>1?n-1:n,i&&r>1?r-1:r];let h;s?h="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/f[0]},
          ${c[1]/f[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YHe{constructor(e,n,r,i,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,l,u]=e;this.outputShape=[o,n,r,u];const c=[i&&n>1?a-1:a,i&&r>1?l-1:l],f=[i&&n>1?n-1:n,i&&r>1?r-1:r];let h;s?h="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/f[0]},
          ${c[1]/f[1]},
          ${c[1]/f[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZHe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:s,halfPixelCenters:o,size:a}=r,[l,u]=a,c=Y().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new YHe(i.shape,l,u,s,o):new XHe(i.shape,l,u,s,o);return n.runWebGLProgram(c,[i],"float32")}const QHe={kernelName:ob,backendName:"webgl",kernelFunc:ZHe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JHe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,i,s]=n,[,o,a]=e,l=[r&&o>1?i-1:i,r&&a>1?s-1:s],u=[r&&o>1?o-1:o,r&&a>1?a-1:a],c=l[0]/u[0],f=l[1]/u[1],h=1/c,d=1/f,p=Math.ceil(h)*2+2,m=Math.ceil(d)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${f});

        const float invHeightScale = float(${h});
        const float invWidthScale = float(${d});

        const int winHeight = int(${p});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${i-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${s-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e8e(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:s}=e,{alignCorners:o}=r,a=new JHe(s.shape,i.shape,o);return n.runWebGLProgram(a,[s],s.dtype)}const t8e={kernelName:d2,backendName:"webgl",kernelFunc:e8e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class n8e{constructor(e,n,r,i,s){this.variableNames=["A"],this.outputShape=[];const[o,a,l,u]=e;this.outputShape=[o,n,r,u];const c=[i&&n>1?a-1:a,i&&r>1?l-1:l],f=[i&&n>1?n-1:n,i&&r>1?r-1:r],h=i?"0.5":"0.0";let d;s?d="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":d="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/f[0]},
          ${c[1]/f[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${d};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${h})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class r8e{constructor(e,n,r,i,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,l,u]=e;this.outputShape=[o,n,r,u];const c=[i&&n>1?a-1:a,i&&r>1?l-1:l],f=[i&&n>1?n-1:n,i&&r>1?r-1:r],h=i?"0.5":"0.0";let d;s?d="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":d="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/f[0]},
          ${c[1]/f[1]},
          ${c[1]/f[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${d};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${h})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i8e(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:s,halfPixelCenters:o,size:a}=r,[l,u]=a,c=Y().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new r8e(i.shape,l,u,s,o):new n8e(i.shape,l,u,s,o);return n.runWebGLProgram(c,[i],i.dtype)}const s8e={kernelName:sb,backendName:"webgl",kernelFunc:i8e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class o8e{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,i,s]=n,[,o,a]=e,l=[r&&o>1?i-1:i,r&&a>1?s-1:s],u=[r&&o>1?o-1:o,r&&a>1?a-1:a],c=l[0]/u[0],f=l[1]/u[1],h=1/c,d=1/f,p=Math.ceil(h)*2+2,m=Math.ceil(d)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${f});

        const float invHeightScale = float(${h});
        const float invWidthScale = float(${d});

        const int winHeight = int(${p});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${u[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${u[1]}));

            int sourceNearestRow = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${s}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a8e(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:s}=e,{alignCorners:o}=r,a=new o8e(s.shape,i.shape,o);return n.runWebGLProgram(a,[s],s.dtype)}const l8e={kernelName:h2,backendName:"webgl",kernelFunc:a8e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class u8e{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const i=a=>n.indexOf(a)!==-1&&e[a]!==1?`${e[a]} - coords[${a}] - 1`:`coords[${a}]`,s=e.map((a,l)=>i(l)).join(","),o=st(r);this.userCode=`
      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${s}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class c8e{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const i=Zn("rc",r),s=`${i[r-1]} + 1 < ${this.outputShape[r-1]}`,o=`${i[r-2]} + 1 < ${this.outputShape[r-2]}`,a=st(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${s}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${a} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(i.slice())};
          if(${s}){
            result.g = ${u(i.slice())};
          }
          if(${o}) {
            result.b = ${c(i.slice())};
            if(${s}) {
              result.a = ${f(i.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(p){return h(p)}function u(p){return p[r-1]="("+p[r-1]+" + 1)",h(p)}function c(p){return p[r-2]="("+p[r-2]+" + 1)",h(p)}function f(p){return p[r-1]="("+p[r-1]+" + 1)",p[r-2]="("+p[r-2]+" + 1)",h(p)}function h(p){const m=e.map((v,x)=>d(x,p)),g=m.join(","),y=m.slice(-2).join(",");return`getChannel(getX(${g}), vec2(${y}))`}function d(p,m){return n.indexOf(p)!==-1&&e[p]!==1?`${e[p]} - ${m[p]} - 1`:`${m[p]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dims:s}=r,o=i.shape.length,a=Me(s,i.shape);if(o===0)return Nr({inputs:{x:i},backend:n});const l=Y().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new c8e(i.shape,a):new u8e(i.shape,a);return n.runWebGLProgram(l,[i],i.dtype)}const h8e={kernelName:ab,backendName:"webgl",kernelFunc:f8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class d8e{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],i=e[2];this.outputShape=e;let s="";typeof n=="number"?s=`float outputValue = ${n.toFixed(2)};`:s=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${s}
          if(coordX >= 0 && coordX < ${i} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p8e={kernelName:b2,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:i,fillValue:s,center:o}=e,a=n,l=new d8e(r.shape,s),[u,c]=pE(o,r.shape[1],r.shape[2]),f=[[u,c,Math.sin(i),Math.cos(i)]];return a.runWebGLProgram(l,[r],r.dtype,f)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m8e=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,g8e=He({opSnippet:m8e}),y8e={kernelName:Jp,backendName:"webgl",kernelFunc:g8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v8e="return inversesqrt(x);",x8e=He({opSnippet:v8e,cpuKernelImpl:PVe}),b8e={kernelName:em,backendName:"webgl",kernelFunc:x8e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yN{constructor(e,n,r,i,s,o,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const u=st(s.length),c=st(o.length);let f="";r===1?f="i":r===2&&(f="i, j");const h=`getIndices(${f})`;let d="";i===1?d="i":i===2&&(d="i, coords[1]");const p=`getUpdates(${d})`;let m="";l&&(m="coords[0], coords[1]");const g=`getDefaultValue(${m})`,y=n>1?"strides[j]":"strides";this.userCode=`
        ${u} strides = ${u}(${s});

        void main() {
          ${c} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${h});
              flattenedIndex += index * ${y};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${p};
              found = true;
            }
          }
          setOutput(mix(${g}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class w8e{constructor(e,n,r,i,s,o,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o;const u=st(s.length),c=st(o.length);let f="";r===1?f="i":r===2&&(f="i, j");const h=`getIndices(${f})`;let d="";i===1?d="i":i===2&&(d="i, coords[1]");const p=`getUpdates(${d})`;let m="";l&&(m="coords[0], coords[1]");const g=`getDefaultValue(${m})`,y=n>1?"strides[j]":"strides",v=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${u} strides = ${u}(${s});

        void main() {
          ${c} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${h});
              flattenedIndex += index.xz * ${y};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${v};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${p};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${g}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S8e(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i,updates:s}=e,{shape:o}=r,{sliceRank:a,numUpdates:l,sliceSize:u,strides:c,outputSize:f}=Zl(s,i,o),h=[f/u,u];if(f===0)return n.makeTensorInfo(o,i.dtype);const d=fe({inputs:{x:i},backend:n,attrs:{shape:[l,a]}}),p=fe({inputs:{x:s},backend:n,attrs:{shape:[l,u]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0]));let g;Y().getBool("WEBGL_PACK")?g=new w8e(l,a,d.shape.length,p.shape.length,c,h):g=new yN(l,a,d.shape.length,p.shape.length,c,h);const y=n.runWebGLProgram(g,[p,d,m],p.dtype),v=fe({inputs:{x:y},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(m),v}const C8e={kernelName:xW,backendName:"webgl",kernelFunc:S8e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $8e{constructor(e,n,r,i){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const s="while (left < right) {",o=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,a=Y().getNumber("WEBGL_VERSION")===2?s:o,l=i==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${a}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k8e(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:i,values:s}=e,{side:o}=r,a=new $8e(i.shape[0],i.shape[1],s.shape[1],o),l=[[i.shape[1]]];return n.runWebGLProgram(a,[i,s],"int32",l)}const I8e={kernelName:wW,backendName:"webgl",kernelFunc:k8e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class T8e{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let i,s;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)s="resRC",i="resRC";else{const a=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],u=[];for(let c=0;c<n.length;c++)u.push(`${a[c]}`),c<e&&l.push(`${a[c]}`);i=l.join(),s=u.join()}const o=st(r);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        float cVal = getC(${i});
        if (cVal >= 1.0) {
          setOutput(getA(${s}));
        } else {
          setOutput(getB(${s}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E8e(t){const{inputs:e,backend:n}=t,{condition:r,t:i,e:s}=e,o=new T8e(r.shape.length,i.shape,i.shape.length);return n.runWebGLProgram(o,[r,i,s],Tr(i.dtype,s.dtype))}const N8e={kernelName:lb,backendName:"webgl",kernelFunc:E8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A8e=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${Eb};
  float scale = ${Nb};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,O8e=He({opSnippet:A8e}),P8e={kernelName:tm,backendName:"webgl",kernelFunc:O8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _8e=If+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,D8e=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,R8e=He({opSnippet:_8e,packedOpSnippet:D8e,cpuKernelImpl:DVe}),M8e={kernelName:sm,backendName:"webgl",kernelFunc:R8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F8e=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,L8e=He({opSnippet:F8e}),B8e={kernelName:im,backendName:"webgl",kernelFunc:L8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j8e=If+`
  return sin(x);
`,z8e=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${nu}
  return result;
`,V8e=He({opSnippet:j8e,packedOpSnippet:z8e}),W8e={kernelName:nm,backendName:"webgl",kernelFunc:V8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U8e=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,G8e=He({opSnippet:U8e}),H8e={kernelName:rm,backendName:"webgl",kernelFunc:G8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K8e=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,q8e=He({opSnippet:K8e}),X8e={kernelName:om,backendName:"webgl",kernelFunc:q8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y8e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:s,paddings:o}=r;E(i.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const a=s.reduce((y,v)=>y*v),l=[[0,0]];l.push(...o);for(let y=1+s.length;y<i.shape.length;++y)l.push([0,0]);const u=[],c=B8({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),f=xm(c.shape,s,a,!1),h=bm(f.length,s.length,!1),d=wm(c.shape,s,a,!1),p=fe({inputs:{x:c},backend:n,attrs:{shape:f}}),m=tr({inputs:{x:p},backend:n,attrs:{perm:h}}),g=fe({inputs:{x:m},backend:n,attrs:{shape:d}});return u.push(c),u.push(p),u.push(m),u.forEach(y=>n.disposeIntermediateTensorInfo(y)),g},Z8e={kernelName:fb,backendName:"webgl",kernelFunc:Y8e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q8e(t){const{inputs:e,backend:n}=t,{indices:r,values:i,denseShape:s,defaultValue:o}=e;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${s.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${i.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const a=n.readSync(r.dataId),l=n.readSync(i.dataId),u=n.readSync(s.dataId),c=n.readSync(o.dataId)[0],[f,h,d,p,m]=MVe(a,r.shape,r.dtype,l,i.dtype,u,c);return[n.makeTensorInfo(h,r.dtype,f),n.makeTensorInfo([h[0]],i.dtype,d),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(g=>Number(g)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}const J8e={kernelName:SW,backendName:"webgl",kernelFunc:Q8e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eKe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:i,newShape:s}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${i.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);const o=Array.from(n.readSync(i.dataId)),a=n.readSync(r.dataId),l=Array.from(n.readSync(s.dataId)),[u,c,f]=FVe(a,r.shape,r.dtype,o,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([f.length],s.dtype,new Int32Array(f))]}const tKe={kernelName:CW,backendName:"webgl",kernelFunc:eKe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nKe(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${s.shape}`);const o=n.readSync(r.dataId),a=n.readSync(i.dataId),l=n.readSync(s.dataId),[u,c]=c8(o,r.shape,r.dtype,a,l,!0);return n.makeTensorInfo(c,r.dtype,u)}const rKe={kernelName:$W,backendName:"webgl",kernelFunc:nKe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iKe(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${s.shape}`);const o=n.readSync(r.dataId),a=n.readSync(i.dataId),l=n.readSync(s.dataId),[u,c]=c8(o,r.shape,r.dtype,a,l);return n.makeTensorInfo(c,r.dtype,u)}const sKe={kernelName:kW,backendName:"webgl",kernelFunc:iKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oKe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:i,sparseValues:s,defaultValue:o}=e,{outputShape:a}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:f,outputSize:h}=Zl(s,i,a),d=!1;if(s.dtype==="string"){const y=n.bufferSync(i),v=n.bufferSync(s),x=aa(n.readSync(o.dataId)[0]),b=_Ve(y,v,a,h,c,u,l,f,x,d);return n.makeTensorInfo(a,b.dtype,b.values)}const p=new yN(u,l,i.shape.length,s.shape.length,f,[h,1],d),m=n.runWebGLProgram(p,[s,i,o],s.dtype),g=fe({inputs:{x:m},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(m),g}const aKe={kernelName:IW,backendName:"webgl",kernelFunc:oKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{numOrSizeSplits:s,axis:o}=r,a=Me(o,i.shape)[0],l=NE(i,s,a),u=i.shape.length,c=new Array(u).fill(0),f=i.shape.slice();return l.map(h=>{const d=[...f];d[a]=h;const p=Tf({inputs:{x:i},backend:n,attrs:{begin:c,size:d}});return c[a]+=h,p})}const uKe={kernelName:hb,backendName:"webgl",kernelFunc:lKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xF="return sqrt(x);",cKe=He({opSnippet:xF,packedOpSnippet:xF,cpuKernelImpl:LVe}),fKe={kernelName:am,backendName:"webgl",kernelFunc:cKe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hKe="return x * x;",dKe=He({opSnippet:hKe}),pKe={kernelName:p2,backendName:"webgl",kernelFunc:dKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bF="return (a - b) * (a - b);",mKe=In({opSnippet:bF,packedOpSnippet:bF}),gKe={kernelName:lm,backendName:"webgl",kernelFunc:mKe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");const s=n.readSync(i.dataId),o=po(s),a=BVe(o,"string",r);return n.makeTensorInfo(i.shape,"string",a)}const vKe={kernelName:m2,backendName:"webgl",kernelFunc:yKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xKe({inputs:t,attrs:e,backend:n}){const{x:r}=t,i=Ei+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,s=new ms(r.shape,i);return n.runWebGLProgram(s,[r],r.dtype)}const bKe={kernelName:dm,backendName:"webgl",kernelFunc:xKe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wKe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const i=r.length,s=st(r.length),o=st(r.length);let a="";if(i===1)a="coords * strides + begin";else{let l=0;a=r.map((u,c)=>(l++,r.length===1?`coords * strides[${c}] + begin[${c}]`:`coords[${l-1}] * strides[${c}] + begin[${c}]`)).join(",")}this.userCode=`
      ${s} begin = ${s}(${e});
      ${s} strides = ${s}(${n});

      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:s,end:o,strides:a,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:f,shrinkAxisMask:h}=r,{finalShapeSparse:d,finalShape:p,isIdentity:m,sliceDim0:g,isSimpleSlice:y,begin:v,end:x,strides:b}=fE(i.shape,s,o,a,l,u,c,f,h);let w;if(m)w=fe({inputs:{x:i},backend:n,attrs:{shape:p}});else if(g||y){E(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);const C=lE(v,x,b),$=Tf({inputs:{x:i},backend:n,attrs:{begin:v,size:C}});w=fe({inputs:{x:$},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo($)}else if(n.shouldExecuteOnCPU([i])){const $=n.readSync(i.dataId),k=Re(i.shape,i.dtype,$),I=jVe(d,k,b,v);w=n.makeTensorInfo(p,i.dtype,I.values)}else{const $=new wKe(v,b,d);w=n.runWebGLProgram($,[i],i.dtype)}const S=fe({inputs:{x:w},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(w),S}const CKe={kernelName:g2,backendName:"webgl",kernelFunc:SKe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ke(t){const{inputs:e,backend:n,attrs:r}=t,{separator:i,nGramWidths:s,leftPad:o,rightPad:a,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:f}=e,h=n.readSync(c.dataId),d=n.readSync(f.dataId),[p,m]=zVe(h,d,i,s,o,a,l,u);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(f.shape,"int32",m)]}const kKe={kernelName:TW,backendName:"webgl",kernelFunc:$Ke};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IKe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:i}=r,{input:s,delimiter:o}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const a=n.readSync(s.dataId),l=n.readSync(o.dataId)[0],[u,c,f]=VVe(a,l,i),h=c.length;return[n.makeTensorInfo([h,2],"int32",u),n.makeTensorInfo([h],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(f))]}const TKe={kernelName:EW,backendName:"webgl",kernelFunc:IKe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EKe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:i}=r,{input:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const o=n.readSync(s.dataId),a=WVe(o,i);return n.makeTensorInfo(s.shape,"int32",a)}const NKe={kernelName:NW,backendName:"webgl",kernelFunc:EKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AKe="return tan(x);",OKe=He({opSnippet:AKe}),PKe={kernelName:cm,backendName:"webgl",kernelFunc:OKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Ke=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,DKe=He({opSnippet:_Ke}),RKe={kernelName:fm,backendName:"webgl",kernelFunc:DKe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MKe(t){const{inputs:e,backend:n,attrs:r}=t,{tensor:i,indices:s,updates:o}=e,{sliceRank:a,numUpdates:l,sliceSize:u,strides:c,outputSize:f}=Zl(o,s,i.shape),h=[f/u,u];if(f===0)return n.makeTensorInfo(i.shape,s.dtype);const d=fe({inputs:{x:s},backend:n,attrs:{shape:[l,a]}}),p=fe({inputs:{x:o},backend:n,attrs:{shape:[l,u]}}),m=fe({inputs:{x:i},backend:n,attrs:{shape:h}}),g=new yN(l,a,d.shape.length,p.shape.length,c,h,!1,!0),y=n.runWebGLProgram(g,[p,d,m],m.dtype),v=fe({inputs:{x:y},backend:n,attrs:{shape:i.shape}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),v}const FKe={kernelName:bW,backendName:"webgl",kernelFunc:MKe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LKe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[o]*n[o];this.outputShape=r,this.rank=r.length;const i=st(this.rank),s=BKe(e);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        setOutput(getA(${s}));
      }
    `}}function BKe(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let i=0;i<t.length;i++)r.push(`imod(${n[i]}, ${t[i]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z8(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reps:s}=r;if(i.dtype==="string"||i.shape.length>5){const l=n.readSync(i.dataId),u=i.dtype==="string"?l.map(h=>aa(h)):l,c=Re(i.shape,i.dtype,u),f=GVe(c,s);return n.makeTensorInfo(f.shape,f.dtype,f.values)}const o=new LKe(i.shape,s);return n.runWebGLProgram(o,[i],i.dtype)}const jKe={kernelName:hm,backendName:"webgl",kernelFunc:z8};class zKe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class VKe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ma(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function wF(t){let e=1;for(;e<t;)e*=2;return e}function WKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{k:s,sorted:o}=r,a=Y().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=Y().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),u=i.shape,c=u[u.length-1];if(n.shouldExecuteOnCPU([i])||c<a||s>l){const I=n.readSync(i.dataId),[T,A]=HVe(I,u,i.dtype,s,o);return[n.makeTensorInfo(T.shape,T.dtype,T.values),n.makeTensorInfo(A.shape,A.dtype,A.values)]}if(s===0)return u[u.length-1]=0,[n.makeTensorInfo(u,i.dtype,[]),n.makeTensorInfo(u,"int32",[])];if(c===1)return[i,Rm({attrs:{shape:u,dtype:"int32",value:0},backend:n})];const f=n.texData.get(i.dataId),h=f!==null&&f.isPacked,d=h?n.unpackTensor(i):i,m=J(u)/c,g=fe({inputs:{x:d},attrs:{shape:[m,c]},backend:n});h&&Ma(n,d);const y=wF(s),v=wF(c);let x=null;const b=()=>x===null?[g,g]:[g,x],w=(I,T,A)=>{const _=b(),D=new zKe(A),R=[[c],[x===null?1:0],[Number.NEGATIVE_INFINITY],[I],[T]],F=x;x=n.runWebGLProgram(D,_,"int32",R),Ma(n,F)};for(let I=1;I<y;I*=2){const T=I*2;for(let A=I;A>=1;A/=2)w(T,A,[m,v])}for(let I=v;I>y;I/=2){const T=b(),A=new VKe([m,I/2]),D=[[c],[x===null?1:0],[y]],P=x;x=n.runWebGLProgram(A,T,"int32",D),Ma(n,P);const R=y/2,F=R*2;for(let O=R;O>=1;O/=2)w(F,O,x.shape)}let S=x;x=Tf({inputs:{x},backend:n,attrs:{begin:0,size:[m,s]}}),Ma(n,S);let C=_8({inputs:{x:g,indices:x},backend:n,attrs:{axis:1,batchDims:1}});Ma(n,g);const $=u.slice(0,-1);$.push(s),S=x,x=fe({inputs:{x},attrs:{shape:$},backend:n}),Ma(n,S);const k=C;return C=fe({inputs:{x:C},attrs:{shape:$},backend:n}),Ma(n,k),[C,x]}const UKe={kernelName:y2,backendName:"webgl",kernelFunc:WKe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GKe{constructor(e,n,r,i,s,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const a=r==="nearest"?1:2;let l;switch(i){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${s});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${s});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${a} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HKe(t){const{inputs:e,backend:n,attrs:r}=t,{image:i,transforms:s}=e,{interpolation:o,fillMode:a,fillValue:l,outputShape:u}=r,[c,f,h,d]=i.shape,[p,m]=u??[f,h],g=[c,p,m,d],y=new GKe(f,h,o,a,l,g);return n.runWebGLProgram(y,[i,s],"float32")}const KKe={kernelName:v2,backendName:"webgl",kernelFunc:HKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qKe(t){const{inputs:e,attrs:n,backend:r}=t,{axis:i}=n,{x:s}=e;Pm(s,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const o=r.readSync(s.dataId),{outputValues:a,outputShape:l,indices:u}=KVe(o,i,s.shape,s.dtype);return[r.makeTensorInfo(l,s.dtype,a),r.makeTensorInfo([u.length],"int32",u)]}const XKe={kernelName:x2,backendName:"webgl",kernelFunc:qKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YKe(t){const{inputs:e,backend:n,attrs:r}=t,{value:i}=e;let{axis:s}=r;s<0&&(s+=i.shape.length);const o=i,a=o.shape.length,l=i.shape[s],u=new Array(a-1);let c=0;for(let m=0;m<a;m++)m!==s&&(u[c++]=o.shape[m]);const f=[],h=new Array(a).fill(0),d=o.shape.slice();d[s]=1;const p=new Array(l);for(let m=0;m<p.length;m++){h[s]=m;const g=Tf({inputs:{x:o},backend:n,attrs:{begin:h,size:d}}),y=fe({inputs:{x:g},backend:n,attrs:{shape:u}});p[m]=y,f.push(g)}return f.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const ZKe={kernelName:pb,backendName:"webgl",kernelFunc:YKe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QKe{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,i=e.batchSize,s=e.inSize,o=e.numSegments,a=o*Math.ceil(s/r);this.outputShape=[i,a];const l="0.0",u="sumValue",c=Math.floor(r/4)*4,f=r%4,h=`
        sumValue += dot(values, segFilter);
    `;let d="";s%r>0&&(d=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `);let p="";s%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${d}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${p}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${o})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${o})));

        float sumValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${h}
        }

        int inIdx = inOffset + ${c};
        if (${f===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${h}
        } else if (${f===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${h}
        } else if (${f===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${h}
        }
        setOutput(${u});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,segmentIds:s}=e,{numSegments:o}=r,a=i.shape.length,l=[];let u=0;const c=Nt([u],a);let f=i;c!=null&&(f=tr({inputs:{x:i},backend:n,attrs:{perm:c}}),l.push(f),u=Vt(1,a)[0]);const h=CG(f.shape,u,o),d=J([f.shape[u]]),p=fe({inputs:{x:f},backend:n,attrs:{shape:[-1,d]}});l.push(p);const m=S2(i.dtype),g=(b,w,S,C,$)=>{const k=b.shape[0],I=b.shape[1],T=SG(I,$),A={windowSize:T,inSize:I,batchSize:k,numSegments:$},_=new QKe(A,w),D=n.compileAndRun(_,[b,S],C);if(l.push(D),D.shape[1]===$)return D;const P=j8({backend:n,attrs:{start:0,stop:$,step:1,dtype:"float32"}}),R=z8({inputs:{x:P},backend:n,attrs:{reps:[I/T]}});return l.push(P),l.push(R),g(D,w,R,C,$)},y=g(p,"unsortedSegmentSum",s,m,o),v=fe({inputs:{x:y},backend:n,attrs:{shape:h}});let x=v;if(c!=null){l.push(v);const b=Ia(c);x=tr({inputs:{x},backend:n,attrs:{perm:b}})}return l.forEach(b=>n.disposeIntermediateTensorInfo(b)),x}const eqe={kernelName:mb,backendName:"webgl",kernelFunc:JKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tqe=[L4e,j4e,W4e,H4e,q4e,Z4e,J4e,tWe,sWe,aWe,cWe,dWe,gWe,bWe,CWe,kWe,TWe,OWe,_We,RWe,BWe,HWe,qWe,QWe,eUe,oUe,lUe,hUe,w4e,mUe,bUe,$Ue,AUe,_Ue,RUe,FUe,BUe,WUe,HUe,XUe,ZUe,JUe,tGe,iGe,oGe,cGe,hGe,mGe,vGe,bGe,$Ge,EGe,PGe,RGe,LGe,BGe,zGe,WGe,GGe,KGe,XGe,JGe,n6e,s6e,a6e,c6e,d6e,y6e,w6e,b4e,C6e,vUe,I6e,N6e,P6e,C4e,M6e,j6e,V6e,H6e,X6e,J6e,n5e,o5e,c5e,d5e,m5e,x5e,w5e,C5e,T5e,N5e,O5e,_5e,R5e,B5e,W5e,K5e,tHe,I4e,sHe,lHe,fHe,pHe,nUe,yHe,xHe,wHe,$He,EHe,k4e,AHe,PHe,DHe,MHe,FHe,rUe,Z5e,jHe,UHe,qHe,E4e,QHe,t8e,s8e,l8e,h8e,p8e,y8e,b8e,C8e,I8e,N8e,P8e,M8e,B8e,W8e,H8e,UWe,J5e,X8e,Z8e,J8e,tKe,rKe,sKe,aKe,uKe,fKe,pKe,gKe,vKe,bKe,CKe,kKe,TKe,NKe,Q5e,R4e,PKe,RKe,FKe,jKe,UKe,KKe,M4e,XKe,ZKe,eqe,vHe];for(const t of tqe)OW(t);function nqe(){const[t,e]=j.useState(null),[n,r]=j.useState([]),[i,s]=j.useState(!0),[o,a]=j.useState("AA123");j.useEffect(()=>{async function c(){const f=xDe({layers:[bw({inputShape:[4],units:64,activation:"relu"}),bw({units:32,activation:"relu"}),bw({units:1})]});f.compile({optimizer:"adam",loss:"meanSquaredError"}),e(f),s(!1)}c()},[]);const l=()=>{if(!t)return;const c=Array.from({length:24},(f,h)=>{const d=20+Math.sin(h/24*Math.PI*2)*5,p=10+Math.sin(h/24*Math.PI*2)*3,m=Math.max(0,Math.sin(h/24*Math.PI*2)*50),g=h,y=Kg([[d,p,m,g]]),v=t.predict(y),x=Math.max(0,Number(v.dataSync()[0]));return{temperature:d,windSpeed:p,precipitation:m,timeOfDay:g,predictedDelay:x}});r(c)};j.useEffect(()=>{i||l()},[i]);const u=[{id:"AA123",route:"JFK → LAX",time:"14:30"},{id:"UA456",route:"ORD → SFO",time:"15:45"},{id:"DL789",route:"ATL → MIA",time:"16:15"}];return N.jsxs("div",{className:"space-y-6 p-6",children:[N.jsxs(Xf.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex justify-between items-center",children:[N.jsxs("div",{children:[N.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Delay Predictions"}),N.jsx("p",{className:"text-gray-600 mt-2",children:"AI-powered flight delay predictions based on weather conditions"})]}),N.jsxs("button",{onClick:l,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[N.jsx(Cy,{className:"h-5 w-5"}),"Update Predictions"]})]}),N.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[N.jsx(Xf.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"lg:col-span-2",children:N.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[N.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Delay Forecast"}),N.jsx("div",{className:"h-[400px]",children:N.jsx(pj,{width:"100%",height:"100%",children:N.jsxs($1e,{data:n,children:[N.jsx(XI,{strokeDasharray:"3 3"}),N.jsx(af,{dataKey:"timeOfDay",tickFormatter:c=>`${c}:00`}),N.jsx(lf,{label:{value:"Predicted Delay (minutes)",angle:-90,position:"insideLeft"}}),N.jsx(Fi,{formatter:c=>[`${Math.round(c)} minutes`,"Predicted Delay"],labelFormatter:c=>`${c}:00`}),N.jsx(dp,{type:"monotone",dataKey:"predictedDelay",stroke:"#3B82F6",strokeWidth:2,dot:!1})]})})})]})}),N.jsx(Xf.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},children:N.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[N.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Flight Selection"}),N.jsx("div",{className:"space-y-4",children:u.map(c=>N.jsx(Xf.div,{whileHover:{scale:1.02},className:`p-4 rounded-lg cursor-pointer transition-colors ${o===c.id?"bg-blue-50 border-2 border-blue-500":"bg-gray-50 border-2 border-transparent"}`,onClick:()=>a(c.id),children:N.jsxs("div",{className:"flex justify-between items-center",children:[N.jsxs("div",{children:[N.jsx("p",{className:"font-semibold text-gray-900",children:c.id}),N.jsx("p",{className:"text-sm text-gray-600",children:c.route})]}),N.jsx("p",{className:"text-sm font-medium text-gray-700",children:c.time})]})},c.id))})]})})]}),N.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[{icon:N.jsx(Y3,{className:"h-6 w-6 text-red-500"}),label:"Temperature",value:"72°F",impact:"Low Impact"},{icon:N.jsx(Z3,{className:"h-6 w-6 text-blue-500"}),label:"Wind Speed",value:"15 mph",impact:"Medium Impact"},{icon:N.jsx(Wu,{className:"h-6 w-6 text-gray-500"}),label:"Precipitation",value:"30%",impact:"High Impact"},{icon:N.jsx(q3,{className:"h-6 w-6 text-yellow-500"}),label:"Risk Level",value:"Moderate",impact:"Monitor"}].map((c,f)=>N.jsx(Xf.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:f*.1},className:"bg-white rounded-xl shadow-lg p-6",children:N.jsxs("div",{className:"flex items-center gap-4",children:[N.jsx("div",{className:"p-3 bg-gray-50 rounded-full",children:c.icon}),N.jsxs("div",{children:[N.jsx("p",{className:"text-sm text-gray-600",children:c.label}),N.jsx("p",{className:"text-xl font-bold text-gray-900",children:c.value}),N.jsx("p",{className:"text-sm text-gray-500",children:c.impact})]})]})},f))})]})}function rqe(){return N.jsxs("div",{className:"container mx-auto px-4 py-8",children:[N.jsxs("div",{className:"mb-8",children:[N.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gate Simulation"}),N.jsx("p",{className:"mt-2 text-gray-600",children:"Real-time gate allocation and simulation dashboard"})]}),N.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[N.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[N.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Gate Allocation Map"}),N.jsx("div",{className:"aspect-video bg-gray-100 rounded-lg flex items-center justify-center",children:N.jsx("p",{className:"text-gray-500",children:"Interactive gate map will be displayed here"})})]}),N.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[N.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Simulation Controls"}),N.jsxs("div",{className:"space-y-4",children:[N.jsxs("div",{className:"flex flex-col",children:[N.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Simulation Speed"}),N.jsx("input",{type:"range",min:"1",max:"10",className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"})]}),N.jsx("button",{className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Start Simulation"})]})]}),N.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[N.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Current Statistics"}),N.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[N.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[N.jsx("p",{className:"text-sm text-gray-600",children:"Active Gates"}),N.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"24/32"})]}),N.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[N.jsx("p",{className:"text-sm text-gray-600",children:"Waiting Aircraft"}),N.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"3"})]}),N.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[N.jsx("p",{className:"text-sm text-gray-600",children:"Average Wait Time"}),N.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"12m"})]}),N.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[N.jsx("p",{className:"text-sm text-gray-600",children:"Efficiency Score"}),N.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"94%"})]})]})]}),N.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[N.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Event Log"}),N.jsx("div",{className:"space-y-3 max-h-[300px] overflow-y-auto",children:[{time:"12:45",event:"Gate A3 assigned to Flight AA123"},{time:"12:42",event:"Flight UA456 departed from Gate B2"},{time:"12:38",event:"New arrival: Flight DL789 requesting gate"},{time:"12:35",event:"Gate C1 maintenance completed"}].map((t,e)=>N.jsxs("div",{className:"flex items-start space-x-3 p-2 hover:bg-gray-50 rounded",children:[N.jsx("span",{className:"text-sm font-medium text-gray-500",children:t.time}),N.jsx("span",{className:"text-sm text-gray-700",children:t.event})]},e))})]})]})]})}function iqe(){return N.jsx(m7,{children:N.jsxs("div",{className:"flex h-screen bg-gray-50",children:[N.jsx(F7,{}),N.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[N.jsx(L7,{}),N.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-50 p-4",children:N.jsxs(a7,{children:[N.jsx(hu,{path:"/",element:N.jsx(E1e,{})}),N.jsx(hu,{path:"/weather",element:N.jsx(N1e,{})}),N.jsx(hu,{path:"/scheduling",element:N.jsx(A1e,{})}),N.jsx(hu,{path:"/predictions",element:N.jsx(nqe,{})}),N.jsx(hu,{path:"/simulation",element:N.jsx(rqe,{})})]})})]})]})})}R3(document.getElementById("root")).render(N.jsx(j.StrictMode,{children:N.jsx(iqe,{})}));
